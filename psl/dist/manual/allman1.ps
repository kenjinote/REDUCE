%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: allman1.dvi
%%Pages: 251
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Times-Bold Times-Roman Times-Italic Courier
%%DocumentPaperSizes: A4
%%EndComments
%DVIPSCommandLine: /client/bin/dvips -o allman1.ps allman1
%DVIPSParameters: dpi=600, comments removed
%DVIPSSource:  TeX output 1998.01.30:1148
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginFont: Times-Bold
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (allman1.dvi)
@start /Fa 190[48 65[{ TeXBase1Encoding ReEncodeFont }1
66.666664 /Times-Roman rf /Fb 136[55 1[55 55 55 55 1[55
55 55 55 3[55 55 2[55 55 2[55 31[55 20[55 6[55 2[55 34[{
 TeXBase1Encoding ReEncodeFont }18 91.249977 /Courier
rf /Fc 140[32 3[42 2[23 2[23 3[37 46 37 53[28 45[{
 TeXBase1Encoding ReEncodeFont }8 83.333336 /Times-Bold
rf /Fd 138[45 25 35 30 2[45 45 1[25 2[25 45 45 30 40
45 40 1[40 7[66 1[86 66 66 56 51 61 1[51 66 66 81 56
2[30 66 66 51 56 66 61 61 66 6[25 12[30 2[45 30 41[{
 TeXBase1Encoding ReEncodeFont }40 91.249977 /Times-Roman
rf /Fe 5 92 df<00000000300000C00000000000780001E00000000000780001E00000
000000F80003E00000000000F80003E00000000000F00003C00000000000F00003C00000
000001F00007C00000000001F00007C00000000001E00007800000000001E00007800000
000003E0000F800000000003E0000F800000000003C0000F000000000003C0000F000000
000007C0001F000000000007C0001F00000000000780001E00000000000780001E000000
00000F80003E00000000000F80003E00000000000F00003C00000000000F00003C000000
00001F00007C00000000001F00007C00000000001E00007800000000001E000078000000
00003E0000F800000000003E0000F800000000003C0000F000000000003C0000F0000000
00007C0001F000007FFFFFFFFFFFFFFFF8FFFFFFFFFFFFFFFFFCFFFFFFFFFFFFFFFFFCFF
FFFFFFFFFFFFFFFC000001F00007C00000000001F00007C00000000001E0000780000000
0001E00007800000000001E00007800000000003E0000F800000000003E0000F80000000
0003C0000F000000000003C0000F000000000007C0001F000000000007C0001F00000000
000780001E00000000000780001E00000000000780001E00000000000F80003E00000000
000F80003E000000FFFFFFFFFFFFFFFFFCFFFFFFFFFFFFFFFFFCFFFFFFFFFFFFFFFFFC7F
FFFFFFFFFFFFFFF800003E0000F800000000003C0000F000000000003C0000F000000000
007C0001F000000000007C0001F00000000000780001E00000000000780001E000000000
00F80003E00000000000F80003E00000000000F00003C00000000000F00003C000000000
01F00007C00000000001F00007C00000000001E00007800000000001E000078000000000
03E0000F800000000003E0000F800000000003C0000F000000000003C0000F0000000000
07C0001F000000000007C0001F00000000000780001E00000000000780001E0000000000
0F80003E00000000000F80003E00000000000F00003C00000000000F00003C0000000000
1F00007C00000000001F00007C00000000001E00007800000000001E0000780000000000
0C0000300000000046587BC451>35 D<000030000000F0000001F0000003F000001FF000
00FFF000FFFFF000FFE7F000FF07F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
0007F0000007F000000FF800001FFC007FFFFFFF7FFFFFFF7FFFFFFF204278C131>49
D<0003FE0000001FFFC000007FFFF00001F80FFC0003C001FE00078000FF000E00007F80
1C00003FC01C00001FE03800001FF03000000FF07000000FF860000007F86C000007F8FF
000007FCFF800007FCFFC00007FCFFC00003FCFFC00003FCFFC00003FCFFC00003FC7F80
0007FC3F000007FC00000007FC00000007F800000007F80000000FF80000000FF0000000
1FF00000001FE00000001FE00000003FC00000007F800000007F00000000FF00000000FE
00000001FC00000003F800000007F000000007E00000000FC00000001F800000003F0000
00007C00000000F800000000F000000001E000000003C000000007800000000F00000C00
1E00000C003C00000C0038000018007000001800E000001801C000001803800000380700
0000300E000000701FFFFFFFF01FFFFFFFF03FFFFFFFF07FFFFFFFF0FFFFFFFFE0FFFFFF
FFE0FFFFFFFFE026427BC131>I<7FFFFFFFFFFFFFFF00FFFFFFFFFFFFFFFF80FFFFFFFF
FFFFFFFF80FFFFFFFFFFFFFFFF8000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000FFFFFFFFFFFFFFFF80FFFFFFFFFFFFFFFF80FFFFFFFF
FFFFFFFF807FFFFFFFFFFFFFFF0041187BA44C>61 D<FFFCFFFCFFFCFFFCF000F000F000
F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000
F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000
F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000
F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000
F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000FFFC
FFFCFFFCFFFC0E6476CA1B>91 D E /Ff 28 122 df<00000000000001C0000000000000
07E00000000000001FE00000000000007FC0000000000001FF00000000000007FC000000
0000001FF00000000000007FC0000000000001FF0000000000000FFC0000000000003FF0
000000000000FFC0000000000003FF0000000000000FF80000000000003FE00000000000
00FF80000000000003FE0000000000001FF80000000000007FE0000000000001FF800000
00000007FE0000000000001FF00000000000007FC0000000000001FF00000000000007FC
0000000000001FF00000000000007FC0000000000000FF00000000000000FF0000000000
00007FC00000000000001FF000000000000007FC00000000000001FF000000000000007F
C00000000000001FF000000000000007FE00000000000001FF800000000000007FE00000
000000001FF800000000000003FE00000000000000FF800000000000003FE00000000000
000FF800000000000003FF00000000000000FFC00000000000003FF00000000000000FFC
00000000000001FF000000000000007FC00000000000001FF000000000000007FC000000
00000001FF000000000000007FC00000000000001FE000000000000007E0000000000000
01C03B3878B44C>60 D<0000000018000000003C000000007C000000007C000000007800
000000F800000000F800000000F000000001F000000001F000000001E000000003E00000
0003E000000003C000000007C000000007C000000007800000000F800000000F80000000
1F000000001F000000001E000000003E000000003E000000003C000000007C000000007C
000000007800000000F800000000F800000000F000000001F000000001F000000003E000
000003E000000003C000000007C000000007C000000007800000000F800000000F800000
000F000000001F000000001F000000001E000000003E000000003E000000003C00000000
7C000000007C00000000F800000000F800000000F000000001F000000001F000000001E0
00000003E000000003E000000003C000000007C000000007C000000007800000000F8000
00000F800000000F000000001F000000001F000000003E000000003E000000003C000000
007C000000007C000000007800000000F800000000F800000000F000000001F000000001
F000000001E000000003E000000003E000000007C000000007C000000007800000000F80
0000000F800000000F000000001F000000001F000000001E000000003E000000003E0000
00003C000000007C000000007C000000007800000000F800000000F800000000F0000000
00600000000026647BCA31>I<7000000000000000FC00000000000000FF000000000000
007FC00000000000001FF000000000000007FC00000000000001FF000000000000007FC0
0000000000001FF000000000000007FE00000000000001FF800000000000007FE0000000
0000001FF800000000000003FE00000000000000FF800000000000003FE0000000000000
0FF800000000000003FF00000000000000FFC00000000000003FF00000000000000FFC00
000000000001FF000000000000007FC00000000000001FF000000000000007FC00000000
000001FF000000000000007FC00000000000001FE00000000000001FE00000000000007F
C0000000000001FF00000000000007FC0000000000001FF00000000000007FC000000000
0001FF0000000000000FFC0000000000003FF0000000000000FFC0000000000003FF0000
000000000FF80000000000003FE0000000000000FF80000000000003FE0000000000001F
F80000000000007FE0000000000001FF80000000000007FE0000000000001FF000000000
00007FC0000000000001FF00000000000007FC0000000000001FF00000000000007FC000
0000000000FF00000000000000FC0000000000000070000000000000003B3878B44C>I<
0000FFFFFFF800000000FFFFFFF800000000FFFFFFF80000000000FFE00000000000007F
C0000000000000FF80000000000000FF80000000000000FF00000000000000FF00000000
000000FF00000000000001FF00000000000001FE00000000000001FE00000000000001FE
00000000000003FE00000000000003FC00000000000003FC00000000000003FC00000000
000007FC00000000000007F800000000000007F800000000000007F80000000000000FF8
0000000000000FF00000000000000FF00000000000000FF00000000000001FF000000000
00001FE00000000000001FE00000000000001FE00000000000003FE00000000000003FC0
0000000000003FC00000000000003FC00000000000007FC00000000000007F8000000000
00007F800000000000007F80000000000000FF80000000000000FF00000000000000FF00
000000000000FF00000000000001FF00000000000001FE00000000C00001FE00000000C0
0001FE00000001C00003FE00000001800003FC00000003800003FC00000003000003FC00
000003000007FC00000007000007F800000006000007F80000000E000007F80000001E00
000FF80000001C00000FF00000003C00000FF00000003800000FF00000007800001FF000
0000F800001FE0000001F000001FE0000003F000003FE000000FF000003FE000001FE000
003FC00000FFE00000FFC00007FFC000FFFFFFFFFFFFC000FFFFFFFFFFFFC000FFFFFFFF
FFFF80003A447CC342>76 D<0000FFFFFFFFFE00000000FFFFFFFFFFE0000000FFFFFFFF
FFF800000000FFC0000FFE000000007F800001FF00000000FF8000007F80000000FF8000
003FC0000000FF0000001FE0000000FF0000001FE0000001FF0000000FF0000001FF0000
000FF0000001FE0000000FF0000001FE0000000FF8000003FE0000000FF8000003FE0000
000FF8000003FC0000000FF8000003FC0000000FF8000007FC0000000FF8000007FC0000
001FF0000007F80000001FF0000007F80000001FF000000FF80000003FE000000FF80000
003FE000000FF00000003FC000000FF00000007FC000001FF00000007F8000001FF00000
00FF0000001FE0000001FE0000001FE0000003FC0000003FE0000007F80000003FE00000
0FF00000003FC000003FC00000003FC00000FF000000007FC00007FC000000007FFFFFFF
F0000000007FFFFFFF80000000007F8000000000000000FF8000000000000000FF800000
0000000000FF0000000000000000FF0000000000000001FF0000000000000001FF000000
0000000001FE0000000000000001FE0000000000000003FE0000000000000003FE000000
0000000003FC0000000000000003FC0000000000000007FC0000000000000007FC000000
0000000007F80000000000000007F8000000000000000FF8000000000000000FF8000000
000000000FF0000000000000000FF0000000000000001FF0000000000000001FF0000000
000000001FE0000000000000001FE0000000000000003FE0000000000000003FE0000000
000000003FC000000000000000FFE0000000000000FFFFFFE00000000000FFFFFFE00000
000000FFFFFFE0000000000045447CC33F>80 D<00000000FF80018000000007FFF00380
0000003FFFFC0380000000FF007E0780000001F8000F0F80000007E000079F0000000FC0
0003FF0000001F000001FF0000003E000000FF0000007C000000FE0000007C0000007E00
0000F80000007E000001F00000007E000001F00000003C000003E00000003C000003E000
00003C000007E00000003C000007C000000038000007C000000038000007C00000003800
000FC00000003800000FC00000003000000FE00000003000000FE00000003000000FE000
00000000000FF000000000000007F800000000000007FC00000000000007FF0000000000
0003FFE0000000000003FFFC000000000001FFFFC00000000000FFFFFC00000000007FFF
FF00000000003FFFFFC0000000000FFFFFE00000000003FFFFF800000000003FFFF80000
00000007FFFC0000000000007FFE0000000000000FFE00000000000003FE000000000000
01FF00000000000000FF000000000000007F000000000000007F000000000000003F0000
00000000003F000006000000003F000006000000003F000006000000003F000006000000
003F00000E000000003E00000E000000003E00000C000000003E00000C000000007E0000
1E000000007C00001E000000007C00001E00000000F800001E00000000F000003F000000
01F000003F00000003E000003F80000007C000003F8000000F8000007FC000001F000000
7FE000003E0000007CF800007C000000787E0001F8000000F01FC00FE0000000E007FFFF
80000000E001FFFE00000000C0003FF00000000039487BC53C>83
D<00000FC0000000007FF000000001F8381C000007E01C7E00000FC00E7E00003F0007FE
00007F0003FC0000FE0003FC0001FC0003FC0001F80001FC0003F80001F80007F00001F8
000FF00001F8000FE00003F8001FE00003F0001FE00003F0003FC00003F0003FC00007F0
007FC00007E0007F800007E0007F800007E0007F80000FE000FF80000FC000FF00000FC0
00FF00000FC000FF00001FC000FF00001F8000FE00001F8000FE00001F8000FE00003F80
30FE00003F0070FE00003F0060FE00003F0060FE00007F00E0FE00007F00C0FE0000FE00
C07E0001FE00C07E0003FE01C03E00073E01803F000E3E03801F001C3E03000F80381F07
0007C0F00F0E0001FFC007FC00007F0001F0002C2D7CAB33>97 D<000FE0000007FFE000
0007FFE0000007FFE00000001FC00000000FC00000001FC00000001FC00000001F800000
001F800000001F800000003F800000003F000000003F000000003F000000007F00000000
7E000000007E000000007E00000000FE00000000FC00000000FC00000000FC00000001FC
00000001F800000001F80FC00001F83FF00003F8F07C0003F3C03E0003F7001F0003FE00
1F8007FC000F8007F8000FC007F0000FC007F0000FE00FE0000FE00FC0000FE00FC0000F
E00FC0000FE01FC0000FE01F80000FE01F80000FE01F80001FE03F80001FE03F00001FE0
3F00001FE03F00003FE07F00003FC07E00003FC07E00003FC07E00007FC07E00007F80FC
00007F80FC00007F00FC0000FF00FC0000FF00FC0001FE007C0001FC007C0001FC007C00
03F8007C0007F0007C0007E0003C000FE0003E001FC0001E003F80001F007E00000F00FC
000007C1F0000001FFC00000007F00000023467CC429>I<000007F80000003FFF000000
FC07C00003F000E00007E00070001F800030003F000070007E0003F800FE0007F801FC00
07F803F8000FF007F8000FF007F0000FF00FF00007C01FE00000001FE00000003FC00000
003FC00000007FC00000007F800000007F800000007F80000000FF80000000FF00000000
FF00000000FF00000000FF00000000FE00000000FE00000000FE00000000FE00000000FE
00000000FE00000018FE00000038FE000000707E000000E07E000001C03F000003803F00
0007001F80001E000F8000380007C001F00003F00FC00000FFFE0000001FF00000252D7C
AB2A>I<0000000001FC00000000FFFC00000000FFFC00000000FFFC0000000003F80000
000001F80000000003F80000000003F80000000003F00000000003F00000000007F00000
000007F00000000007E00000000007E0000000000FE0000000000FE0000000000FC00000
00000FC0000000001FC0000000001FC0000000001F80000000001F80000000003F800000
00003F80000000003F0000000FC03F0000007FF07F000001F8387F000007E01C7E00000F
C00E7E00003F0007FE00007F0003FE0000FE0003FC0001FC0003FC0001F80001FC0003F8
0001FC0007F00001F8000FF00001F8000FE00003F8001FE00003F8001FE00003F0003FC0
0003F0003FC00007F0007FC00007F0007F800007E0007F800007E0007F80000FE000FF80
000FE000FF00000FC000FF00000FC000FF00001FC000FF00001FC000FE00001F8000FE00
001F8000FE00003F8030FE00003F8070FE00003F0060FE00003F0060FE00007F00E0FE00
007F00C0FE0000FE00C07E0001FE00C07E0003FE01C03E00073E01803F000E3E03801F00
1C3E03000F80381F070007C0F00F0E0001FFC007FC00007F0001F0002E467CC433>I<00
0007F80000003FFE000001FC07800003F003C0000FC001E0001F8000E0007F0000E000FE
00007001FC00007003F80000F007F80000E007F00000E00FF00001E01FE00001C01FE000
03C03FC00007803FC0001F003FC000FC007FC01FF0007FFFFF80007FFFF000007F800000
00FF80000000FF00000000FF00000000FF00000000FF00000000FF00000000FE00000000
FE00000000FE00000000FE00000000FE000000187E000000387E000000707F000000E03F
000001C03F000003801F000007000F80001E000FC000380007E001F00001F00FC000007F
FE0000001FF00000252D7CAB2D>I<0000000007E0000000001FF8000000007C1C000000
00F80E00000001F03E00000003E07F00000003E0FF00000007E1FF00000007C1FF000000
07C1FE0000000FC0FC0000000FC0780000000FC0000000001F80000000001F8000000000
1F80000000001F80000000003F80000000003F00000000003F00000000003F0000000000
3F00000000007F00000000007E00000000007E00000000007E00000000007E00000000FF
FFFF800000FFFFFF800000FFFFFF80000000FC0000000000FC0000000000FC0000000001
FC0000000001F80000000001F80000000001F80000000001F80000000003F80000000003
F00000000003F00000000003F00000000003F00000000007F00000000007E00000000007
E00000000007E00000000007E0000000000FE0000000000FC0000000000FC0000000000F
C0000000000FC0000000000FC0000000001FC0000000001F80000000001F80000000001F
80000000001F80000000003F80000000003F00000000003F00000000003F00000000003F
00000000007F00000000007E00000000007E00000000007E00000000007E0000000000FC
0000000000FC0000000000FC0000000000FC0000000000F80000000001F80000000001F8
0000000001F00000000001F00000001C03F00000007F03E0000000FF03E0000000FF03C0
000000FF07C0000000FF0780000000FE0F00000000F80F00000000601E00000000783C00
0000001FF00000000007C000000000305A7BC530>I<0000007E0000000003FF80000000
0FC1E0E000001F0073F000007E0033F00000FC003FF00001F8001FF00003F8001FE00007
F0000FE0000FE0000FE0000FE0000FE0001FC0000FC0003FC0000FC0003F80001FC0007F
80001FC0007F00001F8000FF00001F8000FF00003F8001FF00003F8001FE00003F0001FE
00003F0001FE00007F0003FE00007F0003FC00007E0003FC00007E0003FC0000FE0003FC
0000FE0003F80000FC0003F80000FC0003F80001FC0003F80001FC0003F80001F80003F8
0001F80003F80003F80003F80007F80001F80007F00001F8000FF00000F8001FF00000FC
003FF000007C0077E000003E01E7E000001F078FE0000007FE0FE0000001F80FC0000000
000FC0000000001FC0000000001FC0000000001F80000000001F80000000003F80000000
003F80000000003F00000000003F00001C00007E00007F0000FE0000FF0000FC0000FF00
01F80000FF0003F80000FE0007F00000FE000FC00000F8001F8000007C00FE0000001FFF
F800000003FFC00000002C407EAB2F>I<0000FE000000007FFE000000007FFE00000000
7FFE0000000001FC0000000000FC0000000001FC0000000001FC0000000001F800000000
01F80000000003F80000000003F80000000003F00000000003F00000000007F000000000
07F00000000007E00000000007E0000000000FE0000000000FE0000000000FC000000000
0FC0000000001FC0000000001FC0000000001F80000000001F803FC000003F81FFF00000
3F87C0FC00003F0E007E00003F3C003E00007F70003F00007FE0001F00007FC0001F8000
7F80001F8000FF80001F8000FF00001F8000FE00001F8000FE00001F8001FC00003F8001
FC00003F0001F800003F0001F800003F0003F800007F0003F800007E0003F000007E0003
F000007E0007F00000FE0007F00000FC0007E00000FC0007E00001FC000FE00001F8000F
E00001F8000FC00003F8000FC00003F0001FC00003F0071FC00007F0061F800007E0061F
80000FE0063F80000FC00E3F80000FC00C3F00000FC01C3F00000F80187F00000F80387F
00000F80307E00000F80707E00000F80E0FE00000781C0FE000007C380FC000001FF0038
0000007C0030467BC438>I<00001E0000003F0000007F000000FF000000FF000000FF00
00007E000000380000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000003E000000FF8000
01C3C0000781E0000601F0000E01F0001C01F0001803F0003803F0003003F0003003F000
7007F0006007E0006007E000E00FE000C00FC000001FC000001F8000001F8000003F8000
003F0000003F0000007F0000007E000000FE000000FC000000FC000001FC000001F80000
01F8038003F8030003F0030007F0030007E0070007E0060007E00E0007E00C0007C01C00
07C0180007C0380007C0700003C0E00003E1C00000FF8000003E000019437DC121>I<00
00FE000000007FFE000000007FFE000000007FFE0000000001FC0000000000FC00000000
01FC0000000001FC0000000001F80000000001F80000000003F80000000003F800000000
03F00000000003F00000000007F00000000007F00000000007E00000000007E000000000
0FE0000000000FE0000000000FC0000000000FC0000000001FC0000000001FC000000000
1F80000000001F80003F00003F8000FFC0003F8003C0E0003F000703E0003F001E0FE000
7F00380FE0007F00701FE0007E00E01FE0007E01C01FE000FE01801FC000FE0380070000
FC0700000000FC0E00000001FC1C00000001FC3800000001F87000000001F8E000000003
FBC000000003FF0000000003FF8000000003FFF800000007F1FE00000007F03F80000007
E00FE0000007E007F000000FE003F000000FE003F800000FC001F800000FC001F800001F
C001F801C01FC001F801801F8001F801801F8001F801803F8001F803803F8001F803003F
0001F003003F0001F007007F0001F006007F0001F00E007E0001F00C007E0001F01C00FE
0000F03800FE0000787000FC00003FE0003800000F80002B467BC433>107
D<0003F801FFF801FFF801FFF80007F00003F00007F00007F00007E00007E0000FE0000F
E0000FC0000FC0001FC0001FC0001F80001F80003F80003F80003F00003F00007F00007F
00007E00007E0000FE0000FE0000FC0000FC0001FC0001FC0001F80001F80003F80003F8
0003F00003F00007F00007F00007E00007E0000FE0000FE0000FC0000FC0001FC0001FC0
001F80001F80003F80003F80003F00003F00007F00607F00E07E00C07E00C07E01C0FE01
80FC0180FC0180FC03807C03007C07007C06003E0E001E1C000FF80003E00015467CC41D
>I<00F80003FC00007F800003FE001FFF0003FFE000071F007C0FC00F81F8000E0F80E0
07E01C00FC001C0FC3C003E078007C001807C70003F0E0007E001807CE0001F1C0003E00
3807DC0001FB80003F003007D80001FB00003F00300FF80001FF00003F00700FF00001FE
00003F00600FE00001FC00003F00600FE00001FC00003F00E00FC00003F800007F00C01F
C00003F800007E00C01F800003F000007E00001F800003F000007E00001F800007F00000
FE00003F800007F00000FC00003F000007E00000FC00003F000007E00000FC00003F0000
0FE00001FC00007F00000FE00001F800007E00000FC00001F800007E00000FC00003F800
007E00001FC00003F00000FE00001FC00003F00000FC00001F800007F00000FC00001F80
0007E00000FC00003F800007E00E01FC00003F80000FE00C01F800003F00000FC00C01F8
00003F00001FC00C01F800007F00001F801C03F800007F00001F801803F000007E00001F
803803F000007E00001F003003F00000FE00001F007007F00000FE00001F006007E00000
FC00001F00E007E00000FC00001F01C007E00001FC00000F03800FE00001FC00000F8700
0FC00001F8000003FE000380000070000000F8004F2D7DAB55>I<00F80003FC000003FE
001FFF0000071F007C0FC0000E0F80E007E0000C07C3C003E0001C07C70003F0001807CE
0001F0003807DC0001F8003007D80001F800300FF80001F800700FF00001F800600FE000
01F800600FE00001F800E00FC00003F800C01FC00003F000C01F800003F000001F800003
F000001F800007F000003F800007E000003F000007E000003F000007E000003F00000FE0
00007F00000FC000007E00000FC000007E00001FC000007E00001F800000FE00001F8000
00FC00003F800000FC00003F000000FC00003F007001FC00007F006001F800007E006001
F80000FE006001F80000FC00E003F80000FC00C003F00000FC01C003F00000F8018003F0
0000F8038007F00000F8030007E00000F8070007E00000F80E0007E00000781C000FE000
007C38000FC000001FF0000380000007C000342D7DAB3A>I<000003FC000000003FFF00
000000FE07C0000003F003F0000007E001F800001FC000FC00003F00007C00007F00007E
0000FE00007F0001FC00003F0003F800003F0007F800003F8007F000003F800FF000003F
801FE000003F801FE000003F803FC000003F803FC000007F807FC000007F807F8000007F
807F8000007F807F800000FF80FF800000FF00FF000000FF00FF000000FF00FF000001FF
00FF000001FE00FE000001FE00FE000003FC00FE000003FC00FE000003F800FE000007F8
00FE000007F000FE00000FE000FE00001FE0007E00001FC0007E00003F80003F00007F00
003F0000FE00001F8001F800000FC003F0000007E00FC0000001F03F80000000FFFC0000
00001FE0000000292D7CAB2F>I<0003E0003F8000000FF800FFE000001C7C03C0F80000
383E07007C0000703F1E007E0000601F38003F0000601F70003F0000E01F60001F8000C0
1FE0001F8000C03FC0001F8001C03F80001FC001803F00001FC001803F00001FC003807F
00001FC003007F00001FC003007E00001FC000007E00001FC00000FE00003FC00000FE00
003FC00000FC00003FC00000FC00003FC00001FC00007FC00001FC00007F800001F80000
7F800001F800007F800003F80000FF800003F80000FF000003F00000FF000003F00000FE
000007F00001FE000007F00001FC000007E00003FC000007E00003F800000FE00007F800
000FE00007F000000FE0000FE000000FE0000FC000001FF0001F8000001FF0003F000000
1FB8007E0000001F9800FC0000003F9C01F80000003F8F07E00000003F03FF800000003F
00FC000000007F0000000000007F0000000000007E0000000000007E000000000000FE00
0000000000FE000000000000FC000000000000FC000000000001FC000000000001FC0000
00000001F8000000000001F8000000000003F8000000000003F8000000000007F8000000
0000FFFFF000000000FFFFF000000000FFFFE000000000323F83AB31>I<00000FC00300
003FF0070000F83C0F0003E00E1E000FC0063E001F80073E003F00037E007F0003FC00FE
0001FC01FC0001FC01FC0001FC03F80001F807F80001F807F00001F80FF00003F80FF000
03F01FE00003F01FE00003F03FE00007F03FC00007E03FC00007E03FC00007E07FC0000F
E07F80000FC07F80000FC07F80000FC07F80001FC07F00001F80FF00001F80FF00001F80
FF00003F807F00003F007F00003F007E00003F007E00007F007F0000FE003F0001FE003F
0001FE003F0003FE001F8007FC000F801EFC0007C038FC0003E0F1FC0001FFC1F800003F
01F800000001F800000003F800000003F000000003F000000003F000000007F000000007
E000000007E000000007E00000000FE00000000FC00000000FC00000001FC00000001FC0
0000003FC000001FFFFF80001FFFFF80001FFFFF00283F7DAB2B>I<00F8000FC003FE00
7FF0070F00F0380E0F83C07C0C07C701FC1C07CE01FC1807DC03FC3807D803FC3007F803
FC300FF003F8700FE000E0600FE00000600FC00000E00FC00000C01FC00000C01F800000
001F800000001F800000003F800000003F000000003F000000003F000000007F00000000
7E000000007E000000007E00000000FE00000000FC00000000FC00000000FC00000001FC
00000001F800000001F800000001F800000003F800000003F000000003F000000003F000
000007F000000007E000000007E000000007E00000000FE00000000FC000000003800000
00262D7DAB2C>I<00000FF00000007FFE000001F00F8000078001C0000F0000E0001E00
0060003C000060003C0001F000780007F000780007F000F8000FE000F0000FE000F8000F
E000F800038000FC00000000FE00000000FF00000000FFF80000007FFF8000007FFFE000
003FFFF800001FFFFC000007FFFE000000FFFE00000007FF00000000FF000000007F0000
00003F800000001F800E00001F803F00000F007F80000F007F80000F007F80001F00FF00
001E00FF00001E00FC00003C006000003C006000007800700000F000380001E0001C0007
C0000F803F000003FFFC0000007FE00000242D7BAB2E>I<00001C0000007E0000007E00
00007E000000FE000000FC000000FC000000FC000001FC000001F8000001F8000001F800
0003F8000003F0000003F0000003F0000007F0000007E0000007E0007FFFFFFCFFFFFFFC
FFFFFFF8000FC000000FC000001FC000001F8000001F8000001F8000003F8000003F0000
003F0000003F0000007F0000007E0000007E0000007E000000FE000000FC000000FC0000
00FC000001FC000001F8000001F8000001F8000003F8000003F0000003F0000003F00070
07F0006007E0006007E000E007E000C00FE001C00FC001800FC003800FC0070007C00600
07C00E0007C01C0003E0380001E0F00000FFC000003F00001E3F7EBD23>I<003E000000
000000FF800000E00003C3C00003F0000703E00003F0000601F00003F0000E01F00007F0
001C01F00007F0001803F00007E0003803F00007E0003003F0000FE0003003F0000FE000
7007F0000FC0006007E0000FC0006007E0001FC000E00FE0001FC000C00FC0001F800000
1FC0001F8000001F80003F8000001F80003F8000003F80003F0000003F00003F0000003F
00007F0000007F00007F0000007E00007E0000007E00007E0000007E0000FE000000FE00
00FE000000FC0000FC000000FC0000FC000000FC0001FC018000FC0001FC038001F80001
F8030001F80001F8030001F80001F8070001F80003F8060001F80003F0060000F80007F0
060000F8000FF00E0000FC000DF00C00007C001DF01C00007C0039F01800003E00F0F838
00001F03C07870000007FF803FE0000001FC000F8000312D7DAB38>I<003E00000E0000
FF80003F8003C3C0007F800703E0007F800601F0007F800E01F0007F801C01F0007F8018
03F0003F803803F0001F803003F0000F803003F0000F807007F00007806007E000078060
07E0000780E00FE0000700C00FC0000300001FC0000300001F80000700001F8000060000
3F80000600003F00000600003F00000E00007F00000C00007E00000C00007E00000C0000
7E00001C0000FE0000180000FC0000180000FC0000380000FC0000300000FC0000700001
F80000600001F80000E00001F80000C00001F80001C00000F80001800000F80003800000
FC0007000000FC00060000007C000E0000007E001C0000003F00780000000F81E0000000
07FFC000000000FE000000292D7DAB2F>I<003E0000000000FF800000E003C3C00003F0
0703E00003F00601F00003F00E01F00007F01C01F00007E01803F00007E03803F00007E0
3003F0000FE07003F0000FC06007F0000FC06007E0000FC06007E0001FC0E00FE0001F80
C00FC0001F80001FC0001F80001F80003F80001F80003F00003F80003F00003F00003F00
003F00007F00007F00007E00007E00007E00007E00007E00007E0000FE0000FE0000FC00
00FC0000FC0000FC0000FC0000FC0001FC0000FC0001F80001F80001F80001F80001F800
01F80003F80001F80003F00001F80003F00000F80007F00000F8000FF00000FC000FE000
007C001FE000007C003FE000003E00FFE000001F03CFC0000007FF8FC0000001FC0FC000
0000001FC0000000001F80000000001F80000000003F80000000003F000007C0007F0000
1FE0007E00001FE000FC00001FE000FC00003FC001F800003FC003F000003F8003E00000
380007C0000018000F8000001C001F0000000E007C0000000781F800000003FFE0000000
007F000000002C407DAB30>121 D E /Fg 107[44 57[61 72 72
94 72 72 61 55 66 72 55 72 72 89 61 72 39 33 72 72 55
61 72 66 66 72 7[50 50 50 50 50 50 50 50 50 50 28 25
33 25 2[33 33 40[{ .167 SlantFont TeXBase1Encoding ReEncodeFont }43
100.000000 /Times-Roman rf /Fh 103[60 15[60 10[60 60
60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60
60 60 60 60 60 60 60 60 60 60 60 1[60 60 60 60 60 60
60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60
60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60
60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60 60
60 33[{ TeXBase1Encoding ReEncodeFont }94 100.000000
/Courier rf /Fi 135[44 66 1[50 28 39 39 1[50 50 50 72
28 2[28 50 50 28 44 50 44 50 50 17[72 11[66 21[33 25
40[50 3[{ TeXBase1Encoding ReEncodeFont }25 100.000000
/Times-Italic rf /Fj 2 51 df<00380000780001F8001FF800FEF800E0F80000F800
00F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F800
00F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F800
00F80000F80000F80000F80001FC00FFFFF8FFFFF815267BA521>49
D<00FF000003FFE0000E03F0001800F80030007C0060007E0078003F00FC003F00FE001F
80FE001F80FE001F80FE001F807C001F8000001F8000001F0000003F0000003E0000007E
0000007C000000F8000001F0000003E0000003C00000078000000E0000001C0000003800
000070018000E001800180018003000300060003000C0003001FFFFF003FFFFF007FFFFE
00FFFFFE00FFFFFE0019267DA521>I E /Fk 107[60 25[53 60
60 86 60 66 40 47 53 1[66 60 66 100 33 66 40 33 66 60
40 53 66 53 66 60 7[86 86 120 86 86 80 66 86 93 73 93
86 113 80 2[47 93 93 73 80 86 86 80 86 6[40 60 60 60
60 60 60 60 60 60 60 33 30 40 3[40 40 37[66 2[{
 TeXBase1Encoding ReEncodeFont }66 119.999947 /Times-Bold
rf /Fl 9 111 df<7FFFFFFFFFFFFFE0FFFFFFFFFFFFFFF0FFFFFFFFFFFFFFF07FFFFFFF
FFFFFFE03C04789A4D>0 D<00007000000000F800000000F800000000F800000000F800
000000F800000000F800000000F800000000F80000000070000078007000F07C007001F0
FF007007F87F80700FF03FE0703FE00FF0707F8003F870FE0000FE73F800003F77E00000
0FFF80000003FE00000000F800000003FE0000000FFF8000003F77E00000FE73F80003F8
70FE000FF0707F803FE0703FE07F80700FF0FF007007F87C007001F078007000F0000070
00000000F800000000F800000000F800000000F800000000F800000000F800000000F800
000000F800000000700000252B7AAD32>3 D<0001FF0000000FFFE000003FFFF800007F
FFFC0001FFFFFF0003FFFFFF8007FFFFFFC00FFFFFFFE01FFFFFFFF01FFFFFFFF03FFFFF
FFF87FFFFFFFFC7FFFFFFFFC7FFFFFFFFCFFFFFFFFFEFFFFFFFFFEFFFFFFFFFEFFFFFFFF
FEFFFFFFFFFEFFFFFFFFFEFFFFFFFFFEFFFFFFFFFEFFFFFFFFFEFFFFFFFFFE7FFFFFFFFC
7FFFFFFFFC7FFFFFFFFC3FFFFFFFF81FFFFFFFF01FFFFFFFF00FFFFFFFE007FFFFFFC003
FFFFFF8001FFFFFF00007FFFFC00003FFFF800000FFFE0000001FF000027267BAB32>15
D<0007F0000000000080001FFE0000000001C0007FFF8000000001C000FFFFE000000001
C001FFFFF000000001C003FFFFF800000001C007F80FFC00000001C00FE001FE00000003
C01F80007F00000003801F00001FC0000003803E00000FE0000007803C000007F0000007
0038000003F800000F0078000001FC00001F0070000000FE00003E00700000003F80007E
00F00000001FE001FC00E00000000FFC07F800E000000007FFFFF000E000000003FFFFE0
00E000000001FFFFC000E0000000007FFF8000E0000000001FFE0000400000000003F800
0042187BA44D>24 D<000000380000000000007C0000000000007C000000000000FE0000
00000000FE000000000001FF000000000001FF000000000001EF000000000003EF800000
000003EF800000000007C7C00000000007C7C0000000000F83E0000000000F83E0000000
001F01F0000000001F01F0000000001E00F0000000003E00F8000000003E00F800000000
7C007C000000007C007C00000000F8003E00000000F8003E00000001F0001F00000001F0
001F00000001E0000F00000003E0000F80000003E0000F80000007C00007C0000007C000
07C000000F800003E000000F800003E000001F000001F000001F000001F000001E000000
F000003E000000F800003E000000F800007C0000007C00007C0000007C0000F80000003E
0000F80000003E0001F00000001F0001F00000001F0003E00000000F8003E00000000F80
03C0000000078007C000000007C007C000000007C00F8000000003E00F8000000003E01F
0000000001F01F0000000001F03E0000000000F83E0000000000F83C0000000000787C00
000000007C7C00000000007CF800000000003EF800000000003EF000000000001E600000
0000000C373D7BBA42>94 D<0000000FE0000000FFE0000003FC0000000FE00000003FC0
0000007F80000000FF00000000FE00000001FC00000001FC00000003F800000003F80000
0003F800000003F800000003F800000003F800000003F800000003F800000003F8000000
03F800000003F800000003F800000003F800000003F800000003F800000003F800000003
F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8
00000003F800000003F800000003F800000003F800000003F800000003F800000003F800
000007F000000007F00000000FE00000001FE00000003FC00000007F80000000FE000000
07F8000000FFE0000000FFE000000007F800000000FE000000007F800000003FC0000000
1FE00000000FE000000007F000000007F000000003F800000003F800000003F800000003
F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8
00000003F800000003F800000003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800000003F800000003F800000003F80000
0003F800000003F800000003F800000003F800000003F800000003F800000001FC000000
01FC00000000FE00000000FF000000007F800000003FC00000000FE000000003FC000000
00FFE00000000FE0236479CA32>102 D<FE00000000FFE000000007F800000000FE0000
00007F800000003FC00000001FE00000000FE000000007F000000007F000000003F80000
0003F800000003F800000003F800000003F800000003F800000003F800000003F8000000
03F800000003F800000003F800000003F800000003F800000003F800000003F800000003
F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8
00000003F800000003F800000003F800000003F800000003F800000003F800000003F800
000003F800000001FC00000001FC00000000FE00000000FF000000007F800000003FC000
00000FE000000003FC00000000FFE0000000FFE0000003FC0000000FE00000003FC00000
007F80000000FF00000000FE00000001FC00000001FC00000003F800000003F800000003
F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8
00000003F800000003F800000003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800000003F800000003F800000003F80000
0003F800000003F800000003F800000003F800000003F800000003F800000003F8000000
07F000000007F00000000FE00000001FE00000003FC00000007F80000000FE00000007F8
000000FFE0000000FE00000000236479CA32>I<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F060046474CA1C>106 D<6000000000F000000000F800000000
F80000000078000000007C000000007C000000003C000000003E000000003E000000001E
000000001F000000001F000000000F800000000F80000000078000000007C000000007C0
00000003C000000003E000000003E000000001E000000001F000000001F000000000F800
000000F80000000078000000007C000000007C000000003C000000003E000000003E0000
00001E000000001F000000001F000000000F800000000F80000000078000000007C00000
0007C000000003C000000003E000000003E000000001E000000001F000000001F0000000
00F800000000F80000000078000000007C000000007C000000003C000000003E00000000
3E000000001F000000001F000000000F000000000F800000000F80000000078000000007
C000000007C000000003C000000003E000000003E000000001F000000001F000000000F0
00000000F800000000F80000000078000000007C000000007C000000003C000000003E00
0000003E000000001F000000001F000000000F000000000F800000000F80000000078000
000007C000000007C000000003C000000003E000000003E000000001F000000001F00000
0000F000000000F800000000F80000000078000000007C000000007C000000003C000000
003E000000003E000000001E000000000C27647BCA32>110 D E
/Fm 2 51 df<000C00003C00007C0003FC00FFFC00FC7C00007C00007C00007C00007C00
007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00
007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00
007C00007C00007C00007C00007C00007C00007C0000FE007FFFFE7FFFFE172C7AAB23>
49 D<007F800001FFF0000780FC000E003F001C001F8038000FC070000FC0600007E0F0
0007E0FC0007F0FE0007F0FE0003F0FE0003F0FE0003F07C0007F0000007F0000007F000
0007E000000FE000000FC000001FC000001F8000003F0000007E0000007C000000F80000
01F0000003E0000007C000000F8000001E0000003C00000078000000F0003000E0003001
C0003003800060070000600E0000E01FFFFFE03FFFFFE07FFFFFC0FFFFFFC0FFFFFFC01C
2C7DAB23>I E /Fn 134[103 103 149 103 115 69 80 92 1[115
103 115 172 57 1[69 57 115 103 69 92 115 92 115 103 10[149
149 138 115 149 1[126 161 1[195 138 2[80 161 1[126 138
149 149 138 149 62[115 2[{ TeXBase1Encoding ReEncodeFont }41
207.333359 /Times-Bold rf /Fo 1 14 df<00000003FFC00000000000003FFFFC0000
00000001FFFFFF800000000007FFFFFFE0000000001FFE007FF8000000007FE00007FE00
000000FF000000FF00000003FC0000003FC0000007F00000000FE000000FC000000003F0
00001F8000000001F800003F0000000000FC00007E00000000007E0000FC00000000003F
0000F800000000001F0001F000000000000F8003F000000000000FC003E0000000000007
C007C0000000000003E00FC0000000000003F00F80000000000001F01F00000000000000
F81F00000000000000F81E00000000000000783E000000000000007C3E00000000000000
7C3C000000000000003C7C000000000000003E7C000000000000003E7800000000000000
1E78000000000000001E78000000000000001EF8000000000000001FF800000000000000
1FF0000000000000000FF0000000000000000FF0000000000000000FF000000000000000
0FF0000000000000000FF0000000000000000FF0000000000000000FF000000000000000
0FF0000000000000000FF0000000000000000FF8000000000000001FF800000000000000
1F78000000000000001E78000000000000001E78000000000000001E7C00000000000000
3E7C000000000000003E3C000000000000003C3E000000000000007C3E00000000000000
7C1E00000000000000781F00000000000000F81F00000000000000F80F80000000000001
F00FC0000000000003F007C0000000000003E003E0000000000007C003F000000000000F
C001F000000000000F8000F800000000001F0000FC00000000003F00007E00000000007E
00003F0000000000FC00001F8000000001F800000FC000000003F0000007F00000000FE0
000003FC0000003FC0000000FF000000FF000000007FE00007FE000000001FFE007FF800
00000007FFFFFFE00000000001FFFFFF8000000000003FFFFC00000000000003FFC00000
00484E7BBB53>13 D E /Fp 105[42 1[37 26[42 42 60 42 42
23 32 28 1[42 42 42 65 23 42 1[23 42 42 28 37 42 37 42
37 6[51 4[60 51 46 55 1[46 2[74 51 60 32 28 60 60 3[55
55 60 6[23 42 1[42 3[42 1[42 42 1[21 28 21 10[28 30[46
2[{ TeXBase1Encoding ReEncodeFont }52 83.333336 /Times-Roman
rf /Fq 105[50 27[44 50 50 72 50 55 33 39 44 55 55 50
55 83 28 55 33 28 55 50 33 44 55 44 55 50 3[33 1[33 66
72 72 100 72 72 66 55 72 78 61 78 72 94 66 78 50 39 78
78 61 66 72 72 66 72 1[50 1[57 2[33 7[50 50 50 28 25
33 25 57 50 33 33 1[83 4[33 29[55 55 2[{ TeXBase1Encoding ReEncodeFont }
73 100.000000 /Times-Bold rf /Fr 64[44 10[33 11[33 6[33
9[100 50 1[44 44 24[44 50 50 72 50 50 28 39 33 50 50
50 50 78 28 50 28 28 50 50 33 44 50 44 50 44 33 2[33
1[33 61 72 72 94 72 72 61 55 66 72 55 72 72 89 61 72
39 33 72 72 55 61 72 66 66 72 92 44 1[56 1[28 28 50 50
50 50 50 50 50 50 50 50 28 25 33 25 56 50 33 33 33 78
83 50 50 1[33 29[55 55 2[{ TeXBase1Encoding ReEncodeFont }94
100.000000 /Times-Roman rf /Fs 140[47 40 2[60 60 4[33
3[53 14[86 33[60 1[60 3[30 46[{ TeXBase1Encoding ReEncodeFont }10
119.999947 /Times-Roman rf /Ft 107[72 25[64 72 72 104
72 80 48 56 64 80 80 72 80 120 40 80 48 40 80 72 48 64
80 64 80 72 8[104 143 104 104 96 80 104 112 88 112 104
135 96 2[56 112 112 88 96 104 104 96 104 6[48 72 72 72
72 72 72 72 72 72 72 40 36 48 36 2[48 48 37[80 2[{
 TeXBase1Encoding ReEncodeFont }67 144.000000 /Times-Bold
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 938 289 a Ft(The)35 b(PSL)g(Users)g(Manual)1381
527 y Fs(V)-13 b(ersion)29 b(4.2)1604 884 y Fr(by)869
1240 y Fq(Herbert)d(Melenk)50 b Fr(and)g Fq(W)n(infried)26
b(Neun)564 1479 y Fr(K)m(onrad\226Zuse\226Zentrum)c(f)8
b(\250)-41 b(ur)25 b(Informationstechnik)e(Berlin)989
1599 y(Di)n(vision)g(of)i(Symbolic)f(Computing)1385 1720
y(T)-8 b(akustrasse)24 b(7)1157 1840 y(D\22614195)g(Berlin-Dahlem)1173
2079 y(URL:)h(http://www)-6 b(.zib)l(.de)1154 2459 y(based)25
b(on)f(earlier)i(V)-11 b(ersions)1604 2697 y(by)851 2936
y(The)25 b(Utah)f(Symbolic)g(Computation)g(Group)985
3056 y(Department)h(of)f(Computer)h(Science)1282 3176
y(Uni)n(v)o(ersity)e(of)h(Utah)1111 3297 y(Salt)h(Lak)o(e)g(City)-6
b(,)24 b(Utah)g(84112)1582 3535 y(and)1115 3774 y(He)n(wlett-P)o
(ackard)h(Compan)o(y)1114 3894 y(Computer)f(Research)i(Center)176
4102 y Fp(Cop)o(yright)634 4099 y(c)611 4102 y Fo(\015)100
b Fp(1997)d(K)m(onrad\226Zuse\226Zentrum)16 b(Berlin)1059
4201 y(Uni)n(v)o(ersity)j(of)h(Utah)1059 4301 y(He)n(wlett\226P)o
(ackard)f(Compan)o(y)1059 4401 y(All)i(rights)f(reserv)o(ed.)126
4829 y(Re)o(gistered)g(system)h(holders)f(may)h(reproduce)d(all)k(or)f
(an)o(y)f(part)h(of)f(this)i(publication)d(for)h(internal)h(pur)n(-)126
4950 y(poses,)27 b(pro)o(vided)d(that)j(the)f(source)g(of)g(the)g
(material)g(is)h(clearly)f(ackno)n(wledged,)f(and)h(the)g(cop)o(yright)
126 5070 y(notice)19 b(is)j(retained.)p -118 5182 3544
4 v -118 5321 a Fr(\(M)j(3004.02\))p eop
%%Page: 2 2
2 1 bop 1632 289 a Fr(ABSTRA)l(CT)362 517 y(This)32 b(manual)g
(describes)g(the)h(primiti)n(v)o(e)d(data)i(structures,)i(f)o
(acilities)e(and)h(functions)362 637 y(present)28 b(in)g(the)g
(Portable)g(Standard)h(LISP)g(\(PSL\))g(system.)40 b(It)28
b(describes)g(the)g(imple-)362 758 y(mentation)e(details)g(and)h
(functions)e(of)j(interest)e(to)g(a)i(PSL)f(programmer)-5
b(.)37 b(Except)26 b(for)362 878 y(a)f(small)g(number)f(of)h
(hand-coded)g(routines)g(for)g(I/O)g(and)g(ef)n(\002cient)g(function)f
(calling,)362 999 y(PSL)c(is)f(written)f(entirely)h(in)g(itself,)g
(using)g(a)g(machine-oriented)g(mode)f(of)i(PSL,)g(called)362
1119 y(SYSLisp,)30 b(to)e(perform)h(w)o(ord,)h(byte,)g(and)e(ef)n
(\002cient)h(inte)o(ger)g(and)g(string)f(operations.)362
1239 y(PSL)e(is)e(compiled)g(by)h(an)g(enhanced)h(v)o(ersion)e(of)h
(the)g(Portable)g(LISP)h(Compiler)l(,)f(and)362 1360
y(currently)e(runs)f(on)h(man)o(y)f(platforms,)g(from)h(personal)g
(computers)f(up)g(to)h(super)g(com-)362 1480 y(puters.)p
eop
%%Page: 3 3
3 2 bop -118 956 a Fn(Contents)31 1411 y Fr(1.1)104 b(Opening)24
b(Remarks)46 b(.)j(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)156
b(1)31 1535 y(1.2)104 b(Scope)26 b(of)f(the)f(Manual)89
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)156 b(1)260
1658 y(1.2.1)119 b(T)-8 b(ypographic)24 b(Con)l(v)o(entions)f(within)h
(the)h(Manual)87 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)156
b(1)31 1782 y(1.3)104 b(Hints)24 b(on)h(Using)f(the)g(PSL)i(System)f(.)
49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)156 b(2)260 1905 y(1.3.1)119 b(Loading)24
b(Optional)g(Modules)40 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)156 b(2)260 2029
y(1.3.2)119 b(Error)25 b(and)g(W)-8 b(arning)25 b(Messages)38
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)156 b(2)31 2152 y(1.4)104 b(Switches)25 b(and)g(Globals)52
b(.)e(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)156 b(3)31
2276 y(1.5)104 b(Compilation)24 b(V)-11 b(ersus)24 b(Interpretation)83
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)156 b(4)31 2399 y(2.1)104 b(Data)25 b(T)-8
b(ypes)94 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)156 b(4)260 2523 y(2.1.1)119 b(Data)25 b(T)-8 b(ypes)25
b(and)f(Structures)h(Supported)g(in)f(PSL)89 b(.)50 b(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)156 b(4)260 2646 y(2.1.2)119 b(Predicates)26
b(Useful)e(with)g(Data)h(T)-8 b(ypes)44 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)156 b(8)260 2770
y(2.1.3)119 b(Con)l(v)o(erting)24 b(Data)h(T)-8 b(ypes)55
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)107 b(11)31 2894 y(3.1)d(Numbers)25
b(and)f(Arithmetic)g(Functions)30 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107
b(13)260 3017 y(3.1.1)119 b(Big)25 b(Inte)o(gers)34 b(.)50
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(14)260
3141 y(3.1.2)119 b(Con)l(v)o(ersion)24 b(Between)i(Inte)o(gers)e(and)h
(Floats)34 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
107 b(14)260 3264 y(3.1.3)119 b(Arithmetic)24 b(Operators)47
b(.)j(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(14)260 3388 y(3.1.4)119
b(Arithmetic)24 b(Functions)46 b(.)k(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107
b(17)260 3511 y(3.1.5)119 b(Functions)24 b(for)h(Numeric)g(Comparison)
74 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
107 b(19)260 3635 y(3.1.6)119 b(Bit)25 b(Operations)88
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(21)260
3758 y(3.1.7)119 b(V)-11 b(arious)25 b(Mathematical)e(Functions)49
b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)107 b(21)31 3882 y(4.1)d(Introduction)49 b(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(29)31 4005
y(4.2)d(Identi\002ers)25 b(and)g(the)g(Id)g(Hash)f(T)-8
b(able)64 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(31)260 4129 y(4.2.1)119
b(Identi\002er)25 b(Functions)38 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107
b(31)31 4252 y(4.3)d(Property)25 b(List)f(Functions)50
b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(33)260 4376
y(4.3.1)119 b(Functions)24 b(for)h(Flagging)f(Ids)61
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)107 b(35)260 4499 y(4.3.2)119 b(Direct)25
b(Access)g(to)g(the)f(Property)h(Cell)56 b(.)50 b(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(35)31
4623 y(4.4)d(V)-11 b(alue)25 b(Cell)g(Functions)80 b(.)50
b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(36)31 4747
y(4.5)d(System)25 b(Global)f(V)-11 b(ariables,)24 b(Switches)h(and)g
(Other)g(\224Hooks\224)72 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
107 b(40)260 4870 y(4.5.1)119 b(Introduction)29 b(.)50
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(40)260
4994 y(4.5.2)119 b(Setting)25 b(Switches)79 b(.)50 b(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)107 b(40)260 5117 y(4.5.3)119 b(Special)25
b(Global)g(V)-11 b(ariables)60 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107
b(41)260 5241 y(4.5.4)119 b(Special)25 b(Put)g(Indicators)97
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)107 b(41)260 5364 y(4.5.5)119
b(Special)25 b(Flag)h(Indicators)52 b(.)d(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107
b(42)31 5488 y(5.1)d(Introduction)24 b(to)g(Lists)g(and)h(P)o(airs)85
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)107 b(43)31 5611 y(5.2)d(Basic)26
b(Functions)e(on)g(P)o(airs)79 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107
b(44)31 5735 y(5.3)d(Functions)24 b(for)h(Manipulating)e(Lists)49
b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)107 b(46)260 5858 y(5.3.1)119 b(Membership)24
b(and)h(Length)f(of)h(Lists)37 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)107 b(48)1629 6066
y(3)p eop
%%Page: 4 4
4 3 bop 497 289 a Fr(5.3.2)118 b(Deleting)25 b(Elements)e(of)i(Lists)54
b(.)c(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)106 b(52)497 410 y(5.3.3)118 b(List)24
b(Re)n(v)o(ersal)73 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(53)497 531 y(5.3.4)118 b(Functions)24 b(for)h(Sorting)44
b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(54)268 652 y(5.4)e(Functions)24
b(for)h(Building)e(and)i(Searching)g(A-Lists)64 b(.)49
b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(55)268 773 y(5.5)e(Substitutions)94 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(56)268 894 y(6.1)e(Characters)43
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(57)268 1015 y(6.2)e(Strings)35 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(61)497
1136 y(6.2.1)118 b(String)25 b(Creation)g(and)g(Cop)o(ying)47
b(.)j(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)106 b(61)497 1257 y(6.2.2)118 b(About)24 b(the)h(Basic)g
(String)g(Operations)46 b(.)k(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)106 b(62)497 1378 y(6.2.3)118
b(The)25 b(Operations)55 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(62)268 1499 y(6.3)e(Common)24 b(LISP)h(String)g(Functions)77
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)106 b(63)497 1621 y(6.3.1)118 b(String)25
b(comparison:)59 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(63)497 1742 y(6.3.2)118 b(String)25 b(Concatenation:)99
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)106 b(65)497 1863 y(6.3.3)118
b(T)m(ransformation)24 b(of)h(Strings:)60 b(.)50 b(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(65)497 1984 y(6.3.4)118 b(T)-8 b(ype)25 b(Con)l(v)o(ersion:)43
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(66)497 2105
y(6.3.5)118 b(Other:)44 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)106 b(66)497 2226 y(6.3.6)118 b(Substring)24
b(Comparison)77 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(67)497
2347 y(6.3.7)118 b(Searching)26 b(for)f(Strings)49 b(.)h(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)106 b(67)497 2468 y(6.3.8)118 b(Reading)25 b(and)g(Writing)f
(Strings)52 b(.)e(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)106 b(68)268 2589 y(7.1)e(Introduction)49
b(.)g(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(71)497 2710 y(7.1.1)118 b(Conditionals)87 b(.)50 b(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)106 b(71)268 2831 y(7.2)e(Case)25
b(and)g(Selectq)g(Statements)72 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(73)268 2952 y(7.3)e(Sequencing)24 b(Ev)n(aluation)71
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(74)497
3074 y(7.3.1)118 b(Iteration)36 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)106 b(77)497 3195 y(7.3.2)118 b(Mapping)24
b(Functions)43 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(85)268
3316 y(7.4)e(Non-Local)24 b(Exits)30 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)106 b(89)268 3437 y(8.1)e(Function)24
b(De\002nition)g(in)g(PSL)59 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(93)497 3558 y(8.1.1)118 b(Function)25 b(T)-8 b(ypes)57
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(93)497
3679 y(8.1.2)118 b(Notes)25 b(on)f(Code)i(Pointers)h(.)50
b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)106 b(93)497 3800 y(8.1.3)118 b(Functions)24
b(Useful)h(in)f(Function)h(De\002nition)48 b(.)i(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)106 b(94)497 3921 y(8.1.4)118
b(Function)25 b(De\002nition)f(in)g(LISP)i(Syntax)77
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)106
b(95)497 4042 y(8.1.5)118 b(BackQuote)76 b(.)49 b(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)106 b(98)497 4163 y(8.1.6)118 b(MacroExpand)33
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(100)497
4284 y(8.1.7)118 b(Function)25 b(T)-8 b(ype)24 b(Predicates)37
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)56 b(101)268 4405 y(8.2)104 b(Wrappers)81
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(102)497 4526 y(8.2.1)118 b(Notes)25 b(on)f(Writing)g(Wrappers)92
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)56 b(102)497 4648 y(8.2.2)118 b(Exported)25
b(Functions)37 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(103)497
4769 y(8.2.3)118 b(Examples)55 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)56 b(105)268 4890 y(8.3)104 b(V)-11 b(ariables)24
b(and)h(Bindings)66 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(107)497 5011 y(8.3.1)118 b(Binding)24 b(T)-8 b(ype)25
b(Declaration)88 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(108)497 5132
y(8.3.2)118 b(Binding)24 b(T)-8 b(ype)25 b(Predicates)70
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)56 b(109)268 5253 y(8.4)104 b(User)25
b(Binding)f(Functions)38 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(109)268 5374 y(9.1)104 b(Ev)n(aluator)23 b(Functions)h(Ev)n(al)g(and)
h(Apply)63 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)56 b(111)268 5495 y(9.2)104 b(Support)24
b(Functions)g(for)h(Ev)n(al)f(and)h(Apply)66 b(.)49 b(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(114)268 5616 y(9.3)104 b(Special)25 b(Ev)n(aluator)f(Functions,)f
(Quote)i(and)g(Function)74 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)56 b(115)268 5737 y(9.4)104 b(Support)24 b(Functions)g(for)h
(Macro)g(Ev)n(aluation)48 b(.)i(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(116)268 5858 y(10.1)e(Introduction)49
b(.)g(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(117)p eop
%%Page: 5 5
5 4 bop 260 289 a Fr(10.1.1)69 b(Or)n(ganization)24 b(of)h(this)f
(Chapter)61 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)57 b(117)31 410 y(10.2)d(Printed)25
b(Representation)g(of)g(LISP)g(Objects)86 b(.)50 b(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(118)31
531 y(10.3)d(Functions)24 b(for)h(Printing)36 b(.)50
b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(120)260 652
y(10.3.1)69 b(Basic)26 b(Printing)j(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)57 b(120)260 773 y(10.3.2)69 b(Whitespace)25
b(Printing)f(Functions)40 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(121)260 894 y(10.3.3)69
b(F)o(ormatted)24 b(Printing)67 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(122)260 1015 y(10.3.4)69 b(The)25 b(Fundamental)f(Printing)g
(Function)69 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)57 b(123)260 1136 y(10.3.5)69 b(Additional)23
b(Printing)h(Functions)79 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(123)260 1257
y(10.3.6)69 b(Printing)24 b(Status)h(and)g(Mode)k(.)50
b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)57 b(124)31 1378 y(10.4)d(Functions)24
b(for)h(Reading)h(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(125)260 1499 y(10.4.1)69 b(Reading)25 b(S-Expressions)44
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)57 b(125)260 1621 y(10.4.2)69
b(Reading)25 b(Single)g(Characters)59 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(127)260 1742 y(10.4.3)69 b(Reading)25 b(T)-8 b(ok)o(ens)31
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(127)260
1863 y(10.4.4)69 b(Reading)25 b(Entire)g(Lines)49 b(.)h(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)57 b(128)260 1984 y(10.4.5)69 b(Read)26 b(Macros)69
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(128)260
2105 y(10.4.6)69 b(T)-7 b(erminal)24 b(Interaction)82
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(129)260 2226 y(10.4.7)69
b(Input)24 b(Status)h(and)g(Mode)66 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(129)31 2347 y(10.5)d(File)25 b(System)g(Interf)o(ace:)31
b(Open)25 b(and)g(Close)42 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(130)31 2468 y(10.6)d(Loading)24
b(Modules)61 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(131)31 2589 y(10.7)d(Reading)25 b(Files)g(into)f(PSL)65
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(133)31 2710
y(10.8)d(About)24 b(I/O)h(Channels)39 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)57 b(134)31 2831 y(10.9)d(I/O)25 b(to)g(and)f(from)h
(Lists)f(and)g(Strings)47 b(.)j(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(135)31
2952 y(10.10)t(Generalized)26 b(Input/Output)c(Streams)73
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)57 b(136)260 3074 y(10.10.1)19 b(Using)24
b(the)h(\224Special\224)h(F)o(orm)e(of)h(Open)40 b(.)50
b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(137)31 3195 y(10.11)t(Scan)26 b(T)-8 b(able)25 b(Internals)30
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(138)31
3316 y(10.12)t(Scan)26 b(T)-8 b(able)25 b(Utility)e(Functions)74
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(139)31 3437 y(10.13)t(Binary)26
b(Read)f(Functions)72 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(140)31 3558 y(11.1)d(Introduction)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(143)31 3679 y(11.2)d(The)25
b(General)h(Purpose)e(T)-8 b(op)25 b(Loop)f(Function)30
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)57 b(143)31 3800 y(11.3)d(Changing)25 b(the)f(Def)o(ault)h(T)-8
b(op)25 b(Le)n(v)o(el)e(Function)77 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(146)31 3921
y(12.1)d(Introduction)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)57 b(147)31 4042 y(12.2)d(The)25 b(Basic)h(Error)f
(Functions)85 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(147)31
4163 y(12.3)d(Basic)26 b(Error)f(Handlers)75 b(.)50 b(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)57 b(149)31 4284 y(12.4)d(Break)26
b(Loop)69 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)57 b(150)31 4405 y(12.5)d(Details)25 b(on)f(the)h(Break)h(Loop)88
b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(152)31 4526 y(12.6)d(Some)25
b(Con)l(v)o(enient)f(Error)h(Calls)45 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(152)31 4648 y(13.1)d(The)25 b(Deb)n(ug)g(Module)62
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(155)260
4769 y(13.1.1)69 b(Ov)o(ervie)n(w)24 b(of)h(Functionality)66
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)57 b(155)260 4890 y(13.1.2)69 b(Using)24
b(Break)i(and)f(T)m(race)54 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(155)260 5011 y(13.1.3)69 b(Sample)25 b(Session)44 b(.)49
b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(156)260 5132
y(13.1.4)69 b(Rede\002ning)25 b(a)h(Brok)o(en)f(or)g(T)m(raced)g
(Function)34 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)57 b(158)31 5253 y(14.1)d(Simulating)24 b(a)h(Stack)89
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(159)31
5374 y(14.2)d(Ring)25 b(Buf)n(fers)j(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(159)31 5495 y(14.3)d(W)-8
b(ord)25 b(V)-11 b(ector)25 b(Operations)g(.)49 b(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)57 b(159)31 5616 y(15.1)d(Introduction)49
b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(161)31 5737 y(15.2)d(Compiling)24 b(Files)47 b(.)j(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(161)260 5858 y(15.2.1)69
b(Order)26 b(of)e(Functions)g(for)h(Compilation)71 b(.)49
b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(163)p eop
%%Page: 6 6
6 5 bop 268 289 a Fr(15.3)54 b(Compiling)23 b(Functions)h(into)g
(Memory)46 b(.)k(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)56 b(163)268 410 y(15.4)e(Compiler)24
b(Errors)h(and)g(W)-8 b(arnings)66 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(163)268 531 y(15.5)e(Dif)n(ferences)25 b(between)g(Compiled)f(and)g
(Interpreted)h(Code)84 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
56 b(164)268 652 y(15.6)e(Constant)24 b(Declaration)72
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(166)268
773 y(15.7)e(Fluid)24 b(and)h(Global)f(Declarations)86
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)56 b(168)268 894 y(15.8)e(Control)24
b(Ov)o(er)h(the)f(T)m(ime)g(When)h(Something)e(is)i(Done)80
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(169)268 1015 y(15.9)e(Switches)24 b(That)h(Control)f(the)h(Compiler)
69 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)56 b(169)268 1136 y(15.10)t(Conditional)23
b(Compilation)71 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(171)268 1257 y(15.11)t(Implementation)23 b(Details)52
b(.)e(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(172)268 1378
y(16.1)e(Exiting)23 b(PSL)54 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)56 b(173)268 1499 y(16.2)e(Sa)n(ving)24
b(an)h(Ex)o(ecutable)f(PSL)85 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(173)268 1621 y(16.3)e(Init)24 b(Files)36 b(.)50 b(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(174)268
1742 y(16.4)e(Miscellaneous)23 b(Functions)72 b(.)49
b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(174)268 1863 y(16.5)e(Garbage)25
b(Collection)64 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(175)268 1984 y(17.1)e(Introduction)49 b(.)g(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(177)497 2105 y(17.1.1)68
b(RCREF)27 b(-)e(Cross)g(Reference)i(Generator)e(for)g(PSL)g(Files)59
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(177)497 2226
y(17.1.2)68 b(Restrictions)47 b(.)i(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)56 b(178)497 2347 y(17.1.3)68 b(Usage)50 b(.)g(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(178)497 2468 y(17.1.4)68
b(Options)57 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
56 b(178)268 2589 y(17.2)e(Scanalyzer)32 b(.)50 b(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(179)497
2710 y(17.2.1)68 b(Introduction)30 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)56 b(179)497 2831 y(17.2.2)68 b(Philosophy)74
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(179)497
2952 y(17.2.3)68 b(Functions)55 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)56 b(180)497 3074 y(17.2.4)68 b(En)l(vironment)24
b(Ar)n(guments)63 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(181)497 3195
y(17.2.5)68 b(Analysis)24 b(Hooks)38 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)56 b(181)497 3316 y(17.2.6)68 b(Properties)45
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(181)497 3437 y(17.2.7)68 b(Information)24 b(Made)h(A)-7
b(v)n(ailable)23 b(By)j(Scanalyzer)61 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)56 b(181)497 3558 y(17.2.8)68 b(Expansion)24
b(And)g(Preprocessing)h(Hooks)83 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(182)497 3679 y(17.2.9)68
b(Cross)25 b(Reference)i(Support)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(182)268 3800 y(18.1)e(Introduction)49 b(.)g(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(185)268 3921 y(18.2)e
(Prettyprinting)23 b(Files)i(and)g(Data)61 b(.)50 b(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
56 b(185)268 4042 y(18.3)e(F)o(ormats)67 b(.)50 b(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(186)268
4163 y(18.4)e(Dispatch)38 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(187)268 4284 y(18.5)e(Specifying)24
b(F)o(ormats)60 b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(188)268 4405 y(19.1)e(Introduction)49 b(.)g(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(191)497 4526 y(19.1.1)68
b(T)-7 b(erminology)83 b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(191)268 4648 y(19.2)e(Creating)25 b(Objects)94 b(.)50
b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(192)497
4769 y(19.2.1)68 b(Methods)99 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)56 b(192)497 4890 y(19.2.2)68 b(Protection)25
b(of)g(Objects)49 b(.)h(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(193)268
5011 y(19.3)e(Reference)26 b(Information)86 b(.)50 b(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)56 b(193)497 5132 y(19.3.1)68 b(Loading)24
b(Objects)86 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56
b(193)497 5253 y(19.3.2)68 b(Fla)n(v)n(or)26 b(De\002nition)61
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(193)497 5374
y(19.3.3)68 b(Method)24 b(De\002nition)82 b(.)50 b(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)56 b(195)497 5495 y(19.3.4)68 b(Object)25 b(Creation)39
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(196)497
5616 y(19.3.5)68 b(Message)25 b(Sending)47 b(.)i(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)56 b(197)497 5737 y(19.3.6)68 b(Printing)24 b(Objects)97
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)56 b(199)497 5858
y(19.3.7)68 b(Useful)25 b(Functions)f(on)g(Objects)58
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
h(.)g(.)g(.)56 b(199)p eop
%%Page: 7 7
7 6 bop 31 289 a Fr(19.4)54 b(Using)24 b(Inheritance)57
b(.)49 b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(201)260 409 y(19.4.1)69 b(W)-8 b(arning)25 b(on)f(Inheritance)h
(Usage)58 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)57 b(203)260 529 y(19.4.2)69 b(Using)24
b(SELF)i(and)e(MYSELF)h(with)f(Inheritance)37 b(.)49
b(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(203)260
650 y(19.4.3)69 b(Inheritance)25 b(and)g(Initialization)43
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)57 b(204)260 770 y(19.4.4)69 b(Making)24
b(Changes)h(to)g(Inherited)f(Code)95 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(204)31 891 y(19.5)d(Deb)n
(ugging)24 b(Information)49 b(.)g(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(204)31 1011 y(20.1)d(V)-11 b(ectors)95 b(.)50 b(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(205)260
1131 y(20.1.1)69 b(About)24 b(the)h(Basic)g(Operations)f(on)h(V)-11
b(ectors)91 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
57 b(206)260 1252 y(20.1.2)69 b(The)25 b(Operations)55
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(206)260
1372 y(20.1.3)69 b(Built-in)24 b(Operations)g(on)h(V)-11
b(ectors)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)57 b(207)31 1493 y(20.2)d(W)-8 b(ord)25
b(V)-11 b(ectors)75 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)57 b(208)31 1613 y(20.3)d(General)26 b(X-V)-11
b(ector)25 b(Operations)47 b(.)j(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(208)31 1733 y(21.1)d(Calling)25 b(the)f(Command)g(Shell)31
b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(211)31 1854 y(21.2)d(The)25
b(W)-8 b(orking)24 b(Directory)59 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)57 b(211)31 1974 y(21.3)d(In)l(v)n(oking)24 b(Pipes)98
b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(211)260 2094 y(21.3.1)69 b(Pipes)25 b(under)g(Unix)54
b(.)c(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g
(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(212)260 2215
y(21.3.2)69 b(Pipes)25 b(under)g(MS/DOS)33 b(.)50 b(.)f(.)h(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
57 b(212)260 2335 y(21.3.3)69 b(Pipes)25 b(under)g(MS)g(W)l(indo)n(ws)
82 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g
(.)f(.)h(.)g(.)f(.)57 b(212)31 2456 y(21.4)d(Shared)26
b(Memory)e(Interf)o(ace)i(\(Unix)e(only\))73 b(.)50 b(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(212)31 2576 y(26.1)d(Installation)93 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(223)260 2696 y(26.1.1)69
b(Reading)25 b(the)g(tape)77 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(223)260 2817 y(26.1.2)69 b(Reading)25 b(the)g(tape)g(for)g(IBM)g
(RS/6000)97 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)57 b(224)260 2937 y(26.1.3)69 b(Reading)25 b(Disk)o(ettes)f
(for)h(LINUX)g(386)42 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)57 b(224)260 3057 y(26.1.4)69
b(Customizing)23 b(Mak)o(e\002les)i(and)g(scripts)39
b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
57 b(225)260 3178 y(26.1.5)69 b(Printing)24 b(Documentation)84
b(.)50 b(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)57 b(226)31 3298 y(26.2)d(Ne)n(w)25
b(une)o(x)o(ec)f(procedure,)h(Image)g(model)j(.)49 b(.)h(.)g(.)g(.)f(.)
h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(226)31 3419 y(26.3)d(Dynamic)25 b(con\002guration)f(of)h(Heap)g(Size)
g(and)g(Binding)f(Stack)40 b(.)50 b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)
57 b(227)31 3539 y(26.4)d(Size)26 b(of)f(Address)f(Space)99
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(227)31 3659
y(26.5)d(Arbitrary)25 b(Precision)g(Inte)o(ger)f(Support)j(.)50
b(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)57 b(228)31 3780 y(26.6)d(Monitoring)23 b(of)i(Performance)
46 b(.)k(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(228)260 3900 y(26.6.1)69
b(SPY)26 b(\(Unix)e(only\))71 b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(228)260 4021 y(26.6.2)69 b(Quali\002ed)25 b(timing)89
b(.)50 b(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)
g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(229)260 4141
y(26.6.3)69 b(Quali\002ed)25 b(counting)76 b(.)50 b(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
f(.)57 b(230)31 4261 y(26.7)d(Compiler)25 b(Modi\002cations)35
b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)
h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(231)31 4382
y(26.8)d(Disassembler)80 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f
(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)
f(.)h(.)g(.)f(.)57 b(231)31 4502 y(26.9)d(More)25 b(unsupported)f
(softw)o(are)40 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)
g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(232)260
4622 y(26.9.1)69 b(Oload)25 b(not)f(supported)82 b(.)50
b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g
(.)g(.)f(.)h(.)g(.)f(.)57 b(232)260 4743 y(26.9.2)69
b(Portable)25 b(Common)f(Lisp)g(Subset)h(\(PCLS\))h(not)e(supported)46
b(.)k(.)g(.)f(.)h(.)g(.)f(.)57 b(232)31 4863 y(26.10)t(Shared)26
b(Memory)e(Interf)o(ace)i(\(Unix)e(only\))73 b(.)50 b(.)g(.)g(.)f(.)h
(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(232)31 4984 y(26.11)t(Sock)o(et)26 b(interf)o(ace)f(\(Unix)f(only\))
80 b(.)50 b(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f
(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57 b(234)31 5104 y(26.12)t(Pipe)26
b(Interf)o(ace)f(\(Unix)g(only\))92 b(.)50 b(.)g(.)f(.)h(.)g(.)f(.)h(.)
g(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)57
b(234)31 5224 y(26.13)t(Mapping)24 b(of)h(LISP)h(Addresses)e(to)h(C)g
(addresses)81 b(.)49 b(.)h(.)g(.)g(.)f(.)h(.)g(.)f(.)h(.)g(.)g(.)f(.)h
(.)g(.)f(.)57 b(234)p eop
%%Page: 0 8
0 7 bop 118 -18 a Fr(0)p eop
%%Page: 1 9
1 8 bop -118 953 a Fn(Intr)l(oduction)-118 1468 y Ft(1.1)143
b(Opening)34 b(Remarks)-118 1692 y Fr(This)i(document)g(describes)h
(PSL)g(\(Portable)h(Standard)f(Lisp)2150 1656 y Fm(1)2189
1692 y Fr(\),)j(a)e(portable,)h(\224small\224)d(and)h(f)o(ast)-118
1813 y(LISP)30 b(de)n(v)o(eloped)e(originally)g(at)h(the)g(Uni)n(v)o
(ersity)e(of)j(Utah)f(and)g(the)g(He)n(wlett-P)o(ackard)g(Compan)o(y)-6
b(.)-118 1933 y(The)35 b(present)g(v)o(ersion)e(of)i(PSL)h(is)e
(supported)g(by)h(the)g(K)m(onrad\226Zuse-Zentrum)e(Berlin.)61
b(PSL)36 b(is)-118 2053 y(upw)o(ard-compatible)30 b(with)g(Standard)h
(Lisp)1489 2017 y Fm(2)1528 2053 y Fr(.)50 b(In)31 b(most)f(cases,)j
(Standard)e(Lisp)g(did)f(not)h(commit)-118 2174 y(itself)e(to)h
(speci\002c)h(implementation)c(details)j(\(since)g(it)f(w)o(as)h(to)g
(be)g(compatible)f(with)h(a)g(portion)f(of)-118 2294
y(\224most\224)g(LISPs\).)47 b(PSL)31 b(is)f(more)g(speci\002c)g(and)g
(pro)o(vides)f(man)o(y)g(more)h(functions)f(than)g(described)-118
2415 y(in)24 b(that)h(report.)-118 2535 y(The)g(goals)f(of)h(PSL)g
(include:)27 2740 y Fl(\017)49 b Fr(Pro)o(viding)21 b(implementation)g
(tools)g(for)i(LISP)h(that)f(can)g(be)g(used)f(to)h(implement)e(a)i(v)n
(ariety)f(of)126 2860 y(LISP-lik)o(e)j(systems,)e(including)h
(mini-Lisps)e(embedded)j(in)f(other)h(language)f(systems.)27
3065 y Fl(\017)49 b Fr(Ef)n(fecti)n(v)o(ely)23 b(supporting)g(the)i
(algebra)g(system)e(on)i(a)g(number)f(of)h(machines.)27
3270 y Fl(\017)49 b Fr(Studying)25 b(the)i(utility)e(of)h(a)h
(LISP-based)h(systems)d(language)i(for)g(other)f(applications)f(\(such)
126 3390 y(as)32 b(CA)l(GD)g(or)f(VLSI)i(design\))e(in)g(which)g(Lisp)g
(code)h(pro)o(vides)e(ef)n(\002cienc)o(y)i(comparable)g(to)126
3511 y(that)25 b(of)h(C)h(or)f(BCPL,)h(yet)f(enjo)o(ys)g(the)f
(interacti)n(v)o(e)g(program)h(de)n(v)o(elopment)e(and)i(deb)n(ugging)
126 3631 y(en)l(vironment)d(of)i(LISP)-11 b(.)-118 3972
y Ft(1.2)143 b(Scope)34 b(of)i(the)f(Manual)-118 4196
y Fr(This)30 b(manual)h(is)g(intended)g(to)g(describe)g(the)g(syntax,)h
(semantics,)g(and)f(implementation)e(of)j(PSL.)-118 4317
y(While)23 b(we)h(ha)n(v)o(e)g(attempted)e(to)i(mak)o(e)f(it)g
(comprehensi)n(v)o(e,)f(it)i(is)f(not)g(intended)g(for)h(use)f(as)h(a)g
(primer)-5 b(.)-118 4437 y(Some)25 b(prior)f(e)o(xposure)g(to)h(LISP)h
(will)d(pro)o(v)o(e)h(to)h(be)g(v)o(ery)f(helpful.)-118
4734 y Fk(1.2.1)119 b(T)-9 b(ypographic)30 b(Con)-5 b(v)o(entions)31
b(within)g(the)f(Manual)-118 4922 y Fr(A)i(lar)n(ge)i(portion)d(of)i
(this)e(manual)h(is)g(de)n(v)n(oted)g(to)g(descriptions)f(of)i(the)f
(functions)g(that)g(mak)o(e)h(up)-118 5043 y(PSL.)38
b(F)o(or)g(each)h(function)d(there)j(is)e(a)h(prototypical)e(header)j
(line.)69 b(Each)38 b(ar)n(gument)f(is)h(gi)n(v)o(en)e(a)-118
5163 y(name,)27 b(follo)n(wed)f(by)g(the)h(type)f(of)h(ar)n(gument)g(e)
o(xpected.)36 b(If)27 b(more)g(than)f(one)h(type)f(is)h(allo)n(wed)f
(then)-118 5283 y(the)35 b(choices)f(will)g(be)h(enclosed)g(within)e
(the)i(brack)o(ets)g Fl(f)p Fr(,)i(and)e Fl(g)p Fr(.)60
b(F)o(or)35 b(e)o(xample,)i(the)d(follo)n(wing)-118 5404
y(header)25 b(sho)n(ws)e(a)i(function)f(named)h(v)o(ector)n(-fetch)f
(which)g(accepts)h(tw)o(o)g(ar)n(guments.)30 b(The)24
b(\002rst)h(V)-13 b(,)25 b(is)-118 5524 y(a)g(v)o(ector)l(,)f(the)h
(second)g(I,)g(is)f(an)h(inte)o(ger)-5 b(.)29 b(The)c(term)g(e)o(xpr)f
(refers)i(to)e(a)h(type)g(of)g(function.)p -118 5608
1418 4 v -6 5699 a Fj(1)31 5729 y Fp(\224LSP\224)c(backw)o(ards!)-6
5828 y Fj(2)31 5858 y Fp(J.)g(B.)g(Marti,)f(A.)g(C.)h(Hearn,)f(M.)g(L.)
g(Griss,)h(C.)g(Griss:)26 b(The)20 b(Standard)f(Lisp)h(Report)1629
6066 y Fr(1)p eop
%%Page: 2 10
2 9 bop 118 -18 a Fr(2)118 357 y Fq(\(v)o(ector)l(-fetch)27
b(V)-9 b(:v)o(ector)26 b(I:integer\):)32 b(any)1797 b
Fi(e)n(xpr)118 478 y Fr(The)25 b(v)n(alue)f(returned)h(is)f(the)h(i')n
(th)f(element)h(of)g(the)f(v)o(ector)h(V)-13 b(.)118
728 y(W)l(ithin)36 b(compiled)f(code,)40 b(some)d(function)f(calls)g
(are)i(replaced)f(by)f(a)i(sequence)f(of)f(instructions)118
849 y(whose)25 b(e)o(x)o(ecution)e(is)i(equi)n(v)n(alent)e(to)i(a)g
(call)g(on)g(the)g(function.)30 b(Functions)24 b(of)i(this)e(type)g
(will)g(ha)n(v)o(e)h(a)118 969 y(note)g(saying)f(open-compiled)f(ne)o
(xt)h(to)h(the)f(function)g(type.)118 1089 y(Some)i(functions)e(accept)
j(an)e(arbitrary)h(number)f(of)h(ar)n(guments.)32 b(The)26
b(header)g(for)g(these)g(functions)118 1210 y(sho)n(ws)f(a)h(single)f
(ar)n(gument)g(enclosed)h(in)g(square)g(brack)o(ets,)g(indicating)e
(that)i(zero)g(or)g(more)g(occur)n(-)118 1330 y(rences)f(of)g(that)g
(ar)n(gument)f(are)i(allo)n(wed.)118 1790 y Fq(\(and)g([U:f)n(orm]\):)
31 b(extra-boolean)2060 b Fi(fe)n(xpr)118 1910 y Fr(And)22
b(is)h(a)g(function)e(which)i(accepts)g(zero)g(or)g(more)f(ar)n
(guments)g(each)i(of)e(which)h(may)118 2031 y(be)i(an)o(y)f(form.)118
2181 y(In)31 b(some)e(cases,)k(LISP)e(code)f(is)g(gi)n(v)o(en)f(in)h
(the)h(function)e(documentation)g(as)i(the)f(function')-5
b(s)29 b(de\002-)118 2301 y(nition.)41 b(This)28 b(code)h(is)f(gi)n(v)o
(en)f(to)h(clarify)h(the)g(semantics)e(of)i(the)f(function,)h(it)f(is)g
(not)h(a)g(cop)o(y)f(of)h(the)118 2422 y(actual)c(PSL)g(de\002nition.)
118 2762 y Ft(1.3)143 b(Hints)35 b(on)g(Using)g(the)g(PSL)g(System)118
2986 y Fr(The)d(follo)n(wing)f(sub-sections)g(collect)h(a)h(fe)n(w)f
(miscellaneous)f(notes)h(that)g(are)h(further)f(e)o(xpanded)118
3107 y(on)25 b(else)n(where.)30 b(The)o(y)24 b(are)i(pro)o(vided)e
(here)h(simply)e(to)h(get)h(you)f(started.)118 3403 y
Fk(1.3.1)119 b(Loading)30 b(Optional)h(Modules)118 3591
y Fr(Certain)g(modules)d(are)j(not)e(present)h(in)g(the)g(\224k)o
(ernel\224)g(or)g(\224bare-psl\224)h(system,)f(b)n(ut)f(can)i(be)f
(loaded)118 3711 y(as)f(options.)42 b(Some)29 b(of)g(these)f(optional)g
(modules)g(will)g(be)h(automatically)e(loaded)i(when)g(\002rst)g(ref-)
118 3832 y(erenced.)k(Other)25 b(modules)f(may)h(be)g(e)o(xplicitly)e
(loaded)i(by)g(the)g(user)l(,)h(or)f(included)f(by)h(the)g(installer)
118 3952 y(when)34 b(b)n(uilding)f(the)h(PSL)i(core)f(image.)59
b(Optional)33 b(modules)g(can)i(be)f(loaded)h(by)f(e)o(x)o(ecuting)f
(the)118 4072 y(follo)n(wing.)118 4302 y Fh(\(load)59
b(modulename\))118 4531 y Fr(When)35 b(a)h(module)e(is)g(loaded)h(its)g
(name)g(is)f(added)h(to)g(a)g(list)f(referenced)j(by)e(the)g(global)f
(v)n(ariable)118 4652 y(options*.)28 b(The)23 b(modules)f(which)g(mak)o
(e)h(up)f(the)h(B)m(ARE-PSL)h(k)o(ernel)f(are)g(not)f(included)g(in)h
(this)f(list.)118 4772 y(An)i(application)f(of)h(load)g(will)f(be)i
(aborted)f(if)g(the)g(ar)n(gument)g(is)f(found)h(in)g(the)g(options*)e
(list.)30 b(If)24 b(it)g(is)118 4893 y(necessary)j(to)g(load)g(a)g
(module)f(a)h(second)g(time)f(use)h(reload,)h(do)e(not)h(attempt)f(to)g
(alter)h(the)g(v)n(alue)f(of)118 5013 y(options*.)118
5309 y Fk(1.3.2)119 b(Err)n(or)29 b(and)i(W)-8 b(ar)n(ning)31
b(Messages)118 5497 y Fr(Man)o(y)26 b(functions)g(detect)i(and)f
(signal)f(appropriate)h(errors)h(;)g(in)f(man)o(y)f(cases,)i(an)f
(error)h(message)f(is)118 5618 y(printed.)i(The)22 b(error)h
(conditions)e(are)h(gi)n(v)o(en)f(as)h(part)g(of)g(a)h(function')-5
b(s)21 b(de\002nition)g(in)h(the)f(manual.)30 b(An)118
5738 y(error)e(message)f(is)f(preceded)i(by)f(\002)n(v)o(e)g(stars)g
(\(*\);)h(a)g(w)o(arning)e(message)h(is)g(preceded)h(by)f(three.)38
b(F)o(or)118 5858 y(e)o(xample,)25 b(most)f(primiti)n(v)o(e)f
(functions)h(check)i(the)g(type)f(of)g(their)h(ar)n(guments)e(and)i
(display)e(an)i(error)p eop
%%Page: 3 11
3 10 bop -118 -18 a Fg(1.4.)55 b(SWITCHES)26 b(AND)f(GLOB)m(ALS)2068
b Fr(3)-118 289 y(message)31 b(if)g(an)g(ar)n(gument)g(is)g(incorrect.)
50 b(The)32 b(type)f(mismatch)e(error)j(mentions)e(the)h(function)g(in)
-118 409 y(which)24 b(the)h(error)g(w)o(as)g(detected,)g(gi)n(v)o(es)e
(the)i(e)o(xpected)f(type,)h(and)f(prints)g(the)h(actual)g(v)n(alue)f
(passed.)-118 715 y Fh(1)59 b(lisp>)g(\(car)g("STR"\))-118
836 y(*****)g(An)g(attempt)f(was)h(made)g(to)g(do)h(CAR)f(on)g
(`"STR"',)f(which)h(is)g(not)g(a)h(pair)-118 1132 y Fr(The)27
b(switch)f Fq(usermode)i Fr(is)e(used)g(to)h(distinguish)d(between)j
(functions)e(which)i(comprise)f(PSL)h(and)-118 1252 y(functions)19
b(de\002ned)i(by)f(the)g(user)-5 b(.)29 b(When)21 b(the)f(v)n(alue)g
(of)g(this)f(switch)h(is)g(t)g(then)g(the)g(name)h(of)f(each)h(user)
-118 1373 y(de\002ned)32 b(function)e(is)h(\003agged)h
Fq(user)p Fr(.)51 b(When)31 b(a)h(function)e(is)h(about)g(to)g(be)g
(de\002ned,)j(if)d(*usermode)-118 1493 y(is)c(t,)i(there)f(is)f
(another)h(function)f(associated)h(with)f(the)h(name,)g(and)g(the)g
(name)g(is)f(not)g(\003agged)i(lose)-118 1613 y(then)24
b(the)h(follo)n(wing)e(prompt)h(will)g(be)g(displayed.)-118
1875 y Fh(Do)59 b(you)g(really)g(want)g(to)g(redefine)f(the)h(system)f
(function)g(`NAME'?)-118 2127 y Fr(Y)-11 b(ou)35 b(are)h(e)o(xpected)f
(to)f(respond)h(with)g Fh(YES)p Fr(,)f Fh(Y)p Fr(,)h
Fh(NO)p Fr(,)g Fh(N)p Fr(,)g(or)g Fh(B)p Fr(.)g(A)g(response)g(of)h
Fh(B)f Fr(will)f(result)h(in)-118 2248 y(a)g(break)h(loop)e(\(see)i
(Chapter)f(16\).)62 b(After)35 b(quitting)e(the)i(break)h(loop)e(you)h
(should)e(respond)i(with)-118 2368 y Fh(YES)p Fr(,)f
Fh(Y)p Fr(,)h Fh(NO)p Fr(,)g(or)h Fh(N)f Fr(\(see)g(yesp)g(in)g
(Chapter)h(15\).)62 b(Unless)34 b(you)h(consider)g(yourself)g(an)g(e)o
(xpert)g(it)-118 2488 y(is)g(dangerous)g(to)g(gi)n(v)o(e)f(an)i(af)n
(\002rmati)n(v)o(e)e(response.)62 b(It)36 b(is)f(best)g(to)g(simply)f
(gi)n(v)o(e)g(your)h(function)g(a)-118 2609 y(dif)n(ferent)30
b(name.)47 b(If)30 b(the)h(switch)e Fq(r)n(edefmsg)i
Fr(is)f(set)g(to)g(t)g(then)g(whene)n(v)o(er)g(a)g(function)g(is)f
(rede\002ned)-118 2729 y(the)c(message)-118 3035 y Fh(***)59
b(Function)f(`NAME')g(has)i(been)e(redefined)-118 3332
y Fr(will)24 b(be)h(printed.)-118 3462 y(If)g(an)g(identi\002er)g(is)f
(\003agged)h(LOSE)g(then)g(it)f(cannot)h(be)g(assigned)f(a)h
(functional)f(de\002nition.)-118 3768 y Fh(***)59 b(`NAME')f(has)i(not)
f(been)g(defined,)e(because)i(it)g(is)g(flagged)g(LOSE)-118
4170 y Ft(1.4)143 b(Switches)34 b(and)h(Globals)-118
4413 y Fr(Generally)-6 b(,)30 b(the)f(name)g(of)h(an)f(identi\002er)g
(which)g(represents)h(a)f(switch)g(will)f(start)h(with)g(a)h
(\224*\224.)44 b(F)o(or)-118 4534 y(e)o(xample,)24 b(*redefmsg)h(and)h
(*usermode)e(are)i(switches.)32 b(The)25 b(v)n(alue)g(of)g(a)h(switch)e
(is)h(modi\002ed)g(with)-118 4654 y(the)i(functions)f(on)i(and)f(of)n
(f.)38 b(Note)27 b(that)g(in)g(the)g(e)o(xample)g(belo)n(w)-6
b(,)27 b(the)g(pre\002x)h(\224*\224)g(is)e(omitted)g(when)-118
4774 y(using)e(on)g(and)h(of)n(f.)-118 5080 y Fh(1)59
b(lisp>)g(\(on)g(redefmsg\))-118 5201 y(nil)-118 5321
y(2)g(lisp>)g(*redefmsg)-118 5442 y(t)-118 5738 y Fr(The)21
b(name)h(of)f(an)h(identi\002er)f(which)h(represents)f(a)h(global)f
(ends)g(with)g(\224*\224.)30 b(options*)19 b(is)i(an)h(e)o(xample)-118
5858 y(of)j(a)g(global.)p eop
%%Page: 4 12
4 11 bop 118 -18 a Fr(4)118 289 y Ft(1.5)143 b(Compilation)33
b(V)-14 b(ersus)34 b(Inter)o(pr)m(etation)118 512 y Fr(PSL)e(uses)f
(both)g(compiled)f(and)h(interpreted)g(code.)51 b(If)31
b(compiled,)h(a)g(function)e(usually)g(e)o(x)o(ecutes)118
633 y(f)o(aster)35 b(and)g(is)f(smaller)-5 b(.)59 b(Ho)n(we)n(v)o(er)l
(,)36 b(there)f(are)h(some)e(semantic)g(dif)n(ferences)h(of)g(which)f
(the)g(user)118 753 y(should)h(be)h(a)o(w)o(are.)66 b(F)o(or)36
b(e)o(xample,)i(some)d(recursi)n(v)o(e)h(functions)f(are)i(made)f
(non-recursi)n(v)o(e,)i(and)118 873 y(certain)26 b(functions)e(are)i
(open-compiled.)31 b(A)25 b(call)g(to)g(an)h(open-compiled)e(function)g
(is)h(replaced,)h(on)118 994 y(compilation,)d(by)i(a)h(series)f(of)g
(online)f(instructions)f(instead)i(of)g(just)f(being)h(a)g(reference)i
(to)e(another)118 1114 y(function.)30 b(Functions)24
b(compiled)g(open)g(may)h(not)f(do)g(as)h(much)g(type)f(checking.)118
1340 y Fh(1)60 b(lisp>)e(\(de)h(list-first)f(\(p\))h(\(car)g(p\)\))118
1460 y(list-first)118 1581 y(2)h(lisp>)e(\(list-first)g("STR"\))118
1701 y(*****)h(An)g(attempt)f(was)h(made)g(to)h(do)f(CAR)g(on)g
(`"STR',)g(which)f(is)i(not)f(a)g(pair)118 1821 y(3)h(lisp>)e
(\(compile)g('\(list-first\)\))118 1942 y(nil)118 2062
y(4)i(lisp>)e(\(list-first)g("STR"\))118 2183 y(#<Unknown)g(f7000002>)
118 2408 y Fr(T)-8 b(o)31 b(a)n(v)n(oid)g(this)f(the)g(user)i(w)o(ould)
e(ha)n(v)o(e)h(to)f(add)h(code)g(which)g(checks)g(the)g(type)g(of)g(P)h
(before)f(car)h(is)118 2529 y(applied.)118 2868 y Ft(2.1)143
b(Data)35 b(T)-11 b(ypes)118 3120 y Fk(2.1.1)119 b(Data)29
b(T)-9 b(ypes)30 b(and)h(Structur)n(es)f(Supported)i(in)f(PSL)118
3308 y Fq(Data)25 b(T)-7 b(ypes)118 3496 y Fr(In)35 b(contrast)g(to)f
(man)o(y)g(programming)g(languages,)j(type)d(declarations)h(are)h(not)e
(needed)h(in)g(PSL.)118 3616 y(Data)19 b(objects)f(contain)h
(information)e(about)h(their)h(type.)28 b(Some)19 b(functions,)g(lik)o
(e)f(equal,)i(are)g(\224generic\224)118 3736 y(in)25
b(that)f(the)h(result)f(the)o(y)g(return)h(depends)f(on)g(the)h(types)f
(of)h(the)g(ar)n(guments.)118 3962 y Fh(1)60 b(lisp>)e(\(equal)h
("sextuped")e("sextuped"\))118 4083 y(T)118 4203 y(2)j(lisp>)e(\(equal)
h([bencolin)f(beef])g([bencolin)g(beef]\))118 4323 y(T)118
4549 y Fr(F)o(or)24 b(the)f(purposes)f(of)i(input)e(and)i(output,)e(an)
i(appropriate)f(notation)f(is)h(used)g(for)h(each)g(type)f(of)g(data)
118 4670 y(object)33 b(used)f(in)h(PSL.)g(F)o(or)g(e)o(xample,)h
(double)e(quotes)h(are)g(used)g(to)f(delimit)g(the)g(characters)i(of)f
(a)118 4790 y(string.)d(F)o(or)25 b(a)g(full)f(discussion)f(on)i
(syntax)f(see)h(Chapter)g(12.)118 4910 y(The)k(basic)f(data)g(types)g
(supported)g(in)g(PSL)h(and)g(a)g(brief)f(indication)f(of)i(their)f
(representations)g(are)118 5031 y(described)d(belo)n(w)-6
b(.)118 5256 y Fq(integer)288 b Fr(The)24 b(inte)o(gers)g(are)h(also)f
(called)g(\224\002x)o(ed\224)h(numbers.)30 b(The)24 b(magnitude)f(of)i
(inte)o(gers)e(is)704 5377 y(essentially)29 b(unrestricted)h(if)g(the)h
(\224big)f(number\224)g(module,)h Fq(zbig)p Fr(,)h(is)e(loaded.)47
b(The)704 5497 y(notation)28 b(for)h(inte)o(gers)g(is)f(a)i(sequence)g
(of)f(digits)f(in)h(an)g(appropriate)g(radix)h(\(radix)704
5618 y(10)c(is)f(the)h(def)o(ault,)g(which)g(can)g(be)h(o)o(v)o
(erridden)d(by)i(a)h(radi)f(pre\002x,)h(such)f(as)g(2#,)g(8#,)704
5738 y(16#)21 b(etc\).)31 b(There)22 b(are)h(three)g(internal)e
(representations)h(of)g(inte)o(gers,)g(chosen)g(to)f(suit)704
5858 y(the)j(implementation:)p eop
%%Page: 5 13
5 12 bop -118 -18 a Fg(2.1.)55 b(D)l(A)-11 b(T)i(A)24
b(TYPES)2707 b Fr(5)-118 289 y Fq(inum)364 b Fr(A)31
b(signed)f(number)g(\002tting)f(into)h(info.)47 b(Inums)30
b(do)g(not)g(require)h(dynamic)e(storage)467 409 y(and)c(are)h
(represented)f(in)f(the)h(same)g(form)f(as)h(machine)f(inte)o(gers.)
-118 620 y Fq(\002xnum)287 b Fr(A)25 b(full-w)o(ord)f(signed)h(inte)o
(ger)l(,)f(allocated)g(in)g(the)h(heap.)-118 831 y Fq(bignum)259
b Fr(A)40 b(signed)f(inte)o(ger)g(of)g(arbitrary)h(precision,)j
(allocated)c(as)h(a)g(v)o(ector)f(of)g(system)467 951
y(inte)o(gers.)e(These)27 b(inte)o(gers)f(may)g(be)h(not)g(inte)o(gers)
f(for)h(PSL,)h(because)f(the)o(y)f(do)h(not)467 1072
y(\002t)d(into)e(info.)29 b(Be)n(w)o(are.)i(Bignums)22
b(are)i(currently)f(not)f(installed)g(by)h(def)o(ault,)g(to)f(use)467
1192 y(them)j(load)f(the)h(ZBIG)g(module.)-118 1403 y
Fq(\003oat)397 b Fr(A)32 b(\003oating)e(point)g(number)l(,)i(allocated)
f(in)g(the)f(heap.)50 b(The)31 b(precision)g(of)g(\003oats)g(is)467
1523 y(determined)j(solely)f(by)h(the)g(implementation.)57
b(Usually)-6 b(,)35 b(the)f(\003oating)g(numbers)467
1644 y(are)d(equi)n(v)n(alent)e(to)g(system)g(')-5 b(doubles',)31
b(\(64)f(bits\).)46 b(The)30 b(notation)f(for)h(a)h(\003oat)f(is)g(a)
467 1764 y(sequence)36 b(of)g(digits)e(with)h(the)g(addition)f(of)i(a)f
(single)g(\003oating)g(point)g(\()g(.)63 b(\))g(and)467
1885 y(an)35 b(optional)d(e)o(xponent)h(\(E)h Fh(<)p
Fr(inte)o(ger)p Fh(>)p Fr(\).)57 b(\(No)34 b(spaces)g(may)g(occur)g
(between)g(the)467 2005 y(point)d(and)g(the)h(digits\).)49
b(Radix)32 b(10)f(is)g(used)g(for)h(representing)f(the)g(mantissa)f
(and)467 2125 y(the)25 b(e)o(xponent)f(of)h(\003oating)f(point)g
(numbers.)-118 2336 y Fq(id)502 b Fr(An)27 b(identi\002er)f(\(or)h
(id\))f(is)g(an)h(item)e(whose)h(info)g(\002eld)h(points)e(to)h(a)h
(\002)n(v)o(e-item)e(struc-)467 2457 y(ture)i(containing)f(the)h(print)
f(name,)h(property)f(cell,)i(v)n(alue)e(cell,)h(function)f(cell,)h(and)
467 2577 y(package)i(cell.)40 b(This)28 b(structure)f(is)h(contained)f
(in)h(the)g(id)g(space.)40 b(The)28 b(notation)f(for)467
2697 y(an)32 b(id)f(is)f(its)h(print)f(name,)j(an)e(alphanumeric)g
(character)h(sequence.)50 b(One)32 b(al)o(w)o(ays)467
2818 y(refers)e(to)e(a)h(particular)f(id)g(by)g(gi)n(ving)f(its)g
(print)h(name.)42 b(When)28 b(presented)g(with)g(an)467
2938 y(appropriate)33 b(print)e(name,)k(the)d(PSL)h(reader)h(will)d
(\002nd)i(a)g(unique)e(id)h(to)h(associate)467 3059 y(with)28
b(it.)39 b(See)29 b(Chapters)f(4)g(and)g(12)f(for)h(more)g(information)
e(on)i(ids)f(and)h(their)g(syn-)467 3179 y(tax.)j(The)24
b(ids)f(t)h(and)g(nil)f(are)i(considered)f(special)g(in)f(that)h(it)f
(is)h(not)f(possible)g(for)h(the)467 3299 y(user)h(to)g(rede\002ne)h
(their)e(v)n(alue)g(cells.)-118 3510 y Fq(pair)408 b
Fr(A)29 b(primiti)n(v)o(e)c(tw)o(o-item)j(structure)g(which)f(has)i(a)f
(left)g(and)h(right)e(part.)41 b(A)29 b(notation)467
3631 y(called)j(dot-notation)e(is)i(used,)h(with)e(the)g(form:)45
b(\()p Ff(<)p Fr(left-part)p Ff(>)31 b Fr(.)52 b Ff(<)p
Fr(right-part)p Ff(>)p Fr(\).)467 3751 y(The)20 b Ff(<)p
Fr(left-part)p Ff(>)f Fr(is)g(kno)n(wn)g(as)g(the)h(car)g(portion)e
(and)i(the)f Ff(<)p Fr(right-part)p Ff(>)g Fr(as)h(the)f(cdr)467
3871 y(portion.)30 b(The)24 b(parts)g(may)g(be)g(an)o(y)g(item.)30
b(\(Spaces)25 b(are)g(used)f(to)g(resolv)o(e)f(ambiguity)467
3992 y(with)h(\003oats;)h(see)g(Chapter)g(12\).)-118
4203 y Fq(v)o(ector)321 b Fr(A)30 b(primiti)n(v)o(e)d(uniform)i
(structure)g(of)h(items;)g(an)g(inte)o(ger)f(inde)o(x)f(is)h(used)h(to)
f(access)467 4323 y(random)j(v)n(alues)f(in)g(the)h(structure.)52
b(The)31 b(indi)n(vidual)f(elements)h(of)h(a)g(v)o(ector)g(may)467
4444 y(be)26 b(an)o(y)f(item.)32 b(Access)25 b(to)g(v)o(ectors)g(is)g
(by)g(means)g(of)h(functions)e(for)i(inde)o(xing,)e(sub-)467
4564 y(v)o(ector)f(e)o(xtraction)g(and)g(concatenation,)g(de\002ned)g
(in)g(Section)g(7.1.)30 b(In)24 b(the)f(notation)467
4684 y(for)36 b(v)o(ectors,)h(the)e(elements)g(of)g(a)h(v)o(ector)f
(are)h(surrounded)e(by)h(square)h(brack)o(ets:)467 4805
y([item-0)25 b(item-1)f(...)30 b(item-n].)-118 5016 y
Fq(string)336 b Fr(A)29 b(pack)o(ed)h(v)o(ector)e(\(or)h(byte)g(v)o
(ector\))f(of)h(characters;)j(the)d(elements)f(are)i(small)e(in-)467
5136 y(te)o(gers)39 b(representing)g(the)h(ASCII)g(codes)g(for)f(the)h
(characters)g(\(usually)f(inums\).)467 5256 y(The)34
b(elements)e(may)h(be)g(accessed)g(by)g(inde)o(xing,)g(substring)f(and)
h(concatenation)467 5377 y(functions,)22 b(de\002ned)h(in)e(Chapter)i
(6.)30 b(String)22 b(notation)f(consists)f(of)j(a)f(series)g(of)h(char)
n(-)467 5497 y(acters)35 b(enclosed)e(in)h(double)f(quotes,)i(as)f(in)g
(\224THIS)g(IS)h(A)f(STRING\224.)59 b(A)34 b(quote)467
5618 y(is)c(included)f(by)g(doubling)f(it,)i(as)g(in)f(\224HE)h(SAID,)g
(\224\224LISP\224\224\224.)47 b(A)30 b(string)f(may)g(be)467
5738 y(input)24 b(across)g(the)h(end)f(of)h(a)g(line)f(b)n(ut)g(a)h(w)o
(arning)f(will)f(be)i(gi)n(v)o(en)e(unless)h(the)g(switch)467
5858 y Fq(eolinstringok)h Fr(is)g(non-nil)f(\(see)h(Chapter)g(12\).)p
eop
%%Page: 6 14
6 13 bop 118 -18 a Fr(6)118 289 y Fq(w-v)o(ector)217
b Fr(A)19 b(v)o(ector)f(of)h(machine-sized)f(w)o(ords,)i(used)e(to)h
(implement)e(such)h(things)g(as)h(\002xnums,)704 409
y(bignums,)k(etc.)30 b(The)25 b(elements)f(are)h(not)g(considered)f(to)
g(be)h(items,)f(and)g(are)i(not)e(e)o(x-)704 529 y(amined)g(by)g(the)h
(garbage)g(collector)-5 b(.)118 737 y Fq(byte-v)o(ector)107
b Fr(A)27 b(v)o(ector)f(of)h(bytes.)37 b(Internally)26
b(a)i(byte-v)o(ector)e(is)h(the)f(same)h(as)g(a)h(string,)e(b)n(ut)g
(it)h(is)704 857 y(printed)d(dif)n(ferently)g(as)h(a)g(v)o(ector)f(of)h
(inte)o(gers)f(instead)g(of)h(characters.)118 1064 y
Fq(code-pointer)51 b Fr(This)28 b(item)h(is)g(used)g(to)g(refer)h(to)f
(the)h(entry)f(point)f(of)h(compiled)g(functions)f(\(e)o(xprs,)704
1185 y(fe)o(xprs,)23 b(macros,)g(etc.\),)h(permitting)d(compiled)i
(functions)f(to)h(be)g(renamed,)h(passed)704 1305 y(around)37
b(anon)o(ymously)-6 b(,)39 b(etc.)70 b(Ne)n(w)38 b(code-pointers)f(are)
i(created)g(by)f(the)f(loader)704 1426 y(\(lap,)23 b(f)o(asl\))g(and)f
(associated)h(functions.)29 b(The)o(y)22 b(can)h(be)g(printed;)f(the)h
(printing)e(func-)704 1546 y(tion)33 b(prints)f(the)i(number)f(of)h(ar)
n(guments)g(e)o(xpected)f(as)h(well)f(as)h(the)g(entry)g(point.)704
1666 y(The)29 b(v)n(alue)f(appears)h(in)g(the)g(con)l(v)o(ention)e(of)i
(the)g(implementation)e(\(e.g.)43 b(#)p Ff(<)p Fr(Code)704
1787 y(A)25 b(N)p Ff(>)p Fr(,)f(where)h(A)g(is)g(the)f(number)h(of)f
(ar)n(guments)h(and)f(N)h(is)g(the)f(entry)h(point\).)118
2058 y Fq(Other)h(Notational)e(Con)l(v)o(entions)118
2247 y Fr(Certain)39 b(functional)e(ar)n(guments)h(can)h(be)g(an)o(y)f
(of)g(a)h(number)f(of)g(types.)71 b(F)o(or)39 b(con)l(v)o(enience,)i
(we)118 2368 y(gi)n(v)o(e)30 b(these)h(commonly)e(used)i(sets)f(a)i
(name.)49 b(W)-8 b(e)31 b(refer)i(to)d(these)h(sets)g(as)g
(\224classes\224)g(of)g(primiti)n(v)o(e)118 2488 y(data)h(types.)51
b(In)32 b(addition)f(to)g(the)h(types)g(described)f(abo)o(v)o(e)g(and)h
(the)g(names)f(for)h(classes)g(of)g(types)118 2608 y(gi)n(v)o(en)f
(belo)n(w)-6 b(,)32 b(we)g(use)g(the)g(follo)n(wing)e(con)l(v)o
(entions)g(in)i(the)f(manual.)52 b Fl(f)p Fr(XXX,)32
b(YYY)p Fl(g)f Fr(indicates)118 2729 y(that)c(either)f(data)h(type)g
(XXX)g(or)g(data)g(type)f(YYY)h(will)f(do.)36 b Fl(f)p
Fr(XXX)p Fl(g)p Fr(-)p Fl(f)p Fr(YYY)p Fl(g)26 b Fr(indicates)h(that)f
(an)o(y)118 2849 y(object)20 b(of)g(type)f(XXX)h(can)g(be)g(used)g(e)o
(xcept)f(those)g(of)h(type)g(YYY)-9 b(;)19 b(in)h(this)f(case,)i(YYY)f
(is)f(a)h(subset)f(of)118 2969 y(XXX.)j(F)o(or)g(e)o(xample,)g
Fl(f)p Fr(inte)o(ger)l(,)g(\003oat)p Fl(g)g Fr(indicates)g(that)f
(either)h(an)h(inte)o(ger)e(or)i(a)f(\003oat)h(is)e(acceptable;)118
3090 y Fl(f)p Fr(an)o(y)p Fl(g)p Fr(-)p Fl(f)p Fr(v)o(ector)p
Fl(g)i Fr(means)i(an)o(y)f(type)g(e)o(xcept)h(a)g(v)o(ector)-5
b(.)118 3324 y Fq(any)543 b Fr(An)o(y)24 b(of)h(the)h(types)e(gi)n(v)o
(en)g(abo)o(v)o(e.)31 b(S-e)o(xpression)25 b(is)f(another)i(term)f(for)
g(an)o(y)-6 b(.)31 b(All)816 3444 y(PSL)25 b(entities)f(ha)n(v)o(e)g
(some)h(v)n(alue)f(unless)g(an)h(error)g(occurs)g(during)f(e)n(v)n
(aluation.)118 3651 y Fq(atom)482 b Fr(The)24 b(class)h(an)o(y-pair.)
118 3859 y Fq(boolean)366 b Fr(The)24 b(class)g(of)g(global)g(v)n
(ariables)f(t,)h(nil,)g(or)g(their)g(respecti)n(v)o(e)f(v)n(alues,)h
(t,)g(nil.)29 b(\(See)816 3979 y(Section)24 b(4.6\).)118
4186 y Fq(character)290 b Fr(Inte)o(gers)27 b(in)h(the)g(range)g(of)g
(0)g(to)f(255)h(without)f(128)g(representing)h(ASCII)h(char)n(-)816
4307 y(acter)c(codes.)31 b(These)25 b(are)g(distinct)e(from)i
(single-character)g(ids.)118 4514 y Fq(constant)339 b
Fr(The)26 b(class)f(of)h(inte)o(ger)l(,)g(\003oat,)g(string,)f(v)o
(ector)l(,)h(code-pointer.)33 b(A)26 b(constant)f(e)n(v)n(al-)816
4634 y(uates)f(to)h(itself)f(\(see)h(the)g(de\002nition)f(of)h(e)n(v)n
(al)e(in)i(Chapter)g(11\).)118 4842 y Fq(extra-boolean)112
b Fr(An)o(y)25 b(v)n(alue)h(in)g(the)g(system.)35 b(An)o(ything)24
b(that)i(is)g(not)g(nil)g(has)g(the)h(boolean)f(inter)n(-)816
4962 y(pretation)e(t.)118 5170 y Fq(ftype)483 b Fr(The)33
b(set)h(of)f(ids)g(\(e)o(xpr)l(,)j(fe)o(xpr)l(,)f(macro,)h(and)e(ne)o
(xpr\),)h(which)e(represent)h(de\002n-)816 5290 y(able)i(function)g
(types.)65 b(The)37 b(ftype)f(is)g(only)g(an)g(attrib)n(ute)g(of)h
(identi\002ers,)i(and)816 5410 y(is)33 b(not)h(associated)g(with)f
(either)h(e)o(x)o(ecutable)g(code)g(code-pointers)g(or)g(lambda)816
5531 y(e)o(xpressions.)118 5738 y Fq(io-channel)256 b
Fr(A)30 b(small)g(inte)o(ger)g(representing)g(an)h(io)f(channel)g
(\(see)h(Chapter)h(12)e(for)h(a)g(com-)816 5858 y(plete)24
b(discussion)f(of)i(io-channels\).)p eop
%%Page: 7 15
7 14 bop -118 -18 a Fg(2.1.)55 b(D)l(A)-11 b(T)i(A)24
b(TYPES)2707 b Fr(7)-118 289 y Fq(number)361 b Fr(The)25
b(class)g(of)g(inte)o(ger)l(,)f(\003oat.)-118 493 y Fq(x-v)o(ector)350
b Fr(An)o(y)24 b(kind)g(of)h(v)o(ector;)f(i.e.)31 b(a)25
b(string,)f(v)o(ector)l(,)g(w-v)o(ector)l(,)h(or)g(w)o(ord.)-118
697 y Fq(Unde\002ned)262 b Fr(An)32 b(implementation-dependent)c(v)n
(alue)j(returned)h(by)f(some)g(lo)n(w-le)n(v)o(el)e(func-)579
817 y(tions;)24 b(i.e.)30 b(the)25 b(user)g(should)f(not)g(depend)g(on)
h(this)f(v)n(alue.)-118 1022 y Fq(None)h(Retur)o(ned)50
b Fr(A)28 b(notational)e(con)l(v)o(enience)i(used)f(to)g(indicate)h
(control)f(functions)f(that)h(do)h(not)579 1142 y(return)g(directly)e
(to)h(the)g(calling)g(point,)f(and)h(hence)h(do)f(not)g(return)g(a)g(v)
n(alue)g(\(for)579 1262 y(e)o(xample,)d(see)h(the)g(function)f(go)h(in)
f(Chapter)h(8\).)-118 1530 y Fq(Structur)n(es)-118 1718
y Fr(Structures)e(are)h(entities)f(created)h(using)e(pairs.)30
b(Lists)22 b(are)i(structures)f(v)o(ery)g(commonly)f(required)h(as)-118
1838 y(parameters)30 b(to)f(functions.)44 b(If)30 b(a)g(list)f(of)g
(homogeneous)g(entities)f(is)h(required)h(by)f(a)h(function,)g(this)
-118 1958 y(class)21 b(is)g(denoted)g(by)g(xxx-list,)f(in)h(which)g
(xxx)g(is)g(the)g(name)g(of)h(a)f(class)h(of)f(primiti)n(v)o(es)e(or)i
(structures.)-118 2079 y(Thus)j(a)h(list)f(of)h(ids)f(is)g(an)h
(id-list,)f(a)h(list)f(of)g(inte)o(gers)g(is)h(an)g(inte)o(ger)n
(-list,)e(and)h(so)h(on.)-118 2308 y Fq(list)275 b Fr(A)40
b(list)e(is)h(recursi)n(v)o(ely)g(de\002ned)h(as)f(nil)g(or)h(the)f
(pair)h(\(an)o(y)f(.)75 b(list\).)f(A)40 b(special)f(nota-)285
2429 y(tion)31 b(called)h(list-notation)e(is)i(used)f(to)h(represent)g
(lists.)52 b(List-notation)30 b(eliminates)g(the)285
2549 y(e)o(xtra)e(parentheses)g(and)g(dots)f(required)h(by)g
(dot-notation,)f(as)h(illustrated)f(belo)n(w)-6 b(.)39
b(List-)285 2669 y(notation)23 b(and)i(dot-notation)e(may)i(be)g(mix)o
(ed,)e(as)i(sho)n(wn)e(in)i(the)f(second)h(e)o(xample.)719
2899 y Fh(DOT)59 b(NOTATION)1194 b(LIST)58 b(NOTATION)719
3019 y(\(A)h(.)h(\(B)f(.)h(\(C)f(.)g(NIL\)\)\))776 b(\(A)59
b(B)h(C\))719 3139 y(\(\(A)f(.)g(\(B\)\))g(.)h(C\))1135
b(\(\(A)59 b(B\))h(.)f(C\))-118 3489 y Fr(Note:)30 b(\(\))25
b(is)g(an)g(alternate)g(input)e(representation)i(of)g(nil.)-118
3719 y Fq(a-list)192 b Fr(An)22 b(a-list,)g(or)h(association)e(list,)h
(is)g(a)h(list)f(in)g(which)g(each)h(element)f(is)g(a)h(pair)l(,)g(the)
f(car)h(part)285 3839 y(being)h(a)h(k)o(e)o(y)g(associated)f(with)g
(the)h(v)n(alue)f(in)g(the)h(cdr)g(part.)-118 4043 y
Fq(f)n(orm)195 b Fr(A)24 b(form)g(is)g(an)g(S-e)o(xpression)f(\(an)o
(y\))h(which)g(is)g(le)o(gally)e(acceptable)j(to)f(e)n(v)n(al;)f(that)g
(is,)h(it)g(is)285 4164 y(syntactically)f(and)i(semantically)f
(accepted)h(by)g(the)f(interpreter)h(or)g(the)g(compiler)-5
b(.)-118 4368 y Fq(lambda)82 b Fr(A)35 b(lambda)f(e)o(xpression)f(must)
h(be)h(of)f(the)h(follo)n(wing)e(form,)j(the)f(square)g(brack)o(ets)g
(are)285 4488 y(used)24 b(to)h(indicate)f(zero)i(or)e(more)h
(occurances)h(of)e(an)h(e)o(xpression.)1122 4759 y Fh(\(LAMBDA)58
b(<parameters>)f([<form>]\))285 5151 y Fr(The)34 b(e)o(xpression)f
Fh(<parameters>)f Fr(is)h(a)i(list)e(of)h(ids)g(which)f(represents)i
(the)f(formal)285 5271 y(parameters)22 b(or)g(the)g(body)f(\(the)h
(sequence)g(of)g Fh(<form>)p Fr(s\).)28 b(The)22 b(e)n(v)n(aluation)e
(of)i(the)g(body)285 5392 y(tak)o(es)j(place)g(as)g(if)f(the)h
Fh(<form>)p Fr(s)e(were)j(enclosed)e(within)g(a)h(progn.)-118
5596 y Fq(function)50 b Fr(A)23 b(lambda)f(e)o(xpression)f(or)i(a)g
(code-pointer)l(,)g(the)f(function)g(type)h(is)f(assumed)g(to)g(be)h(e)
o(xpr)-5 b(.)285 5716 y(This)27 b(means)g(that)h(the)f(ar)n(guments)g
(will)g(be)h(e)n(v)n(aluated,)f(and)h(that)f(the)h(number)f(of)h(ar)n
(gu-)285 5837 y(ments)c(must)g(agree)h(with)f(the)h(number)f(of)h
(parameters.)p eop
%%Page: 8 16
8 15 bop 118 -18 a Fr(8)118 289 y Fk(2.1.2)119 b(Pr)n(edicates)30
b(Useful)g(with)h(Data)e(T)-9 b(ypes)118 476 y Fr(Most)28
b(functions)h(in)g(this)f(Section)h(return)h(t)f(if)g(the)g(condition)f
(de\002ned)i(is)e(met)h(and)h(nil)e(if)i(it)e(is)h(not.)118
597 y(Exceptions)24 b(are)h(noted.)30 b(De\002ned)c(are)f
(type-checking)g(functions)e(and)i(elementary)g(comparisons.)118
860 y Fq(Functions)h(f)n(or)e(T)-9 b(esting)26 b(Equality)118
1047 y Fr(Functions)g(for)h(testing)f(equality)g(are)i(listed)e(belo)n
(w)-6 b(.)36 b(F)o(or)27 b(other)f(functions)g(comparing)g(arithmetic)
118 1168 y(v)n(alues)e(see)h(Chapter)h(3.)118 1507 y
Fq(\(eq)g(U:any)f(V)-9 b(:any\):)31 b(boolean)1628 b
Fi(open-compiled)24 b(e)n(xpr)142 1627 y Fr(Returns)g(t)g(if)f(U)h
(points)f(to)g(the)h(same)f(object)h(as)g(V)-13 b(,)24
b(i.e.)30 b(if)24 b(the)o(y)f(are)h(identical)f(items.)118
1747 y(Eq)k(is)g(not)f(a)h(reliable)g(comparison)f(between)h(numeric)g
(ar)n(guments.)37 b(This)26 b(function)118 1868 y(should)e(only)g(be)h
(used)g(in)f(special)h(circumstances.)30 b(Normally)-6
b(,)23 b(equality)h(should)g(be)118 1988 y(tested)g(with)g(equal,)h
(described)g(belo)n(w)-6 b(.)118 2357 y Fq(\(eqn)26 b(U:any)f(V)-9
b(:any\):)31 b(boolean)2190 b Fi(e)n(xpr)147 2477 y Fr(Returns)29
b(t)f(if)h(U)f(and)h(V)g(are)g(eq)g(or)g(if)f(U)h(and)g(V)g(are)g
(numbers)f(and)g(ha)n(v)o(e)h(the)f(same)118 2598 y(v)n(alue)c(and)h
(type.)118 2967 y Fq(\(equal)h(U:any)f(V)-9 b(:any\):)31
b(boolean)2112 b Fi(e)n(xpr)148 3087 y Fr(Returns)29
b(t)g(if)g(U)h(and)f(V)h(are)g(the)f(same.)44 b(A)29
b(usually)g(v)n(alid)f(heuristic)h(is)f(that)h(if)h(tw)o(o)118
3208 y(objects)19 b(look)f(the)h(same)g(if)h(printed)e(with)h(the)g
(function)f(print,)i(the)o(y)e(are)i(equal.)29 b(Equal)118
3328 y(is)24 b(open-compiled)g(as)h(eq)g(if)g(one)f(ar)n(gument)h(is)f
(kno)n(wn)g(to)g(be)h(an)g(atom.)357 3486 y Fh(\(de)59
b(equal)g(\(u)g(v\))477 3607 y(\(cond)f(\(\(and)h(\(pairp)g(u\))g
(\(pairp)f(v\)\))895 3727 y(\(and)h(\(equal)g(\(car)f(u\))i(\(car)f
(v\)\))1194 3848 y(\(equal)g(\(cdr)f(u\))i(\(cdr)f(v\)\)\)\))835
3968 y(\(\(and)g(\(stringp)f(u\))h(\(stringp)f(v\)\))895
4088 y(\(string=)g(u)i(v\)\))835 4209 y(\(\(and)f(\(vectorp)f(u\))h
(\(vectorp)f(v\)\))895 4329 y(\(vector-equal)f(u)j(v\)\))835
4449 y(\(t)g(\(eqn)f(u)g(v\)\)\)\))357 4655 y(1)h(lisp>)e(\(setq)h(x)h
('\(lisa\))e(y)h(x\))357 4775 y(\(LISA\))357 4895 y(2)h(lisp>)e(\(eq)i
(x)f(y\))357 5016 y(T)357 5136 y(3)h(lisp>)e(\(eq)i(x)f('\(lisa\)\))357
5256 y(NIL)357 5377 y(4)h(lisp>)e(\(equal)h(x)g('\(lisa\)\))357
5497 y(T)357 5618 y(5)h(lisp>)e(\(eq)i(1.0)f(1.0\))357
5738 y(NIL)357 5858 y(6)h(lisp>)e(\(eqn)h(1.0)g(1.0\))p
eop
%%Page: 9 17
9 16 bop -118 -18 a Fg(2.1.)55 b(D)l(A)-11 b(T)i(A)24
b(TYPES)2707 b Fr(9)121 289 y Fh(T)121 409 y(7)60 b(lisp>)e(\(equal)h
(0)g(0.0\))121 529 y(NIL)-118 1029 y Fq(\(neq)26 b(U:any)f(V)-9
b(:any\):)31 b(boolean)2115 b Fi(macr)l(o)-93 1150 y
Fr(\(not)24 b(\(equal)h(U)g(V\)\).)-118 1526 y Fq(\(ne)h(U:any)f(V)-9
b(:any\):)31 b(boolean)1628 b Fi(open-compiled)24 b(e)n(xpr)-93
1647 y Fr(\(not)g(\(eq)h(U)g(V\)\).)-118 2023 y Fq(\(eqstr)h(U:any)f(V)
-9 b(:any\):)31 b(boolean)2129 b Fi(e)n(xpr)-76 2143
y Fr(Compare)42 b(tw)o(o)f(strings,)k(for)d(e)o(xact)f(\(case)h
(sensiti)n(v)o(e\))e(equality)-6 b(.)80 b(The)42 b(function)-118
2264 y(string-equal)36 b(\(which)h(is)g(de\002ned)h(in)f(the)g(STRINGS)
i(module\),)g(is)e(not)g(sensiti)n(v)o(e)-118 2384 y(to)24
b(case.)32 b(Eqstr)24 b(returns)g(t)h(if)g(U)g(and)f(V)h(are)h(eq)f(or)
g(if)f(U)h(and)g(V)g(are)g(equal)g(strings.)-118 2761
y Fq(\(eqcar)h(U:any)f(V)-9 b(:any\):)31 b(boolean)2107
b Fi(e)n(xpr)-80 2881 y Fr(T)-7 b(ests)38 b(whether)g(\(eq)h(\(car)g
(U\))f(V\)\).)h(If)f(the)h(\002rst)f(ar)n(gument)g(is)f(not)h(a)h(pair)
l(,)i(eqcar)-118 3001 y(returns)24 b(nil.)-118 3326 y
Fq(Pr)n(edicates)i(f)n(or)e(T)-9 b(esting)26 b(the)f(T)-7
b(ype)26 b(of)f(an)g(Object)-118 3748 y(\(atom)g(U:any\):)31
b(boolean)1788 b Fi(open-compiled)24 b(e)n(xpr)-93 3868
y Fr(Returns)h(t)f(if)h(U)g(is)f(not)g(a)i(pair)-5 b(.)-118
4244 y Fq(\(codep)26 b(U:any\):)31 b(boolean)1755 b Fi(open-compiled)24
b(e)n(xpr)-93 4365 y Fr(Returns)h(t)f(if)h(U)g(is)f(a)h(code-pointer)-5
b(.)-118 4463 y Fq(\(constantp)26 b(U:any\):)31 b(boolean)2206
b Fi(e)n(xpr)-83 4584 y Fr(Returns)36 b(t)f(if)g(U)g(is)g(a)h(constant)
e(\(that)h(is,)j(neither)d(a)g(pair)h(nor)f(an)g(id\).)62
b(Note)35 b(that)-118 4704 y(v)o(ectors)24 b(are)i(considered)e
(constants.)-118 4932 y Fq(\(\002xp)i(U:any\):)31 b(boolean)1843
b Fi(open-compiled)24 b(e)n(xpr)-94 5053 y Fr(Returns)h(t)f(if)g(U)h
(is)f(an)g(inte)o(ger)-5 b(.)30 b(If)24 b(BIG)h(is)f(loaded,)g(this)g
(function)f(also)h(returns)h(t)f(for)-118 5173 y(bignums.)-118
5421 y Fq(\(\003oatp)i(U:any\):)31 b(boolean)1760 b Fi(open-compiled)24
b(e)n(xpr)-93 5542 y Fr(Returns)h(t)f(if)h(U)g(is)f(a)h(\003oat.)-118
5770 y Fq(\(idp)g(U:any\):)32 b(boolean)1865 b Fi(open-compiled)24
b(e)n(xpr)-93 5890 y Fr(Returns)h(t)f(if)h(U)g(is)f(an)h(id.)p
eop
%%Page: 10 18
10 17 bop 118 -18 a Fr(10)118 357 y Fq(\(null)25 b(U:any\):)32
b(boolean)1837 b Fi(open-compiled)24 b(e)n(xpr)150 478
y Fr(Returns)33 b(t)f(if)g(U)g(is)g(nil.)52 b(This)31
b(is)h(e)o(xactly)f(the)h(same)g(function)f(as)i(not,)g(de\002ned)g(in)
118 598 y(Section)25 b(2.2.3.)30 b(Both)25 b(are)g(a)n(v)n(ailable)f
(solely)g(to)h(increase)g(readability)-6 b(.)118 847
y Fq(\(number)o(p)27 b(U:any\):)32 b(boolean)1611 b Fi(open-compiled)24
b(e)n(xpr)143 967 y Fr(Returns)h(t)f(if)h(U)g(is)f(a)i(number)e(\(inte)
o(ger)g(or)h(\003oat\).)118 1216 y Fq(\(pair)o(p)h(U:any\):)31
b(boolean)1772 b Fi(open-compiled)24 b(e)n(xpr)143 1336
y Fr(Returns)h(t)f(if)h(U)g(is)f(a)i(pair)-5 b(.)118
1584 y Fq(\(stringp)26 b(U:any\):)31 b(boolean)1699 b
Fi(open-compiled)24 b(e)n(xpr)143 1705 y Fr(Returns)h(t)f(if)h(U)g(is)f
(a)i(string.)118 1953 y Fq(\(v)o(ector)o(p)g(U:any\):)31
b(boolean)1685 b Fi(open-compiled)24 b(e)n(xpr)143 2074
y Fr(Returns)h(t)f(if)h(U)g(is)f(a)i(v)o(ector)-5 b(.)118
2586 y Fq(Boolean)25 b(Functions)118 2802 y Fr(Boolean)36
b(functions)e(return)i(nil)e(for)i(f)o(alse;)41 b(an)o(ything)33
b(non-nil)i(is)g(tak)o(en)g(to)g(be)h(true,)i(although)c(a)118
2923 y(con)l(v)o(entional)c(w)o(ay)i(of)f(representing)g(truth)g(is)g
(as)h(t.)51 b(Note)31 b(that)g(t)h(al)o(w)o(ays)f(e)n(v)n(aluates)g(to)
g(itself,)h(its)118 3043 y(v)n(alue)i(cannot)h(be)g(rede\002ned.)62
b(Nil)35 b(may)f(also)h(be)g(represented)g(as)g(\(\).)62
b(As)34 b(a)i(matter)e(of)h(style,)i(\(\))118 3164 y(should)29
b(be)h(used)g(to)g(refer)h(to)f(an)g(empty)g(list.)46
b(The)30 b(Boolean)g(functions)f(and,)j(or)l(,)f(and)f(not)g(can)g(be)
118 3284 y(applied)e(to)f(an)i(object)e(of)i(an)o(y)e(type.)41
b(And)28 b(and)g(or)g(may)g(also)g(be)g(used)g(as)g(control)f
(structures)h(\(see)118 3404 y(Section)d(8.2)f(for)h(more)g
(information\).)118 3538 y(Since)j(PSL)f(treats)g(an)o(y)g(v)n(alue)f
(which)h(is)f(non-nil)g(as)i(a)f(representation)f(for)i(true,)f(there)h
(is)e(no)h(clear)118 3659 y(distinction)36 b(between)j(an)f(arbitrary)h
(function)f(and)g(a)h(boolean)f(function.)70 b(Ho)n(we)n(v)o(er)l(,)41
b(the)d(three)118 3779 y(functions)32 b(presented)i(here)g(are)g(by)f
(f)o(ar)h(the)f(most)g(useful)g(in)g(constructing)f(more)h(comple)o(x)f
(tests)118 3899 y(from)25 b(simple)e(predicates.)118
4252 y Fq(\(not)j(U:any\):)31 b(boolean)1865 b Fi(open-compiled)24
b(e)n(xpr)149 4372 y Fr(Returns)31 b(t)f(if)h(U)f(is)g(nil.)48
b(This)30 b(is)g(e)o(xactly)g(the)g(same)h(function)f(as)g(null,)i
(de\002ned)f(in)118 4493 y(Section)25 b(2.2.2.)30 b(Both)25
b(are)g(a)n(v)n(ailable)f(solely)g(to)h(increase)g(readability)-6
b(.)118 4875 y Fq(\(and)26 b([U:f)n(orm]\):)31 b(extra-boolean)1443
b Fi(open-compiled)24 b(fe)n(xpr)148 4996 y Fr(And)30
b(e)n(v)n(aluates)e(each)j(U)f(until)e(a)j(v)n(alue)e(of)h(nil)f(is)g
(found)h(or)g(the)f(end)h(of)g(the)g(list)f(is)118 5116
y(encountered.)59 b(If)34 b(a)h(non-nil)e(v)n(alue)h(is)f(the)h(last)g
(v)n(alue,)i(it)d(is)h(returned;)39 b(otherwise)118 5237
y(nil)31 b(is)g(returned.)51 b(Note)32 b(that)f(and)g(called)h(with)f
(zero)h(ar)n(guments)f(returns)g(t.)51 b(In)31 b(the)118
5357 y(e)o(xample)24 b(which)h(follo)n(ws)f(and)h(is)f(used)h(to)g
(select)g(the)g(\002rst)g(element)g(of)g(a)g(list,)f(if)h(the)118
5477 y(call)g(on)f(pairp)h(returns)g(nil)f(then)g(car)i(will)e(not)g
(be)h(applied.)357 5738 y Fh(1)60 b(lisp>)e(\(\(lambda)g(\(p\))i(\(and)
e(\(pairp)h(p\))g(\(car)g(p\)\)\))119 b('\(robin\)\))357
5858 y(robin)p eop
%%Page: 11 19
11 18 bop -118 -18 a Fg(2.1.)55 b(D)l(A)-11 b(T)i(A)24
b(TYPES)2658 b Fr(11)-118 357 y Fq(\(or)25 b([U:f)n(orm]\):)31
b(extra-boolean)1509 b Fi(open-compiled)24 b(fe)n(xpr)-86
478 y Fr(U)32 b(is)f(an)o(y)g(number)g(of)h(e)o(xpressions)e(which)i
(are)g(e)n(v)n(aluated)f(in)g(order)h(of)g(their)g(ap-)-118
598 y(pearance.)46 b(If)29 b(one)h(is)f(found)g(to)g(be)g(non-nil,)h
(it)f(is)g(returned)g(as)h(the)f(v)n(alue)g(of)g(or)-5
b(.)45 b(If)-118 718 y(all)31 b(are)g(nil,)h(nil)e(is)h(returned.)49
b(Note)30 b(that)h(if)g(or)g(is)f(called)h(with)f(zero)i(ar)n(guments,)
f(it)-118 839 y(returns)24 b(nil.)30 b(The)25 b(follo)n(wing)e
(function)h(de\002nes)h(a)g(predicate)g(for)g(numbers.)121
1032 y Fh(\(de)59 b(number-p)f(\(n\))241 1153 y(\(or)h(\(fixp)f(n\))i
(\(floatp)e(n\)\)\))-118 1466 y Fk(2.1.3)119 b(Con)-5
b(v)o(erting)30 b(Data)g(T)-9 b(ypes)-118 1660 y Fr(The)24
b(follo)n(wing)d(functions)i(are)i(used)e(in)g(con)l(v)o(erting)g(data)
h(items)e(from)i(one)f(type)h(to)f(another)-5 b(.)30
b(The)o(y)-118 1780 y(are)c(grouped)f(according)g(to)g(the)g(type)g
(returned.)32 b(Numeric)25 b(types)g(may)g(be)g(con)l(v)o(erted)g
(using)f(func-)-118 1900 y(tions)g(such)g(as)h(\002x)g(and)g(\003oat,)g
(described)f(in)h(Section)g(3.2.)-118 2242 y Fq(\(inter)o(n)h
(U:id,string\):)31 b(id)2409 b Fi(e)n(xpr)-91 2363 y
Fr(Returns)28 b(an)f(identi\002er)h(from)f(the)g(symbol)f(table)h
(\(also)g(called)g(the)h(id-hash-table\).)-118 2483 y(When)h(the)f(PSL)
h(reader)h(reads)f(a)g(sequence)g(of)g(characters)g(which)f(notate)h
(an)f(id,)h(it)-118 2604 y(will)23 b(apply)h(intern)g(to)g(the)g
(string)g(of)g(characters.)31 b(Therefore,)26 b(it)d(generally)i(does)f
(not)-118 2724 y(mak)o(e)19 b(sense)g(to)g(apply)f(intern)h(to)f(an)i
(id.)28 b(Intern)19 b(will)f(search)i(the)f(symbol)f(table)g(for)i(an)
-118 2844 y(id)f(whose)h(print)f(name)g(matches)h(U.)f(If)i(the)e
(search)h(is)g(successful)f(then)g(the)h(matching)-118
2965 y(id)k(is)h(returned.)30 b(Otherwise)25 b(a)g(ne)n(w)f(id)h(will)f
(be)h(entered)g(into)f(the)g(symbol)f(table)i(and)-118
3085 y(a)h(reference)h(to)f(it)f(will)g(be)g(returned.)34
b(If)26 b(U)g(has)f(more)h(than)f(the)h(maximum)e(number)-118
3205 y(of)h(characters)g(permitted)f(by)h(the)f(implementation,)f(an)i
(error)g(will)f(be)h(signalled.)121 3399 y Fh(*****)59
b(Too)g(many)g(characters)e(to)i(INTERN)-118 3617 y Fr(The)29
b(id)h(which)f(is)g(returned)g(from)g(an)h(application)e(of)i(intern)f
(to)g(a)h(string)f(will)f(ha)n(v)o(e)h(the)h(string)e(as)-118
3737 y(its)22 b(print)g(name.)30 b(Most)22 b(identi\002ers)h(ha)n(v)o
(e)f(lo)n(wercase)h(print)f(names)h(\(e)n(v)o(en)f(though)g(you)h(may)f
(type)h(in)-118 3857 y(lo)n(wer)h(case)i(letters\),)e(b)n(ut)g
(interning)g(\224ABC\224)i(yields)e(an)h(id)f(with)g(a)i(lo)n(wer)e
(case)h(print)f(name.)121 4109 y Fh(1)60 b(lisp>)e(\(eq)h(\(intern)g
("abc"\))f('abc\))121 4229 y(NIL)-118 4478 y Fr(The)28
b(maximum)d(number)i(of)h(characters)h(in)e(an)o(y)g(tok)o(en)g(is)g
(system)g(dependent,)h(around)f(5000)g(can)-118 4598
y(be)e(e)o(xpected)f(to)h(be)g(allo)n(wed.)-118 4940
y Fq(\(newid)h(S:string\):)31 b(id)2538 b Fi(e)n(xpr)-95
5060 y Fr(Allocates)22 b(a)h(ne)n(w)f(identi\002er)h(and)g(sets)f(its)g
(print)g(name)h(to)f(the)h(string)f(S.)h(The)g(identi-)-118
5181 y(\002er)k(is)e(not)h(added)g(to)g(the)f(symbol)g(table)h(\(an)g
(identi\002er)g(which)g(does)f(not)h(appear)g(in)-118
5301 y(the)f(symbol)e(table)h(is)h(said)f(to)h(be)g(uninterned\).)30
b(The)24 b(string)g(is)h(not)f(copied.)121 5497 y Fh(1)60
b(lisp>)e(\(setq)h(new)g(\(newid)f("NEWONE"\)\))121 5618
y(NEWONE)121 5738 y(2)i(lisp>)e(\(eq)h(new)g('newone\))121
5858 y(nil)p eop
%%Page: 12 20
12 19 bop 118 -18 a Fr(12)118 289 y(If)30 b(one)e(refers)i(directly)f
(to)f(an)i(identi\002er)e(\(for)i(e)o(xample)e('ne)n(w)o(one\),)i(the)e
(reader)i(will)f(apply)f(intern)118 409 y(to)22 b(the)h(string)e(of)i
(characters)h(it)e(has)g(read)h(\(\224NEW)o(ONE\224\).)31
b(In)22 b(the)h(e)o(xample,)f(the)g(identi\002er)h(created)118
529 y(by)h(the)f(call)h(on)g(ne)n(wid)e(is)i(dif)n(ferent)f(from)h(the)
f(one)h(created)h(by)e(the)h(reader)h(when)e(it)h(read)g('ne)n(w)o
(one.)118 868 y Fq(\(int2id)h(I:integer\):)32 b(id)2510
b Fi(e)n(xpr)145 989 y Fr(Con)l(v)o(erts)26 b(an)h(inte)o(ger)f(to)g
(an)h(id;)g(this)e(refers)j(to)e(the)h(I')n(th)g(id)f(in)g(the)h(id)f
(space.)37 b(Since)118 1109 y(0)c(...)54 b(255)32 b(correspond)h(to)f
(ASCII)i(characters,)h(int2id)d(with)g(an)h(ar)n(gument)f(in)g(this)118
1230 y(range)25 b(con)l(v)o(erts)e(an)i(ASCII)g(code)g(to)f(the)g
(corresponding)f(single)h(character)h(id.)30 b(The)118
1350 y(id)25 b(NIL)f(is)h(al)o(w)o(ays)f(found)h(by)f
Fh(\(int2id)58 b(128\))p Fr(.)118 1719 y Fq(\(id2int)25
b(D:id\):)32 b(integer)2477 b Fi(e)n(xpr)143 1839 y Fr(Returns)25
b(the)g(id)f(space)h(position)e(of)i(D)g(as)g(a)g(LISP)h(inte)o(ger)-5
b(.)118 2208 y Fq(\(id2string)25 b(D:id\):)32 b(string)2393
b Fi(e)n(xpr)148 2329 y Fr(Get)30 b(name)g(from)g(id)g(space.)47
b(Id2string)29 b(returns)h(the)g(print)f(name)h(of)g(its)g(ar)n(gument)
118 2449 y(as)f(a)f(string.)41 b(This)27 b(is)h(not)g(a)h(cop)o(y)-6
b(,)28 b(so)g(destructi)n(v)o(e)f(operations)g(should)g(not)h(be)h(per)
n(-)118 2569 y(formed)23 b(on)g(the)g(result.)30 b(PSL)24
b(uses)f(an)g(escape)h(con)l(v)o(ention)d(for)j(notating)e
(identi\002ers)118 2690 y(which)e(contain)h(special)f(characters.)30
b(An)o(y)20 b(character)i(which)e(follo)n(ws)g(the)g(character)118
2810 y(!)31 b(is)24 b(considered)g(to)f(be)i(an)f(alphabetic)g
(character)-5 b(.)31 b(In)24 b(the)g(e)o(xample,)g(notice)g(that)f(the)
118 2930 y(character)j(!)31 b(does)25 b(not)f(appear)h(in)g(the)f
(result.)357 3082 y Fh(1)60 b(lisp>)e(\(id2string)g('is-!\045\))357
3202 y("is-\045")118 3596 y Fq(\(string2list)24 b(S:string\):)32
b(inum-list)2067 b Fi(e)n(xpr)140 3716 y Fr(Creates)22
b(a)g(list)e(of)i(length)e(\(add1)i(\(size)f(S\)\),)i(con)l(v)o(erting)
d(the)h(ASCII)i(characters)f(into)118 3837 y(small)i(inte)o(gers.)357
3988 y Fh(1)60 b(lisp>)e(\(string2list)g("STRING"\))357
4108 y(\(83)h(84)h(82)f(73)g(78)h(71\))118 4502 y Fq(\(list2string)24
b(L:inum-list\):)32 b(string)2056 b Fi(e)n(xpr)151 4623
y Fr(Allocates)32 b(a)h(string)f(of)g(the)h(same)f(size)h(as)g(L,)f
(and)h(con)l(v)o(erts)f(small)f(inte)o(gers)h(into)118
4743 y(characters)26 b(according)f(to)g(their)g(ASCII)h(code.)32
b(An)25 b(inte)o(ger)f(outside)h(the)g(range)g(of)g(0)118
4864 y(...)31 b(127)24 b(will)g(result)g(in)h(an)g(error)-5
b(.)118 4994 y Fh(*****)59 b(An)g(attempt)f(was)h(made)g(to)h(do)f
(LISP2CHAR)f(on)h(`N')g(which)g(is)g(not)g(a)h(character)357
5235 y(1)g(lisp>)e(\(list2string)g('\(83)g(84)i(82)f(73)g(78)h(71\)\))
357 5355 y("STRING")118 5750 y Fq(\(string)25 b([I:inum]\):)32
b(string)2306 b Fi(ne)n(xpr)143 5870 y Fr(Creates)26
b(and)e(returns)h(a)g(string)f(containing)g(each)h(of)g(the)g(small)e
(inte)o(gers)p eop
%%Page: 13 21
13 20 bop -118 -18 a Fg(3.1.)55 b(NUMBERS)26 b(AND)e(ARITHMETIC)i
(FUNCTIONS)1294 b Fr(13)121 289 y Fh(1)60 b(lisp>)e(\(string)g(83)i(84)
f(82)g(73)h(78)f(71\))121 409 y("STRING")-118 821 y Fq(\(v)o(ector)25
b([U:any]\):)32 b(v)o(ector)2308 b Fi(ne)n(xpr)-93 942
y Fr(Creates)25 b(and)g(returns)g(a)g(v)o(ector)f(containing)g(all)g
(the)h(Us)g(gi)n(v)o(en.)121 1111 y Fh(1)60 b(lisp>)e(\(vector)g(83)i
(84)f(82)g(73)h(78)f(71\))121 1231 y([83)g(84)g(82)h(73)f(78)g(71])-118
1644 y Fq(\(v)o(ector2string)25 b(V)-9 b(:v)o(ector\):)32
b(string)2040 b Fi(e)n(xpr)-86 1764 y Fr(P)o(ack)32 b(the)f(small)g
(inte)o(gers)f(in)i(the)f(v)o(ector)g(into)g(a)h(string)f(of)h(the)f
(same)h(size,)h(using)-118 1884 y(the)27 b(inte)o(gers)f(as)i(ASCII)g
(v)n(alues.)37 b(An)27 b(inte)o(ger)g(outside)f(the)h(range)h(of)f(0)g
(...)38 b(255)27 b(will)-118 2005 y(result)d(in)h(an)g(error)-5
b(.)121 2154 y Fh(1)60 b(lisp>)e(\(vector2string)f([83)i(84)g(82)h(73)f
(78)g(71]\))121 2274 y("STRING")-118 2686 y Fq(\(string2v)o(ector)25
b(S:string\):)32 b(v)o(ector)2048 b Fi(e)n(xpr)-96 2807
y Fr(Unpack)23 b(the)f(string)f(into)h(a)g(v)o(ector)g(of)h(the)f(same)
g(size.)30 b(The)22 b(elements)g(of)g(the)g(v)o(ector)-118
2927 y(are)j(small)f(inte)o(gers,)g(representing)g(the)h(ASCII)h(v)n
(alues)e(of)h(the)f(characters)i(in)f(S.)121 3096 y Fh(1)60
b(lisp>)e(\(string2vector)f("VECTOR"\))121 3217 y([V)i(E)h(C)f(T)h(O)g
(R])-118 3629 y Fq(\(v)o(ector2list)25 b(V)-9 b(:v)o(ector\):)31
b(list)2283 b Fi(e)n(xpr)-93 3749 y Fr(Create)27 b(a)f(list)e(of)i(the)
f(same)g(size)g(as)h(V)-13 b(,)25 b(the)h(elements)e(are)j(copied)e(in)
g(a)g(left)h(to)f(right)-118 3870 y(order)-5 b(.)121
4019 y Fh(1)60 b(lisp>)e(\(vector2list)f([L)j(I)f(S)h(T]\))121
4139 y(\(L)f(I)h(S)f(T\))-118 4551 y Fq(\(list2v)o(ector)25
b(L:list\):)31 b(v)o(ector)2280 b Fi(e)n(xpr)-93 4672
y Fr(Cop)o(y)25 b(the)f(elements)g(of)h(the)g(list)f(into)g(a)h(v)o
(ector)f(of)h(the)g(same)f(size.)121 4841 y Fh(1)60 b(lisp>)e
(\(list2vector)f('\(V)i(E)h(C)f(T)h(O)g(R\)\))121 4961
y([V)f(E)h(C)f(T)h(O)g(R])-118 5299 y Ft(3.1)143 b(Numbers)33
b(and)i(Arithmetic)f(Functions)-118 5523 y Fr(Most)f(of)h(the)f
(arithmetic)g(functions)g(in)h(PSL)g(e)o(xpect)g(numbers)f(as)h(ar)n
(guments.)57 b(In)34 b(all)g(cases)g(an)-118 5643 y(error)25
b(occurs)g(if)g(the)g(parameter)g(to)f(an)h(arithmetic)f(function)g(is)
g(not)h(a)g(number:)-118 5858 y Fh(*****)118 b(Non-numeric)58
b(argument)g(in)h(arithmetic)p eop
%%Page: 14 22
14 21 bop 118 -18 a Fr(14)118 289 y(Exceptions)24 b(to)g(the)h(rule)g
(are)g(noted.)118 530 y(The)39 b(underlying)e(machine)h(arithmetic)f
(requires)i(parameters)g(to)f(be)g(either)h(all)f(inte)o(gers)f(or)i
(all)118 650 y(\003oats.)53 b(If)33 b(a)f(function)f(recei)n(v)o(es)h
(mix)o(ed)f(types)g(of)i(ar)n(guments,)g(inte)o(gers)e(are)i(con)l(v)o
(erted)f(to)g(\003oats)118 771 y(before)g(arithmetic)e(operations)g
(are)i(performed.)49 b(The)31 b(range)h(of)f(numbers)f(which)h(can)g
(be)h(repre-)118 891 y(sented)19 b(by)g(an)h(inte)o(ger)e(is)h(dif)n
(ferent)g(than)g(that)g(represented)h(by)f(a)h(\003oat.)29
b(Because)20 b(of)g(this)e(dif)n(ference,)118 1012 y(a)j(con)l(v)o
(ersion)e(is)i(not)f(al)o(w)o(ays)g(possible;)g(an)h(unsuccessful)f
(attempt)g(to)g(con)l(v)o(ert)g(may)g(cause)h(an)g(error)118
1132 y(to)k(be)f(signalled.)118 1253 y(The)h Fq(mathlib)g
Fr(package)g(contains)f(some)g(useful)h(mathematical)f(functions.)118
1552 y Fk(3.1.1)119 b(Big)29 b(Integers)118 1741 y Fr(Loading)24
b(the)h(ZBIG)880 1705 y Fm(1)945 1741 y Fr(module)f(rede\002nes)h(the)g
(basic)g(arithmetic)f(operations,)h(including)e(the)i(logi-)118
1861 y(cal)g(operations,)f(to)g(permit)g(arbitrary)h(precision)g(\(or)g
(\224bignum\224\))f(inte)o(ger)g(operations.)118 2160
y Fk(3.1.2)119 b(Con)-5 b(v)o(ersion)30 b(Between)h(Integers)e(and)h
(Floats)118 2349 y Fr(The)42 b(con)l(v)o(ersions)e(mentioned)g(abo)o(v)
o(e)h(can)h(be)g(done)f(e)o(xplicitly)f(by)h(the)h(follo)n(wing)e
(functions.)118 2470 y(Other)25 b(functions)f(which)g(alter)h(types)f
(can)h(be)g(found)g(in)f(Section)h(2.3.)118 2809 y Fq(\(\002x)g
(U:number\):)33 b(integer)2367 b Fi(e)n(xpr)144 2930
y Fr(Returns)26 b(the)g(inte)o(ger)f(which)h(corresponds)g(to)f(the)h
(truncated)g(v)n(alue)f(of)i(U.)e(The)i(re-)118 3050
y(sult)22 b(of)i(con)l(v)o(ersion)e(must)g(retain)h(all)g
(signi\002cant)f(portions)g(of)h(U.)g(If)h(U)f(is)g(an)g(inte)o(ger)118
3170 y(it)h(is)h(returned)g(unchanged.)357 3353 y Fh(1)60
b(lisp>)e(\(fix)h(2.1\))357 3473 y(2)357 3594 y(2)h(lisp>)e(\(fix)h
(-2.1\))357 3714 y(-2)118 4139 y Fq(\(\003oat)25 b(U:number\):)33
b(\003oat)2394 b Fi(e)n(xpr)147 4260 y Fr(The)28 b(\003oat)h
(corresponding)e(to)h(the)h(v)n(alue)e(of)i(the)f(ar)n(gument)g(U)h(is)
f(returned.)41 b(Some)118 4380 y(of)24 b(the)g(least)g(signi\002cant)g
(digits)e(of)j(an)f(inte)o(ger)f(may)h(be)g(lost)g(due)g(to)f(the)h
(implemen-)118 4500 y(tation)30 b(of)h(\003oat.)49 b(If)31
b(U)g(a)h(\003oat)f(then)f(it)h(will)f(be)h(returned)g(unchanged.)48
b(If)31 b(U)g(is)g(too)118 4621 y(lar)n(ge)25 b(to)g(represent)g(in)f
(\003oat)h(an)g(error)h(occurs.)357 4803 y Fh(*****)59
b(Argument)f(to)h(FLOAT)g(is)g(too)g(large)118 5102 y
Fk(3.1.3)119 b(Arithmetic)30 b(Operators)118 5291 y Fr(This)42
b(section)f(describes)h(arithmetic)f(functions)g(in)h(the)g(library)g
(module)f Fq(numeric-ops)p Fr(.)84 b(The)118 5412 y(names)25
b(of)f(these)h(functions)f(are)h(based)g(upon)f(mathematical)g
(notation.)118 5533 y(There)35 b(is)e(a)h(switch)g(called)g
Fq(fast-integers)g Fr(whose)g(v)n(alue)f(has)h(an)g(ef)n(fect)h(on)e
(the)h(compilation)e(of)118 5653 y(forms)k(which)g(contain)f
(applications)g(of)h(the)g(functions)f(described)i(here.)65
b(The)36 b(documentation)p 118 5737 1418 4 v 230 5828
a Fj(1)268 5858 y Fp(ZIB)20 b(v)o(ersion)f(of)h(big)g(inte)o(gers,)f
(the)h(optimal)g(v)o(ersion)e(for)i(the)g(particular)f(architecture)p
eop
%%Page: 15 23
15 22 bop -118 -18 a Fg(3.1.)55 b(NUMBERS)26 b(AND)e(ARITHMETIC)i
(FUNCTIONS)1294 b Fr(15)-118 289 y(assumes)25 b(that)g(the)g(switch)g
(f)o(ast-inte)o(gers)f(is)h(nil.)33 b(When)25 b(this)g(switch)f(is)i
(non-nil)e(the)h(compiler)g(will)-118 409 y(generate)j(code)g(which)f
(is)g(v)o(ery)g(ef)n(\002cient.)39 b(Ho)n(we)n(v)o(er)l(,)27
b(it)h(is)f(assumed)f(that)i(ar)n(guments)f(and)g(results)-118
529 y(will)i(be)i(inte)o(gers)e(in)h(the)g(inum)f(range.)48
b(If)31 b(this)e(assumption)g(is)g(violated)h(then)g(at)g(best)g(your)g
(code)-118 650 y(will)24 b(not)g(generate)h(correct)h(results,)e(you)g
(may)h(actually)f(damage)h(the)f(PSL)i(system.)-118 1218
y Fq(Common)f(LISP)g(operators)-118 1722 y(\(=)g(X:number)h(Y)-9
b(:number\):)33 b(boolean)1923 b Fi(e)n(xpr)-87 1842
y Fr(Numeric)30 b(Equal.)48 b(T)m(rue)31 b(if)g(the)f(tw)o(o)h(ar)n
(guments)f(are)h(numbers)f(of)h(the)g(same)f(type)-118
1963 y(and)35 b(same)f(v)n(alue.)60 b(Unlik)o(e)34 b(the)h(Common)f
(LISP)h(operator)l(,)j(no)c(type)h(coercion)f(is)-118
2083 y(done,)f(no)e(error)i(is)e(signalled)f(if)i(one)g(or)f(both)g(ar)
n(guments)g(are)i(non-numeric,)f(and)-118 2204 y(only)27
b(tw)o(o)h(ar)n(guments)f(are)i(permitted.)40 b(Instead,)29
b(it)e(is)h(merely)g(incorrect)g(to)g(supply)-118 2324
y(a)d(non-numeric)f(ar)n(gument.)-118 2740 y Fq(\(/=)g(X:number)j(Y)-9
b(:number\):)33 b(boolean)1895 b Fi(e)n(xpr)-92 2860
y Fr(Numeric)25 b(Not)g(Equal.)33 b(Nil)25 b(if)h(X)g(and)f(Y)h(are)h
(numbers)e(of)g(equal)h(type)f(and)h(v)n(alue;)f(t)-118
2981 y(if)h(X)g(and)g(Y)g(are)h(numbers)e(of)h(unequal)g(type)f(or)i(v)
n(alue.)33 b(It)26 b(is)g(incorrect)g(to)g(supply)f(a)-118
3101 y(non-numeric)f(ar)n(gument.)-118 3517 y Fq(\()p
Ff(<)h Fq(X:number)h(Y)-9 b(:number\):)33 b(boolean)1904
b Fi(e)n(xpr)-90 3638 y Fr(Numeric)28 b(Less)h(Than.)41
b(T)m(rue)28 b(if)g(X)h(is)f(less)g(than)g(Y)-13 b(,)28
b(re)o(gardless)f(of)i(type.)41 b(An)28 b(error)-118
3758 y(is)c(signalled)g(if)h(either)f(ar)n(gument)h(is)f(not)g
(numeric.)-118 4174 y Fq(\()p Ff(>)h Fq(X:number)h(Y)-9
b(:number\):)33 b(boolean)1904 b Fi(e)n(xpr)-91 4294
y Fr(Numeric)27 b(Greater)h(Than.)38 b(T)m(rue)27 b(if)g(X)g(is)g
(greater)h(than)f(Y)-13 b(,)27 b(re)o(gardless)f(of)i(type.)37
b(An)-118 4415 y(error)25 b(is)g(signalled)e(if)i(either)g(ar)n(gument)
f(is)h(not)f(numeric.)-118 4831 y Fq(\()p Ff(<)p Fe(=)h
Fq(X:number)h(Y)-9 b(:number\):)33 b(boolean)1828 b Fi(e)n(xpr)-96
4951 y Fr(Numeric)21 b(Less)g(Than)h(or)g(Equal.)29 b(T)m(rue)21
b(if)h(X)g(is)f(less)g(than)h(or)f(equal)h(to)f(Y)-13
b(,)22 b(re)o(gardless)-118 5072 y(of)j(numeric)f(type.)31
b(An)24 b(error)i(is)e(signalled)g(if)g(either)h(ar)n(gument)g(is)f
(not)g(numeric.)-118 5488 y Fq(\()p Ff(>)p Fe(=)h Fq(X:number)h(Y)-9
b(:number\):)33 b(boolean)1828 b Fi(e)n(xpr)-85 5608
y Fr(Numeric)32 b(Greater)i(Than)e(or)h(Equal.)55 b(T)m(rue)32
b(if)h(X)g(is)f(greater)h(than)g(or)g(equal)f(to)h(Y)-13
b(,)-118 5728 y(re)o(gardless)30 b(of)h(numeric)g(type.)50
b(An)31 b(error)h(is)f(signalled)f(if)h(either)g(ar)n(gument)g(is)g
(not)-118 5849 y(numeric.)p eop
%%Page: 16 24
16 23 bop 118 -18 a Fr(16)118 357 y Fq(\(+)25 b([N:number]\):)33
b(number)2236 b Fi(macr)l(o)155 478 y Fr(Numeric)37 b(Addition.)65
b(The)37 b(v)n(alue)g(returned)g(is)f(the)h(sum)f(of)h(all)g(the)g(ar)n
(guments.)118 598 y(The)d(ar)n(guments)g(may)g(be)h(of)f(an)o(y)g
(numeric)g(type.)59 b(An)34 b(error)h(is)f(signalled)f(if)i(an)o(y)118
718 y(ar)n(gument)25 b(is)f(not)g(numeric.)30 b(If)c(supplied)d(no)i
(ar)n(guments,)f(the)g(v)n(alue)h(is)f(0.)118 1107 y
Fq(\(\226)h(N:number)i([N:number]\):)33 b(number)1775
b Fi(macr)l(o)142 1228 y Fr(Numeric)24 b(Minus)f(or)h(Subtraction.)30
b(If)24 b(gi)n(v)o(en)f(one)h(ar)n(gument,)g(returns)g(the)g(ne)o(gati)
n(v)o(e)118 1348 y(of)e(that)g(ar)n(gument.)29 b(If)23
b(gi)n(v)o(en)d(more)i(than)g(one)g(ar)n(gument,)g(returns)g(the)g
(result)f(of)h(suc-)118 1468 y(cessi)n(v)o(ely)d(subtracting)h
(succeeding)h(ar)n(guments)f(from)h(the)g(\002rst)g(ar)n(gument.)29
b(Signals)118 1589 y(an)c(error)h(if)e(no)h(ar)n(guments)f(are)i
(supplied)d(or)i(if)g(an)o(y)f(ar)n(gument)g(is)h(non-numeric.)118
1978 y Fq(\()p Fl(\003)g Fq([N:number]\):)33 b(number)2243
b Fi(macr)l(o)146 2098 y Fr(Numeric)28 b(Multiplication.)38
b(The)28 b(v)n(alue)f(returned)i(is)e(the)h(product)g(of)g(all)g(the)g
(ar)n(gu-)118 2218 y(ments.)33 b(The)26 b(ar)n(guments)f(may)g(be)h(of)
g(an)o(y)f(numeric)h(type.)33 b(An)26 b(error)g(is)g(signalled)e(if)118
2339 y(an)o(y)g(ar)n(gument)h(is)f(not)g(numeric.)31
b(If)25 b(supplied)e(no)i(ar)n(guments,)f(the)h(v)n(alue)f(is)g(1.)118
2728 y Fq(\(/)h(N:number)i([N:number]\):)33 b(number)1797
b Fi(macr)l(o)155 2848 y Fr(Numeric)36 b(Reciprocal)h(or)g(Di)n
(vision.)63 b(If)37 b(gi)n(v)o(en)e(one)i(ar)n(gument,)i(returns)d(the)
h(re-)118 2968 y(ciprocal)g(of)h(that)f(ar)n(gument.)67
b(If)38 b(gi)n(v)o(en)e(more)h(than)g(one)g(ar)n(gument,)j(returns)d
(the)118 3089 y(result)g(of)g(successi)n(v)o(ely)f(di)n(viding)f
(succeeding)i(ar)n(guments)g(from)g(the)g(\002rst)h(ar)n(gu-)118
3209 y(ment.)51 b(Signals)31 b(an)h(error)h(if)f(no)f(ar)n(guments)g
(are)i(supplied)d(or)i(if)g(an)o(y)f(ar)n(gument)h(is)118
3330 y(non-numeric.)118 3733 y Fq(Additional)25 b(Operators)118
4180 y(\()p Fl(\030)p Fe(=)h Fq(X:number)g(Y)-9 b(:number\):)33
b(number)1822 b Fi(e)n(xpr)143 4301 y Fr(Numeric)25 b(Not)f(Equal.)30
b(Same)25 b(as)g(/=.)118 4690 y Fq(\(//)g(X:integer)g(Y)-9
b(:integer\):)32 b(integer)2036 b Fi(e)n(xpr)143 4810
y Fr(Inte)o(ger)25 b(Remainder)-5 b(.)30 b(Same)25 b(as)g(remainder)-5
b(.)118 5199 y Fq(\()p Fl(\030)26 b Fq(X:integer\):)32
b(integer)2433 b Fi(e)n(xpr)143 5319 y Fr(Inte)o(ger)25
b(Bitwise)f(Logical)g(Not.)30 b(Same)c(as)f(lnot.)118
5708 y Fq(\(&)g(X:integer)h(Y)-9 b(:integer\):)32 b(integer)2008
b Fi(e)n(xpr)143 5828 y Fr(Inte)o(ger)25 b(Bitwise)f(Logical)g(And.)31
b(Same)25 b(as)g(land.)p eop
%%Page: 17 25
17 24 bop -118 -18 a Fg(3.1.)55 b(NUMBERS)26 b(AND)e(ARITHMETIC)i
(FUNCTIONS)1294 b Fr(17)-118 363 y Fq(\()p Fl(j)25 b
Fq(X:integer)g(Y)-9 b(:integer\):)32 b(integer)2064 b
Fi(e)n(xpr)-93 484 y Fr(Inte)o(ger)24 b(Bitwise)h(Logical)f(Or)-5
b(.)30 b(Same)c(as)f(lor)-5 b(.)-118 854 y Fq(\()p Fl(^)25
b Fq(X:integer)h(Y)-9 b(:integer\):)32 b(integer)2025
b Fi(e)n(xpr)-93 974 y Fr(Inte)o(ger)24 b(Bitwise)h(Logical)f(Xor)-5
b(.)30 b(Same)25 b(as)g(lxor)-5 b(.)-118 1344 y Fq(\()p
Ff(<<)25 b Fq(X:integer)h(Y)-9 b(:integer\):)31 b(integer)1940
b Fi(e)n(xpr)-93 1464 y Fr(Inte)o(ger)24 b(Bitwise)h(Logical)f(Left)h
(Shift.)30 b(Same)c(as)f(lshift.)-118 1834 y Fq(\()p
Ff(>>)g Fq(X:integer)h(Y)-9 b(:integer\):)31 b(integer)1940
b Fi(e)n(xpr)-93 1954 y Fr(Inte)o(ger)24 b(Bitwise)h(Logical)f(Right)g
(Shift.)31 b(Same)25 b(as)g(\(lshift)f(X)h(\(minus)e(Y\)\).)-118
2285 y Fk(3.1.4)119 b(Arithmetic)30 b(Functions)-118
2475 y Fr(The)g(functions)e(described)i(belo)n(w)f(handle)g(arithmetic)
g(operations.)45 b(Please)30 b(note)g(the)f(remarks)h(at)-118
2595 y(the)25 b(be)o(ginning)d(of)j(this)f(Chapter)i(re)o(garding)d
(the)i(mixing)e(of)i(ar)n(gument)f(types.)-118 2935 y
Fq(\(abs)h(U:number\):)33 b(number)2290 b Fi(e)n(xpr)-93
3055 y Fr(Returns)25 b(the)f(absolute)g(v)n(alue)g(of)h(its)f(ar)n
(gument.)-118 3425 y Fq(\(add1)h(U:number\):)33 b(number)2224
b Fi(e)n(xpr)-90 3546 y Fr(Returns)29 b(the)f(v)n(alue)g(of)h(U)f(plus)
g(1;)i(the)e(returned)g(v)n(alue)g(is)g(of)h(the)f(same)g(type)g(as)h
(U)-118 3666 y(\(inte)o(ger)24 b(or)h(\003oat\).)-118
4036 y Fq(\(decr)h(U:f)n(orm)f([Xi:number]\):)33 b(number)1739
b Fi(macr)l(o)-96 4156 y Fr(This)21 b(function)g(is)g(de\002ned)i(in)e
(the)h Fq(useful)g Fr(module.)29 b(W)l(ith)21 b(only)g(one)h(ar)n
(gument,)g(this)-118 4277 y(is)i(equi)n(v)n(alent)f(to)121
4458 y Fh(\(setf)59 b(u)g(\(sub1)g(u\)\))-118 4666 y
Fr(W)l(ith)24 b(multiple)f(ar)n(guments,)h(it)g(is)h(equi)n(v)n(alent)e
(to)121 4901 y Fh(\(setf)59 b(u)g(\(difference)f(u)h(\(plus)g(x1)g(...)
g(xn\)\)\))121 5136 y(1)h(lisp>)e(\(setq)h(y)g('\(1)h(5)f(7\)\))121
5256 y(\(1)g(5)h(7\))121 5377 y(2)g(lisp>)e(\(decr)h(\(car)g(y\)\))121
5497 y(0)121 5618 y(3)h(lisp>)e(y)121 5738 y(\(0)h(5)h(7\))121
5858 y(4)g(lisp>)e(\(decr)h(\(cadr)g(y\))g(3)g(4\))p
eop
%%Page: 18 26
18 25 bop 118 -18 a Fr(18)357 289 y Fh(-2)357 409 y(5)60
b(lisp>)e(y)357 529 y(\(0)i(-2)f(7\))118 1038 y Fq(\(differ)n(ence)27
b(U:number)g(V)-9 b(:number\):)33 b(number)1551 b Fi(e)n(xpr)143
1158 y Fr(The)25 b(v)n(alue)f(of)h(U)g(-)g(V)g(is)f(returned.)118
1516 y Fq(\(di)o(vide)h(U:number)i(V)-9 b(:number\):)33
b(pair)1875 b Fi(e)n(xpr)142 1636 y Fr(The)24 b(pair)f(\(quotient)g(.)
30 b(remainder\))24 b(is)f(returned,)h(as)g(if)f(the)h(quotient)e(part)
i(w)o(as)f(com-)118 1756 y(puted)f(by)g(the)g(quotient)f(function)h
(and)g(the)g(remainder)h(by)f(the)g(remainder)g(function.)118
1877 y(An)j(error)g(occurs)g(if)g(di)n(vision)d(by)j(zero)g(is)g
(attempted:)357 2109 y Fh(*****)59 b(Attempt)f(to)h(divide)g(by)g(0)h
(in)f(Divide)118 2575 y Fq(\(expt)26 b(U:number)g(V)-9
b(:integer\):)32 b(number)1832 b Fi(e)n(xpr)144 2695
y Fr(Returns)26 b(U)f(raised)h(to)g(the)f(V)h(po)n(wer)-5
b(.)33 b(A)25 b(\003oat)h(U)g(to)f(an)h(inte)o(ger)f(po)n(wer)h(V)f
(does)h(not)118 2815 y(ha)n(v)o(e)f(V)f(changed)h(to)g(a)g(\003oat)g
(before)g(e)o(xponentiation.)118 3193 y Fq(\(incr)h(U:f)n(orm)e
([Xi:number]\):)33 b(number)1756 b Fi(macr)l(o)143 3314
y Fr(P)o(art)25 b(of)g(the)f Fq(useful)i Fr(package.)31
b(W)l(ith)24 b(only)g(one)h(ar)n(gument,)f(this)g(is)h(equi)n(v)n
(alent)e(to)357 3542 y Fh(\(setf)59 b(u)g(\(add1)g(u\)\))118
3790 y Fr(W)l(ith)24 b(multiple)f(ar)n(guments)h(it)h(is)f(equi)n(v)n
(alent)f(to)357 4046 y Fh(\(setf)59 b(u)g(\(plus)g(u)h(x1)f(...)g
(xn\)\))118 4512 y Fq(\(minus)25 b(U:number\):)33 b(number)2174
b Fi(e)n(xpr)143 4632 y Fr(Returns)25 b(-U.)118 4990
y Fq(\(plus)g([U:number]\):)34 b(number)2115 b Fi(macr)l(o)157
5110 y Fr(F)o(orms)37 b(the)h(sum)g(of)g(all)g(its)g(ar)n(guments.)70
b(Plus)38 b(may)g(be)h(called)f(with)g(only)f(one)118
5230 y(ar)n(gument.)71 b(In)38 b(this)f(case)i(it)e(returns)h(its)g(ar)
n(gument.)70 b(If)39 b(plus)e(is)h(called)g(with)f(no)118
5351 y(ar)n(guments,)24 b(it)g(returns)h(zero.)118 5728
y Fq(\(plus2)g(U:number)i(V)-9 b(:number\):)33 b(number)1748
b Fi(e)n(xpr)143 5849 y Fr(Returns)25 b(the)g(sum)e(of)i(U)g(and)g(V)
-13 b(.)p eop
%%Page: 19 27
19 26 bop -118 -18 a Fg(3.1.)55 b(NUMBERS)26 b(AND)e(ARITHMETIC)i
(FUNCTIONS)1294 b Fr(19)-118 357 y Fq(\(quotient)26 b(U:number)h(V)-9
b(:number\):)33 b(number)1621 b Fi(e)n(xpr)-95 478 y
Fr(The)24 b(quotient)d(of)j(U)f(di)n(vided)f(by)h(V)g(is)g(returned.)30
b(Di)n(vision)21 b(of)i(tw)o(o)g(positi)n(v)o(e)e(or)i(tw)o(o)-118
598 y(ne)o(gati)n(v)o(e)j(inte)o(gers)i(is)g(con)l(v)o(entional.)40
b(If)29 b(both)f(U)g(and)h(V)f(are)i(inte)o(gers)d(and)i(e)o(xactly)
-118 718 y(one)h(of)g(them)f(is)g(ne)o(gati)n(v)o(e,)g(the)g(v)n(alue)g
(returned)h(is)g(truncated)f(to)n(w)o(ard)g(0.)46 b(If)30
b(either)-118 839 y(ar)n(gument)21 b(is)f(a)i(\003oat,)g(a)g(\003oat)f
(is)g(returned)g(which)g(is)g(e)o(xact)g(within)f(the)h(implemented)
-118 959 y(precision)j(of)h(\003oats.)31 b(An)24 b(error)i(occurs)f(if)
f(di)n(vision)f(by)h(zero)i(is)e(attempted:)121 1147
y Fh(*****)59 b(Attempt)f(to)h(divide)g(by)g(0)g(in)h(QUOTIENT)-118
1575 y Fq(\(r)n(ecip)26 b(U:number\):)33 b(\003oat)2368
b Fi(e)n(xpr)-95 1696 y Fr(Recip)24 b(con)l(v)o(erts)e(U)h(to)f(a)i
(\003oat)f(if)g(necessary)-6 b(,)23 b(and)g(then)g(\002nds)g(the)g(in)l
(v)o(erse)f(using)g(the)-118 1816 y(function)i(quotient.)-118
2187 y Fq(\(r)n(emainder)i(U:integer)g(V)-9 b(:integer\):)32
b(integer)1645 b Fi(e)n(xpr)-93 2307 y Fr(\(-)25 b(U)g(\(*)g(V)g
(\(\002x)g(\(/)g(U)g(\(\003oat)g(V\)\)\)\)\))121 2490
y Fh(\(remainder)58 b(13)h(4\))239 b(=)119 b(1)121 2611
y(\(remainder)58 b(-13)h(4\))179 b(=)59 b(-1)121 2731
y(\(remainder)f(13)h(-4\))179 b(=)119 b(1)121 2851 y(\(remainder)58
b(-13)h(-4\))119 b(=)59 b(-1)-118 3280 y Fq(\(sub1)25
b(U:number\):)33 b(number)2235 b Fi(e)n(xpr)-83 3401
y Fr(Returns)35 b(the)g(v)n(alue)f(of)h(U)g(minus)f(1.)61
b(If)36 b(U)f(is)f(a)h(\003oat,)j(the)d(v)n(alue)f(returned)h(is)g(U)
-118 3521 y(minus)23 b(1.0.)-118 3871 y Fq(\(times)i([U:number]\):)33
b(number)2066 b Fi(macr)l(o)-85 3991 y Fr(Returns)32
b(the)g(product)g(of)h(all)f(its)g(ar)n(guments.)53 b(T)m(imes)32
b(may)g(be)g(called)h(with)f(only)-118 4112 y(one)f(ar)n(gument.)47
b(In)31 b(this)f(case)h(it)f(returns)h(the)f(v)n(alue)g(of)h(its)f(ar)n
(gument.)48 b(If)31 b(times)e(is)-118 4232 y(called)c(with)f(no)g(ar)n
(guments,)g(it)h(returns)f(1.)-118 4603 y Fq(\(times2)h(U:number)h(V)-9
b(:number\):)33 b(number)1699 b Fi(e)n(xpr)-93 4723 y
Fr(Returns)25 b(the)f(product)h(of)f(U)h(and)g(V)-13
b(.)-118 5057 y Fk(3.1.5)119 b(Functions)30 b(f)m(or)g(Numeric)h
(Comparison)-118 5247 y Fr(The)26 b(follo)n(wing)e(functions)h(compare)
h(the)g(v)n(alues)f(of)h(their)f(ar)n(guments.)34 b(Functions)25
b(which)h(test)f(for)-118 5368 y(equality)f(and)h(inequality)e(are)j
(documented)d(in)i(Section)g(2.2.1.)-118 5708 y Fq(\(geq)g(U:any)g(V)-9
b(:any\):)32 b(boolean)2195 b Fi(e)n(xpr)-93 5828 y Fr(Equi)n(v)n
(alent)22 b(to)j(\(\277=)g(U)g(V\).)p eop
%%Page: 20 28
20 27 bop 118 -18 a Fr(20)118 357 y Fq(\(gr)n(eater)o(p)27
b(U:number)f(V)-9 b(:number\):)33 b(boolean)1617 b Fi(e)n(xpr)143
478 y Fr(Equi)n(v)n(alent)23 b(to)h(\(\277)h(U)g(V\).)118
891 y Fq(\(leq)h(U:number)g(V)-9 b(:number\):)33 b(boolean)1852
b Fi(e)n(xpr)143 1012 y Fr(Equi)n(v)n(alent)23 b(to)h(\(\241=)h(U)g
(V\).)118 1425 y Fq(\(lessp)g(U:number)i(V)-9 b(:number\):)32
b(boolean)1775 b Fi(e)n(xpr)143 1545 y Fr(Equi)n(v)n(alent)23
b(to)h(\(\241)h(U)g(V\).)118 1959 y Fq(\(max)g([U:number]\):)33
b(number)2110 b Fi(macr)l(o)144 2079 y Fr(Returns)26
b(the)g(lar)n(gest)g(of)g(the)g(v)n(alues)f(in)h(U)g(\(numeric)g
(maximum\).)32 b(If)27 b(tw)o(o)e(or)h(more)118 2200
y(v)n(alues)e(are)i(the)e(same,)h(the)f(\002rst)h(is)g(returned.)118
2606 y Fq(\(max2)g(U:number)h(V)-9 b(:number\):)33 b(number)1743
b Fi(e)n(xpr)156 2726 y Fr(Returns)39 b(the)f(lar)n(ger)h(of)f(U)g(and)
g(V)-13 b(.)39 b(If)f(U)h(and)f(V)g(are)h(of)f(the)g(same)h(v)n(alue,)h
(U)f(is)118 2846 y(returned)25 b(\(U)g(and)g(V)g(might)e(be)i(of)g(dif)
n(ferent)f(types\).)118 3260 y Fq(\(min)h([U:number]\):)34
b(number)2126 b Fi(macr)l(o)140 3380 y Fr(Returns)21
b(the)h(smallest)e(\(numeric)h(minimum\),)f(of)h(the)h(v)n(alues)e(in)h
(U.)h(If)g(tw)o(o)f(or)g(more)118 3501 y(v)n(alues)j(are)i(the)e(same,)
h(the)f(\002rst)h(of)g(these)g(is)f(returned.)118 3907
y Fq(\(min2)h(U:number)i(V)-9 b(:number\):)33 b(number)1759
b Fi(e)n(xpr)147 4027 y Fr(Returns)29 b(the)g(smaller)f(of)i(its)e(ar)n
(guments.)42 b(If)30 b(U)f(and)g(V)g(are)h(the)e(same)h(v)n(alue,)h(U)f
(is)118 4147 y(returned)c(\(U)g(and)g(V)g(might)e(be)i(of)g(dif)n
(ferent)f(types\).)118 4561 y Fq(\(minusp)i(U:any\):)31
b(boolean)2305 b Fi(e)n(xpr)141 4681 y Fr(Returns)23
b(t)g(if)g(U)g(is)g(a)g(number)g(and)g(less)g(than)f(0.)30
b(The)23 b(return)h(v)n(alue)e(is)h(nil)f(if)h(U)g(is)g(not)118
4802 y(a)i(number)l(,)f(or)h(if)g(U)g(is)f(a)h(positi)n(v)o(e)e(number)
-5 b(.)118 5215 y Fq(\(onep)26 b(U:any\):)31 b(boolean)2416
b Fi(e)n(xpr)139 5335 y Fr(Returns)21 b(t)f(if)h(U)g(is)f(a)h(number)g
(and)f(has)h(the)g(v)n(alue)f(1)h(or)f(1.0.)29 b(Returns)21
b(nil)f(otherwise.)118 5728 y Fq(\(zer)n(op)26 b(U:any\):)32
b(boolean)2384 b Fi(e)n(xpr)139 5849 y Fr(Returns)21
b(t)f(if)h(U)g(is)f(a)h(number)g(and)f(has)h(the)g(v)n(alue)f(0)h(or)f
(0.0.)29 b(Returns)21 b(nil)f(otherwise.)p eop
%%Page: 21 29
21 28 bop -118 -18 a Fg(3.1.)55 b(NUMBERS)26 b(AND)e(ARITHMETIC)i
(FUNCTIONS)1294 b Fr(21)-118 289 y Fk(3.1.6)119 b(Bit)29
b(Operations)-118 477 y Fr(The)21 b(functions)g(described)g(in)g(this)g
(section)f(operate)i(on)f(the)g(binary)h(representation)e(of)i(the)f
(inte)o(gers)-118 598 y(gi)n(v)o(en)i(as)i(ar)n(guments.)30
b(The)25 b(returned)g(v)n(alue)f(is)g(an)h(inte)o(ger)-5
b(.)-118 937 y Fq(\(land)25 b(U:integer)h(V)-9 b(:integer\):)32
b(integer)1903 b Fi(e)n(xpr)-89 1058 y Fr(Bitwise)28
b(or)i(logical)e(and.)43 b(Each)29 b(bit)f(of)h(the)g(result)g(is)f
(independently)g(determined)-118 1178 y(from)c(the)h(corresponding)f
(bits)g(of)h(the)f(operands.)-118 1548 y Fq(\(lor)h(U:integer)h(V)-9
b(:integer\):)31 b(integer)1970 b Fi(e)n(xpr)-84 1668
y Fr(Bitwise)33 b(or)h(logical)f(or)-5 b(.)57 b(Each)34
b(bit)f(of)g(the)h(result)f(is)g(independently)g(determined)-118
1788 y(from)c(corresponding)g(bits)f(of)i(the)f(operands.)44
b(This)29 b(is)g(an)g(inclusi)n(v)o(e)f(or)l(,)i(the)g(v)n(alue)-118
1909 y(of)25 b(\(lor)g(1)f(1\))h(is)g(1.)-118 2274 y
Fq(\(lnot)g(U:integer\):)32 b(integer)2345 b Fi(e)n(xpr)-96
2395 y Fr(Logical)22 b(not.)29 b(De\002ned)23 b(as)f(\(-)h(-U)g(1\))f
(so)g(that)g(it)f(w)o(orks)h(for)h(bignums)d(as)j(if)f(the)o(y)f(were)
-118 2515 y(2')-5 b(s)24 b(complement.)-118 2885 y Fq(\(lxor)h
(U:integer)g(V)-9 b(:integer\):)32 b(integer)1920 b Fi(e)n(xpr)-83
3005 y Fr(Bitwise)35 b(or)g(logical)g(e)o(xclusi)n(v)o(e)e(or)l(,)k
(the)e(v)n(alue)g(of)g(\(lxor)g(1)g(1\))h(is)e(0.)62
b(Each)35 b(bit)g(of)-118 3125 y(the)f(result)g(is)g(independently)e
(determined)i(from)g(the)g(corresponding)f(bits)h(of)g(the)-118
3246 y(operands.)-118 3615 y Fq(\(lshift)25 b(N:integer)h(K:integer\):)
31 b(integer)1861 b Fi(e)n(xpr)-96 3736 y Fr(Shifts)22
b(N)g(to)g(the)g(left)g(by)g(K)h(bits.)28 b(The)23 b(ef)n(fect)f(is)g
(similar)f(to)h(multiplying)d(by)j(2)g(to)g(the)-118
3856 y(K)30 b(po)n(wer)-5 b(.)48 b(Ne)o(gati)n(v)o(e)28
b(v)n(alues)i(are)h(acceptable)g(for)g(K,)f(and)h(cause)g(a)g(right)e
(shift)h(\(in)-118 3976 y(the)g(usual)f(manner\).)47
b(Lshift)29 b(is)h(a)g(logical)f(shift,)i(so)f(right)f(shifts)g(do)h
(not)f(resemble)-118 4097 y(di)n(vision)22 b(by)j(a)g(po)n(wer)f(of)h
(2.)-118 4425 y Fk(3.1.7)119 b(V)-11 b(arious)30 b(Mathematical)f
(Functions)-118 4614 y Fr(The)34 b(optionally)f(loadable)h
Fq(mathlib)g Fr(module)g(de\002nes)g(se)n(v)o(eral)g(commonly)e(used)i
(mathematical)-118 4735 y(functions.)f(Some)27 b(ef)n(fort)f(has)g
(been)g(made)g(to)g(be)g(compatible)f(with)g(Common)h(Lisp.)33
b(When)27 b(read-)-118 4855 y(ing)22 b(the)h(e)o(xamples,)f(note)h
(that)f(the)h(precision)f(of)h(the)g(results)f(depend)h(on)g(the)g
(machine)f(being)h(used.)-118 5195 y Fq(\(ceiling)i(X:number\):)33
b(integer)2195 b Fi(e)n(xpr)-93 5315 y Fr(Returns)25
b(the)f(smallest)g(inte)o(ger)g(greater)h(than)g(or)g(equal)f(to)h(X.)g
(F)o(or)f(e)o(xample:)121 5497 y Fh(1)60 b(lisp>)e(\(ceiling)g(2.1\))
121 5618 y(3)121 5738 y(2)i(lisp>)e(\(ceiling)g(-2.1\))121
5858 y(-2)p eop
%%Page: 22 30
22 29 bop 118 -18 a Fr(22)118 357 y Fq(\(\003oor)25 b(X:number\):)33
b(integer)2273 b Fi(e)n(xpr)151 478 y Fr(Returns)32 b(the)h(lar)n(gest)
f(inte)o(ger)g(less)g(than)g(or)h(equal)g(to)f(X.)g(\(Note)h(that)f
(this)g(dif)n(fers)118 598 y(from)25 b(the)f(\002x)h(function.\))357
788 y Fh(1)60 b(lisp>)e(\(floor)h(2.1\))357 909 y(2)357
1029 y(2)h(lisp>)e(\(floor)h(-2.1\))357 1149 y(-3)357
1270 y(3)h(lisp>)e(\(fix)h(-2.1\))357 1390 y(-2)118 1825
y Fq(\(r)n(ound)27 b(X:number\):)33 b(integer)2213 b
Fi(e)n(xpr)148 1945 y Fr(Returns)29 b(the)g(nearest)h(inte)o(ger)f(to)g
(X.)g(If)h(the)f(fractional)h(part)f(of)h(X)f(is)g(0.5)g(then)g(the)118
2065 y(smaller)24 b(inte)o(ger)g(is)h(returned.)357 2257
y Fh(\(de)59 b(round)g(\(x\))477 2377 y(\(if)g(\(fixp)g(x\))g(x)g
(\(floor)g(\(plus)f(x)i(0.5\)\)\)\))357 2625 y(1)g(lisp>)e(\(round)h
(2.5\))357 2746 y(3)357 2866 y(2)h(lisp>)e(\(round)h(-2.5\))357
2986 y(-2)118 3451 y Fq(\(transfersign)26 b(S:number)h(V)-13
b(AL:number\):)33 b(number)1343 b Fi(e)n(xpr)143 3571
y Fr(T)m(ransfers)25 b(the)f(sign)g(of)h(S)g(to)g(V)-13
b(AL.)357 3765 y Fh(\(de)59 b(transfersign)e(\(s)j(val\))477
3886 y(\(if)f(\(>=)g(s)h(0\))f(\(abs)g(val\))g(\(minus)f(\(abs)h
(val\)\)\)\))118 4320 y Fq(\(mod)25 b(M:integer)h(N:integer\):)32
b(integer)1872 b Fi(e)n(xpr)143 4441 y Fr(\(-)25 b(U)g(\(*)g(V)g
(\(\003oor)g(\(/)g(U)g(\(\003oat)g(V\)\)\)\)\))357 4628
y Fh(\(mod)59 b(13)g(4\))239 b(=)119 b(1)357 4748 y(\(mod)59
b(-13)g(4\))179 b(=)119 b(3)357 4869 y(\(mod)59 b(13)g(-4\))179
b(=)60 b(-3)357 4989 y(\(mod)f(-13)g(-4\))119 b(=)60
b(-1)118 5424 y Fq(\(degr)n(eestoradians)26 b(X:number\):)33
b(number)1711 b Fi(e)n(xpr)143 5544 y Fr(Returns)25 b(an)g(angle)g(in)f
(radians)h(gi)n(v)o(en)e(an)i(angle)f(in)h(de)o(grees.)357
5738 y Fh(1)60 b(lisp>)e(\(degreestoradians)e(180\))357
5858 y(3.1415926)p eop
%%Page: 23 31
23 30 bop -118 -18 a Fg(3.1.)55 b(NUMBERS)26 b(AND)e(ARITHMETIC)i
(FUNCTIONS)1294 b Fr(23)-118 357 y Fq(\(radianstodegr)n(ees)26
b(X:number\):)33 b(number)1711 b Fi(e)n(xpr)-93 478 y
Fr(Returns)25 b(an)g(angle)f(in)h(de)o(grees)f(gi)n(v)o(en)g(an)h
(angle)f(in)h(radians.)121 680 y Fh(1)60 b(lisp>)e(\(radianstodegrees)e
(3.1415926\))121 801 y(180.0)-118 1243 y Fq(\(radianstodms)25
b(X:number\):)33 b(list)2061 b Fi(e)n(xpr)-96 1363 y
Fr(Gi)n(v)o(en)21 b(an)i(angle)f(X)h(in)f(radians,)g(returns)h(a)f
(list)g(of)g(three)h(inte)o(gers,)f(which)g(represent)-118
1483 y(the)j(de)o(grees,)f(minutes,)f(and)i(seconds.)121
1686 y Fh(1)60 b(lisp>)e(\(radianstodms)f(1.0\))121 1806
y(\(57)i(17)g(45\))-118 2248 y Fq(\(dmstoradians)25 b(Degs:number)i
(Mins:number)f(Secs:number\):)34 b(number)530 b Fi(e)n(xpr)-95
2368 y Fr(Returns)24 b(an)f(angle)g(in)g(radians,)g(gi)n(v)o(en)f
(three)h(ar)n(guments)g(representing)g(an)g(angle)g(in)-118
2489 y(de)o(grees)i(minutes)e(and)i(seconds.)121 2692
y Fh(1)60 b(lisp>)e(\(dmstoradians)f(57)i(17)h(45\))121
2812 y(1.0000009)121 2932 y(2)g(lisp>)e(\(dmstoradians)f(180)i(0)h(0\))
121 3053 y(3.1415926)-118 3494 y Fq(\(degr)n(eestodms)26
b(X:number\):)33 b(list)2063 b Fi(e)n(xpr)-95 3615 y
Fr(Gi)n(v)o(en)21 b(an)i(angle)g(X)g(in)g(de)o(grees,)g(returns)f(a)h
(list)f(of)h(three)g(inte)o(gers)f(gi)n(ving)f(the)i(angle)-118
3735 y(in)h(\(De)o(grees)h(Minutes)f(Seconds\).)-118
4108 y Fq(\(dmstodegr)n(ees)i(Degs:number)h(Mins:number)f
(Secs:number\):)34 b(number)532 b Fi(e)n(xpr)-87 4228
y Fr(Returns)31 b(an)g(angle)g(in)f(de)o(grees,)j(gi)n(v)o(en)c(three)i
(ar)n(guments)g(representing)f(an)h(angle)-118 4349 y(in)24
b(de)o(grees)h(minutes)e(and)i(seconds.)-118 4722 y Fq(\(sin)g
(X:number\):)33 b(number)2312 b Fi(e)n(xpr)-93 4842 y
Fr(Returns)25 b(the)f(sine)h(of)g(X,)f(an)h(angle)g(in)f(radians.)-118
5215 y Fq(\(sind)h(X:number\):)33 b(number)2257 b Fi(e)n(xpr)-93
5335 y Fr(Returns)25 b(the)f(sine)h(of)g(X,)f(an)h(angle)g(in)f(de)o
(grees.)-118 5708 y Fq(\(cos)h(X:number\):)33 b(number)2301
b Fi(e)n(xpr)-93 5828 y Fr(Returns)25 b(the)f(cosine)h(of)g(X,)f(an)h
(angle)g(in)f(radians.)p eop
%%Page: 24 32
24 31 bop 118 -18 a Fr(24)118 357 y Fq(\(cosd)25 b(X:number\):)33
b(number)2246 b Fi(e)n(xpr)143 478 y Fr(Returns)25 b(the)g(cosine)f(of)
h(X,)g(an)g(angle)f(in)h(de)o(grees.)118 858 y Fq(\(tan)h(X:number\):)
33 b(number)2295 b Fi(e)n(xpr)143 978 y Fr(Returns)25
b(the)g(tangent)f(of)h(X,)f(an)h(angle)g(in)f(radians.)118
1358 y Fq(\(tand)i(X:number\):)33 b(number)2240 b Fi(e)n(xpr)143
1479 y Fr(Returns)25 b(the)g(tangent)f(of)h(X,)f(an)h(angle)g(in)f(de)o
(grees.)118 1859 y Fq(\(cot)h(X:number\):)33 b(number)2307
b Fi(e)n(xpr)143 1979 y Fr(Returns)25 b(the)g(cotangent)f(of)h(X,)f(an)
h(angle)g(in)f(radians.)118 2360 y Fq(\(cotd)i(X:number\):)33
b(number)2251 b Fi(e)n(xpr)143 2480 y Fr(Returns)25 b(the)g(cotangent)f
(of)h(X,)f(an)h(angle)g(in)f(de)o(grees.)118 2860 y Fq(\(sec)h
(X:number\):)33 b(number)2307 b Fi(e)n(xpr)143 2981 y
Fr(Returns)25 b(the)g(secant)f(of)h(X,)g(an)g(angle)g(in)f(radians.)118
3361 y Fq(\(secd)i(X:number\):)33 b(number)2251 b Fi(e)n(xpr)143
3481 y Fr(Returns)25 b(the)g(secant)f(of)h(X,)g(an)g(angle)g(in)f(de)o
(grees.)118 3861 y Fq(\(csc)h(X:number\):)33 b(number)2307
b Fi(e)n(xpr)143 3982 y Fr(Returns)25 b(the)g(cosecant)f(of)h(X,)g(an)g
(angle)g(in)f(radians.)118 4362 y Fq(\(cscd)i(X:number\):)33
b(number)2251 b Fi(e)n(xpr)143 4482 y Fr(Returns)25 b(the)g(cosecant)f
(of)h(X,)g(an)g(angle)g(in)f(de)o(grees.)118 4862 y Fq(\(asin)h
(X:number\):)33 b(number)2262 b Fi(e)n(xpr)143 4983 y
Fr(Returns)25 b(the)g(arc)g(sine,)f(as)h(an)g(angle)g(in)f(radians,)h
(of)g(X.)357 5230 y Fh(\(eqn)59 b(\(sin)g(\(asin)g(X\)\))g(X\))118
5708 y Fq(\(asind)25 b(X:number\):)33 b(number)2207 b
Fi(e)n(xpr)143 5828 y Fr(Returns)25 b(the)g(arc)g(sine,)f(as)h(an)g
(angle)g(in)f(de)o(grees,)h(of)g(X.)p eop
%%Page: 25 33
25 32 bop -118 -18 a Fg(3.1.)55 b(NUMBERS)26 b(AND)e(ARITHMETIC)i
(FUNCTIONS)1294 b Fr(25)-118 357 y Fq(\(acos)25 b(X:number\):)33
b(number)2251 b Fi(e)n(xpr)-93 478 y Fr(Returns)25 b(the)f(arc)i
(cosine,)e(as)h(an)g(angle)g(in)f(radians,)h(of)g(X.)121
637 y Fh(\(eqn)59 b(\(cos)g(\(acos)f(X\)\))i(X\))-118
1045 y Fq(\(acosd)25 b(X:number\):)33 b(number)2196 b
Fi(e)n(xpr)-93 1166 y Fr(Returns)25 b(the)f(arc)i(cosine,)e(as)h(an)g
(angle)g(in)f(de)o(grees,)h(of)g(X.)-118 1534 y Fq(\(atan)g
(X:number\):)33 b(number)2246 b Fi(e)n(xpr)-93 1655 y
Fr(Returns)25 b(the)f(arc)i(tangent,)e(as)h(an)g(angle)f(in)h(radians,)
f(of)h(X.)121 1815 y Fh(\(eqn)59 b(\(tan)g(\(atan)f(X\)\))i(X\))-118
2222 y Fq(\(atand)26 b(X:number\):)33 b(number)2190 b
Fi(e)n(xpr)-93 2343 y Fr(Returns)25 b(the)f(arc)i(tangent,)e(as)h(an)g
(angle)f(in)h(de)o(grees,)f(of)h(X.)-118 2712 y Fq(\(atan2)g(Y)-9
b(:number)26 b(X:number\):)33 b(number)1738 b Fi(e)n(xpr)-92
2832 y Fr(Returns)27 b(an)f(angle)g(in)g(radians)h(corresponding)e(to)h
(the)g(angle)g(between)h(the)f(X)g(axis)-118 2952 y(and)f(the)f(v)o
(ector)h([X)g(Y].)g(Note)f(that)h(Y)f(is)h(the)f(\002rst)h(ar)n
(gument.)121 3117 y Fh(1)60 b(lisp>)e(\(atan2)h(0)g(-1\))121
3237 y(3.1415927)-118 3645 y Fq(\(atan2d)25 b(Y)-9 b(:number)27
b(X:number\):)33 b(number)1682 b Fi(e)n(xpr)-93 3765
y Fr(Returns)25 b(an)h(angle)f(in)g(de)o(grees)g(corresponding)f(to)h
(the)g(angle)g(between)g(the)g(X)g(axis)-118 3886 y(and)g(the)f(v)o
(ector)h([X)g(Y].)121 4044 y Fh(1)60 b(lisp>)e(\(atan2d)g(-1)i(1\))121
4165 y(315.0)-118 4573 y Fq(\(acot)25 b(X:number\):)33
b(number)2257 b Fi(e)n(xpr)-93 4693 y Fr(Returns)25 b(the)f(arc)i
(cotangent,)e(as)h(an)g(angle)g(in)f(radians,)g(of)h(X.)121
4853 y Fh(\(eqn)59 b(\(cot)g(\(acot)f(X\)\))i(X\))-118
5260 y Fq(\(acotd)25 b(X:number\):)33 b(number)2202 b
Fi(e)n(xpr)-93 5381 y Fr(Returns)25 b(the)f(arc)i(cotangent,)e(as)h(an)
g(angle)g(in)f(de)o(grees,)h(of)f(X.)-118 5750 y Fq(\(asec)h
(X:number\):)33 b(number)2257 b Fi(e)n(xpr)-93 5870 y
Fr(Returns)25 b(the)f(arc)i(secant,)f(as)g(an)f(angle)h(in)g(radians,)f
(of)h(X.)p eop
%%Page: 26 34
26 33 bop 118 -18 a Fr(26)357 289 y Fh(\(eqn)59 b(\(sec)g(\(asec)g
(X\)\))g(X\))118 689 y Fq(\(asecd)26 b(X:number\):)33
b(number)2201 b Fi(e)n(xpr)143 809 y Fr(Returns)25 b(the)g(arc)g
(secant,)g(as)g(an)g(angle)f(in)h(de)o(grees,)f(of)h(X.)118
1178 y Fq(\(acsc)g(X:number\):)33 b(number)2257 b Fi(e)n(xpr)143
1299 y Fr(Returns)25 b(the)g(arc)g(cosecant,)g(as)g(an)g(angle)f(in)h
(radians,)f(of)h(X.)357 1451 y Fh(\(eqn)59 b(\(csc)g(\(acsc)g(X\)\))g
(X\))118 1851 y Fq(\(acscd)26 b(X:number\):)33 b(number)2201
b Fi(e)n(xpr)143 1972 y Fr(Returns)25 b(the)g(arc)g(cosecant,)g(as)g
(an)g(angle)f(in)h(de)o(grees,)f(of)h(X.)118 2341 y Fq(\(sqrt)h
(X:number\):)33 b(number)2262 b Fi(e)n(xpr)143 2461 y
Fr(Returns)25 b(the)g(square)f(root)h(of)g(X.)118 2830
y Fq(\(exp)h(X:number\):)33 b(number)2284 b Fi(e)n(xpr)143
2950 y Fr(Returns)25 b(the)g(e)o(xponential)e(of)i(X.)118
3319 y Fq(\(log)g(X:number\):)32 b(number)2307 b Fi(e)n(xpr)146
3440 y Fr(Returns)27 b(the)h(natural)f(\(base)h(e\))g(logarithm)e(of)h
(X.)h(note)f(that)g(\(log)g(\(log)h(\(e)o(xp)f(X\)\))h(is)118
3560 y(equal)d(to)f(X.)118 3929 y Fq(\(log2)g(X:number\):)33
b(number)2257 b Fi(e)n(xpr)143 4049 y Fr(Returns)25 b(the)g(base)f(tw)o
(o)h(logarithm)e(of)i(X.)118 4418 y Fq(\(log10)f(X:number\):)33
b(number)2207 b Fi(e)n(xpr)143 4539 y Fr(Returns)25 b(the)g(base)f(ten)
h(logarithm)e(of)i(X.)118 4907 y Fq(\(random)h(N:integer\):)32
b(integer)2173 b Fi(e)n(xpr)149 5028 y Fr(Returns)31
b(a)g(pseudo-random)f(number)g(uniformly)g(selected)h(from)g(the)f
(range)i(0)e(...)118 5148 y(\(sub1)24 b(N\).)118 5295
y(The)h(random)f(number)g(generator)i(uses)e(a)h(linear)g(congruential)
f(method.)118 5633 y Fq(randomseed)i Fr(=)f(Initially:)k(set)c(from)g
(time)1756 b Fi(global)318 5754 y Fr(T)-8 b(o)29 b(get)g(a)h
(reproducible)f(sequence)h(of)f(random)g(numbers)f(you)h(should)g
(assign)f(one)318 5874 y(\(or)d(some)f(other)h(small)f(number\))g(to)g
(the)h(\003uid)g(v)n(ariable)f(randomseed.)p eop
%%Page: 27 35
27 34 bop -118 -18 a Fg(3.1.)55 b(NUMBERS)26 b(AND)e(ARITHMETIC)i
(FUNCTIONS)1294 b Fr(27)-118 357 y Fq(\(factorial)25
b(N:integer\):)32 b(integer)2151 b Fi(e)n(xpr)-93 478
y Fr(The)25 b(f)o(actorial)f(function)g(is)h(de\002ned)g(as)g(follo)n
(ws)241 636 y Fh(1.)59 b(The)g(factorial)f(of)h(0)h(is)f(1.)241
865 y(2.)g(The)g(factorial)f(of)h(N)h(is)f(N)g(times)g(the)g(factorial)
f(of)h(N-1.)121 1093 y(\(de)g(factorial)f(\(n\))241 1213
y(\(if)h(\(zerop)f(n\))h(1)h(\(*)f(n)h(\(factorial)d(\(sub1)i
(n\)\)\)\)\))p eop
%%Page: 28 36
28 35 bop 118 -18 a Fr(28)p eop
%%Page: 29 37
29 36 bop -118 966 a Fn(Identi\002ers)-118 1494 y Ft(4.1)143
b(Intr)m(oduction)-118 1746 y Fr(Ids)27 b(or)g(identi\002ers)g(can)h
(be)f(used)g(in)g(a)h(number)f(of)g(dif)n(ferent)g(w)o(ays.)38
b(Ev)o(ery)27 b(id)g(has)g(a)h(name,)f(called)-118 1866
y(its)g(print)h(name.)40 b(Gi)n(v)o(en)27 b(an)h(id,)g(one)g(can)h
(obtain)e(its)g(name)h(in)g(the)g(form)f(of)i(a)f(string.)39
b(Con)l(v)o(ersely)-6 b(,)-118 1986 y(gi)n(v)o(en)23
b(the)i(name)g(of)f(an)h(id)g(as)g(a)g(string)f(one)g(can)i(obtain)e
(the)g(id)h(itself.)-118 2241 y(Ids)k(ha)n(v)o(e)g(a)h(component)e
(called)i(the)f(property)g(list.)44 b(This)28 b(list)h(consists)f(of)h
(pairs)g(and)h(ids.)44 b(A)29 b(pair)-118 2361 y(contains)d(tw)o(o)h
(elements,)g(the)g(\002rst)g(is)g(the)g(name)g(of)g(the)g(property)-6
b(,)27 b(the)g(second)g(is)g(the)g(v)n(alue)f(asso-)-118
2481 y(ciated)f(with)f(that)g(property)-6 b(.)30 b(An)25
b(id)f(on)h(the)f(property)h(list)e(represents)i(a)g(\003ag.)-118
2735 y(Each)32 b(id)f(also)g(references)i(a)f(package,)i(see)e(Chapter)
g([packages])g(for)g(more)g(information)e(on)h(the)-118
2856 y(package)25 b(system.)-118 3110 y(In)e(PSL)g(an)g(id)f(can)h(be)g
(used)f(simultaneously)e(as)j(a)g(v)n(ariable)f(and)h(as)f(a)h(name)g
(for)g(a)g(function.)29 b(Aside)-118 3230 y(from)36 b(the)g(functions)f
(described)i(in)f(this)f(chapter)l(,)k(there)e(are)g(additional)e
(functions)g(for)i(dealing)-118 3351 y(with)24 b(the)h(v)n(alues)f
(associated)g(with)g(an)h(id.)-118 3605 y(An)19 b(id)g(can)h(be)f
(referenced)i(simply)c(by)i(writing)g(its)f(name.)29
b(If)20 b(the)f(name)g(consists)f(only)h(of)g(uppercase)-118
3725 y(alphabetic)j(characters,)i(digits,)e(or)h(a)g(subset)f(of)h(the)
g(special)g(characters)g(\(listed)f(belo)n(w\),)h(and)g(if)f(the)-118
3846 y(name)e(of)f(the)h(id)f(cannot)h(be)g(mistak)o(en)e(for)i(a)g
(number)l(,)g(then)g(the)f(id)h(can)g(be)g(notated)f(by)g(the)h
(sequence)-118 3966 y(of)25 b(characters)g(in)g(its)f(name.)-118
4250 y Fh($+)59 b(-)h($)f(&)h(*)f(/)h(:)g(;)f(|)h(<)f(=)h(>)f(?)h(\210)
f(_)h({)f(})h(\230)g(@$)-118 4520 y Fr(An)30 b(id)f(may)h(ha)n(v)o(e)g
(uppercase)g(letters,)h(lo)n(wercase)f(letters,)g(or)g(both)f(in)h(its)
f(print)h(name.)46 b(The)30 b(PSL)-118 4640 y(reader)25
b(normally)f(\(i.e.)31 b(v)o(ersion)23 b(4.2)h(and)h(abo)o(v)o(e\))f
(con)l(v)o(erts)g(uppercase)h(letters)f(to)g(the)g(correspond-)-118
4761 y(ing)g(lo)n(wercase)h(letters)f(when)g(reading)h(ids.)30
b(Therefore,)25 b(most)f(of)h(the)f(time)g(case)h(mak)o(es)g(no)f(dif)n
(fer)n(-)-118 4881 y(ence)h(when)g(notating)e(ids.)-118
5015 y(The)i(con)l(v)o(ersion)e(of)i(letters)g(is)f(controlled)g(by)g
(the)h(functions)f Fq(input-case)i Fr(and)f Fq(output-case)p
Fr(.)-118 5367 y Fq(\(input-case)h(modus\):)32 b(modus)2211
b Fi(e)n(xpr)32 5488 y Fr(If)25 b(modus)f(equals)h(lo)n(wer)l(,)f
(characters)i(on)f(input)f(are)h(con)l(v)o(erted)g(to)f(the)h
(correspond-)32 5608 y(ing)c(lo)n(wercase)g(characters.)31
b(If)22 b(modus)e(equals)h(raise,)i(characters)f(are)g(raised)g(during)
32 5728 y(input.)31 b(A)25 b(modus)f(NIL)h(lea)n(v)o(es)g(characters)h
(unchanged.)32 b(The)25 b(former)h(modus)e(is)g(re-)32
5849 y(turned.)30 b(The)25 b(def)o(ault)g(is)f Fh(lower)p
Fr(.)1604 6066 y(29)p eop
%%Page: 30 38
30 37 bop 118 -18 a Fr(30)118 357 y Fq(\(output-case)27
b(modus\):)k(modus)2156 b Fi(e)n(xpr)268 478 y Fr(If)21
b(modus)e(equals)h(lo)n(wer)l(,)h(characters)g(on)f(output)f(are)i(con)
l(v)o(erted)f(to)g(the)g(correspond-)268 598 y(ing)h(lo)n(wercase)h
(characters.)30 b(If)22 b(modus)e(equals)h(raise,)i(characters)f(are)g
(raised)g(during)268 718 y(output.)49 b(A)32 b(modus)e(NIL)h(lea)n(v)o
(es)g(characters)h(unchanged.)51 b(The)31 b(former)g(modus)g(is)268
839 y(returned.)g(The)25 b(def)o(ault)f(is)h(NIL.)118
977 y(Ids)33 b(are)h(k)o(ept)e(in)h(a)g(table)g(which)f(is)h(called)g
(the)g(symbol)e(table)i(\(or)g(id-hash-table\).)55 b(T)-8
b(w)o(o)32 b(ids)h(are)118 1097 y(considered)h(dif)n(ferent)g(if)h
(their)f(corresponding)g(print)f(names)i(are)g(dif)n(ferent.)59
b(F)o(or)35 b(e)o(xample,)h(the)118 1217 y(id)28 b(whose)g(name)h(is)f
(\224that\224)h(is)f(dif)n(ferent)g(from)g(the)h(id)f(whose)g(name)g
(is)g(\224THA)-11 b(T\224.)42 b(The)29 b(ids)f(which)118
1338 y(name)k(PSL)h(functions)d(ha)n(v)o(e)i(lo)n(wercase)g(names.)52
b(The)32 b(reason)g(you)f(can)h(type)g(such)g(names)f(with)118
1458 y(uppercase)24 b(letters)g(is)f(that)h(the)g(reader)h(is)e(con)l
(v)o(erting)g(uppercase)h(letters)g(to)f(lo)n(wercase)h(by)g(def)o
(ault.)118 1749 y Fh(1)60 b(lisp>)e(\(Add1)h(2\))118
1869 y(3)118 1990 y(2)h(lisp>)e(\(input-case)g(nil\))118
2110 y(lower)118 2231 y(3)i(lisp>)e(\(Add1)h(2\))118
2351 y(*****)g(`!Add1')f(is)h(an)h(undefined)d(function)118
2634 y Fr(If)20 b(the)g(user)g(tries)f(to)g(use)h(a)g(PSL)h(function)d
(name)i(for)g(a)g(function)f(he)h(is)f(de\002ning)h(a)g(w)o(arning)f
(message)118 2754 y(appears.)118 3045 y Fh(Do)59 b(you)h(really)e(want)
h(to)g(redefine)f(the)h(system)g(function)f(`NAME'?)118
3166 y(\(Y)h(or)h(N\))118 3449 y Fr(If)25 b(the)g(user)g(responds)f
(\224Y\224,)i(his)e(de\002nition)g(replaces)h(the)g(current)g
(de\002nition.)30 b(\(See)c(Chapter)f(9)g(for)118 3569
y(a)g(description)f(of)h(the)f(switch)g(*usermode)h(which)f(controls)g
(the)g(printing)g(of)h(this)f(message\).)118 3818 y(There)h(is)g(an)g
(escape)h(con)l(v)o(ention)d(for)i(notating)f(an)h(id)f(whose)h(name)g
(contains)f(special)h(characters.)118 3938 y(An)o(y)h(character)h
(which)g(follo)n(ws)e(a)h(!)37 b(is)26 b(considered)g(to)g(be)h(an)f
(ordinary)h(character)-5 b(.)36 b(In)27 b(addition)e(to)118
4058 y(lo)n(wercase)g(letters,)f(the)h(follo)n(wing)e(characters)i(are)
h(considered)e(special:)118 4309 y Fh(!)60 b(")f(\045)h(')f(\()h(\))f
(.)h([)g(])f(`)h(,)f(#)h(|)118 4551 y Fr(If)34 b(it)f(is)g(not)g(clear)
i(from)e(the)g(printed)g(output,)i(this)d(set)i(of)f(characters)i
(includes)e(both)g(quote)g(and)118 4672 y(accent)d(gra)n(v)o(e.)43
b(Note)29 b(that)f(if)h(an)o(y)g(character)h(wthin)e(a)h(name)g(is)g
(preceded)h(by)e(a)i(!,)g(then)f(the)g(name)118 4792
y(will)24 b(not)g(be)h(interpreted)g(as)g(a)g(number)-5
b(.)168 5013 y(SUSAN)192 b(\045)25 b(three)g(w)o(ays)g(to)f(notate)g
(the)h(same)g(id)168 5133 y(susan)168 5254 y(SuSan)168
5374 y(+$)412 b(\045)25 b(an)g(id)f(without)g(alphabetic)g(characters)
168 5494 y(1+)412 b(\045)25 b(an)g(id)f(whose)h(\002rst)g(character)h
(is)e(a)h(digit)168 5615 y(+1)412 b(\045)25 b(this)f(is)g(a)h(number)
168 5735 y Fh(x\2102+y\2102)98 b Fr(\045)25 b(an)g(id)f(which)h(looks)e
(lik)o(e)i(an)g(e)o(xpression)168 5855 y(!9)435 b(\045)25
b(the)g(id)f(whose)g(name)h(is)f(\2249\224,)i(not)e(the)g(number)h(9)p
eop
%%Page: 31 39
31 38 bop -118 -18 a Fg(4.2.)55 b(IDENTIFIERS)26 b(AND)f(THE)g(ID)g
(HASH)g(T)-9 b(ABLE)1413 b Fr(31)-118 289 y Ft(4.2)143
b(Identi\002ers)33 b(and)i(the)g(Id)h(Hash)f(T)-13 b(able)-118
515 y Fr(The)23 b(method)f(used)g(by)h(PSL)h(to)e(retrie)n(v)o(e)h
(information)e(about)i(an)g(id)f(mak)o(es)h(use)g(of)g(a)g(symbol)f
(table.)-118 635 y(PSL)f(uses)g(a)g(technique)f(called)g(hashing)g(to)g
(implement)f(this)h(table)g(\(id)h(hash)f(table)h(is)f(another)g(name)
-118 756 y(for)25 b(the)g(symbol)e(table\).)-118 998
y(The)33 b(process)g(of)h(putting)e(an)h(id)g(into)f(the)i(symbol)d
(table)j(is)e(called)i(interning.)55 b(The)33 b(PSL)h(reader)-118
1118 y(interns)28 b(ids)g(as)g(the)o(y)g(are)h(read.)42
b(Consider)29 b(what)f(happens)g(after)h(the)f(name)h(of)f(an)h(id)f
(is)g(read.)42 b(The)-118 1239 y(symbol)23 b(table)h(is)g(e)o(xamined)f
(to)h(see)g(if)h(it)e(contains)h(an)g(identi\002er)g(with)g(the)g(same)
g(name.)30 b(If)25 b(there)g(is)-118 1359 y(a)h(match)f(then)g(a)h
(reference)h(to)e(the)h(matching)e(id)i(is)f(returned.)33
b(Otherwise,)25 b(a)h(ne)n(w)f(id)g(is)g(created,)i(it)-118
1479 y(is)d(added)h(to)f(the)h(symbol)e(table,)i(and)g(a)g(reference)h
(to)f(it)f(is)g(returned.)-118 1783 y Fk(4.2.1)119 b(Identi\002er)31
b(Functions)-118 1974 y Fr(The)25 b(follo)n(wing)e(functions)g(deal)i
(with)f(identi\002ers)h(and)f(the)h(symbol)e(table.)-118
2314 y Fq(\(gensym\):)31 b(id)2834 b Fi(e)n(xpr)-89 2434
y Fr(An)30 b(id)f(is)g(created)h(which)f(is)g(not)g(interned.)44
b(Since)30 b(it)f(is)g(not)g(interned)g(it)g(is)g(not)g(eq)-118
2555 y(to)g(an)o(y)g(other)h(id.)44 b(The)30 b(id)f(is)g(deri)n(v)o(ed)
g(from)g(a)h(string)f(of)g(the)h(form)f(\224G0000\224.)45
b(The)-118 2675 y(numeric)24 b(suf)n(\002x)h(is)f(incremented)g(upon)h
(each)g(call)g(to)f(gensym.)-118 3045 y Fq(\(inter)o(ngensym\):)32
b(id)2575 b Fi(e)n(xpr)-93 3166 y Fr(Similar)24 b(to)h(gensym)e(b)n(ut)
i(returns)f(an)h(interned)f(id.)-118 3536 y Fq(\(stringgensym)h
(string\):)2425 b Fi(e)n(xpr)-87 3656 y Fr(Similar)31
b(to)g(gensym)f(b)n(ut)h(returns)g(a)h(string)e(of)i(the)f(form)g
(\224L0000\224)g(instead)f(of)i(an)-118 3777 y(id.)-118
4127 y Fq(\(r)n(emob)26 b(U:id\):)31 b(id)2667 b Fi(e)n(xpr)-89
4247 y Fr(If)30 b(U)g(has)f(been)g(interned)g(in)g(the)h(symbol)d
(table)j(then)f(it)f(is)h(remo)o(v)o(ed.)43 b(The)30
b(v)n(alues)-118 4367 y(associated)g(with)g(U)h(will)f(not)g(be)h(af)n
(fected.)49 b(U)31 b(is)f(returned.)49 b(It)30 b(is)h(not)f(possible)f
(to)-118 4488 y(remo)o(v)o(e)23 b(from)i(the)f(symbol)f(table)i(an)g
(identi\002er)f(whose)g(name)h(consists)e(of)i(a)g(single)-118
4608 y(character)-5 b(.)-118 4775 y Fh(1)59 b(lisp>)g(\(setq)g(what)g
(\(intern)f("THIS"\)\))-118 4895 y(THIS)-118 5016 y(2)h(lisp>)g(\(set)g
(what)g("SOMETHING"\))-118 5136 y("SOMETHING")-118 5256
y(3)g(lisp>)119 b(\045)59 b(Remove)g(the)g(id)g(whose)g(name)g(is)g
("THIS".)-118 5377 y(3)g(lisp>)g(\(remob)g(what\))-118
5497 y(THIS)-118 5618 y(4)g(lisp>)119 b(\045)59 b(Although)f(the)i(id)f
(whose)f(name)h(is)h("THIS")-118 5738 y(has)f(been)g(removed)f(from)
-118 5858 y(4)h(lisp>)p eop
%%Page: 32 40
32 39 bop 118 -18 a Fr(32)118 289 y Fh(\045)60 b(the)f(symbol)f(table,)
h(it)g(remains)f(in)118 409 y(\045existance)g(and)h(its)g(value)g(\045)
g(cell)118 529 y(4)h(lisp>)118 b(\045)60 b(is)f(still)g(defined)f(as)h
("SOMETHING".)118 650 y(4)h(lisp>)e(\(eval)h(what\))118
770 y("SOMETHING")118 1168 y Fq(\(newid)26 b(U:string\):)31
b(id)2521 b Fi(e)n(xpr)142 1288 y Fr(Creates)25 b(an)f(uninterned)g
(identi\002er)g(with)f(the)h(speci\002ed)g(name.)31 b(The)24
b(string)f(is)g(used)118 1408 y(as)29 b(the)f(print)g(name)h(without)e
(being)h(copied.)42 b(See)30 b(section)e(2.3)g(for)h(the)g(full)f
(de\002ni-)118 1529 y(tion.)g(This)20 b(function)g(mak)o(es)g(it)g
(possible)f(to)h(create)h(a)g(number)e(of)i(distinct)e(ids)h(which)118
1649 y(ha)n(v)o(e)27 b(the)f(same)h(name.)36 b(T)-8 b(o)27
b(illustrate)f(the)g(use)h(of)g(this)f(function,)g(the)h(implementa-)
118 1769 y(tion)g(of)g(a)h(package)g(system)e(\(see)i(Chapter)g
([packages]\),)h(requires)e(a)h(function)f(lik)o(e)118
1890 y(ne)n(wid.)118 2238 y Fq(\(inter)o(np)f(U:id,string\):)32
b(boolean)2104 b Fi(e)n(xpr)143 2359 y Fr(Returns)25
b(t)f(if)h(U)g(is)f(interned.)118 2707 y Fq(\(mapobl)h(FN)n
(AME:function\):)33 b(Unde\002ned)1706 b Fi(e)n(xpr)150
2828 y Fr(Mapobl)32 b(applies)f(function)h(FN)m(AME)f(to)h(each)h
(interned)e(id.)53 b(The)32 b(follo)n(wing)e(e)o(x-)118
2948 y(pression)f(will)h(print)f(each)i(id)f(which)f(is)h(\003agged)h
(global.)45 b(Note)30 b(that)g(there)g(should)118 3068
y(be)25 b(only)f(one)h(formal)f(parameter)i(to)e(FN)m(AME.)118
3223 y Fh(\(mapobl)58 b('\(lambda)g(\(item\))h(\(if)g(\(flagp)f(item)h
('global\))118 3343 y(\(print)g(item\)\)\)\))118 3605
y Fq(Find)118 3792 y Fr(These)30 b(functions)g(tak)o(e)g(a)h(string)e
(or)i(id)f(as)g(an)h(ar)n(gument,)g(and)f(scan)h(the)f(symbol)f(table)h
(to)g(collect)118 3913 y(a)g(list)f(of)h(ids)f(whose)g(names)g(contain)
g(a)h(pre\002x)h(or)e(suf)n(\002x)h(which)f(matches)g(the)h(ar)n
(gument.)45 b(These)118 4033 y(functions)24 b(are)h(de\002ned)h(in)e
(the)h(library)f(module)g Fq(\002nd)p Fr(.)118 4372 y
Fq(\(\002ndpr)n(e\002x)k(KEY)-9 b(:id,)24 b(string\):)32
b(id-list)1933 b Fi(e)n(xpr)145 4492 y Fr(Each)28 b(interned)f(id)f
(whose)h(name)g(contains)g(a)g(pre\002x)h(which)f(matches)g(the)g(KEY)g
(is)118 4613 y(added)e(to)f(the)h(result.)30 b(The)25
b(ids)f(are)i(sorted)e(alphabetically)-6 b(.)29 b(The)c(e)o(xpression)
357 4767 y Fh(\(findprefix)58 b('*\))118 4946 y Fr(will)24
b(return)h(a)g(list)f(of)h(all)f(of)h(the)g(interned)f(ids)g(whose)h
(name)f(be)o(gins)g(with)g(*.)118 5285 y Fq(\(\002ndsuf\002x)j(KEY)-9
b(:id,)25 b(string\):)31 b(id-list)1948 b Fi(e)n(xpr)146
5405 y Fr(Each)28 b(interned)f(id)h(whose)f(name)h(contains)f(a)h(suf)n
(\002x)g(which)f(matches)g(the)h(KEY)g(is)118 5525 y(added)d(to)f(the)h
(result.)30 b(The)25 b(ids)f(are)i(sorted)e(alphabetically)-6
b(.)29 b(The)c(e)o(xpression)357 5680 y Fh(\(findsuffix)58
b("STRING"\))118 5858 y Fr(will)24 b(return)h(a)g(list)f(of)h(all)f(of)
h(the)g(interned)f(ids)g(whose)h(name)f(ends)h(with)f(STRING.)p
eop
%%Page: 33 41
33 40 bop -118 -18 a Fg(4.3.)55 b(PR)l(OPER)-6 b(TY)26
b(LIST)g(FUNCTIONS)1921 b Fr(33)-118 289 y Ft(4.3)143
b(Pr)m(operty)34 b(List)h(Functions)-118 512 y Fr(A)e(property)f(list)g
(is)h(used)g(to)f(associate)h(an)g(id)f(with)h(a)g(set)g(of)g
(entities;)i(those)e(entities)f(are)h(called)-118 633
y(\003ags)e(if)h(their)f(use)g(associates)f(a)i(boolean)f(v)n(alue)f
(with)h(the)g(id,)h(and)g(properties)e(if)i(the)f(id)g(is)f(to)h(be)
-118 753 y(associated)24 b(with)g(an)h(arbitrary)g(attrib)n(ute.)-118
1092 y Fq(\(put)h(U:id)f(IND:id)g(PR)m(OP:any\):)30 b(any)1921
b Fi(e)n(xpr)-94 1212 y Fr(The)25 b(indicator)e(IND)i(with)e(the)h
(property)g(PR)l(OP)i(is)e(placed)g(on)g(the)h(property)f(list)f(of)
-118 1333 y(U.)k(If)g(the)g(action)f(of)h(put)f(occurs,)i(the)e(v)n
(alue)h(of)g(PR)l(OP)h(is)e(returned.)37 b(If)27 b(either)g(U)g(or)-118
1453 y(IND)e(are)g(not)g(ids)f(then)g(a)h(type)g(mismatch)e(error)j
(occurs.)121 1619 y Fh(*****)59 b(An)g(attempt)f(was)h(made)g(to)g(do)h
(PUT)f(on)g(`U',)g(which)g(is)g(not)121 1740 y(an)g(identifier)-118
1930 y Fr(The)25 b(de\002nition)f(of)g(a)i(property)e(will)g(cause)h
(the)g(pre)n(vious)e(de\002nition)h(to)h(be)g(lost.)-118
2269 y Fq(\(get)g(U:id)g(IND:id\):)31 b(any)2419 b Fi(e)n(xpr)-87
2389 y Fr(Returns)30 b(the)h(property)f(associated)g(with)g(indicator)g
(IND)h(from)f(the)h(property)f(list)-118 2510 y(of)d(U.)g(If)g(U)g
(does)g(not)g(ha)n(v)o(e)f(indicator)h(IND,)g(nil)f(is)h(returned.)37
b(Get)27 b(returns)g(nil)f(if)h(U)-118 2630 y(is)d(not)g(an)h(id.)-118
2979 y Fq(\(de\003ist)h(U:list)e(IND:id\):)31 b(list)2274
b Fi(e)n(xpr)-90 3099 y Fr(U)28 b(is)g(a)g(list)f(in)g(which)h(each)h
(element)e(is)h(a)g(tw)o(o-element)f(list:)36 b(\(ID:id)28
b(PR)l(OP:an)o(y\).)-118 3219 y(Each)e(id)f(in)g(U)g(has)h(the)f
(indicator)g(IND)h(with)e(property)i(PR)l(OP)g(placed)g(on)f(its)g
(prop-)-118 3340 y(erty)f(list)g(by)g(the)g(function)g(put)f(function.)
30 b(The)25 b(v)n(alue)e(of)i(de\003ist)f(is)g(a)h(list)e(of)i(the)f
(\002rst)-118 3460 y(elements)g(of)h(each)g(tw)o(o-element)f(list.)121
3606 y Fh(1)60 b(lisp>)e(\(deflist)g('\(\(plus2)g('two\))1257
3726 y(\(plus)g('many\)\))1137 3847 y('no-operands\))121
3967 y(\(plus2)g(plus\))121 4087 y(2)i(lisp>)e(\(get)h('plus)g
('no-operands\))121 4208 y(many)-118 4617 y Fq(\(r)n(empr)n(op)27
b(U:id)e(IND:id\):)31 b(any)2173 b Fi(e)n(xpr)-90 4737
y Fr(Remo)o(v)o(es)27 b(the)h(property)g(with)f(indicator)g(IND)h(from)
g(the)g(property)g(list)f(of)h(U.)g(Re-)-118 4858 y(turns)c(the)h(remo)
o(v)o(ed)e(property)i(or)g(nil)f(if)g(there)h(w)o(as)g(no)g(such)f
(indicator)-5 b(.)-118 5227 y Fq(\(r)n(empr)n(opl)26
b(U:id-list)f(IND:id\):)31 b(nil)2029 b Fi(e)n(xpr)-93
5347 y Fr(Remo)o(v)o(es)24 b(the)g(property)h(IND)g(from)f(all)h(of)g
(the)f(ids)g(in)h(U.)-118 5497 y(The)40 b(follo)n(wing)d(e)o(xample)i
(is)g(intended)g(to)g(illustrate)g(the)g(idea)h(of)g(data)g(dri)n(v)o
(en)e(programming.)-118 5618 y(W)-8 b(e)25 b(de\002ne)g(a)h(function)e
(called)g(simplify)f(which)i(will)f(simplify)f(symbolic)g(algebraic)i
(e)o(xpressions.)-118 5738 y(These)20 b(e)o(xpressions)e(are)i
(represented)g(as)g(lists.)27 b(T)-8 b(o)20 b(be)o(gin,)f(there)h(will)
f(be)h(only)f(one)g(operator)h(\(plus\),)-118 5858 y(and)k(operands)g
(may)g(be)g(inte)o(gers,)f(v)n(ariables)h(or)g(an)g(application)f(of)h
(plus.)30 b(Pre\002x)25 b(notation)e(is)h(used.)p eop
%%Page: 34 42
34 41 bop 118 -18 a Fr(34)118 289 y(The)28 b(addition)f(of)h(v)n
(ariable)g(x)g(and)g(3)g(w)o(ould)f(be)h(represented)g(as)g(\(plus)g(x)
g(3\).)40 b(The)28 b(\002rst)g(v)o(ersion)f(of)118 409
y(simplify)c(will)h(certainly)h(do)f(the)h(job)l(.)118
735 y Fh(\(de)59 b(simplify)f(\(expression\))238 855
y(\(cond)g(\(\(atom)h(expression\))e(expression\))596
976 y(\(\(eq)i(\(first)g(expression)e('plus\))895 1096
y(\(add-simplify)g(expression\)\))596 1216 y(\(t)j(expression\)\)\))118
1530 y Fr(Ho)n(we)n(v)o(er)l(,)38 b(as)e(we)h(add)f(operands)g(it)g
(will)g(become)g(necessary)h(to)f(rede\002ne)h(simplify)-6
b(.)63 b(A)37 b(better)118 1650 y(approach)32 b(is)f(to)h(allo)n(w)f
(the)g(operator)h(to)g(specify)f(the)h(information)e(on)i(ho)n(w)f(to)g
(simplify)f(the)i(e)o(x-)118 1771 y(pression.)118 2096
y Fh(\(de)59 b(simplify)f(\(expression\))238 2217 y(\(cond)g(\(\(atom)h
(expression\))e(expression\))596 2337 y(\(t)j(\(apply)e(\(get)h
(\(first)f(expression\))g('simplify\))1194 2457 y(\(ncons)h
(expression\)\)\)\)\))118 2771 y(\(put)g('plus)g('simplify)e
('add-simplify\))118 3085 y Fr(This)26 b(v)o(ersion)f(will)h(not)g(ha)n
(v)o(e)g(to)g(be)h(re)n(written)e(when)i(a)g(ne)n(w)f(operator)g(is)g
(added.)36 b(F)o(or)27 b(e)o(xample,)f(if)118 3205 y(the)i(operator)h
(times)e(is)h(added)h(then)f(we)h(only)e(need)i(to)f(de\002ne)h(a)g
(function)f(called)g(times-simplify)118 3325 y(and)f(attach)g(its)f
(name)h(to)g(the)g(property)g(list)f(of)h(times)f(under)h(the)g
(indicator)f(simplify)-6 b(.)35 b(W)-8 b(e)28 b(can)f(de-)118
3446 y(sign)22 b(add-simplify)e(in)i(a)h(similar)e(f)o(ashion.)29
b(Using)21 b(this)h(approach)g(we)h(will)e(be)h(able)h(to)f(accomodate)
118 3566 y(numbers)i(other)h(than)f(inte)o(gers.)238
3892 y Fh(\(de)59 b(add-simplify)e(\(expression\))357
4012 y(\(let)i(\(\(left)g(\(second)f(expression\)\))716
4133 y(\(right)g(\(third)h(expression\)\)\))477 4253
y(\(cond)f(\(\(zerop)h(left\))f(right\))835 4373 y(\(\(zerop)h(right\))
f(left\))835 4494 y(\(\(and)h(\(numberp)f(left\)\(numberp)f(right\)\))
895 4614 y(\(let)i(\(\(new)g(\(common-type)e(left)i(right\)\)\))1015
4734 y(\(apply)f(\(get)h(\(data-type)f(\(first)118 b(new\)\)'add-op\))
57 b(new\)\)\))835 4855 y(\(t)j(\(list)e(\(first)h(expression\))1373
4975 y(\(simplify)f(left\))1373 5096 y(\(simplify)g(right\)\)\)\)\)\))
118 5409 y(\(put)h('integer)f('add-op)g('plus2\))118
5723 y(1)i(lisp>)e(\(simplify)g('\(plus)h(\(plus)f(1)i(8\))f(\(plus)g
(x)g(0\)\)\))118 5843 y(\(plus)g(9)g(X\))p eop
%%Page: 35 43
35 42 bop -118 -18 a Fg(4.3.)55 b(PR)l(OPER)-6 b(TY)26
b(LIST)g(FUNCTIONS)1921 b Fr(35)-118 289 y Fk(4.3.1)119
b(Functions)30 b(f)m(or)g(Flagging)g(Ids)-118 714 y Fq(\(\003ag)25
b(U:id-list)g(V)-9 b(:id\):)31 b(nil)2394 b Fi(e)n(xpr)-94
834 y Fr(Flag)23 b(\003ags)h(each)g(id)f(in)g(U)h(with)f(V)-7
b(;)23 b(that)g(is,)g(the)g(ef)n(fect)h(of)g(\003ag)g(is)f(that)g(for)h
(each)g(id)f(X)-118 955 y(in)j(U,)g(\(\003agp)g(X)g(V\))g(has)g(the)g
(v)n(alue)g(t.)34 b(Both)26 b(V)g(and)g(all)g(of)g(the)g(elements)f(of)
h(U)g(must)-118 1075 y(be)h(identi\002ers)g(or)h(a)g(type)f(mismatch)f
(error)i(occurs.)39 b(The)27 b(id)g(V)g(will)g(appear)h(on)f(the)-118
1195 y(property)e(list)g(of)h(each)h(id)e(in)g(U.)h(Ho)n(we)n(v)o(er)l
(,)f(\003ags)h(cannot)g(be)g(accessed,)g(placed)g(on,)-118
1316 y(or)g(remo)o(v)o(ed)e(from)h(property)h(lists)e(using)g(the)i
(normal)f(property)g(list)g(functions)f(get,)-118 1436
y(put,)f(and)h(remprop.)30 b(Note)23 b(that)g(if)h(an)g(error)g(occurs)
g(during)f(e)o(x)o(ecution)f(of)i(\003ag,)g(then)-118
1556 y(some)32 b(of)g(the)g(ids)g(in)g(U)g(may)g(be)g(\003agged)h(with)
f(V)-13 b(,)32 b(and)g(others)g(may)g(not)g(be.)53 b(The)-118
1677 y(statement)31 b(belo)n(w)g(causes)h(the)g(\003ag)h(Lose)f(to)f
(be)i(placed)f(on)g(the)f(property)h(lists)f(of)-118
1797 y(the)25 b(ids)f(x)g(and)h(y)-6 b(.)121 2027 y Fh(\(flag)59
b('\(x)g(y\))g('lose\))-118 2494 y Fq(\(\003agp)25 b(U:id)g(V)-9
b(:id\):)32 b(boolean)2278 b Fi(e)n(xpr)-92 2615 y Fr(Returns)26
b(t)g(if)g(U)h(has)f(been)g(\003agged)g(with)g(V)-7 b(;)25
b(otherwise)h(returns)g(nil.)34 b(Returns)26 b(NIL)-118
2735 y(if)f(either)f(U)h(or)g(V)g(is)f(not)h(an)g(id.)-118
3093 y Fq(\(r)n(em\003ag)h(U:id-list)e(V)-9 b(:id\):)32
b(nil)2224 b Fi(e)n(xpr)-85 3213 y Fr(Remo)o(v)o(es)32
b(the)h(\003ag)h(V)f(from)g(the)g(property)g(list)f(of)h(each)h(member)
f(of)g(the)g(list)f(U.)-118 3334 y(Both)h(V)g(and)g(all)g(the)g
(elements)f(of)i(U)f(must)f(be)h(ids)g(or)g(the)g(type)g(mismatch)e
(error)-118 3454 y(occurs.)-118 3811 y Fq(\(\003ag1)25
b(U:id)g(V)-9 b(:any\):)31 b(Unde\002ned)2109 b Fi(e)n(xpr)-89
3932 y Fr(The)28 b(identi\002er)h(U)g(is)f(\003agged)h(V)-13
b(.)29 b(The)f(ef)n(fect)h(is)g(to)f(add)g(V)h(to)f(the)h(property)f
(list)g(of)-118 4052 y(U.)-118 4410 y Fq(\(r)n(em\003ag1)d(U:id)h(V)-9
b(:any\):)31 b(Unde\002ned)1939 b Fi(e)n(xpr)-96 4530
y Fr(The)23 b(identi\002er)f(U)g(is)g(no)g(longer)g(\003agged)h(V)-13
b(.)23 b(The)f(ef)n(fect)h(is)f(to)g(remo)o(v)o(ed)f(V)h(from)g(the)
-118 4651 y(property)i(list)g(of)h(U.)-118 5033 y Fk(4.3.2)119
b(Dir)n(ect)30 b(Access)f(to)h(the)g(Pr)n(operty)g(Cell)-118
5240 y Fr(Use)h(of)g(the)h(follo)n(wing)d(functions)h(can)i(destro)o(y)
e(the)h(inte)o(grity)f(of)h(the)g(property)g(list.)49
b(Since)32 b(PSL)-118 5360 y(uses)24 b(properties)h(at)f(a)i(lo)n(w)d
(le)n(v)o(el,)h(care)i(should)d(be)i(tak)o(en)g(in)f(the)h(use)g(of)g
(these)f(functions.)-118 5708 y Fq(\(pr)n(op)i(U:id\):)31
b(any)2667 b Fi(e)n(xpr)-93 5828 y Fr(Returns)25 b(the)f(property)h
(list)e(of)i(U.)p eop
%%Page: 36 44
36 43 bop 118 -18 a Fr(36)118 357 y Fq(\(setpr)n(op)26
b(U:id)f(L:any\):)32 b(L:any)2172 b Fi(e)n(xpr)143 478
y Fr(Store)25 b(item)f(L)h(as)g(the)g(property)f(list)g(of)h(U.)118
844 y Ft(4.4)143 b(V)-13 b(alue)34 b(Cell)h(Functions)118
1067 y Fr(The)21 b(contents)f(of)h(the)f(v)n(alue)h(cell)f(of)h(an)g
(id)f(is)h(usually)e(accessed)j(by)e(e)n(v)n(al)g(\(Chapter)i(11\))e
(or)h(v)n(aluecell)118 1188 y(\(belo)n(w\))j(and)h(changed)g(by)g
(setq,)f(setf)h(or)f(sometimes)g(set.)118 1527 y Fq(\(setq)i([V)-13
b(ARIABLE:id)25 b(V)-13 b(ALUE:any]\):)32 b(any)1616
b Fi(fe)n(xpr)140 1647 y Fr(The)22 b(v)n(alue)f(of)h(each)g(V)-13
b(ARIABLE)22 b(is)g(set)f(to)h(the)f(corresponding)g(v)n(alue)g(of)h(V)
-13 b(ALUE.)118 1767 y(Each)20 b(ar)n(gument)f(V)-13
b(ALUE)19 b(is)g(e)n(v)n(aluated,)h(each)g(ar)n(gument)g(V)-13
b(ARIABLE)20 b(is)f(not)g(e)n(v)n(al-)118 1888 y(uated.)31
b(It)24 b(is)h(not)f(true)h(that)357 2027 y Fh(\(setq)59
b(variable)f(value\))118 2211 y Fr(is)24 b(equi)n(v)n(alent)f(to)357
2414 y Fh(\(set)59 b('variable)f(value\))118 2616 y Fr(Where)24
b(setq)f(may)g(be)h(used)f(to)g(set)h(an)o(y)f(type)g(of)g(v)n(ariable)
g(\(\003uid,)h(global)f(or)g(local\))h(the)f(function)g(set)118
2737 y(is)h(restricted)h(to)f(\003uid)h(and)g(global)f(v)n(ariables.)
118 3076 y Fq(\(set)h(EXP:id)h(V)-13 b(ALUE:any\):)31
b(any)2078 b Fi(e)n(xpr)146 3196 y Fr(Set)28 b(is)f(used)g(to)g
(de\002ne)h(the)g(v)n(alue)f(cell)g(of)h(\003uid)f(and)h(global)f
(identi\002ers.)38 b(An)28 b(error)118 3317 y(occurs)d(if)g(EXP)g(does)
f(not)h(e)n(v)n(aluate)f(to)g(an)h(identi\002er)-5 b(.)357
3456 y Fh(*****)59 b(An)g(attempt)f(was)i(made)e(to)i(do)f(SET)g(on)g
(`EXP',)g(which)118 b(is)h(not)357 3576 y(an)60 b(identifier)118
3761 y Fr(If)25 b(EXP)g(e)n(v)n(aluates)f(to)h(t)f(or)h(nil)f(an)h
(error)h(occurs.)357 3945 y Fh(*****)59 b(Cannot)f(change)h(T)g(or)h
(NIL)118 4347 y Fq(\(desetq)26 b(U:any)f(V)-9 b(:any\):)32
b(V)-9 b(:any)2079 b Fi(macr)l(o)152 4468 y Fr(This)32
b(function)h(is)f(part)i(of)f(the)g(USEFUL)h(package.)57
b(Desetq)33 b(is)g(a)g(destructuring)118 4588 y(setq.)40
b(That)27 b(is,)h(the)g(\002rst)g(ar)n(gument)g(is)f(a)h(list)f(whose)h
(elements)f(are)i(ids.)39 b(The)28 b(v)n(alue)118 4709
y(of)h(each)g(id)e(is)h(set)h(to)f(the)g(corresponding)f(element)h(in)g
(the)g(second)g(ar)n(gument.)41 b(F)o(or)118 4829 y(e)o(xample,)24
b(e)n(v)n(aluation)f(of)357 4986 y Fh(\(desetq)58 b(\(A)i(\(B\))f(.)g
(C\))h('\(\(1\))e(\(2\))h(\(3\))h(4\)\))118 5170 y Fr(de\002nes)25
b(the)g(v)n(alue)f(of)h(A)g(to)f(be)h(\(1\),)g(B)h(to)e(be)h(2,)g(and)f
(C)i(to)e(\(\(3\))h(4\).)118 5509 y Fq(\(psetq)h([V)-13
b(ARIABLE:id)26 b(V)-13 b(ALUE:any]\):)32 b(Unde\002ned)1232
b Fi(macr)l(o)147 5629 y Fr(This)28 b(function)g(is)h(de\002ned)g(in)g
(the)g(USEFUL)g(package.)44 b(Psetq)29 b(is)f(v)o(ery)h(similar)f(to)
118 5750 y(setq.)j(The)25 b(dif)n(ference)h(is)e(that)h(with)f(psetq)h
(each)g(V)-13 b(ALUE)25 b(is)f(e)n(v)n(aluated)g(before)i(an)o(y)118
5870 y(assignment)d(is)i(made.)p eop
%%Page: 37 45
37 44 bop -118 -18 a Fg(4.4.)55 b(V)-13 b(ALUE)24 b(CELL)h(FUNCTIONS)
2058 b Fr(37)121 289 y Fh(1)60 b(lisp>)e(\(setq)h(a)g('same)119
b(b)59 b(a\))121 409 y(SAME)121 529 y(2)h(lisp>)e(\(eq)h(a)h(b\))121
650 y(T)121 770 y(3)g(lisp>)e(\(psetq)h(a)g('other)118
b(b)60 b(a\))121 891 y(OTHER)121 1011 y(4)g(lisp>)e(\(eq)h(a)h(b\))121
1131 y(NIL)-118 1607 y Fq(\(setf)25 b([LHS:f)n(orm)h(RHS:any]\):)31
b(RHS:any)1671 b Fi(macr)l(o)-94 1727 y Fr(The)24 b(ability)f(to)h
(assign)f(v)n(alues)h(to)g(ids)f(allo)n(ws)g(us)h(to)g(think)f(of)h
(ids)g(as)g(v)n(ariables.)30 b(W)-8 b(e)-118 1848 y(can)26
b(generalize)g(this)f(notion)f(of)i(v)n(ariable.)33 b(F)o(or)26
b(e)o(xample,)f(a)h(list)f(can)h(be)g(thought)e(of)-118
1968 y(as)32 b(a)h(collection)e(of)i(anon)o(ymous)d(v)n(ariables.)53
b(Usually)31 b(there)i(are)g(seperate)f(access)-118 2089
y(and)k(update)f(functions)f(for)i(each)h(kind)e(of)g(generalized)h(v)n
(ariable.)63 b(F)o(or)36 b(e)o(xample)-118 2209 y(the)d(function)g(cdr)
h(accesses)h(the)e(cdr)h(of)g(a)g(pair)l(,)i(the)e(function)f(rplacd)g
(updates)h(it.)-118 2329 y(Ho)n(we)n(v)o(er)l(,)f(we)g(can)g(think)e
(of)h(a)h(call)g(on)f(an)h(access)g(function)e(as)i(a)g(reference)h(to)
e(a)-118 2450 y(storage)26 b(location.)36 b(Just)26 b(as)h(we)g
(consider)f(the)h(mention)e(of)i(an)g(id)f(to)g(be)h(a)g(reference)-118
2570 y(to)19 b(its)g(v)n(alue,)h(\(cdr)g(pair\))g(can)g(be)f(thought)f
(of)i(as)g(the)f(name)h(for)f(the)h(cdr)g(for)g(some)f(pair)-5
b(.)-118 2690 y(Rather)25 b(than)g(ha)n(ving)f(to)h(remember)g(tw)o(o)f
(functions)g(for)h(each)h(kind)e(of)h(generalized)-118
2811 y(v)n(ariable)39 b(\(rplacd)g(corresponds)g(to)g(cdr\),)44
b(we)39 b(can)h(adopt)f(a)h(uniform)e(syntax)h(for)-118
2931 y(updating)23 b(storage)i(locations)f(using)g(the)g(setf)h(macro.)
-118 3092 y(The)g(application)e(of)i(setf)g(can)g(tak)o(e)g(on)g(an)o
(y)f(one)h(of)g(the)f(follo)n(wing)f(forms:)-118 3344
y Fh(\(setf)59 b(id)g(data\))223 b Fr(e)o(xpands)24 b(into)198
b Fh(\(setq)59 b(id)g(data\))-118 3475 y(\(setf)g(\(eval)f(form\))h
(data\))223 b Fr(e)o(xpands)24 b(into)198 b Fh(\(set)59
b(form)g(data\))-118 3726 y Fr(The)25 b(same)f(ef)n(fect)i(is)e
(obtained)g(by)g(substituting)e(v)n(alue)j(in)f(place)h(of)g(e)n(v)n
(al.)-118 3978 y Fh(\(setf)59 b(\(car)f(pair\))h(data\))223
b Fr(e)o(xpands)24 b(into)198 b Fh(\(rplaca)58 b(pair)h(data\))-118
4109 y(\(setf)g(\(cdr)f(pair\))h(data\))223 b Fr(e)o(xpands)24
b(into)198 b Fh(\(rplacd)58 b(pair)h(data\))-118 4240
y(\(setf)g(\(getv)f(vector)h(index\))f(data\))223 b Fr(e)o(xpands)24
b(into)-118 4360 y Fh(\(putv)59 b(vector)f(index)h(data\))-118
4491 y(\(setf)g(\(indx)f(form)h(index\))g(data\))223
b Fr(e)o(xpands)23 b(into)-118 4612 y Fh(\(setindx)58
b(form)h(index)f(data\))-118 4743 y(\(setf)h(\(sub)f(form)h(start)g
(size\))g(data\))223 b Fr(e)o(xpands)24 b(into)-118 4863
y Fh(\(setsub)58 b(form)h(start)g(size)g(data\))-118
4994 y(\(setf)g(\(nth)f(pair)h(index\))g(data\))223 b
Fr(e)o(xpands)24 b(into)g(an)h(e)o(xpression)e(similar)h(to)-118
5115 y Fh(\(rplaca)58 b(\(pnth)h(pair)g(index\))f(data\))-118
5366 y Fr(If)22 b(the)g(\002rst)f(ar)n(gument)h(to)f(setf)h(is)f(a)h
(macro)g(then)f(it)h(will)e(be)i(e)o(xpanded)f(before)i(setf)e(is.)30
b(F)o(or)21 b(e)o(xample,)-118 5487 y(if)k(\002rst)g(is)f(de\002ned)h
(as)-118 5738 y Fh(\(ds)59 b(first)g(\(p\))g(\(car)g(p\)\))24
b Fr(then)p eop
%%Page: 38 46
38 45 bop 118 -18 a Fr(38)118 289 y Fh(\(setf)59 b(\(first)f(p\))i
(data\))223 b Fr(is)24 b(equi)n(v)n(alent)f(to)199 b
Fh(\(setf)58 b(\(car)h(p\))h(data\))118 531 y Fr(The)23
b(USEFUL)g(module)f(contains)g(an)h(e)o(xpanded)f(v)o(ersion)g(of)h
(setf.)30 b(The)23 b(basic)f(de\002nition)g(of)h(setf)g(is)118
652 y(not)j(consistent)f(with)h(that)g(of)g(setq.)35
b(The)27 b(v)n(alue)f(returned)g(from)g(an)h(application)e(of)i(setq)f
(is)g(al)o(w)o(ays)118 772 y(the)f(v)n(alue)f(assigned.)30
b(F)o(or)25 b(e)o(xample,)f(the)g(e)o(xpression)118 1015
y Fh(\(setf)59 b(\(car)g('\(a)g(b\)\))g('d\))223 b Fr(e)o(xpands)24
b(into)198 b Fh(\(rplaca)59 b('\(a)g(b\))g('d\))118 1258
y Fr(The)26 b(v)n(alue)f(returned)h(after)g(e)n(v)n(aluating)e(this)h
(second)g(e)o(xpression)f(is)i(\(d)f(b\).)34 b(The)26
b(e)o(xtended)f(v)o(ersion)118 1378 y(of)g(setf)g(will)f(al)o(w)o(ays)g
(return)h(the)g(v)n(alue)f(assigned.)118 1621 y(An)h(application)e(of)i
(the)g(e)o(xtended)f(v)o(ersion)f(of)i(setf)g(will)e(accept)j(the)e
(additional)g(follo)n(wing)e(forms:)118 1864 y Fh(\(setf)59
b(\(cons)f(left)h(right\))g(pair\))234 b Fr(will)36 b(e)o(xpand)g(into)
f(an)i(e)o(xpression)e(similar)118 1984 y(to)118 2104
y Fh(\(progn)59 b(\(setf)f(left)h(\(car)g(pair\)\))f(\(setf)h(right)g
(\(cdr)g(pair\)\)\))118 2347 y(\(setf)g(\(cXYr)f(pair\))h(data\))223
b Fr(e)o(xpands)24 b(into)g(an)h(e)o(xpression)e(similar)h(to)118
2468 y Fh(\(rplacX)58 b(\(cYr)h(pair\))g(data\))118 2710
y Fr(where)25 b(X)g(is)g(either)f(a)h(or)g(d)g(and)g(Y)g(is)f(either)h
(a,)g(d,)f(aa,)i(...,)e(or)h(ddd)118 2953 y Fh(\(setf)59
b(\(flagp)f(id)i(name\))e(data\))223 b Fr(e)o(xpands)24
b(into)g(an)h(e)o(xpression)e(similar)h(to)118 3074 y
Fh(\(flag)59 b(\(list)f(id\))i(name\))p Fr(,)23 b(if)i(data)g(is)f
(non-nil)g(otherwise)118 3194 y Fh(\(remflag)58 b(\(list)h(id\))g
(name\))118 3316 y(\(setf)g(\(get)g(id)g(name\))g(data\))223
b Fr(e)o(xpands)24 b(into)198 b Fh(\(put)59 b(id)g(name)g(data\))118
3439 y(\(setf)g(\(getd)f(name\))h(data\))223 b Fr(e)o(xpands)24
b(into)g(an)h(e)o(xpression)e(similar)h(to)118 3559 y
Fh(\(putd)59 b(name)g(\(car)g(data\))f(\(cdr)h(data\)\))118
3802 y Fr(This)25 b(e)o(xpansion)f(assumes)h(that)g(data)h(is)f
(similar)f(to)h(an)h(e)o(xpression)e(which)i(w)o(ould)e(be)i(returned)g
(by)118 3922 y(a)f(call)g(on)f(getd.)30 b(If)25 b(data)g(is)f(a)h
(code-pointer)f(or)h(a)g(lambda)f(e)o(xpression)f(then)h('e)o(xpr)h(is)
f(used)g(in)g(place)118 4043 y(of)h(\(car)h(data\).)118
4285 y Fh(\(setf)59 b(\(lastcar)f(pair\))g(data\))223
b Fr(e)o(xpands)24 b(into)g(an)h(e)o(xpression)f(similar)f(to)118
4406 y Fh(\(rplaca)58 b(\(lastpair)g(pair\))h(data\).)118
4528 y(\(setf)g(\(list)f(a)i(b)g(c)f(...\))119 b(pair\))118
4649 y Fr(the)25 b(e)o(xpansion)e(of)i(this)f(e)o(xpression)f(is)i(v)o
(ery)f(similar)g(to)g(the)h(e)o(xpansion)e(of)118 4769
y Fh(\(desetq)58 b(\(a)i(b)f(c)h(...\))118 b(pair\))118
4891 y(\(setf)59 b(\(pnth)f(pair)h(index\))g(data\))223
b Fr(e)o(xpands)24 b(into)g(an)h(e)o(xpression)e(similar)h(to)118
5012 y Fh(\(rplacd)58 b(\(pnth)h(pair)g(\(sub1)g(index\)\))f(data\))118
5134 y(\(setf)h(\(vector)f(al)h(bl)h(cl)f(...\))119 b([ar)59
b(br)g(cr)g(...]\))118 5254 y Fr(e)o(xpands)24 b(into)g(an)h(e)o
(xpression)e(similar)h(to)118 5375 y Fh(\(progn)59 b(\(setf)f(al)i
(ar\)\(setf)e(bl)h(br\)\(setf)f(cl)h(cr\)...\))118 5497
y Fr(The)22 b(setf)g(function)f(is)g(e)o(xtensible)g(to)g(permit)h
(additional)e(operators)i(on)f(the)h(left)g(hand)g(side.)29
b(If)22 b(there)118 5618 y(is)h(an)g(assign-op)f(property)g(on)h(the)g
(property)g(list)e(of)j(the)e(operator)h(then)g(the)g(v)n(alue)f(of)h
(that)g(property)118 5738 y(\(either)30 b(a)f(lambda)g(e)o(xpression)f
(or)i(the)f(name)g(of)h(a)f(function\))g(is)g(used)g(to)g(b)n(uild)f
(the)h(e)o(xpansion)f(of)118 5858 y(the)d(macro.)31 b(The)24
b(ef)n(fect)h(is)g(similar)f(to)p eop
%%Page: 39 47
39 46 bop -118 -18 a Fg(4.4.)55 b(V)-13 b(ALUE)24 b(CELL)h(FUNCTIONS)
2058 b Fr(39)121 289 y Fh(\(apply)58 b(\(get)h(op)h('assign-op\))d
(\(append)h(\(cdr)h(lhs\))g(\(list)g(rhs\)\)\))-118 566
y Fr(The)29 b(property)g(setf-e)o(xpand)f(is)h(searched)g(for)g(when)g
(their)g(is)g(no)f(assign-op)g(property)-6 b(.)43 b(If)29
b(there)h(is)-118 686 y(such)35 b(a)h(property)e(its)h(v)n(alue)g(is)g
(applied)f(to)h(the)g(tw)o(o)g(ar)n(guments)g(passed)g(to)g(setf.)62
b(The)35 b(ef)n(fect)h(is)-118 806 y(similar)24 b(to)121
1098 y Fh(\(apply)58 b(op)i(\(list)e(lhs)i(rhs\)\))-118
1375 y Fr(If)27 b(the)f(left)g(hand)g(side)f(operator)i(is)e(\003agged)
i(as)f(setf-safe,)h(then)f(it)g(is)g(assumed)f(that)h(the)g(e)o
(xpansion)-118 1495 y(of)j(the)h(macro)f(will)g(yeild)g(an)g(e)o
(xpression)g(which)g(will)f(return)i(the)f(v)n(alue)g(of)g(the)h(right)
f(hand)g(side.)-118 1615 y(Otherwise)g(the)h(e)o(xpansion)f(will)g(tak)
o(e)h(one)g(of)g(the)f(forms)h(listed)f(belo)n(w)-6 b(.)44
b(W)l(ithin)29 b(the)h(second)f(e)o(x-)-118 1736 y(pansion,)21
b(references)j(to)d(RHS)i(are)g(replaced)f(with)f(references)i(to)f(V)
-13 b(AR.)22 b(The)g(second)f(form)h(is)g(used)-118 1856
y(when)f(RHS)h(is)f(a)h(list,)f(the)g(assumption)e(being)i(that)g(it)g
(is)g(ef)n(fecient)g(to)g(e)n(v)n(aluate)f(an)i(application)e(only)-118
1977 y(once.)121 2322 y Fh(\(progn)58 b(expansion)g(rhs\))121
2563 y(\(let)h(\(\(var)g(rhs\)\))241 2683 y(expansion)241
2804 y(var\))-118 3354 y Fq(\(psetf)26 b([LHS:f)n(orm)f(RHS:any]\):)31
b(Unde\002ned)1574 b Fi(macr)l(o)-88 3474 y Fr(This)29
b(function)h(is)f(de\002ned)i(in)e(the)h(USEFUL)h(package.)47
b(Psetf)30 b(is)g(v)o(ery)f(similar)g(to)-118 3594 y(setf.)66
b(The)37 b(dif)n(ference)g(is)g(that)f(with)g(psetf)g(each)i(RHS)f(is)g
(e)n(v)n(aluated)e(before)j(an)o(y)-118 3715 y(assignment)23
b(is)h(made.)-118 4098 y Fq(\(mak)o(eunbound)k(U:id\):)j(Unde\002ned)
1976 b Fi(e)n(xpr)-97 4219 y Fr(U)22 b(is)e(made)i(an)f(unbound)f
(identi\002er)l(,)i(that)f(is)g(to)g(say)g(it)g(will)f(no)h(longer)g
(ha)n(v)o(e)g(a)h(v)n(alue.)-118 4339 y(This)i(function)g(should)f(be)i
(applied)g(to)f(\003uid)h(identi\002ers)f(only)-6 b(.)-118
4723 y Fq(\(v)o(aluecell)25 b(U:id\):)31 b(any)2500 b
Fi(e)n(xpr)-85 4843 y Fr(Safe)35 b(access)f(to)f(the)g(v)n(alue)g(cell)
g(of)h(an)f(id.)56 b(If)34 b(U)f(is)g(not)g(an)h(id)f(a)g(type)g
(mismatch)-118 4963 y(error)27 b(occurs.)36 b(If)26 b(U)h(is)f(an)g
(unbound)g(id,)g(an)h(unbound)e(id)h(error)h(occurs.)35
b(Otherwise)-118 5084 y(the)28 b(current)h(v)n(alue)e(of)i(U)f(is)g
(returned.)41 b(This)28 b(function)f(should)g(be)i(applied)e(to)h
(\003uid)-118 5204 y(identi\002ers)c(only)-6 b(.)-118
5588 y Fq(\(unboundp)28 b(U:id\):)j(boolean)2255 b Fi(e)n(xpr)-90
5708 y Fr(Returns)27 b(t)h(is)f(U)h(is)f(unbound.)39
b(This)26 b(function)h(should)g(be)h(applied)f(to)g(\003uid)h(identi-)
-118 5828 y(\002ers)d(only)-6 b(.)p eop
%%Page: 40 48
40 47 bop 118 -18 a Fr(40)118 289 y Ft(4.5)143 b(System)25
b(Global)h(V)-13 b(ariables,)27 b(Switches)e(and)h(Other)g
(\224Hooks\224)118 548 y Fk(4.5.1)119 b(Intr)n(oduction)118
743 y Fr(A)26 b(number)f(of)g(global)g(v)n(ariables)g(pro)o(vide)g
(global)f(control)h(of)h(the)f(PSL)i(system,)d(or)i(reference)h(v)n
(al-)118 863 y(ues)e(which)g(are)h(constant)f(throughout)f(e)o(x)o
(ecution.)30 b(Certain)c(options)e(are)i(controlled)e(by)h(switches,)
118 983 y(v)n(ariables)31 b(which)h(ha)n(v)o(e)g(a)g(v)n(alue)g(of)g
(either)g(t)g(or)g(nil.)51 b(F)o(or)32 b(e)o(xample,)h(the)f(v)n(alue)g
(of)g(*v)o(erboseload)118 1104 y(controls)d(the)g(display)g(of)g
(messages)g(when)g(\002les)h(are)g(loaded.)45 b(The)29
b(v)n(alues)g(of)h(other)f(global)g(v)n(ari-)118 1224
y(ables)e(are)h(not)e(restricted)h(to)f(be)h(boolean.)37
b(F)o(or)27 b(e)o(xample,)g(the)f(v)n(alue)h(of)g(outputbase*)e(is)i
(the)g(radix)118 1344 y(in)21 b(which)g(numbers)f(are)i(printed.)29
b(PSL)22 b(uses)f(the)g(con)l(v)o(ention)e(that)i(the)g(name)g(of)g(a)h
(global)e(v)n(ariables)118 1465 y(which)25 b(is)f(a)h(switch)f(be)o
(gins)g(with)g(\224*\224.)31 b(The)24 b(names)h(of)g(other)f(global)g
(v)n(ariables)h(end)f(with)g(\224*\224.)118 1781 y Fk(4.5.2)119
b(Setting)30 b(Switches)118 1976 y Fr(Strictly)25 b(speaking,)f(N)m
(AME)g(is)h(a)h(switch)e(and)h(*N)m(AME)f(is)h(a)h(corresponding)e
(global)g(v)n(ariable)h(that)118 2096 y(assumes)h(a)h(v)n(alue)e(of)i
(t)f(or)h(nil.)35 b(Both)26 b(N)m(AME)g(and)g(*N)m(AME)f(are)i(loosely)
f(referred)i(to)e(as)g(switches)118 2216 y(else)n(where)f(in)f(the)h
(manual.)118 2460 y(The)g(functions)e(on)i(and)g(of)n(f)f(functions)g
(are)h(used)f(to)h(change)g(the)f(v)n(alues)g(of)h(the)f(identi\002ers)
h(associ-)118 2581 y(ated)30 b(with)e(switches.)45 b(Some)29
b(switches)g(contain)g(an)h(s-e)o(xpression)e(on)h(their)g(property)g
(lists)g(under)118 2701 y(the)c(indicator)f(simpfg)945
2665 y Fm(1)985 2701 y Fr(.)31 b(The)25 b(s-e)o(xpression)e(has)i(the)f
(form)h(of)g(a)g(cond)g(list:)118 2956 y Fh(\(\(t)59
b(\(action-for-on\)\))d(\(nil)j(\(action-for-off\)\)\))118
3207 y Fr(If)23 b(the)g(simpfg)f(indicator)g(is)g(present,)h(then)g
(the)f(on)h(and)f(of)n(f)h(functions)f(also)g(e)n(v)n(aluate)g(the)h
(appropri-)118 3328 y(ate)i(action)g(in)f(the)h(s-e)o(xpression.)118
3670 y Fq(\(on)g([U:id]\):)32 b(Unde\002ned)2343 b Fi(macr)l(o)144
3790 y Fr(F)o(or)26 b(each)h(switch)f(U,)g(the)g(associated)f
(identi\002er)h(*U)g(is)g(set)g(to)g(nil.)33 b(If)27
b(the)f(clause)g(\(t)118 3911 y(\(action-for)n(-on\))c(is)g(found)f
(under)h(the)g(indicator)f(simpfg)g(on)g(U)h(then)g(the)g(e)o
(xpression)118 4031 y(action-for)n(-on)j(will)f(be)h(e)n(v)n(aluated.)
118 4383 y Fq(\(off)g([U:id]\):)32 b(Unde\002ned)2332
b Fi(macr)l(o)140 4503 y Fr(F)o(or)21 b(each)h(switch)e(U,)h(the)h
(associated)e(identi\002er)i(*U)f(is)g(set)g(to)g(nil.)28
b(If)22 b(the)f(clause)h(\(nil)118 4624 y(\(action-for)n(-of)n(f\))f
(is)f(found)g(under)h(the)f(indicator)g(simpfg)g(on)g(U)h(then)f(the)h
(e)o(xpression)118 4744 y(action-for)n(-of)n(f)k(will)f(be)h(e)n(v)n
(aluated.)118 4821 y(The)34 b(switch)f(f)o(ast-inte)o(gers)f(is)h(used)
h(by)f(the)g(compiler)g(when)h(arithmetic)e(e)o(xpressions)g(are)j
(com-)118 4942 y(piled.)51 b(There)32 b(are)g(de\002nitions)f(of)g
(numeric)g(operators)h(which)f(do)g(not)h(check)g(the)f(types)g(of)h
(their)118 5062 y(ar)n(guments)24 b(in)h(order)g(to)f(reduce)i(e)o(x)o
(ecution)d(time.)30 b(Ev)n(aluation)23 b(of)118 5317
y Fh(\(get)59 b('fast-integers)e('simpfg\))118 5568 y
Fr(returns)p 118 5638 1418 4 v 230 5729 a Fj(1)268 5759
y Fp(The)29 b(name)h(simpfg)f(comes)h(from)f(its)i(introduction)c(in)j
(the)g(Reduce)g(algebra)f(system,)j(where)d(it)i(w)o(as)g(used)f(to)118
5858 y(specify)20 b(v)n(arious)f(simpli\002cations)g(to)i(be)f
(performed)d(as)k(v)n(arious)e(switches)i(were)f(turned)f(on)h(or)g(of)
n(f.)p eop
%%Page: 41 49
41 48 bop -118 -18 a Fg(4.5.)55 b(SYSTEM)25 b(GLOB)m(AL)f(V)-13
b(ARIABLES,)26 b(SWITCHES)g(AND)f(O)l(THER)g(\224HOOKS\224)252
b Fr(41)-118 289 y Fh(\(\(t)59 b(\(enable-fast-numeric-operator)o
(s\)\))-58 409 y(\(nil)g(\(disable-fast-numeric-opera)o(tors\))o
(\)\)\))-118 679 y Fr(Ev)n(aluation)23 b(of)i(\(on)g(f)o(ast-inte)o
(gers\))f(will)h(result)f(in)h(*f)o(ast-inte)o(gers)f(being)g(set)h(to)
f(t)h(and)g(e)n(v)n(alution)e(of)-118 800 y(the)i(function)e(enable-f)o
(ast-numeric-operators.)-118 1133 y Fk(4.5.3)119 b(Special)31
b(Global)f(V)-11 b(ariables)-118 1552 y Fq(nil)25 b Fr(=)g([Initially:)
k(nil])2526 b Fi(global)82 1672 y Fr(A)25 b(special)f(global)g(v)n
(ariable)g(whose)h(v)n(alue)f(cannot)h(be)f(modi\002ed)h(by)f(set)h(or)
g(setq.)-118 1926 y Fq(t)g Fr(=)g([Initially:)k(t])2682
b Fi(global)82 2046 y Fr(A)25 b(special)f(global)g(v)n(ariable)g(whose)
h(v)n(alue)f(cannot)h(be)f(modi\002ed)h(by)f(set)h(or)g(setq.)-118
2342 y Fk(4.5.4)119 b(Special)31 b(Put)f(Indicators)-118
2542 y Fr(Some)25 b(actions)f(search)h(the)g(property)f(list)g(of)h
(rele)n(v)n(ant)f(ids)g(for)h(the)g(follo)n(wing)e(indicators.)-118
2813 y Fq(br)n(eakfunction)51 b Fr(Associates)38 b(a)g(function)f(to)h
(be)g(run)h(with)e(an)h(id)g(typed)g(in)f(a)i(break)f(loop)g(\(see)467
2933 y(Chapter)30 b(16\).)41 b(F)o(or)29 b(e)o(xample,)f(q)h(is)f(used)
g(to)h(e)o(xit)e(from)h(a)h(break)g(loop)f(and)h(\(get)f('q)467
3053 y('breakfunction\))d(returns)g(breakquit.)-118 3287
y Fq(type)403 b Fr(PSL)23 b(uses)e(the)g(property)g(type)g(to)g
(indicate)f(whether)i(a)f(function)g(is)g(a)h(fe)o(xpr)l(,)f(macro,)467
3407 y(or)h(ne)o(xpr)-5 b(.)28 b(If)22 b(this)f(property)f(is)h
(absent,)h(e)o(xpr)f(is)g(assumed.)28 b(F)o(or)22 b(e)o(xample,)f
(\(get)g('and)467 3527 y(')n(type\))k(returns)g(fe)o(xpr)-5
b(.)-118 3761 y Fq(v)o(artype)260 b Fr(PSL)32 b(uses)e(the)h(property)f
(v)n(artype)h(to)f(indicate)g(whether)h(an)g(identi\002er)f(is)h(of)g
(type)467 3881 y(global)24 b(or)h(\003uid.)1005 4165
y Fh(1)60 b(lisp)f(>)g(\(fluid)g('\(mary\)\))1005 4285
y(nil)1005 4405 y(2)h(lisp)f(>)g(\(get)g('mary)g('vartype\))1005
4526 y(fluid)-118 4809 y Fq(*lambdalink)49 b Fr(The)31
b(interpreter)f(looks)g(under)h(*lambdalink)e(for)i(a)g(lambda)f(e)o
(xpression)f(when)i(a)467 4930 y(compiled)24 b(de\002nition)g(cannot)h
(be)f(found.)1005 5214 y Fh(1)60 b(lisp)f(>)g(\(de)h(list-first)d
(\(p\))i(\(car)g(p\)\))1005 5334 y(list-first)1005 5454
y(2)h(lisp)f(>)g(\(get)g('list-first)f('*lambdalink\))1005
5575 y(\(lambda)h(\(p\))g(\(car)g(p\)\))-118 5858 y Fr(The)25
b(compiler)f(and)h(loader)f(use)h(a)g(number)g(of)f(other)h
(indicators,)f(see)h(Chapter)g(19.)p eop
%%Page: 42 50
42 49 bop 118 -18 a Fr(42)118 289 y Fk(4.5.5)119 b(Special)31
b(Flag)f(Indicators)118 476 y Fq(e)o(v)o(al,)24 b(ignor)n(e)49
b Fr(These)28 b(\003ags)f(are)i(used)e(primarily)f(to)h(control)g(the)g
(e)n(v)n(aluation)f(of)i(e)o(xpressions)d(dur)n(-)655
597 y(ing)f(compilation)f(\(for)j(more)e(information)g(see)h(Chapter)g
(19\).)118 800 y Fq(lose)376 b Fr(The)29 b(function)f(putd)f(is)i(used)
f(to)g(associate)g(function)g(de\002nitions)g(with)f(ids.)42
b(Its)28 b(ap-)655 920 y(plication)c(is)g(aborted)h(if)g(the)f(id)h
(has)f(been)h(\003agged)h(lose.)655 1165 y Fh(***)59
b(`NAME')g(has)g(not)g(been)g(defined,)f(because)g(it)h(is)h(flagged)e
(LOSE)118 1410 y Fq(user)355 b Fr(If)29 b(*usermode)e(is)g(t,)i(when)f
(a)g(function)f(is)h(de\002ned)g(its)f(name)h(will)f(be)i(\003agged)f
(user)-5 b(.)655 1531 y(This)21 b(is)f(used)h(to)g(distinguish)d(user)k
(de\002ned)f(functions)f(from)h(system)f(functions)g(\(see)655
1651 y(Chapter)25 b(9)g(for)g(more)g(information\).)p
eop
%%Page: 43 51
43 50 bop -118 953 a Fn(List)52 b(Structur)l(e)-118 1468
y Ft(5.1)143 b(Intr)m(oduction)33 b(to)i(Lists)g(and)g(P)o(airs)-118
1691 y Fr(The)i(pair)g(is)f(a)i(fundamental)e(PSL)i(data)f(type,)i(and)
e(is)g(one)g(of)g(the)g(major)f(attractions)g(of)h(LISP)-118
1811 y(programming.)i(A)29 b(pair)f(consists)f(of)h(a)h(tw)o(o-item)e
(structure.)41 b(In)28 b(PSL)h(the)f(\002rst)h(element)e(is)h(called)
-118 1932 y(the)f(car)h(and)f(the)g(second)f(the)h(cdr;)i(in)d(other)h
(LISPs,)h(the)f(physical)f(relationship)g(of)h(the)g(parts)g(may)-118
2052 y(be)f(dif)n(ferent.)34 b(An)26 b(illustration)e(of)j(the)e(tree)i
(structure)f(is)f(gi)n(v)o(en)g(belo)n(w)g(as)h(a)h(box)f(diagram;)g
(the)g(car)-118 2173 y(and)f(the)f(cdr)h(are)h(each)f(represented)g(as)
g(a)h(portion)d(of)i(the)g(box.)838 2379 y Fh(-----------------)838
2499 y(||)60 b(Car)119 b(|)59 b(Cdr)119 b(||)838 2619
y(-----------------)-118 2825 y Fr(As)22 b(an)h(e)o(xample,)e(a)i(tree)
g(written)f(as)g(\(\(A)h(.)f(B\))h(.)g(\(C)g(.)f(D\)\))h(in)f
(dot-notation)e(is)i(dra)o(wn)g(belo)n(w)g(as)g(a)h(box)-118
2946 y(diagram.)838 3152 y Fh(-----------------)838 3272
y(||)179 b(/)120 b(|)f(\\)179 b(||)838 3392 y(----/-------\\----)1018
3513 y(/)537 b(\\)181 3633 y(-----------------)414 b(-----------------)
181 3753 y(||)119 b(A)179 b(|)g(B)119 b(||)418 b(||)119
b(C)180 b(|)f(D)119 b(||)181 3874 y(-----------------)414
b(-----------------)-118 4080 y Fr(The)23 b(box)f(diagrams)g(are)i
(tedious)e(to)g(dra)o(w)-6 b(,)23 b(so)g(dot-notation)e(is)h(normally)g
(used.)30 b(Note)22 b(that)h(a)g(space)-118 4200 y(is)h(left)h(on)f
(each)i(side)e(of)h(the)g(.)31 b(to)24 b(ensure)h(that)f(pairs)h(are)g
(not)g(confused)f(with)g(\003oats.)-118 4321 y(A)h(list)e(is)i(a)g
(special)g(case)g(of)g(a)g(dotted)f(pair)h(structure.)30
b(A)25 b(list)f(is)g(either)2 4526 y(1.)49 b(NIL)2 4724
y(2.)g(A)25 b(dotted)f(pair)g(whose)h(car)g(is)g(an)g(e)o(xpression)e
(and)i(whose)f(cdr)i(is)e(a)h(list.)-118 4930 y(List)f(notation)f(in)i
(general)g(is)f(a)h(lot)f(easier)i(to)e(read)h(than)g(the)g(equi)n(v)n
(alent)d(dotted)i(pair)h(notation.)-118 5136 y Fh(\(A)59
b(.)h(NIL\))896 b(=)59 b(\(A\))-118 5256 y(\(A)g(.)h(B\))1016
b(=)59 b(\(A)g(.)h(B\))-118 5377 y(\(NIL)f(.)g(NIL\))777
b(=)59 b(\(NIL\))-118 5497 y(\(A)g(.)h(\(B)f(.)h(NIL\)\))537
b(=)59 b(\(A)g(B\))-118 5618 y(\(\(A)g(.)h(NIL\))e(.)i(NIL\))418
b(=)59 b(\(\(A\)\))-118 5738 y(\(\(A)g(.)h(NIL\))e(.)i(\(B)f(.)h
(NIL\)\))f(=)g(\(\(A\))g(B\))-118 5858 y(\(A)g(.)h(\(B)f(.)h(C\)\))657
b(=)59 b(\(A)g(B)h(.)f(C\))1604 6066 y Fr(43)p eop
%%Page: 44 52
44 51 bop 118 -18 a Fr(44)118 289 y(The)25 b(follo)n(wing)e(is)h(an)h
(algorithm)e(for)j(writing)d(a)i(dotted)f(pair)h(structure)g(in)f(list)
g(notation.)238 556 y(1.)49 b(Set)28 b(a)g(pointer)e(Q)i(to)f(the)g(be)
o(ginning)f(of)h(the)g(dotted)g(pair)g(structure)g(and)h(write)f(a)h
(left)f(paren-)362 676 y(thesis.)238 907 y(2.)49 b(Write)28
b(the)f(list)g(notation)f(for)i(the)f(data)h(structure)f(pointed)g(to)g
(by)h(the)f(car)i(of)e(Q)h(and)g(reset)f(Q)362 1027 y(to)d(the)h(cdr)g
(of)g(Q.)238 1258 y(3.)49 b(If)24 b(Q)f(is)g(no)n(w)g(the)g(null)g
(pointer)l(,)g(then)g(write)g(a)h(right)e(parenthesis;)h(otherwise,)g
(write)g(a)h(space,)362 1379 y(and)36 b(if)g(Q)g(is)f(an)h(atom,)i
(write)e(a)g(period,)j(a)d(space,)j(Q')-5 b(s)36 b(name,)i(and)e(a)g
(right)g(parenthesis;)362 1499 y(otherwise)24 b(write)h(a)g(space)g
(and)g(go)f(to)h(step)f(2.)118 1874 y Ft(5.2)143 b(Basic)35
b(Functions)e(on)j(P)o(airs)118 2109 y Fr(The)h(follo)n(wing)e(are)i
(elementary)g(functions)e(on)i(pairs.)66 b(All)36 b(functions)g(in)g
(this)g(Chapter)h(which)118 2229 y(require)32 b(pairs)f(as)h
(parameters)g(signal)f(a)h(type)f(mismatch)f(error)j(if)e(the)h
(parameter)g(gi)n(v)o(en)e(is)h(not)g(a)118 2350 y(pair)-5
b(.)118 2694 y Fq(\(cons)25 b(U:any)g(V)-9 b(:any\):)32
b(pair)2311 b Fi(e)n(xpr)142 2814 y Fr(Returns)24 b(a)h(pair)f(which)f
(is)h(not)f(eq)h(to)g(an)o(ything)e(else)i(and)g(has)g(U)g(as)g(its)f
(car)i(part)f(and)118 2935 y(V)h(as)g(its)f(cdr)h(part.)118
3309 y Fq(\(car)g(U:pair\):)32 b(any)2020 b Fi(open-compiled)24
b(e)n(xpr)140 3430 y Fr(The)e(left)f(part)h(of)g(the)g(pair)f(U)h(is)g
(returned.)29 b(Note)22 b(that)f(applications)g(of)g(car)i(are)f(open)
118 3550 y(compiled,)28 b(a)g(compiled)f(application)g(of)h(car)h(will)
e(not)h(v)o(erify)f(that)h(its)f(ar)n(gument)h(is)118
3670 y(a)d(pair)-5 b(.)30 b(The)24 b(function)g(SafeCar)i(may)e(be)h
(used)f(in)g(place)g(of)h(car)-5 b(.)31 b(The)24 b(de\002nitions)f(of)
118 3791 y(these)e(tw)o(o)g(functions)f(are)i(identical,)f(the)g(dif)n
(ference)g(between)g(them)g(is)f(that)h(safecar)118 3911
y(is)i(not)g(open)g(compiled.)29 b(F)o(or)23 b(interpreted)g
(applications,)f(the)h(car)h(of)f(nil)g(is)g(nil)f(and)h(if)118
4032 y(U)i(is)f(something)f(other)i(that)f(a)h(pair)g(or)g(nil)f(the)h
(follo)n(wing)e(error)i(will)f(result.)118 4244 y Fh(*****)119
b(An)59 b(attempt)f(was)h(made)g(to)g(do)h(CAR)f(on)g(`U',)g(which)g
(is)g(not)g(a)h(pair)118 4693 y Fq(\(cdr)26 b(U:pair\):)32
b(any)2014 b Fi(open-compiled)24 b(e)n(xpr)140 4814 y
Fr(The)d(left)g(part)h(of)f(the)h(pair)f(U)g(is)g(returned.)30
b(Note)21 b(that)g(applications)f(of)i(cdr)f(are)h(open)118
4934 y(compiled,)27 b(a)h(compiled)f(application)f(of)i(cdr)g(will)e
(not)h(v)o(erify)h(that)f(its)f(ar)n(gument)i(is)118
5054 y(a)c(pair)-5 b(.)30 b(The)23 b(function)g(SafeCdr)i(may)e(be)h
(used)f(in)g(place)h(of)f(cdr)-5 b(.)30 b(The)24 b(de\002nitions)e(of)
118 5175 y(these)f(tw)o(o)f(functions)f(are)j(identical,)e(the)h(dif)n
(ference)g(between)f(them)g(is)g(that)g(safecdr)118 5295
y(is)28 b(not)h(open)f(compiled.)41 b(F)o(or)29 b(interpreted)f
(applications,)h(the)f(cdr)h(of)g(nil)f(is)g(nil)g(and)118
5415 y(if)d(U)g(is)f(something)f(other)i(that)f(a)h(pair)g(or)g(nil)f
(the)h(follo)n(wing)e(error)i(will)f(result.)118 5627
y Fh(*****)59 b(An)g(attempt)f(was)h(made)g(to)h(do)f(CDR)g(on)g(`U',)g
(which)g(is)g(not)g(a)h(pair)118 5858 y Fr(The)25 b(composites)e(of)i
(car)h(and)e(cdr)h(are)h(supported)e(up)g(to)h(four)g(le)n(v)o(els.)p
eop
%%Page: 45 53
45 52 bop -118 -18 a Fg(5.2.)55 b(B)m(ASIC)26 b(FUNCTIONS)g(ON)f(P)-9
b(AIRS)1899 b Fr(45)719 289 y Fh(Car)1733 b(Cdr)241 409
y(Caar)716 b(Cdar)g(Cadr)h(Cddr)1 529 y(Caaar)119 b(Cdaar)238
b(Cadar)118 b(Cddar)238 b(Caadr)119 b(Cdadr)238 b(Caddr)118
b(Cdddr)-58 650 y(Caaaar)g(Cadaar)g(Caadar)g(Caddar)g(Caaadr)h(Cadadr)f
(Caaddr)g(Cadddr)-58 770 y(Cdaaar)g(Cddaar)g(Cdadar)g(Cdddar)g(Cdaadr)h
(Cddadr)f(Cdaddr)g(Cddddr)-118 1007 y Fr(These)29 b(are)g(all)g(e)o
(xprs)f(of)h(one)g(ar)n(gument.)42 b(Applications)27
b(of)i(these)g(functions)e(are)j(generally)f(open)-118
1128 y(compiled.)g(An)22 b(e)o(xample)f(of)i(their)f(use)g(is)g(that)g
(\(cddar)h(p\))f(is)g(equi)n(v)n(alent)f(to)h(\(cdr)h(\(cdr)g(\(car)g
(p\)\)\).)30 b(F)o(or)-118 1248 y(interpreted)h(applications,)h(a)g
(type)f(mismatch)g(error)h(occurs)g(if)f(the)h(ar)n(gument)f(does)g
(not)g(possess)-118 1369 y(the)25 b(speci\002ed)g(component.)-118
1490 y(As)34 b(an)g(alternati)n(v)o(e)f(to)g(emplo)o(ying)f(chains)i
(of)g(car)h(and)f(cdr)g(to)g(obscure)g(depths,)h(particularly)f(in)-118
1611 y(e)o(xtracting)26 b(elements)h(of)g(a)h(list,)f(consider)g(the)g
(use)h(of)f(the)g(functions)g(\002rst,)h(second,)g(third,)f(fourth,)
-118 1731 y(rest,)e(nth,)f(and)g(pnth.)-118 2071 y Fq(\(ncons)i
(U:any\):)31 b(pair)2532 b Fi(e)n(xpr)-93 2192 y Fr(Equi)n(v)n(alent)22
b(to)j(\(cons)g(u)f(nil\).)-118 2562 y Fq(\(xcons)h(LEFT)-7
b(:any)26 b(RIGHT)-7 b(:any\):)30 b(pair)1819 b Fi(e)n(xpr)-86
2682 y Fr(Equi)n(v)n(alent)30 b(to)i(\(cons)h(RIGHT)f(LEFT\),)h(this)e
(function)h(is)g(useful)g(for)g(generating)-118 2803
y(ef)n(\002cient)25 b(list)f(b)n(uilding)f(code)i(for)g(the)f(compiler)
-5 b(.)-118 3173 y Fq(\(copy)25 b(X:any\):)32 b(any)2598
b Fi(e)n(xpr)-87 3293 y Fr(This)31 b(function)f(returns)h(a)g(cop)o(y)g
(of)g(X.)g(While)g(each)h(pair)f(is)g(copied,)h(atomic)f(ele-)-118
3414 y(ments)c(\(for)i(e)o(xample)f(ids,)g(strings,)g(and)g(v)o
(ectors\))g(are)h(not.)41 b(See)29 b(totalcop)o(y)f(in)f(sec-)-118
3534 y(tion)22 b(7.5.)30 b(Note)23 b(that)g(cop)o(y)g(is)g(recursi)n(v)
o(e)f(and)h(will)g(not)f(terminate)h(if)g(its)g(ar)n(gument)f(is)-118
3654 y(a)j(circular)g(list.)121 3818 y Fh(\(de)59 b(copy)g(\(u\))241
3938 y(\(if)g(\(pairp)f(u\))360 4058 y(\(cons)h(\(copy)f(\(car)h(u\)\))
g(\(copy)g(\(cdr)g(u\)\)\))360 4179 y(u\)\))121 4417
y(1)h(lisp>)e(\(setq)h(p)g('\("AKU")g(\(charlie\)\)\))121
4538 y(\("AKU")f(\(CHARLIE\)\))121 4658 y(2)i(lisp>)e(\(setq)h(q)g
(\(copy)g(p\)\))121 4778 y(\("AKU")f(\(CHARLIE\)\))121
4899 y(3)i(lisp>)e(\(eq)h(p)h(q\))121 5019 y(NIL)121
5140 y(4)g(lisp>)e(\(eq)h(\(first)g(p\))g(\(first)f(q\)\))121
5260 y(T)121 5380 y(5)i(lisp>)e(\(eq)h(\(third)g(p\))g(\(third)f(q\)\))
121 5501 y(NIL)-118 5738 y Fr(See)26 b(Chapter)f(6)g(for)g(other)f
(rele)n(v)n(ant)g(functions.)p eop
%%Page: 46 54
46 53 bop 118 -18 a Fr(46)118 289 y(The)32 b(follo)n(wing)e(functions)h
(are)h(kno)n(wn)f(as)h(\224destructi)n(v)o(e\224)e(functions,)i
(because)h(the)o(y)e(change)h(the)118 409 y(structure)i(of)g(the)g
(pair)g(gi)n(v)o(en)f(as)h(their)g(ar)n(gument,)i(and)e(consequently)f
(change)i(the)f(structure)f(of)118 529 y(an)o(y)i(object)g(containing)f
(the)i(pair)-5 b(.)62 b(The)o(y)35 b(are)h(frequently)f(used)g(to)g
(mak)o(e)h(code)f(more)h(ef)n(\002cient.)118 650 y(F)o(or)25
b(e)o(xample)f(append)h(will)f(cop)o(y)g(its)h(\002rst)g(ar)n(gument)f
(whereas)h(nconc)g(will)f(not.)31 b(These)25 b(functions)118
770 y(are)35 b(also)e(used)h(to)f(b)n(uild)g(structures)g(which)h
(share)g(sub-structure.)57 b(It)34 b(is)f(possible)f(to)i(create)h
(self)118 891 y(referential)g(structures)f(with)g(these)g(functions.)59
b(This)34 b(can)h(create)h(ha)n(v)n(oc)e(with)g(normal)g(printing)118
1011 y(and)25 b(list)f(tra)n(v)o(ersal)g(functions.)118
1350 y Fq(\(r)o(placa)h(U:pair)h(V)-9 b(:any\):)31 b(pair)1590
b Fi(open-compiled)24 b(e)n(xpr)147 1470 y Fr(The)29
b(car)h(of)e(the)h(pair)g(U)g(is)f(replaced)i(by)e(V)-13
b(,)29 b(the)g(modi\002ed)f(pair)h(U)g(is)f(returned.)43
b(A)118 1591 y(type)25 b(mismatch)e(error)i(occurs)g(if)g(U)g(is)f(not)
h(a)g(pair)357 1762 y Fh(1)60 b(lisp>)e(\(setq)h(fruit)g('\(orange)f
(apple\)\))357 1882 y(\(ORANGE)g(APPLE\))357 2003 y(2)i(lisp>)e(\(setq)
h(food)g(\(cons)g('cheese)f(fruit\)\))357 2123 y(\(CHEESE)g(ORANGE)h
(APPLE\))357 2243 y(3)h(lisp>)e(\(rplaca)h(fruit)f('peach\))357
2364 y(\(PEACH)h(APPLE\))357 2484 y(4)h(lisp>)e(food)357
2605 y(\(CHEESE)g(PEACH)h(APPLE\))118 3019 y Fq(\(r)o(placd)26
b(U:pair)f(V)-9 b(:any\):)31 b(pair)1585 b Fi(open-compiled)24
b(e)n(xpr)147 3139 y Fr(The)k(cdr)h(of)g(the)f(pair)h(U)f(is)h
(replaced)g(by)f(V)-13 b(,)29 b(the)f(modi\002ed)g(pair)g(U)h(is)f
(returned.)42 b(A)118 3260 y(type)25 b(mismatch)e(error)i(occurs)g(if)g
(U)g(is)f(not)h(a)g(pair)-5 b(.)357 3431 y Fh(1)60 b(lisp>)e(\(setq)h
(pair)g('\(left\)\))357 3551 y(\(LEFT\))357 3672 y(2)h(lisp>)e(\(progn)
h(\(rplacd)f(pair)h('right\))f(pair\))357 3792 y(\(LEFT)h(.)g(RIGHT\))
118 4206 y Fq(\(r)o(placw)25 b(A:pair)h(B:pair\):)32
b(pair)2159 b Fi(e)n(xpr)143 4327 y Fr(Replaces)26 b(the)e(whole)h
(pair:)30 b(the)25 b(car)h(of)e(A)h(is)g(replaced)g(with)f(the)h(car)g
(of)g(B,)h(and)e(the)118 4447 y(cdr)h(of)g(A)g(with)f(the)h(cdr)g(of)g
(B.)g(The)g(modi\002ed)f(pair)h(A)g(is)f(returned.)118
4815 y Ft(5.3)143 b(Functions)34 b(f)l(or)h(Manipulating)f(Lists)118
5039 y Fr(The)f(follo)n(wing)e(functions)h(are)i(meant)f(for)g(the)g
(special)g(pairs)g(which)f(are)i(lists,)g(as)f(described)g(in)118
5159 y(Section)25 b(5.1.)33 b(An)25 b(ar)n(gument)g(which)g(is)g(not)g
(a)g(list)g(could)g(gi)n(v)o(e)f(une)o(xpected)g(results.)32
b(F)o(or)25 b(e)o(xample,)118 5279 y(length)f(is)g(used)h(to)f
(determine)h(the)f(number)h(of)f(top)h(le)n(v)o(el)e(elements)h(in)h(a)
g(list.)118 5497 y Fh(1)60 b(lisp>)e(\(length)h('\(a)g(b)g(c\)\))118
5618 y(3)118 5738 y(2)h(lisp>)e(\(length)h('\(a)g(b)g(.)h(c\)\))118
5858 y(2)p eop
%%Page: 47 55
47 54 bop -118 -18 a Fg(5.3.)55 b(FUNCTIONS)26 b(FOR)g(MANIPULA)-11
b(TING)24 b(LISTS)1394 b Fr(47)-118 289 y Fq(Selecting)26
b(List)f(Elements)-118 696 y(\(\002rst)h(L:pair\):)32
b(any)2534 b Fi(macr)l(o)-93 816 y Fr(A)25 b(synon)o(ym)d(for)j(car)-5
b(.)-118 1186 y Fq(\(second)26 b(L:pair\):)32 b(any)2418
b Fi(macr)l(o)-93 1306 y Fr(A)25 b(synon)o(ym)d(for)j(cadr)-5
b(.)-118 1676 y Fq(\(third)26 b(L:pair\):)32 b(any)2490
b Fi(macr)l(o)-93 1796 y Fr(A)25 b(synon)o(ym)d(for)j(caddr)-5
b(.)-118 2165 y Fq(\(f)n(ourth)26 b(L:pair\):)32 b(any)2437
b Fi(macr)l(o)-93 2286 y Fr(A)25 b(synon)o(ym)d(for)j(cadddr)-5
b(.)-118 2655 y Fq(\(r)n(est)26 b(L:pair\):)32 b(any)2547
b Fi(macr)l(o)-93 2776 y Fr(A)25 b(synon)o(ym)d(for)j(cdr)-5
b(.)-118 3145 y Fq(\(lastpair)25 b(L:pair\):)32 b(any)2454
b Fi(e)n(xpr)-92 3265 y Fr(Returns)25 b(the)h(last)f(pair)h(of)g(a)g
(L.)f(It)h(is)f(often)h(useful)f(to)g(think)g(of)h(this)f(as)g(a)h
(pointer)f(to)-118 3386 y(the)e(last)h(element)f(for)h(use)f(with)g
(destructi)n(v)o(e)f(functions)h(such)g(as)h(rplaca.)31
b(If)24 b(L)f(is)h(not)-118 3506 y(a)h(pair)g(then)f(a)h(type)g
(mismatch)e(error)j(occurs.)121 3688 y Fh(\(de)59 b(lastpair)f(\(l\))
241 3808 y(\(if)h(\(or)g(\(atom)f(l\))i(\(atom)e(\(cdr)h(l\)\)\))360
3929 y(l)360 4049 y(\(lastpair)f(\(cdr)h(l\)\)\)\))-118
4474 y Fq(\(lastcar)25 b(L:pair\):)32 b(any)2493 b Fi(e)n(xpr)-93
4594 y Fr(Returns)24 b(the)h(last)f(element)g(of)h(the)f(pair)h(L.)g(A)
f(type)h(mismatch)e(error)i(results)f(if)h(L)f(is)-118
4715 y(not)g(a)h(pair)-5 b(.)121 4894 y Fh(\(de)59 b(lastcar)f(\(l\))
241 5014 y(\(if)h(\(atom)f(l\))i(l)f(\(car)g(\(lastpair)f(l\)\)\)\))
-118 5439 y Fq(\(nth)26 b(L:pair)g(N:integer\):)32 b(any)2208
b Fi(e)n(xpr)-92 5559 y Fr(Returns)26 b(the)f(Nth)h(element)f(of)h(the)
g(list)f(L.)g(If)i(L)f(is)f(atomic)g(or)h(contains)f(fe)n(wer)h(than)
-118 5679 y(N)f(elements,)f(an)h(out)f(of)h(range)g(error)g(occurs.)121
5858 y Fh(\(de)59 b(nth)g(\(l)h(n\))p eop
%%Page: 48 56
48 55 bop 118 -18 a Fr(48)477 289 y Fh(\(cond)58 b(\(\(null)h(l\))g
(\(range-error\)\))835 409 y(\(\(onep)g(n\))g(\(first)g(l\)\))835
529 y(\(t)h(\(nth)f(\(rest)f(l\))i(\(sub1)e(n\)\)\)\)\))118
684 y Fr(Note)27 b(that)g(this)g(de\002nition)f(is)h(not)g(compatible)f
(with)h(Common)f(LISP)-11 b(.)29 b(The)e(Common)f(LISP)j(de\002-)118
805 y(nition)24 b(re)n(v)o(erses)g(the)g(ar)n(guments)h(and)f
(de\002nes)i(the)e(car)i(of)f(a)g(list)f(to)g(be)h(the)g
(\224zeroth\224)g(element.)118 1144 y Fq(\(pnth)i(L:list)d
(N:integer\):)33 b(any)2202 b Fi(e)n(xpr)142 1264 y Fr(Returns)24
b(a)g(list)f(starting)g(with)g(the)h(nth)g(element)f(of)h(the)g(list)f
(L.)h(Note)f(that)h(the)g(result)118 1384 y(is)g(a)g(pointer)g(to)f
(the)h(nth)g(element)f(of)h(L,)g(a)h(destructi)n(v)o(e)d(function)h
(lik)o(e)h(rplaca)h(can)f(be)118 1505 y(used)31 b(to)f(modify)g(the)h
(structure)f(of)i(L.)e(If)i(L)f(is)f(atomic)g(or)h(contains)f(fe)n(wer)
i(than)e(N)118 1625 y(elements,)24 b(an)h(out)f(of)h(range)g(error)h
(occurs.)357 1752 y Fh(\(de)59 b(pnth)g(\(l)h(n\))477
1873 y(\(cond)e(\(\(onep)h(n\))g(l\))835 1993 y(\(\(not)g(\(pairp)g
(l\)\))g(\(range-error\)\))835 2113 y(\(t)h(\(pnth)e(\(rest)h(l\))g
(\(sub1)g(n\)\)\)\)\))118 2400 y Fk(5.3.1)119 b(Membership)30
b(and)h(Length)f(of)g(Lists)118 2806 y Fq(\(member)c(A:any)f(L:list\):)
31 b(extra-boolean)1761 b Fi(e)n(xpr)146 2926 y Fr(Returns)27
b(nil)g(if)h(A)g(is)f(not)g(equal)g(to)h(some)f(top)g(le)n(v)o(el)f
(element)h(of)h(the)f(list)g(L;)g(other)n(-)118 3047
y(wise)e(it)f(returns)g(the)h(remainder)g(of)g(L)g(whose)f(\002rst)h
(element)f(is)h(equal)f(to)h(A.)357 3174 y Fh(\(de)59
b(member)g(\(a)g(l\))477 3294 y(\(cond)f(\(\(not)h(\(pairp)g(l\)\))g
(nil\))835 3415 y(\(\(equal)g(a)g(\(car)g(l\)\))g(l\))835
3535 y(\(t)h(\(member)e(a)i(\(cdr)e(l\)\)\)\)\))118 3908
y Fq(\(memq)26 b(A:any)f(B:list\):)31 b(extra-boolean)1849
b Fi(e)n(xpr)139 4029 y Fr(The)21 b(same)g(as)f(member)h(e)o(xcept)f
(that)h(eq)g(is)f(used)g(for)i(comparison)d(instead)i(of)f(equal.)118
4149 y(Note)25 b(that)g(the)h(v)n(alue)e(returned)i(by)f(either)g
(member)g(or)h(memq)e(is)h(eq)h(to)f(the)g(portion)118
4270 y(of)i(the)g(list)f(which)g(be)o(gins)g(with)g(A.)g(Thus)h(a)g
(function)f(lik)o(e)g(rplaca)i(may)e(be)h(used)g(to)118
4390 y(alter)e(A.)118 4500 y Fh(1)60 b(lisp>)e(\(setq)h(sequence)f
('\(1)h(3)h(3\)\))118 4620 y(\(1)f(3)h(3\))118 4741 y(2)g(lisp>)e
(\(rplaca)h(\(memq)f(3)i(sequence\))d(2\))118 4861 y(\(2)i(3\))118
4981 y(3)h(lisp>)e(sequence)118 5102 y(\(1)h(2)h(3\))118
5475 y Fq(\(length)26 b(X:any\):)31 b(integer)2389 b
Fi(e)n(xpr)143 5595 y Fr(The)25 b(top)f(le)n(v)o(el)g(length)g(of)h
(the)f(list)g(X)h(is)f(returned.)357 5723 y Fh(\(de)59
b(length)g(\(l\))477 5843 y(\(if)g(\(atom)g(l\))g(0)g(\(add1)g
(\(length)f(\(cdr)h(l\)\)\)\)\))p eop
%%Page: 49 57
49 56 bop -118 -18 a Fg(5.3.)55 b(FUNCTIONS)26 b(FOR)g(MANIPULA)-11
b(TING)24 b(LISTS)1394 b Fr(49)-118 289 y Fq(Constructing,)26
b(A)n(ppending,)g(and)f(Concatenating)h(Lists)-118 712
y(\(list)e([U:any]\):)32 b(list)2603 b Fi(fe)n(xpr)-93
832 y Fr(Construct)24 b(a)h(list)f(of)h(the)g(ar)n(guments.)121
1059 y Fh(1)60 b(lisp>)e(\(list)h(\(car)g('\(left)f(.)i(right\)\))e
(\(list)h('next\)\))121 1179 y(\(LEFT)g(\(NEXT\)\))-118
1641 y Fq(\(append)27 b(U:list)d(V)-9 b(:list\):)30 b(list)2289
b Fi(e)n(xpr)-93 1761 y Fr(Returns)25 b(a)g(constructed)f(list)g(in)g
(which)h(the)f(last)h(element)f(of)h(U)g(is)f(follo)n(wed)g(by)g(the)
-118 1882 y(\002rst)h(element)f(of)h(V)-13 b(.)25 b(The)g(list)e(U)i
(is)g(copied,)f(b)n(ut)g(V)h(is)g(not.)121 2105 y Fh(\(de)59
b(append)g(\(u)g(v\))241 2226 y(\(cond)f(\(\(not)h(\(pairp)f(u\)\))h
(v\))599 2346 y(\(t)h(\(cons)e(\(first)h(u\))g(\(append)f(\(rest)h(u\))
g(v\)\)\)\)\))-118 2808 y Fq(\(nconc)26 b(U:list)e(V)-9
b(:list\):)31 b(list)2355 b Fi(e)n(xpr)-80 2928 y Fr(Destructi)n(v)o(e)
36 b(v)o(ersion)h(of)h(append,)j(the)c(cdr)i(of)e(the)h(last)g(pair)f
(of)h(U)g(is)g(modi\002ed)-118 3049 y(to)c(reference)i(V)-13
b(.)35 b(While)f(append)g(creates)i(a)f(cop)o(y)f(of)h(U,)f(nconc)h
(uses)f(U)g(itself)g(in)-118 3169 y(constructing)23 b(the)i(result.)121
3393 y Fh(\(de)59 b(nconc)g(\(u)g(v\))241 3513 y(\(if)g(\(not)g
(\(pairp)f(u\)\))360 3633 y(v)360 3754 y(\(rplacd)g(\(lastpair)g(u\))h
(v\)\)\))121 4046 y(1)h(lisp>)e(\(setq)h(a)g('\(swan\)\))121
4166 y(\(SWAN\))121 4286 y(3)h(lisp>)e(\(nconc)h(a)g('\(giles\)\))121
4407 y(\(SWAN)g(GILES\))121 4527 y(4)h(lisp>)e(a)121
4648 y(\(SWAN)h(GILES\))-118 5150 y Fq(\(aconc)25 b(U:list)g(V)-9
b(:any\):)31 b(list)2333 b Fi(e)n(xpr)-93 5271 y Fr(Destructi)n(v)o
(ely)22 b(adds)j(element)f(V)h(to)g(the)f(tail)g(of)h(list)f(U.)121
5497 y Fh(1)60 b(lisp>)e(\(setq)h(a)g('\(phillips\)\))121
5618 y(\(PHILLIPS\))121 5738 y(2)h(lisp>)e(\(progn)h(\(aconc)f(a)i
('posner\))e(a\))121 5858 y(\(PHILLIPS)g(POSNER\))p eop
%%Page: 50 58
50 57 bop 118 -18 a Fr(50)118 357 y Fq(\(lconc)26 b(PTR:list)e(LST)-7
b(:list\):)32 b(list)2137 b Fi(e)n(xpr)143 478 y Fr(Ef)n(fecti)n(v)o
(ely)24 b(nconc,)h(b)n(ut)f(a)n(v)n(oids)h(scanning)f(from)h(the)g
(front)g(to)g(the)g(end)g(of)g(the)g(\002rst)118 598
y(list)h(by)g(maintaining)f(a)i(pointer)-5 b(.)36 b(PTR)28
b(is)e(a)h(pair)g(whose)f(car)i(is)e(a)h(list)f(L)h(and)g(whose)118
718 y(cdr)d(is)e(a)i(reference)g(to)f(the)g(last)g(pair)g(of)g(L.)g
(The)g(v)n(alue)g(returned)g(is)g(the)g(updated)f(pair)118
839 y(PTR.)357 994 y Fh(\(progn)59 b(\(rplacd)f(\(cdr)h(ptr\))g(lst\))
776 1114 y(\(rplacd)f(ptr)h(\(lastpair)f(lst\)\)\))118
1317 y Fr(This)31 b(function)g(is)h(useful)f(for)h(b)n(uilding)f(lists)
f(from)i(left)g(to)f(right,)i(PTR)g(should)d(be)i(initialized)f(to)118
1437 y(\(nil)24 b(.)31 b(nil\))24 b(before)i(the)e(\002rst)h(call)g(on)
g(lconc.)118 1776 y Fq(\(tconc)h(PTR:list)f(ELM:any\):)32
b(list)2058 b Fi(e)n(xpr)144 1897 y Fr(Ef)n(fecti)n(v)o(ely)24
b(aconc,)i(b)n(ut)f(a)n(v)n(oids)f(scanning)h(from)g(the)h(front)f(to)g
(the)h(end)f(of)h(the)f(\002rst)118 2017 y(list)h(by)g(maintaining)f(a)
i(pointer)-5 b(.)36 b(PTR)28 b(is)e(a)h(pair)g(whose)f(car)i(is)e(a)h
(list)f(L)h(and)g(whose)118 2137 y(cdr)d(is)e(a)i(reference)g(to)f(the)
g(last)g(pair)g(of)g(L.)g(The)g(v)n(alue)g(returned)g(is)g(the)g
(updated)f(pair)118 2258 y(PTR.)357 2413 y Fh(\(progn)59
b(\(setq)f(elm)h(\(ncons)g(elm\)\))776 2533 y(\(rplacd)f(\(cdr)h(ptr\))
g(elm\))776 2653 y(\(rplacd)f(ptr)h(elm\)\))118 2856
y Fr(This)30 b(function)g(is)g(useful)h(for)g(b)n(uilding)e(lists)h
(from)g(left)h(to)f(right.)48 b(PTR)32 b(should)e(be)g(initialized)g
(to)118 2976 y(\(nil)24 b(.)31 b(nil\))24 b(before)i(the)e(\002rst)h
(call)g(on)g(tconc.)118 3242 y Fq(Lists)g(as)f(Sets)118
3430 y Fr(A)30 b(set)f(is)g(a)h(list)e(in)h(which)g(each)h(element)f
(occurs)h(only)e(once.)45 b(Since)30 b(the)f(order)h(of)f(elements)g
(in)g(a)118 3550 y(set)c(does)f(not)g(matter)l(,)h(these)f(functions)g
(may)h(not)f(preserv)o(e)h(order)-5 b(.)118 3889 y Fq(\(adjoin)25
b(ELEMENT)-7 b(:any)27 b(SET)-7 b(:list\):)32 b(list)1768
b Fi(e)n(xpr)143 4010 y Fr(Add)24 b(Element)g(to)h(SET)g(if)g(it)f(is)g
(not)h(already)g(a)g(member)-5 b(.)357 4188 y Fh(\(de)59
b(adjoin)g(\(elm)g(set\))477 4308 y(\(if)g(\(member)f(elm)h(set\))g
(set)g(\(cons)g(elm)g(set\)\)\))118 4511 y Fr(Recall)26
b(that)e(member)g(uses)h(equal)f(to)h(test)f(for)h(equality)-6
b(.)118 4850 y Fq(\(adjoinq)26 b(ELEMENT)-7 b(:any)27
b(SET)-7 b(:list\):)31 b(list)1713 b Fi(e)n(xpr)143 4970
y Fr(Similar)24 b(to)h(adjoin)f(e)o(xcept)g(that)g(eq)h(is)g(used)f(to)
h(test)f(for)h(set)g(membership.)118 5339 y Fq(\(union)h(X:list)e(Y)-9
b(:list\):)31 b(list)2360 b Fi(e)n(xpr)143 5460 y Fr(Returns)25
b(the)g(union)e(of)i(sets)g(X)f(and)h(Y)-13 b(.)357 5618
y Fh(\(de)59 b(union)g(\(x)g(y\))477 5738 y(\(if)g(\(not)g(\(pairp)f
(x\)\))596 5858 y(y)p eop
%%Page: 51 59
51 58 bop -118 -18 a Fg(5.3.)55 b(FUNCTIONS)26 b(FOR)g(MANIPULA)-11
b(TING)24 b(LISTS)1394 b Fr(51)360 289 y Fh(\(union)59
b(\(rest)f(x\))779 409 y(\(if)h(\(member)f(\(first)g(x\))i(y\))898
529 y(y)898 650 y(\(cons)f(\(first)f(x\))h(y\)\)\)\)\))-118
852 y Fr(Notice)20 b(that)g(the)g(tw)o(o)f(ar)n(guments)h(to)g(union)f
(are)i(assumed)f(to)f(be)i(sets,)f(if)h(either)f(contains)f(duplicates)
-118 972 y(then)24 b(the)h(result)f(may)h(contain)f(duplicates)g(as)h
(well.)121 1199 y Fh(1)60 b(lisp>)e(\(union)h('\(1)g(2)g(2\))h
('\(3\)\))121 1319 y(\(2)f(1)h(3\))121 1440 y(2)g(lisp>)e(\(union)h
('\(3\))g('\(1)g(2)g(2\)\))121 1560 y(\(3)g(1)h(2)f(2\))-118
2005 y Fq(\(unionq)26 b(X:list)e(Y)-9 b(:list\):)31 b(list)2305
b Fi(e)n(xpr)-93 2126 y Fr(Similar)24 b(to)h(union)e(e)o(xcept)i(that)f
(eq)h(is)f(used)h(to)f(test)h(for)g(set)f(membership.)-118
2495 y Fq(\(intersection)i(U:list)e(V)-9 b(:list\):)31
b(list)2106 b Fi(e)n(xpr)-93 2615 y Fr(Returns)25 b(the)f(intersection)
g(of)h(sets)f(U)h(and)g(V)-13 b(.)121 2772 y Fh(\(de)59
b(intersection)e(\(u)j(v\))241 2893 y(\(cond)e(\(\(not)h(\(pairp)f
(u\)\))h(nil\))599 3013 y(\(\(member)f(\(car)h(u\))g(v\))659
3133 y(\(cons)g(\(car)g(u\))1018 3254 y(\(intersection)d(\(cdr)j(u\))h
(\(delete)e(\(car)h(u\))g(v\)\)\)\))599 3374 y(\(t)h(\(intersection)c
(\(cdr)j(u\))h(v\)\)\)\))-118 3576 y Fr(Notice)33 b(that)g(the)g(tw)o
(o)g(ar)n(guments)g(to)g(intersection)g(are)h(assumed)f(to)g(be)g
(sets,)i(if)f(either)f(contains)-118 3697 y(duplicates)24
b(then)g(the)h(result)f(may)h(contain)f(duplicates)g(as)h(well.)121
3923 y Fh(1)60 b(lisp>)e(\(intersection)f('\(1)i(2\))g('\(2\)\))121
4044 y(\(2\))121 4164 y(2)h(lisp>)e(\(intersection)f('\(2)i(2\))g('\(1)
h(2)f(2\)\))121 4284 y(\(2)g(2\))-118 4730 y Fq(\(intersectionq)26
b(U:list)f(V)-9 b(:list\):)30 b(list)2051 b Fi(e)n(xpr)-93
4850 y Fr(Similar)24 b(to)h(intersection)e(e)o(xcept)i(that)f(eq)h(is)f
(used)h(to)f(test)h(for)g(set)f(membership.)-118 5219
y Fq(\(list2set)g(SET)-7 b(:list\):)32 b(list)2450 b
Fi(e)n(xpr)-93 5339 y Fr(Remo)o(v)o(e)24 b(redundant)g(elements)g(from)
h(the)f(top)h(le)n(v)o(el)e(of)i(SET)g(using)f(equal.)-118
5708 y Fq(\(list2setq)h(SET)-7 b(:list\):)31 b(list)2395
b Fi(e)n(xpr)-93 5828 y Fr(Remo)o(v)o(e)24 b(redundant)g(elements)g
(from)h(the)f(top)h(le)n(v)o(el)e(of)i(SET)g(using)f(eq.)p
eop
%%Page: 52 60
52 59 bop 118 -18 a Fr(52)118 289 y Fk(5.3.2)119 b(Deleting)31
b(Elements)e(of)h(Lists)118 476 y Fr(Note)g(that)f(the)h(functions)e
(suf)n(\002x)o(ed)h(by)h(IP)g(will)f(destructi)n(v)o(ely)f(modify)h
(the)g(list)g(from)h(which)f(ele-)118 597 y(ments)f(are)h(being)e
(deleted.)41 b(If)29 b(you)f(use)g(such)g(a)h(function)e(do)i(not)e
(rely)i(on)f(the)g(result)g(being)f(eq)i(to)118 717 y(the)j(ar)n
(gument.)51 b(The)32 b(v)n(alue)f(returned)h(will)f(ha)n(v)o(e)g(all)h
(of)g(the)f(elements)g(remo)o(v)o(ed,)i(b)n(ut)e(the)g(modi-)118
837 y(\002cations)h(which)g(ha)n(v)o(e)g(been)g(made)h(to)e(the)i(ar)n
(gument)e(may)h(not)g(re\003ect)h(this.)52 b(In)33 b(particular)l(,)h
(the)118 958 y(leading)28 b(elements)f(which)h(are)g(equal)g(to)g(the)g
(element)f(being)h(deleted)g(will)f(not)g(be)i(spliced)e(out)g(of)118
1078 y(the)e(list.)118 1262 y Fh(1)60 b(lisp>)e(\(setq)h(this)g('\(a)g
(b)h(c\)\))118 1383 y(\(a)f(b)h(c\))118 1503 y(2)g(lisp>)e(\(deletip)g
('a)i(this\))118 1624 y(\(b)f(c\))118 1744 y(3)h(lisp>)e(this)118
1864 y(\(a)h(b)h(c\))118 1985 y(2)g(lisp>)e(\(reversip)g(this\))118
2105 y(\(c)h(b)h(a\))118 2225 y(3)g(lisp>)e(this)118
2346 y(\(a\))118 2749 y Fq(\(delete)26 b(U:any)f(V)-9
b(:list\):)31 b(list)2327 b Fi(e)n(xpr)146 2869 y Fr(Returns)28
b(V)g(with)f(the)h(\002rst)g(top)f(le)n(v)o(el)f(occurrence)j(of)f(U)g
(remo)o(v)o(ed)f(from)g(it.)40 b(Equal)118 2989 y(is)24
b(used)g(for)h(comparing)f(elements.)29 b(The)c(result)f(consists)f(of)
h(a)h(cop)o(y)f(of)h(the)f(portion)118 3110 y(of)30 b(U)g(which)f
(comes)h(before)g(the)g(deleted)g(element,)g(and)g(the)g(portion)f(of)h
(U)g(which)118 3230 y(follo)n(ws)23 b(the)i(deleted)g(element.)357
3353 y Fh(\(de)59 b(delete)g(\(u)g(v\))477 3473 y(\(cond)f(\(\(not)h
(\(pairp)g(v\)\))g(v\))835 3593 y(\(\(equal)g(\(car)g(v\))g(u\))g
(\(cdr)g(v\)\))835 3714 y(\(t)h(\(cons)e(\(car)h(v\))h(\(delete)e(u)h
(\(cdr)g(v\)\)\)\)\)\))118 4103 y Fq(\(del)26 b(F:function)g(U:any)f(V)
-9 b(:list\):)30 b(list)1976 b Fi(e)n(xpr)143 4223 y
Fr(Generalized)25 b(delete)g(function)f(with)g(F)h(as)g(the)g
(comparison)f(function.)357 4369 y Fh(1)60 b(lisp>)e(\(del)h('\(lambda)
f(\(i)i(e\))f(\(>)g(i)h(e\)\))f(0)g('\(-2)g(3)h(-1\)\))357
4489 y(\(-2)f(-1\))118 4878 y Fq(\(deletip)26 b(U:any)f(V)-9
b(:list\):)31 b(list)2288 b Fi(e)n(xpr)143 4998 y Fr(The)25
b(destructi)n(v)o(e)e(v)o(ersion)h(of)h(delete,)f(V)h(may)g(be)f
(modi\002ed.)118 5367 y Fq(\(delq)i(U:any)f(V)-9 b(:list\):)30
b(list)2394 b Fi(e)n(xpr)148 5488 y Fr(Returns)29 b(V)h(with)e(the)i
(\002rst)f(top)g(le)n(v)o(el)f(occurrence)j(of)e(U)h(remo)o(v)o(ed)e
(from)h(it.)44 b(Eq)30 b(is)118 5608 y(used)h(for)g(comparing)f
(elements.)49 b(The)31 b(result)f(consists)g(of)h(a)h(cop)o(y)e(of)h
(the)g(portion)118 5728 y(of)f(U)g(which)f(comes)h(before)g(the)g
(deleted)g(element,)g(and)g(the)g(portion)f(of)h(U)g(which)118
5849 y(follo)n(ws)23 b(the)i(deleted)g(element.)p eop
%%Page: 53 61
53 60 bop -118 -18 a Fg(5.3.)55 b(FUNCTIONS)26 b(FOR)g(MANIPULA)-11
b(TING)24 b(LISTS)1394 b Fr(53)-118 357 y Fq(\(delqip)26
b(U:any)f(V)-9 b(:list\):)30 b(list)2311 b Fi(e)n(xpr)-93
478 y Fr(The)25 b(destructi)n(v)o(e)e(v)o(ersion)g(of)i(delq,)g(V)g
(may)f(be)h(modi\002ed.)-118 847 y Fq(\(delasc)g(U:any)g(V)-9
b(:a-list\):)31 b(a-list)2150 b Fi(e)n(xpr)-96 967 y
Fr(Returns)22 b(V)g(with)f(the)g(\002rst)h(top)f(le)n(v)o(el)g
(occurrence)i(of)f(\(U)g(.)g(ANY\))f(remo)o(v)o(ed)g(from)h(it.)-118
1087 y(Equal)27 b(is)g(used)g(for)h(comparisons.)37 b(The)28
b(result)f(consists)f(of)h(a)h(cop)o(y)f(of)h(the)f(portion)-118
1208 y(of)j(U)g(which)f(comes)h(before)g(the)g(deleted)g(element,)g
(and)g(the)g(portion)f(of)g(U)h(which)-118 1328 y(follo)n(ws)23
b(the)i(deleted)f(element.)-118 1677 y Fq(\(delascip)h(U:any)g(V)-9
b(:a-list\):)31 b(a-list)2067 b Fi(e)n(xpr)-93 1797 y
Fr(The)25 b(destructi)n(v)o(e)e(v)o(ersion)g(of)i(delasc,)g(V)g(may)f
(be)h(modi\002ed.)-118 2166 y Fq(\(delatq)h(U:any)f(V)-9
b(:a-list\):)30 b(a-list)2145 b Fi(e)n(xpr)-89 2286 y
Fr(Returns)29 b(V)g(with)g(the)g(\002rst)g(top)f(le)n(v)o(el)g
(occurrence)j(of)e(\(U)g(.)g(ANY\))g(remo)o(v)o(ed)f(from)-118
2407 y(it.)38 b(Eq)28 b(is)f(used)g(for)h(comparisons.)38
b(The)28 b(result)f(consists)f(of)i(a)g(cop)o(y)f(of)h(the)f(portion)
-118 2527 y(of)j(U)g(which)f(comes)h(before)g(the)g(deleted)g(element,)
g(and)g(the)g(portion)f(of)g(U)h(which)-118 2647 y(follo)n(ws)23
b(the)i(deleted)f(element.)-118 2996 y Fq(\(delatqip)i(U:any)f(V)-9
b(:a-list\):)30 b(a-list)2062 b Fi(e)n(xpr)-93 3116 y
Fr(The)25 b(destructi)n(v)o(e)e(v)o(ersion)g(of)i(delatq,)g(V)f(may)h
(be)g(modi\002ed.)-118 3440 y Fk(5.3.3)119 b(List)29
b(Re)n(v)o(ersal)-118 3846 y Fq(\(r)n(e)o(v)o(erse)c(U:list\):)31
b(list)2547 b Fi(e)n(xpr)-93 3966 y Fr(Returns)25 b(a)g(cop)o(y)f(of)h
(the)g(top)f(le)n(v)o(el)g(of)h(U)f(in)h(re)n(v)o(erse)f(order)-5
b(.)121 4213 y Fh(\(de)59 b(reverse)f(\(l\))241 4334
y(\(do)h(\(\(result)f(nil)h(\(cons)f(\(car)h(pointer\))f(result\)\))539
4454 y(\(pointer)g(l)i(\(cdr)f(pointer\)\)\))480 4574
y(\(\(not)f(\(pairp)h(pointer\)\))e(result\)\)\))-118
5010 y Fq(\(r)n(e)o(v)o(ersip)25 b(U:list\):)31 b(list)2508
b Fi(e)n(xpr)-79 5130 y Fr(The)39 b(destructi)n(v)o(e)e(v)o(ersion)g
(of)i(re)n(v)o(erse.)73 b(The)38 b(ar)n(gument)h(may)f(be)h(destructi)n
(v)o(ely)-118 5251 y(modi\002ed)22 b(to)g(produce)g(the)h(result.)29
b(Note)22 b(also)g(that)g(the)h(result)f(may)g(not)g(be)g(eq)h(to)f
(the)-118 5371 y(ar)n(gument.)121 5618 y Fh(\(de)59 b(reversip)f(\(l\))
241 5738 y(\(prog)g(\(next)h(result\))599 5858 y(\(while)g(\(pairp)f
(l\))p eop
%%Page: 54 62
54 61 bop 118 -18 a Fr(54)955 289 y Fh(\(setq)59 b(next)g(\(cdr)f
(l\)\))955 409 y(\(setq)h(result)f(\(rplacd)g(l)i(result\)\))955
529 y(\(setq)f(l)g(next\)\))835 650 y(\(return)g(result\)\)\))118
1027 y Fk(5.3.4)119 b(Functions)31 b(f)m(or)e(Sorting)118
1242 y Fr(The)d Fq(gsort)f Fr(module)g(pro)o(vides)f(functions)g(for)i
(sorting)f(lists.)31 b(Some)26 b(of)f(the)h(functions)e(tak)o(e)i(a)g
(com-)118 1362 y(parison)40 b(function)f(as)h(an)h(ar)n(gument.)76
b(The)41 b(comparison)e(function)g(tak)o(es)h(tw)o(o)g(ar)n(guments)g
(and)118 1482 y(should)34 b(return)i(nil)f(if)g(the)h(second)f(ar)n
(gument)g(should)g(come)g(before)h(the)f(\002rst)h(in)f(the)h(sorted)f
(re-)118 1603 y(sult.)30 b(A)23 b(lambda)h(e)o(xpression)e(is)h
(acceptable)i(as)f(a)g(comparison)f(function.)29 b(Note)24
b(that)f(since)h(sorting)118 1723 y(requires)e(man)o(y)g(comparisons,)f
(and)h(thus)g(man)o(y)f(calls)h(on)g(the)g(comparison)g(function,)f
(the)i(sort)e(will)118 1844 y(be)k(much)f(f)o(aster)i(if)e(the)h
(comparison)f(function)g(is)g(compiled.)118 2195 y Fq(\(gsort)h(T)-9
b(ABLE:list)26 b(LEQ-FN:id,function\):)33 b(list)1483
b Fi(e)n(xpr)139 2316 y Fr(Returns)21 b(a)g(sorted)f(list.)28
b(LEQ-FN)21 b(is)f(the)h(comparison)e(function)h(used)g(to)h(determine)
118 2436 y(the)33 b(sorting)e(order)-5 b(.)54 b(The)33
b(original)e(T)-9 b(ABLE)33 b(is)f(unchanged.)53 b(Gsort)33
b(uses)f(a)h(stable)118 2557 y(sorting)26 b(algorithm.)35
b(In)27 b(other)f(w)o(ords,)h(if)g(X)g(appears)g(before)g(Y)g(in)f(T)-9
b(ABLE)27 b(then)f(X)118 2677 y(will)e(appear)h(before)h(Y)f(in)f(the)h
(result)f(unless)g(X)h(and)g(Y)f(are)i(out)e(of)h(order)-5
b(.)118 3059 y Fq(\(gmer)o(gesort)25 b(T)-9 b(ABLE:list)27
b(LEQ-FN:id,function\):)33 b(list)1218 b Fi(e)n(xpr)139
3179 y Fr(The)21 b(destructi)n(v)o(e)e(v)o(ersion)h(of)h(gsort,)g(this)
f(function)g(is)h(some)n(what)e(f)o(aster)i(than)g(gsort.)118
3299 y(Note)30 b(that)g(you)g(should)f(use)i(the)f(v)n(alue)g(returned)
g(by)g(the)h(function,)f(don')n(t)g(depend)118 3420 y(on)25
b(the)f(modi\002ed)g(ar)n(gument)h(to)f(gi)n(v)o(e)g(the)g(right)h
(answer)-5 b(.)118 3802 y Fq(\(idsort)25 b(T)-9 b(ABLE:list\):)33
b(list)2346 b Fi(e)n(xpr)141 3922 y Fr(Returns)23 b(a)h(list)e(of)h
(the)g(ids)f(in)h(T)-9 b(ABLE,)22 b(sorted)h(into)f(alphabetical)g
(order)-5 b(.)30 b(The)23 b(orig-)118 4042 y(inal)e(list)f(is)g
(unchanged.)29 b(Case)22 b(is)f(not)f(signi\002cant)h(in)f(determining)
g(the)h(alphabetical)118 4163 y(order)-5 b(.)118 4398
y Fh(1)60 b(lisp>)e(\(setq)h(x)h('\(3)f(8)g(-7)h(2)f(1)h(5\)\))118
4519 y(\(3)f(8)h(-7)f(2)h(1)f(5\))118 4639 y(2)h(lisp>)297
b(\045)60 b(sort)f(from)g(smallest)f(to)h(largest)118
4760 y(2)h(lisp>)e(\(gsort)h(x)g('leq\))118 4880 y(\(-7)g(1)h(2)f(3)h
(5)f(8\))118 5000 y(3)h(lisp>)297 b(\045)60 b(sort)f(from)g(largest)f
(to)h(smallest)118 5121 y(3)h(lisp>)e(\(gmergesort)g(x)h('geq\))118
5241 y(\(8)g(5)h(3)g(2)f(1)h(-7\))118 5361 y(4)g(lisp>)297
b(\045)60 b(note)f(that)g(the)g(value)f(of)i(x)f(has)g(been)g(modified)
118 5482 y(4)h(lisp>)e(x)118 5602 y(\(3)h(2)h(1)g(-7\))118
5723 y(5)g(lisp>)e(\(idsort)h('\(the)f(quick)h(brown)f(fox)i(jumped)e
(over)h(the)g(lazy)g(dog\)\))118 5843 y(\(brown)g(dog)g(fox)g(jumped)f
(lazy)h(over)g(quick)g(the)g(the\))p eop
%%Page: 55 63
55 62 bop -118 -18 a Fg(5.4.)55 b(FUNCTIONS)26 b(FOR)g(B)o(UILDING)f
(AND)g(SEARCHING)h(A-LISTS)725 b Fr(55)-118 289 y Ft(5.4)143
b(Functions)33 b(f)l(or)j(Building)e(and)h(Sear)m(ching)f(A-Lists)-118
731 y Fq(\(assoc)24 b(U:any)h(V)-9 b(:a-list\):)31 b(pair)-9
b(,)25 b(nil)2071 b Fi(e)n(xpr)-95 851 y Fr(If)23 b(U)f(occurs)h(as)g
(the)f(car)i(portion)d(of)i(an)g(element)f(of)h(the)f(a-list)g(V)-13
b(,)23 b(the)f(pair)h(in)f(which)-118 972 y(U)h(occurred)h(is)f
(returned,)h(otherwise)e(nil)h(is)g(returned.)30 b(The)24
b(function)e(equal)h(is)g(used)-118 1092 y(to)32 b(test)h(for)g
(equality)-6 b(.)53 b(As)33 b(illustrated)f(belo)n(w)-6
b(,)33 b(it)f(is)h(possible)e(to)i(update)f(the)h(table)-118
1212 y(that)c(w)o(as)h(the)g(second)g(ar)n(gument)f(to)h(assoc)g(by)g
(using)f(the)g(function)g(rplacd)h(on)g(the)-118 1333
y(result.)121 1452 y Fh(\(de)59 b(assoc)g(\(u)g(v\))241
1572 y(\(cond)f(\(\(not)h(\(pairp)f(v\)\))h(nil\))599
1693 y(\(\(and)g(\(pairp)f(\(car)h(v\)\))g(\(equal)g(u)g(\(caar)g
(v\)\)\))g(\(car)g(v\)\))599 1813 y(\(t)h(\(assoc)e(u)i(\(cdr)e
(v\)\)\)\)\))121 2054 y(1)i(lisp>)e(\(setq)h(table)g('\(\(oranges)e(.)j
(4\))f(\(apples)f(.)i(2\)\)\))121 2174 y(\(\(oranges)e(.)h(4\))h
(\(apples)e(.)h(2\)\))121 2415 y(2)h(lisp>)e(\(rplacd)g(\(assoc)h
('apples)f(table\))g(0\))121 2536 y(\(apples)g(.)i(0\))121
2776 y(3)g(lisp>)e(table)121 2897 y(\(\(oranges)g(.)h(4\))h(\(apples)e
(.)h(0\)\))-118 3282 y Fq(\(atsoc)25 b(R1:any)g(R2:any\):)31
b(any)2197 b Fi(e)n(xpr)-93 3403 y Fr(Similar)24 b(to)h(assoc)f(e)o
(xcept)h(that)f(eq)h(is)f(used)h(to)f(mak)o(e)h(comparisons.)-118
3772 y Fq(\(ass)f(F:function)j(U:any)e(V)-9 b(:a-list\):)30
b(pair)-9 b(,)25 b(nil)1692 b Fi(e)n(xpr)-93 3892 y Fr(Ass)24
b(is)g(a)i(generalized)f(assoc)f(function.)30 b(F)c(is)e(the)h
(comparison)e(function.)-118 4261 y Fq(\(sassoc)h(U:any)h(V)-9
b(:a-list)24 b(FN:function\):)33 b(any)1661 b Fi(e)n(xpr)-86
4381 y Fr(Searches)33 b(the)f(a-list)g(V)g(for)g(an)g(occurrence)h(of)g
(U.)f(If)g(U)g(is)g(not)f(in)h(the)g(a-list,)h(the)-118
4502 y(e)n(v)n(aluation)e(of)i(function)f(FN)h(is)g(returned.)55
b(Note)32 b(that)h(FN)g(should)f(be)h(a)g(function)-118
4622 y(with)24 b(no)g(formal)h(parameters.)121 4762 y
Fh(\(de)59 b(sassoc)g(\(u)g(v)g(fn\))241 4882 y(\(cond)f(\(\(not)h
(\(pairp)f(v\)\))h(\(apply)g(fn)g(nil\)\))599 5003 y(\(\(and)g(\(pairp)
f(\(car)h(v\)\))g(\(equal)g(u)g(\(caar)g(v\)\)\))g(\(car)g(v\)\))599
5123 y(\(t)h(\(sassoc)e(u)h(\(cdr)g(v\))g(fn\)\)\)\))-118
5509 y Fq(\(pair)25 b(U:list)f(V)-9 b(:list\):)31 b(a-list)2344
b Fi(e)n(xpr)-93 5629 y Fr(U)25 b(and)h(V)f(are)h(lists)e(which)g(must)
g(ha)n(v)o(e)h(an)h(identical)e(number)h(of)g(elements.)31
b(If)26 b(not,)-118 5750 y(an)e(error)h(occurs.)31 b(Returned)25
b(is)f(a)g(list)g(in)g(which)g(each)h(element)f(is)f(a)i(pair)l(,)g
(the)f(car)h(of)-118 5870 y(the)f(pair)g(being)f(from)h(U)g(and)g(the)g
(cdr)g(being)g(the)f(corresponding)h(element)f(from)h(V)-13
b(.)p eop
%%Page: 56 64
56 63 bop 118 -18 a Fr(56)357 289 y Fh(\(de)59 b(pair)g(\(u)h(v\))477
409 y(\(cond)e(\(\(and)h(\(pairp)g(u\))g(\(pairp)f(v\)\))895
529 y(\(cons)h(\(cons)g(\(car)f(u\))i(\(car)f(v\)\))g(\(pair)f(\(cdr)h
(u\))h(\(cdr)e(v\)\)\)\))835 650 y(\(\(or)h(\(pairp)g(u\))g(\(pairp)f
(v\)\))895 770 y(\(length-error\)\))835 891 y(\(t)i(nil\)\)\))118
1228 y Ft(5.5)143 b(Substitutions)118 1671 y Fq(\(subst)26
b(U:any)f(V)-9 b(:any)25 b(W)-5 b(:any\):)30 b(any)1993
b Fi(e)n(xpr)148 1791 y Fr(Returns)30 b(the)f(result)g(of)h
(substituting)d(U)i(for)h(all)g(occurrences)g(of)g(V)g(in)f(W)-9
b(.)29 b(Copies)118 1911 y(all)c(of)g(W)f(which)h(is)f(not)g(replaced)i
(by)e(U.)h(The)g(test)f(used)h(is)f(equal.)357 2078 y
Fh(\(de)59 b(subst)g(\(u)g(v)h(w\))477 2198 y(\(cond)e(\(\(null)h(w\))g
(nil\))835 2319 y(\(\(equal)g(v)g(w\))h(u\))835 2439
y(\(\(not)f(\(pairp)g(w\)\))g(w\))835 2559 y(\(t)h(\(cons)e(\(subst)h
(u)g(v)h(\(car)f(w\)\))g(\(subst)f(u)i(v)f(\(cdr)g(w\)\)\)\)\)\))118
2972 y Fq(\(substip)26 b(U:any)f(V)-9 b(:any)25 b(W)-5
b(:any\):)30 b(any)1910 b Fi(e)n(xpr)143 3092 y Fr(Destructi)n(v)o(e)23
b(subst.)118 3441 y Fq(\(sublis)i(X:a-list)f(Y)-9 b(:any\):)31
b(any)2223 b Fi(e)n(xpr)143 3561 y Fr(This)24 b(performs)h(a)g(series)f
(of)h(substs)f(in)g(parallel.)31 b(The)25 b(v)n(alue)f(returned)h(is)f
(the)h(result)118 3682 y(of)c(substituting)d(the)j(cdr)g(of)g(each)g
(element)f(of)h(the)g(a-list)f(X)h(for)g(e)n(v)o(ery)f(occurrence)i(of)
118 3802 y(the)27 b(car)g(part)g(of)g(that)f(element)h(in)f(Y)-13
b(.)27 b(Sublis)f(is)g(not)h(quite)f(the)h(correct)g(function)f(for)118
3922 y(arbitrary)34 b(code)g(substitutions.)54 b(As)34
b(illustrated)e(belo)n(w)-6 b(,)35 b(substitutions)c(may)i(enter)118
4043 y(places)25 b(you)f(might)g(wish)g(the)o(y)g(did)g(not.)357
4212 y Fh(\(de)59 b(sublis)g(\(x)g(y\))477 4333 y(\(if)g(\(not)g
(\(pairp)f(x\)\))596 4453 y(y)596 4573 y(\(let)h(\(\(u)g(\(assoc)g(y)g
(x\)\)\))716 4694 y(\(cond)g(\(\(pairp)f(u\))h(\(cdr)g(u\)\))1075
4814 y(\(\(not)f(\(pairp)h(y\)\))g(y\))1075 4934 y(\(t)g(\(cons)g
(\(sublis)f(x)h(\(car)g(y\)\))g(\(sublis)f(x)i(\(cdr)f
(y\)\)\)\)\)\)\)\))357 5175 y(1)h(lisp>)e(\(sublis)h('\(\(x)g(.)g
(100\)\))g('\(list)f('x)h('is)h(x\)\))357 5296 y(\(list)f(\(quote)f
(100\))h(\(quote)g(is\))g(100\))118 5708 y Fq(\(subla)25
b(U:a-list)g(V)-9 b(:any\):)31 b(any)2239 b Fi(e)n(xpr)143
5828 y Fr(Eq)25 b(v)o(ersion)e(of)i(sublis;)e(replaces)j(atoms)e(only)
-6 b(.)p eop
%%Page: 57 65
57 64 bop -118 953 a Fn(Characters)51 b(and)h(Strings)-118
1468 y Ft(6.1)143 b(Characters)-118 1691 y Fr(In)33 b(PSL)g(a)g
(character)h(is)e(its)g(ASCII)i(code)f(representation.)53
b(Using)32 b(numeric)g(codes)h(to)f(represent)-118 1811
y(characters)d(leads)f(to)f(programs)h(which)f(are)i(dif)n(\002cult)e
(to)h(read.)41 b(Y)-11 b(ou)27 b(are)i(encouraged)f(to)g(use)g(char)
-118 1932 y(to)c(represent)h(characters.)-118 2271 y
Fq(\(char)h(U:id\):)31 b(integer)2458 b Fi(macr)l(o)-84
2391 y Fr(This)34 b(macro)h(is)f(part)g(of)g(the)h(USEFUL)g(module.)58
b(The)35 b(char)f(macro)h(returns)f(the)-118 2512 y(ASCII)h(code)f
(which)f(corresponds)h(to)f(the)h(single)f(character)i(passed)f(as)f
(an)h(ar)n(gu-)-118 2632 y(ment.)66 b(Char)37 b(will)f(accept)i(alias')
-5 b(s)36 b(for)h(characters.)67 b(An)37 b(alias)f(is)h(established)e
(by)-118 2752 y(de\002ning)g(a)g(charconst)g(property)g(on)g(the)f
(property)h(list)f(of)h(the)g(alias.)61 b(The)36 b(v)n(alue)-118
2873 y(of)i(this)g(property)g(should)f(be)h(the)g(ASCII)i(code)e(of)g
(the)h(character)g(which)f(is)g(be-)-118 2993 y(ing)32
b(aliased.)54 b(The)33 b(follo)n(wing)d(alias')-5 b(s)32
b(are)i(de\002ned)f(when)f(the)h Fq(useful)g Fr(package)g(is)-118
3114 y(loaded.)819 3397 y(NULL)819 3518 y(BELL)819 3638
y(B)m(A)l(CKSP)-9 b(A)l(CE)819 3759 y(T)g(AB)819 3879
y(LF)550 b(line)24 b(feed)819 3999 y(EOL)472 b(end)24
b(of)h(line)819 4120 y(FF)556 b(form)24 b(feed)819 4240
y(CR)534 b(carriage)25 b(return)819 4360 y(EOF)478 b(end)24
b(of)h(\002le)819 4481 y(ESCAPE)296 b(may)24 b(be)h(abbre)n(viated)f
(ESC)819 4601 y(SP)-9 b(A)l(CE)370 b(an)25 b(alias)f(is)h(BLANK)819
4722 y(R)l(UBOUT)261 b(may)24 b(be)h(abbre)n(viated)f(R)l(UB)819
4842 y(DELETE)289 b(may)24 b(be)h(abbre)n(viated)f(DEL)-118
5136 y(By)j(def)o(ault,)h(the)f(PSL)h(reader)g(con)l(v)o(erts)e(upper)h
(case)h(alphabetic)e(characters)j(to)d(lo)n(wer)h(case.)38
b(This)-118 5256 y(def)o(ault)h(is)g(controlled)f(by)h(the)g(v)n(alue)f
(of)i(the)f(switch)f(raise.)74 b(A)39 b(v)n(alue)g(of)g(t)g(indicates)g
(that)f(the)-118 5377 y(con)l(v)o(ersion)f(should)f(be)i(done.)70
b(Assuming)36 b(raise)i(is)g(t,)j(the)c(e)o(xpression)g(\(char)i(a\))f
(refers)h(to)e(the)-118 5497 y(character)27 b(\224a\224.)33
b(The)26 b(character)h(\224A\224)f(is)f(referenced)i(by)e(\(char)h
(!A\).)g(The)g(\224!\224)g(is)f(used)g(as)h(an)g(escape)-118
5618 y(character)l(,)e(see)f(chapter)f(12)h(for)f(more)h(information.)
28 b(The)23 b(application)e(of)h(lo)n(wer)g(is)g(said)g(to)g(modify)
-118 5738 y(the)30 b(character)-5 b(.)49 b(Lo)n(wer)31
b(is)f(not)g(a)h(de\002ned)g(function)f(b)n(ut)g(it)g(does)g(ha)n(v)o
(e)h(the)f(attrib)n(ute)g(char)n(-pre\002x-)-118 5858
y(function)f(on)h(its)g(property)f(list.)46 b(The)31
b(v)n(alue)e(of)h(this)g(property)g(is)f(a)i(function)e(which)h(will)f
(modify)1604 6066 y(57)p eop
%%Page: 58 66
58 65 bop 118 -18 a Fr(58)118 289 y(the)28 b(ASCII)h(code)f(of)g(its)f
(ar)n(gument.)40 b(Modi\002ers)27 b(are)i(control)e(and)h(meta)g(\(the)
g(modi\002er)f(cntrl)h(is)f(an)118 409 y(abbre)n(viation)d(for)h
(control\).)30 b(The)25 b(follo)n(wing)e(e)o(xample)g(is)i(a)g
(simpli\002ed)e(de\002nition)h(of)h(char)-5 b(.)357 591
y Fh(\(defmacro)58 b(char)h(\(u\))477 711 y(\(cond)f(\(\(idp)h(u\))g
(\(or)h(\(get)e(u)i('charconst\))1613 831 y(\(id2int)e(u\)\)\))835
952 y(\(\(digit-char)g(u\)\))835 1072 y(\(\(and)h(\(pairp)g(u\))1194
1192 y(\(get)g(\(first)f(u\))i('char-prefix-function\)\))895
1313 y(\(list)f(\(get)g(\(first)f(u\))h('char-prefix-function\))1254
1433 y(\(list)g('char)f(\(second)g(u\)\)\)\)\)\))118
1615 y Fr(Notice)24 b(that)g(the)g(digits)f(ha)n(v)o(e)i(to)f(be)g
(treated)h(as)f(a)h(special)f(case.)31 b(The)25 b(PSL)g(reader)g(con)l
(v)o(erts)f(a)h(digit)118 1735 y(to)g(a)g(reference)h(to)e(a)i(numeric)
e(constant.)30 b(The)25 b(de\002nition)f(of)g(the)h(alias)g(space)g(is)
357 1916 y Fh(\(put)59 b('space)g('charconst)e(32\))118
2098 y Fr(If)25 b(the)g(type)f(of)h(the)g(ar)n(gument)f(to)h(char)g(is)
g(not)f(correct)h(then)g(the)f(w)o(arning)357 2279 y
Fh(***)59 b(Unknown)g(character)e(constant)h(`FORM')118
2461 y Fr(is)24 b(printed)h(and)f(the)h(result)f(will)g(be)h(zero.)118
2702 y(The)e(USEFUL)g(package)g(also)g(de\002nes)g(the)f(read)i(macro)e
(#.)30 b(Read)24 b(macros)f(are)g(e)o(xplained)f(in)g(detail)118
2822 y(in)k(chapter)g(12.)35 b(When)26 b(the)g(reader)h(encounters)f
(#,)g(char)h(is)f(applied)f(to)h(the)g(ne)o(xt)f(character)-5
b(.)36 b(If)26 b(this)118 2942 y(ne)o(xt)f(character)i(is)e(a)h(lo)n
(wer)g(case)g(alphabetic)f(character)i(then)f(it)f(will)g(be)h(con)l(v)
o(erted)f(to)g(upper)h(case)118 3063 y(if)g(the)g(switch)g(raise)g(is)g
(set)g(to)g(t.)34 b(If)27 b(this)e(ne)o(xt)g(character)j(is)e(a)g(read)
h(macro)f(then)g(it)g(will)f(be)h(applied.)118 3183 y(Such)f(a)g(read)h
(macro)f(should)e(return)i(an)g(e)o(xpression)f(which)g(is)g
(acceptable)i(to)e(char)-5 b(.)357 3364 y Fh(1)60 b(lisp>)e(#\\a)357
3485 y(65)357 3605 y(2)i(lisp>)e(#\\`\(a)h(b)h(c\))357
3726 y(***)f(Unknown)g(character)e(constant:)h(`\(BACKQUOTE)f(\(A)j(B)f
(C\)\)')357 3846 y(0)118 4106 y Fq(Common)25 b(LISP)g(Functions)h(on)f
(Characters)118 4293 y Fr(The)g(follo)n(wing)e(functions)h(are)h(a)n(v)
n(ailable)f(by)h(loading)e(the)i(library)g(module)e Fq(chars)p
Fr(.)118 4414 y(Common)30 b(LISP)h(pro)o(vides)f(a)h(character)h(data)f
(type)f(in)g(which)g(e)n(v)o(ery)h(character)g(object)g(has)f(three)118
4534 y(attrib)n(utes:)35 b(code,)28 b(bits,)f(and)g(font.)38
b(The)27 b(bits)g(attrib)n(ute)f(allo)n(ws)g(e)o(xtra)h(\003ags)h(to)f
(be)g(associated)g(with)118 4655 y(a)j(character)-5 b(.)46
b(The)29 b(font)g(attrib)n(ute)g(permits)g(a)g(speci\002cation)h(of)f
(the)h(style)f(of)g(the)h(glyphs)e(\(such)h(as)118 4775
y(italics\).)g(PSL)22 b(does)g(not)f(support)g(nonzero)g(bit)g(and)h
(font)f(attrib)n(utes.)29 b(Because)23 b(of)e(this,)h(some)f(of)h(the)
118 4895 y(Common)k(LISP)i(character)g(functions)d(described)i(belo)n
(w)f(ha)n(v)o(e)g(no)h(af)n(fect)g(or)g(are)g(not)g(v)o(ery)f(useful)
118 5016 y(as)f(implemented)e(in)i(PSL.)g(The)o(y)f(are)i(present)e
(for)h(compatibility)-6 b(.)118 5136 y(An)24 b(ar)n(gument)h(to)f(an)o
(y)g(of)g(the)h(follo)n(wing)d(functions)i(should)f(mak)o(e)i(use)f(of)
h(char)g(or)f(one)h(of)g(the)f(tw)o(o)118 5256 y(read)35
b(macros)e Fe(#)p Ff(=)h Fr(and)g Fe(#)p Fl(n)p Fr(.)58
b(Since)35 b(a)f(character)h(in)e(PSL)i(is)f(represented)g(as)g(its)f
(ASCII)i(code)f(it)118 5377 y(is)29 b(possible)e(to)i(gi)n(v)o(e)e(a)j
(numeric)e(ar)n(gument)h(to)f(these)h(functions.)42 b(Ho)n(we)n(v)o(er)
l(,)29 b(the)f(use)h(of)g(numbers)118 5497 y(mak)o(es)39
b(the)g(code)g(dif)n(\002cult)g(to)g(read)g(and)h(much)e(less)h
(transportable.)73 b(The)39 b(read)h(macro)g Fe(#)p Fl(n)f
Fr(is)118 5618 y(described)29 b(in)g(the)f(discussion)g(of)h(char)g
(abo)o(v)o(e.)42 b(The)29 b(read)h(macro)f(#/)g(returns)f(the)h(ASCII)h
(code)f(of)118 5738 y(the)d(ne)o(xt)g(character)-5 b(.)36
b(In)26 b(contrast)g(to)g Fe(#)p Fl(n)p Fr(,)h(the)f(switch)g(raise)g
(is)g(ignored)g(and)g(if)h(the)f(ne)o(xt)f(character)118
5858 y(is)f(a)i(read)f(macro)g(it)f(is)g(not)h(applied.)p
eop
%%Page: 59 67
59 66 bop -118 -18 a Fg(6.1.)55 b(CHARA)l(CTERS)2586
b Fr(59)-118 289 y Fh(1)59 b(lisp>)g(\(eq)g(\(char)g(\(lower)f(a\)\))h
(#/a\))-118 409 y(T)-118 529 y(2)g(lisp>)g(\(eq)g(\(char)g(\(lower)f
(a\)\))h(#\\a\))-118 650 y(NIL)-118 770 y(3)g(lisp>)g(#/`)-118
891 y(96)-118 1011 y(4)g(lisp>)g(#\\`)-118 1131 y(***)g(Unknown)f
(character)g(constant:)g(`\(BACKQUOTE)f(!\210Z\)')-118
1252 y(0)-118 1741 y Fq(\(standard-char)o(p)27 b(C:character\):)33
b(boolean)1703 b Fi(e)n(xpr)-93 1862 y Fr(Returns)25
b(t)f(if)h(the)g(ar)n(gument)f(is)g(one)h(of)g(the)g(95)f(ASCII)i
(printing)e(characters.)121 2077 y Fh(1)60 b(lisp>)e(\(standard-charp)f
(\(char)h(a\)\))121 2197 y(T)121 2318 y(2)i(lisp>)e(\(standard-charp)f
(\(char)h(\(control)g(a\)\)\))121 2438 y(NIL)-118 2891
y Fq(\(graphicp)26 b(C:character\):)33 b(boolean)1984
b Fi(e)n(xpr)-87 3011 y Fr(Returns)30 b(t)h(if)f(C)i(is)e(a)h
(printable)f(character)h(and)g(nil)f(otherwise.)48 b(Control)30
b(and)h(for)n(-)-118 3131 y(matting)e(characters)i(are)g(considered)e
(to)h(be)h(not)e(printable.)46 b(The)30 b(space)h(character)-118
3252 y(is)24 b(a)h(printable)f(character)-5 b(.)-118
3627 y Fq(\(string-char)o(p)26 b(C:character\):)33 b(boolean)1836
b Fi(e)n(xpr)-98 3747 y Fr(Returns)20 b(t)g(if)h(C)f(is)g(a)h
(character)g(that)f(can)g(be)g(an)h(element)f(of)g(a)g(string.)29
b(An)o(y)19 b(character)-118 3867 y(that)24 b(satis\002es)h
(standard-charp)g(and)f(graphicp)h(also)f(satis\002es)h(string-charp.)
-118 4242 y Fq(\(alphap)g(C:character\):)33 b(boolean)2073
b Fi(e)n(xpr)-93 4363 y Fr(Returns)25 b(t)f(if)h(C)g(is)g(an)g
(alphabetic)f(character)-5 b(.)31 b(Liter)25 b(is)f(an)h(equi)n(v)n
(alent)e(function.)-118 4738 y Fq(\(upper)n(casep)k(C:character\):)33
b(boolean)1881 b Fi(e)n(xpr)-93 4858 y Fr(Returns)25
b(t)f(if)h(C)g(is)g(an)g(upper)f(case)i(letter)-5 b(.)-118
5233 y Fq(\(lo)o(wer)n(casep)26 b(C:character\):)32 b(boolean)1899
b Fi(e)n(xpr)-93 5354 y Fr(Returns)25 b(t)f(if)h(C)g(is)g(a)g(lo)n(wer)
f(case)h(letter)-5 b(.)-118 5708 y Fq(\(bothcasep)26
b(C:character\):)33 b(boolean)1940 b Fi(e)n(xpr)-93 5828
y Fr(In)25 b(PSL)g(this)f(function)g(is)g(the)h(same)g(as)g(alphap.)p
eop
%%Page: 60 68
60 67 bop 118 -18 a Fr(60)118 357 y Fq(\(digitp)25 b(C:character\):)33
b(boolean)2117 b Fi(e)n(xpr)143 478 y Fr(Returns)26 b(t)e(if)i(C)f(is)g
(a)g(digit)f(character)j(\(optional)d(radix)h(not)f(supported\).)31
b(An)25 b(equi)n(v-)118 598 y(alent)g(function)f(is)g(digit)118
991 y Fq(\(alphanumericp)j(C:character\):)33 b(boolean)1718
b Fi(e)n(xpr)143 1111 y Fr(Returns)25 b(t)f(if)h(C)h(is)e(a)h(digit)f
(or)h(an)g(alphabetic.)118 1504 y Fq(\(char=)h(C1:character)g
(C2:character\):)32 b(boolean)1477 b Fi(e)n(xpr)143 1624
y Fr(Returns)25 b(t)f(if)h(C1)g(and)g(C2)g(are)h(the)f(same)f(in)h(all)
f(three)h(attrib)n(utes.)118 1996 y Fq(\(char)l(-equal)i(C1:character)f
(C2:character\):)33 b(boolean)1271 b Fi(e)n(xpr)152 2117
y Fr(Returns)34 b(t)f(if)h(C1)g(and)g(C2)g(are)h(similar)-5
b(.)56 b(Dif)n(ferences)34 b(in)g(case,)i(bits,)f(or)f(font)f(are)118
2237 y(ignored)24 b(by)h(this)f(function.)118 2630 y
Fq(\(char)p Ff(<)i Fq(C1:character)g(C2:character\):)32
b(boolean)1458 b Fi(e)n(xpr)143 2750 y Fr(Returns)25
b(t)f(if)h(C1)g(is)g(strictly)e(less)i(than)f(C2.)118
3143 y Fq(\(char)p Ff(>)i Fq(C1:character)g(C2:character\):)32
b(boolean)1458 b Fi(e)n(xpr)143 3263 y Fr(Returns)25
b(t)f(if)h(C1)g(is)g(strictly)e(greater)j(than)e(C2.)118
3656 y Fq(\(char)l(-lessp)i(C1:character)g(C2:character\):)33
b(boolean)1299 b Fi(e)n(xpr)143 3776 y Fr(Lik)o(e)25
b(char)p Ff(<)g Fr(b)n(ut)f(ignores)g(dif)n(ferences)h(in)g(case,)g
(fonts,)f(and)h(bits.)118 4169 y Fq(\(char)l(-gr)n(eater)o(p)j
(C1:character)e(C2:character\):)32 b(boolean)1142 b Fi(e)n(xpr)143
4289 y Fr(Lik)o(e)25 b(char)p Ff(>)g Fr(b)n(ut)f(ignores)g(dif)n
(ferences)h(in)g(case,)g(fonts,)f(and)h(bits.)118 4682
y Fq(\(char)l(-code)i(C:character\):)33 b(character)1873
b Fi(e)n(xpr)139 4802 y Fr(Returns)21 b(the)g(code)g(attrib)n(ute)f(of)
h(C.)g(In)g(PSL)h(this)e(function)g(is)g(an)h(identity)f(function.)118
5195 y Fq(\(char)l(-bits)26 b(C:character\):)33 b(integer)2022
b Fi(e)n(xpr)143 5315 y Fr(Returns)25 b(the)g(bits)e(attrib)n(ute)h(of)
h(C,)g(which)g(is)f(al)o(w)o(ays)h(0)g(in)f(PSL.)118
5708 y Fq(\(char)l(-f)n(ont)i(C:character\):)33 b(integer)2008
b Fi(e)n(xpr)143 5828 y Fr(Returns)25 b(the)g(font)f(attrib)n(ute)g(of)
h(C,)g(which)f(is)h(al)o(w)o(ays)f(0)h(in)f(PSL.)p eop
%%Page: 61 69
61 68 bop -118 -18 a Fg(6.2.)55 b(STRINGS)2825 b Fr(61)-118
357 y Fq(\(code-char)26 b(I:integer\):)32 b(character)-9
b(,nil)1887 b Fi(e)n(xpr)-91 478 y Fr(The)27 b(purpose)f(of)h(this)f
(function)g(is)h(to)f(be)h(able)g(to)g(construct)f(a)h(character)h(by)f
(spec-)-118 598 y(ifying)e(the)h(code,)g(bits,)g(and)g(font.)33
b(Because)28 b(bits)d(and)h(font)f(attrib)n(utes)g(are)i(not)e(used)
-118 718 y(in)f(PSL,)i(code-char)f(is)g(an)g(identity)e(function.)-118
1097 y Fq(\(character)j(C:character)-9 b(,)26 b(string,)f(id\):)32
b(character)1458 b Fi(e)n(xpr)-98 1218 y Fr(Attempts)18
b(to)i(coerce)g(C)h(to)e(be)h(a)g(character)-5 b(.)30
b(If)20 b(C)h(is)e(a)h(character)l(,)i(C)f(is)e(returned.)29
b(If)20 b(C)-118 1338 y(is)k(a)i(string,)e(then)g(the)h(\002rst)g
(character)h(of)f(the)g(string)f(is)h(returned.)31 b(If)25
b(C)h(is)e(a)i(symbol,)-118 1458 y(the)e(\002rst)h(character)g(of)g
(the)f(print)g(name)g(of)g(the)g(symbol)f(is)h(returned.)31
b(Otherwise)24 b(an)-118 1579 y(error)h(occurs.)121 1794
y Fh(*****)59 b(`FORM')f(cannot)h(be)g(coerced)f(to)h(a)h(character)
-118 2266 y Fq(\(char)l(-upcase)27 b(C:character\):)33
b(character)1779 b Fi(e)n(xpr)-84 2386 y Fr(If)34 b(\(lo)n(wercasep)g
(C\))h(is)f(true,)i(then)d(char)n(-upcase)i(returns)f(the)g(code)g(of)g
(the)g(upper)-118 2506 y(case)25 b(of)g(C.)g(Otherwise)g(it)f(returns)h
(the)f(code)h(of)g(C.)-118 2865 y Fq(\(char)l(-do)o(wncase)i
(C:character\):)32 b(character)1659 b Fi(e)n(xpr)-93
2985 y Fr(If)25 b(\(uppercasep)h(C\))g(is)e(true,)h(then)g(char)n(-do)n
(wncase)g(returns)g(the)f(code)i(of)f(the)g(lo)n(wer)-118
3106 y(case)g(of)g(C.)g(Otherwise)g(it)f(returns)h(the)f(code)h(of)g
(C.)-118 3464 y Fq(\(digit-char)h(N:\002xnum\):)32 b(integer)2090
b Fi(e)n(xpr)-89 3584 y Fr(If)30 b(N)f(corresponds)g(to)g(a)h(single)e
(digit)h(then)g(the)g(character)h(which)f(represents)g(that)-118
3705 y(digit)f(is)h(returned.)43 b(The)30 b(Common)e(LISP)i(v)o(ersion)
e(will)g(accept)i(an)f(optional)f(radix)-118 3825 y(ar)n(gument,)d
(this)g(function)g(assumes)g(a)i(radix)e(of)h(ten.)34
b(If)26 b(N)g(does)g(not)f(correspond)g(to)-118 3946
y(a)g(single)f(digit)g(then)g(nil)g(is)g(returned.)-118
4324 y Fq(\(char)l(-int)i(C:character\):)33 b(integer)2061
b Fi(e)n(xpr)-93 4445 y Fr(Con)l(v)o(erts)24 b(character)i(to)e(inte)o
(ger)-5 b(.)30 b(This)24 b(is)g(the)h(identity)e(operation)h(in)h(PSL.)
-118 4824 y Fq(\(int-char)h(I:integer\):)32 b(character)2091
b Fi(e)n(xpr)-93 4944 y Fr(Con)l(v)o(erts)24 b(inte)o(ger)g(to)g
(character)-5 b(.)32 b(This)24 b(is)g(the)h(identity)e(operation)h(in)h
(PSL.)-118 5377 y Ft(6.2)143 b(Strings)-118 5650 y Fk(6.2.1)119
b(String)30 b(Cr)n(eation)h(and)f(Copying)-118 5858 y
Fr(The)25 b(follo)n(wing)e(are)i(b)n(uilt-in)e(string)h(creation)h(and)
g(cop)o(ying)f(functions:)p eop
%%Page: 62 70
62 69 bop 118 -18 a Fr(62)118 357 y Fq(\(allocate-string)25
b(SIZE:integer\):)33 b(string)1796 b Fi(e)n(xpr)148 478
y Fr(Constructs)29 b(and)h(returns)f(a)h(string)f(with)g(SIZE)h
(characters.)47 b(The)30 b(contents)f(of)g(the)118 598
y(string)24 b(are)i(not)e(initialized.)118 968 y Fq(\(mak)o(e-string)i
(SIZE:integer)h(INITV)-13 b(AL:integer\):)32 b(string)1121
b Fi(e)n(xpr)142 1089 y Fr(Constructs)23 b(and)h(returns)f(a)h(string)f
(with)g(SIZE)h(characters,)g(each)h(initialized)d(to)h(the)118
1209 y(ASCII)j(code)f(INITV)-13 b(AL.)118 1559 y Fq(\(mkstring)26
b(UPLIM:integer)g(INITV)-13 b(AL:integer\):)31 b(string)1143
b Fi(e)n(xpr)143 1680 y Fr(An)25 b(old)f(form)h(of)g(mak)o(e-string.)30
b(Returns)25 b(a)g(string)f(of)h(characters)h(all)e(initialized)g(to)
118 1800 y(INITV)-13 b(AL,)22 b(with)f(upper)i(bound)e(UPLIM.)h(The)h
(returned)f(string)f(contains)h(a)h(total)e(of)118 1920
y(\(add1)k(UPLIM\))g(characters.)118 2287 y Fq(\(string)g
([ARGS:integer]\):)33 b(string)1990 b Fi(ne)n(xpr)143
2407 y Fr(Create)26 b(string)e(of)h(elements)f(from)g(a)h(list)f(of)h
(ARGS.)357 2595 y Fh(1)60 b(lisp>)e(\(string)h(65)g(66)g(67\))357
2715 y("ABC")118 3144 y Fq(\(copystringtofr)n(om)26 b(NEW)-5
b(:string)25 b(OLD:string\):)31 b(NEW)-5 b(:string)920
b Fi(e)n(xpr)143 3265 y Fr(Cop)o(y)25 b(all)f(characters)i(from)f(old)f
(into)g(ne)n(w)-6 b(.)30 b(This)24 b(function)g(is)g(destructi)n(v)o
(e.)118 3635 y Fq(\(copystring)i(S:string\):)31 b(string)2178
b Fi(e)n(xpr)143 3755 y Fr(Cop)o(y)25 b(to)f(ne)n(w)h(string,)e
(allocating)h(space.)118 4089 y Fk(6.2.2)119 b(About)30
b(the)h(Basic)e(String)i(Operations)118 4280 y Fr(The)23
b(representation)f(of)h(strings)e(is)h(v)o(ery)g(similar)g(to)g(that)g
(of)h(v)o(ectors.)29 b(Due)23 b(to)f(this)g(similarity)-6
b(,)20 b(there)118 4400 y(are)27 b(functions)e(which)g(may)h(be)g
(applied)f(to)h(either)g(data)g(type.)34 b(Such)26 b(functions)f(pro)o
(vide)g(primiti)n(v)o(e)118 4521 y(operations)32 b(on)h(strings.)53
b(PSL)34 b(pro)o(vides)d(man)o(y)h(other)g(functions)g(speci\002c)h(to)
g(strings)e(which)i(are)118 4641 y(de\002ned)25 b(in)g(v)n(arious)e
(library)i(modules.)118 4945 y Fk(6.2.3)119 b(The)30
b(Operations)118 5136 y Fr(This)22 b(section)g(documents)g(functions)g
(in)g(the)h(library)f(module)g Fq(slo)o(w-strings)g(\(s-strings\))p
Fr(.)31 b(There)23 b(is)118 5256 y(another)30 b(library)f(module)g
(called)g Fq(fast-strings)h(\(f-strings\))p Fr(.)46 b(The)30
b(f)o(ast-strings)e(module)h(pro)o(vides)118 5377 y(alternate)d
(de\002nitions)f(for)h(these)g(functions.)33 b(When)26
b(the)g(switch)f(f)o(ast-strings)g(is)g(non-nil)g(the)h(com-)118
5497 y(piler)34 b(will)f(use)h(these)g(alternate)g(de\002nitions)e(to)i
(produce)g(ef)n(\002cient)g(code.)58 b(Ho)n(we)n(v)o(er)l(,)35
b(there)f(will)118 5618 y(not)28 b(be)h(an)o(y)g(v)o(eri\002cation)f
(that)g(ar)n(guments)h(are)g(of)g(correct)h(type)e(\(in)h(addition,)f
(it)h(is)f(assumed)g(that)118 5738 y(numeric)d(ar)n(guments)f(are)i
(within)e(a)i(proper)f(range\).)32 b(If)26 b(in)l(v)n(alid)e(ar)n
(guments)g(are)i(used,)f(then)g(at)g(best)118 5858 y(your)34
b(code)h(will)e(not)h(generate)h(correct)g(results,)h(you)d(may)h
(actually)g(damage)h(the)f(PSL)h(system.)p eop
%%Page: 63 71
63 70 bop -118 -18 a Fg(6.3.)55 b(COMMON)24 b(LISP)i(STRING)g
(FUNCTIONS)1582 b Fr(63)-118 289 y(There)22 b(are)h(tw)o(o)f(side)g(ef)
n(fects)g(to)f(loading)h Fq(fast-strings)g Fr(The)g Fq(slo)o(w-strings)
f Fr(module)g(will)g(be)i(loaded)-118 409 y(and)g(the)f(switch)g(f)o
(ast-strings)g(will)g(be)h(set)f(to)h(t.)30 b(F)o(or)22
b(more)h(information)e(on)i(the)f(switch)g(f)o(ast-strings)-118
529 y(see)j(Chapter)g(19.)-118 885 y Fq(\(string-fetch)h(S:string)g
(I:integer\):)32 b(any)1832 b Fi(e)n(xpr)-89 1006 y Fr(Accesses)29
b(an)h(element)e(of)h(a)h(PSL)f(string.)43 b(Inde)o(x)o(es)28
b(are)i(zero)f(based.)44 b(The)29 b(ASCII)-118 1126 y(character)d
(stored)e(in)h(that)f(position)f(of)i(the)g(string)e(is)i(returned.)
-118 1293 y(Characters)31 b(are)f(represented)g(by)g(inums.)44
b(Y)-11 b(ou)29 b(should)g(not)g(rely)h(on)f(this)g(when)g(you)h(write)
f(code.)-118 1413 y(Such)38 b(code)g(cannot)g(be)g(easily)f
(transported)h(to)f(other)h(systems)e(where)j(either)f(the)f(encoding)h
(is)-118 1534 y(dif)n(ferent)24 b(or)h(where)h(characters)f(are)h(a)f
(seperate)g(data)g(type.)-118 1890 y Fq(\(string-stor)n(e)h(S:string)f
(I:integer)h(X:char\):)32 b(None)25 b(Retur)o(ned)1018
b Fi(e)n(xpr)-93 2010 y Fr(Stores)25 b(into)f(a)h(PSL)g(string.)30
b(String)25 b(inde)o(x)o(es)e(start)h(with)g(0.)-118
2396 y Fq(\(string-length)i(S:string\):)32 b(integer)2029
b Fi(e)n(xpr)-88 2516 y Fr(Returns)30 b(the)g(number)g(of)g(elements)g
(in)f(a)i(PSL)g(string.)46 b(Since)30 b(inde)o(x)o(es)f(start)h(with)
-118 2636 y(inde)o(x)h(0,)i(the)f(size)g(is)g(one)g(lar)n(ger)g(than)g
(the)g(greatest)g(le)o(gal)e(inde)o(x.)52 b(Compare)32
b(this)-118 2757 y(function)24 b(with)g(string-upper)n(-bound,)f
(documented)h(belo)n(w)-6 b(.)-118 3142 y Fq(\(string-upper)l(-bound)29
b(S:string\):)j(integer)1739 b Fi(e)n(xpr)-90 3263 y
Fr(Returns)28 b(the)g(greatest)g(le)o(gal)f(inde)o(x)g(for)h(accessing)
g(or)h(storing)e(into)g(a)h(PSL)h(string.)-118 3383 y(Compare)c(this)f
(function)g(with)g(string-length,)f(documented)h(abo)o(v)o(e.)-118
3769 y Fq(\(string-empty?)32 b(S:string\):)f(boolean)1940
b Fi(e)n(xpr)-93 3889 y Fr(T)m(rue)24 b(if)h(the)g(string)f(has)g(no)h
(elements)f(\(its)g(size)h(is)f(0\),)h(otherwise)f(nil.)-118
4366 y Ft(6.3)143 b(Common)33 b(LISP)i(String)g(Functions)-118
4624 y Fr(A)27 b(Common)g(LISP)h(compatible)e(package)i(of)g(string)e
(functions)h(has)g(been)h(implemented)e(in)h(PSL,)-118
4744 y(obtained)j(by)h(loading)f(the)h Fq(strings)g Fr(module.)48
b(This)31 b(section)f(describes)h(the)g Fq(strings)g
Fr(module,)h(in-)-118 4865 y(cluding)24 b(a)h(fe)n(w)g(functions)e(in)i
(it)f(that)g(are)i(not)e(Common)g(LISP)i(functions.)-118
5267 y Fk(6.3.1)119 b(String)30 b(comparison:)-118 5708
y Fq(\(string=)25 b(S1:string)g(S2:string\):)32 b(boolean)1775
b Fi(e)n(xpr)-93 5828 y Fr(Compares)25 b(tw)o(o)f(strings)g(S1)h(and)g
(S2,)g(case)g(sensiti)n(v)o(e.)p eop
%%Page: 64 72
64 71 bop 118 -18 a Fr(64)118 357 y Fq(\(string-equal)26
b(S1:string)f(S2:string\):)32 b(boolean)1566 b Fi(e)n(xpr)143
478 y Fr(Compare)25 b(tw)o(o)f(strings)g(S1)h(and)g(S2,)g(ignoring)f
(case,)h(bits)f(and)g(font.)118 663 y(The)32 b(follo)n(wing)d(string)i
(comparison)f(functions)g(are)j(e)o(xtra-boolean.)50
b(If)32 b(the)f(comparison)f(results)118 783 y(in)f(a)h(v)n(alue)e(of)i
(t,)g(the)f(inde)o(x)f(of)h(the)g(\002rst)h(character)g(position)e(at)h
(which)g(the)g(strings)f(f)o(ail)h(to)g(match)118 903
y(is)j(returned.)53 b(The)32 b(result)f(can)i(also)f(be)g(thought)f(of)
h(as)g(the)g(longest)f(common)g(pre\002x)i(of)f(the)g(tw)o(o)118
1024 y(strings.)118 1397 y Fq(\(string)p Ff(<)25 b Fq(S1:string)g
(S2:string\):)32 b(extra-boolean)1502 b Fi(e)n(xpr)143
1518 y Fr(Le)o(xicographic)24 b(comparison)g(of)h(strings.)k(Case)d
(sensiti)n(v)o(e.)118 1921 y Fq(\(string)p Ff(>)f Fq(S1:string)g
(S2:string\):)32 b(extra-boolean)1502 b Fi(e)n(xpr)143
2041 y Fr(Le)o(xicographic)24 b(comparison)g(of)h(strings.)k(Case)d
(sensiti)n(v)o(e.)118 2445 y Fq(\(string)p Ff(<)p Fq(=)f(S1:string)g
(S2:string\):)32 b(extra-boolean)1445 b Fi(e)n(xpr)143
2565 y Fr(Le)o(xicographic)24 b(comparison)g(of)h(strings.)k(Case)d
(sensiti)n(v)o(e.)118 2969 y Fq(\(string)p Ff(>)p Fq(=)f(S1:string)g
(S2:string\):)32 b(extra-boolean)1445 b Fi(e)n(xpr)143
3089 y Fr(Le)o(xicographic)24 b(comparison)g(of)h(strings.)k(Case)d
(sensiti)n(v)o(e.)118 3492 y Fq(\(string)p Ff(<>)f Fq(S1:string)g
(S2:string\):)32 b(extra-boolean)1426 b Fi(e)n(xpr)268
3613 y Fr(Le)o(xicographic)25 b(comparison)f(of)h(strings.)32
b(Case)26 b(sensiti)n(v)o(e.)k(In)c(Common)e(LISP)i(the)268
3733 y(function)e(is)g(named)h(string/=.)118 4137 y Fq(\(string-lessp)g
(S1:string)h(S2:string\):)31 b(extra-boolean)1340 b Fi(e)n(xpr)268
4257 y Fr(Le)o(xicographic)24 b(comparison)g(of)h(strings.)k(Case)d
(dif)n(ferences)f(are)g(ignored.)118 4660 y Fq(\(string-gr)n(eater)o(p)
i(S1:string)e(S2:string\):)32 b(extra-boolean)1182 b
Fi(e)n(xpr)268 4781 y Fr(Le)o(xicographic)24 b(comparison)g(of)h
(strings.)k(Case)d(dif)n(ferences)f(are)g(ignored.)118
5184 y Fq(\(string-not-gr)n(eater)o(p)i(S1:string)f(S2:string\):)31
b(extra-boolean)1011 b Fi(e)n(xpr)268 5305 y Fr(Le)o(xicographic)24
b(comparison)g(of)h(strings.)k(Case)d(dif)n(ferences)f(are)g(ignored.)
118 5708 y Fq(\(string-not-lessp)h(S1:string)f(S2:string\):)32
b(extra-boolean)1168 b Fi(e)n(xpr)143 5828 y Fr(Le)o(xicographic)24
b(comparison)g(of)h(strings.)k(Case)d(dif)n(ferences)f(are)g(ignored.)p
eop
%%Page: 65 73
65 72 bop -118 -18 a Fg(6.3.)55 b(COMMON)24 b(LISP)i(STRING)g
(FUNCTIONS)1582 b Fr(65)-118 357 y Fq(\(string-not-equal)26
b(S1:string)g(S2:string\):)31 b(extra-boolean)1141 b
Fi(e)n(xpr)-93 478 y Fr(Le)o(xicographic)24 b(comparison)f(of)i
(strings.)30 b(Case)25 b(dif)n(ferences)g(are)h(ignored.)-118
835 y Fk(6.3.2)119 b(String)30 b(Concatenation:)-118
1252 y Fq(\(string-concat)c([S:string]\):)32 b(string)1926
b Fi(macr)l(o)-95 1372 y Fr(Concatenates)24 b(all)f(of)h(its)f(string)f
(ar)n(guments,)h(returning)g(the)g(ne)n(wly)g(created)h(string.)-118
1493 y(Not)g(in)h(Common)e(LISP)-11 b(.)-118 1846 y Fq(\(string-r)n
(epeat)26 b(S:string)g(I:integer\):)32 b(string)1679
b Fi(e)n(xpr)-93 1967 y Fr(Appends)24 b(cop)o(y)g(of)h(S)h(to)e(itself)
g(total)g(of)h(I-1)g(times.)30 b(Not)24 b(in)h(Common)e(LISP)-11
b(.)-118 2324 y Fk(6.3.3)119 b(T)-9 b(ransf)m(ormation)28
b(of)i(Strings:)-118 2741 y Fq(\(substring)c(S:string)f(LO:integer)h
(HI:integer\):)31 b(string)1254 b Fi(e)n(xpr)-96 2861
y Fr(Same)23 b(as)f(subseq,)g(b)n(ut)f(the)h(\002rst)h(ar)n(gument)e
(must)g(be)i(a)f(string.)29 b(Returns)22 b(a)h(substring)-118
2982 y(of)31 b(S)h(of)g(size)f(\(sub1)g(\(-)h(HI)f(LO\)\),)h(be)o
(ginning)d(with)i(the)g(element)g(with)g(inde)o(x)f(LO.)-118
3102 y(Not)24 b(in)h(Common)e(LISP)-11 b(.)-118 3462
y Fq(\(string-trim)25 b(B)m(A)-5 b(G:)p Fl(f)p Fq(list,)24
b(string)p Fl(g)h Fq(S:string\):)31 b(string)1365 b Fi(e)n(xpr)32
3582 y Fr(Remo)o(v)o(e)24 b(leading)g(and)h(trailing)f(characters)h(in)
g(B)m(A)l(G)f(from)h(a)g(string)f(S.)121 3791 y Fh(1)60
b(lisp>)e(\(string-trim)f("ABC")i("AABAXYZCB"\))121 3912
y("XYZ")121 4032 y(2)h(lisp>)e(\(string-trim)f(\(list)i(\(char)g(a\))
121 4152 y(2)h(lisp>)1194 b(\(char)59 b(b\))121 4273
y(2)h(lisp>)1194 b(\(char)59 b(c\)\))121 4393 y(2)h(lisp>)835
b("AABAXYZCB"\))121 4514 y("XYZ")121 4634 y(3)60 b(lisp>)e
(\(string-trim)f('\(65)i(66)g(67\))h("ABCBAVXZCC"\))121
4754 y("VXZ")-118 5208 y Fq(\(string-left-trim)26 b(B)m(A)-5
b(G:)p Fl(f)p Fq(list,)23 b(string)p Fl(g)i Fq(S:string\):)32
b(string)1193 b Fi(e)n(xpr)32 5328 y Fr(Remo)o(v)o(e)24
b(leading)g(characters)i(from)e(string.)-118 5708 y Fq
(\(string-right-trim)i(B)m(A)-5 b(G:)p Fl(f)p Fq(list,)23
b(string)p Fl(g)i Fq(S:string\):)32 b(string)1121 b Fi(e)n(xpr)-93
5828 y Fr(Remo)o(v)o(e)24 b(trailing)f(characters)j(from)f(string.)p
eop
%%Page: 66 74
66 73 bop 118 -18 a Fr(66)118 357 y Fq(\(string-upcase)26
b(S:string\):)32 b(string)2056 b Fi(e)n(xpr)143 478 y
Fr(Cop)o(y)25 b(and)g(raise)g(all)f(alphabetic)g(characters)i(in)f
(string.)118 856 y Fq(\(nstring-upcase)i(S:string\):)32
b(string)2000 b Fi(e)n(xpr)143 976 y Fr(Destructi)n(v)o(ely)23
b(raise)i(all)f(alphabetic)h(characters)g(in)g(string.)118
1354 y Fq(\(string-do)o(wncase)h(S:string\):)32 b(string)1935
b Fi(e)n(xpr)143 1475 y Fr(Cop)o(y)25 b(and)g(lo)n(wer)f(all)g
(alphabetic)h(characters)g(in)g(string.)118 1853 y Fq(\(nstring-do)o
(wncase)h(S:string\):)32 b(string)1880 b Fi(e)n(xpr)143
1973 y Fr(Destructi)n(v)o(ely)23 b(lo)n(wer)h(all)h(alphabetic)f
(characters)i(in)e(string.)118 2352 y Fq(\(string-capitalize)h
(S:string\):)32 b(string)1940 b Fi(e)n(xpr)142 2472 y
Fr(Cop)o(y)24 b(and)g(raise)g(\002rst)g(letter)f(of)h(all)g(w)o(ords)f
(in)h(string;)e(other)i(letters)f(in)h(lo)n(wer)f(case.)118
2850 y Fq(\(nstring-capitalize)j(S:string\):)32 b(string)1884
b Fi(e)n(xpr)143 2971 y Fr(Destructi)n(v)o(ely)23 b(raise)i(\002rst)g
(letter)f(of)h(all)g(w)o(ords;)f(other)g(letters)h(in)f(lo)n(wer)g
(case.)118 3355 y Fk(6.3.4)119 b(T)-9 b(ype)30 b(Con)-5
b(v)o(ersion:)118 3781 y Fq(\(string-to-list)25 b(S:string\):)32
b(list)2221 b Fi(e)n(xpr)143 3901 y Fr(Unpack)25 b(string)f(characters)
h(into)f(a)h(list.)30 b(Not)24 b(in)h(Common)f(LISP)-11
b(.)118 4279 y Fq(\(string-to-v)o(ector)26 b(S:string\):)32
b(v)o(ector)1948 b Fi(e)n(xpr)143 4400 y Fr(Unpack)25
b(string)f(characters)h(into)f(a)h(v)o(ector)-5 b(.)30
b(Not)24 b(in)h(Common)f(LISP)-11 b(.)118 4784 y Fk(6.3.5)119
b(Other:)118 5210 y Fq(\(string-length)26 b(S:string\):)32
b(integer)2029 b Fi(e)n(xpr)143 5330 y Fr(Last)24 b(inde)o(x)g(of)h(a)g
(string,)f(plus)g(one.)31 b(Not)24 b(in)g(Common)g(LISP)-11
b(.)26 b(Use)f(string-size.)118 5708 y Fq(\(r)o(plachar)h(S:string)g
(I:integer)f(C:character\):)33 b(character)1162 b Fi(e)n(xpr)143
5828 y Fr(Store)25 b(a)g(character)h(C)g(in)e(a)h(string)f(S)h(at)g
(position)e(I.)p eop
%%Page: 67 75
67 74 bop -118 -18 a Fg(6.3.)55 b(COMMON)24 b(LISP)i(STRING)g
(FUNCTIONS)1582 b Fr(67)-118 289 y Fk(6.3.6)119 b(Substring)31
b(Comparison)-118 476 y Fr(The)19 b(library)f(module)g(STRING-SEARCH)j
(pro)o(vides)c(ef)n(\002cient)i(functions)f(for)h(comparing)f(a)h
(string)-118 597 y(against)24 b(a)h(substring)e(of)i(another)f(string.)
-118 936 y Fq(\(substring=)h(S1:string)h(S2:string)f(ST)-9
b(AR)l(T)i(:integer\):)33 b(boolean)957 b Fi(e)n(xpr)-89
1056 y Fr(Returns)29 b(true)g(if)g(there)g(is)f(a)i(substring)d(of)i
(S2)g(starting)f(at)h(ST)-9 b(AR)j(T)29 b(and)g(string=)f(to)-118
1176 y(S1,)d(otherwise)f(returns)h(nil.)-118 1319 y(Similar)f(to)-118
1539 y Fh(\(string=)58 b(S1)h(\(substring)f(S2)h(START)g(\(+)g(START)g
(\(string-length)d(S1\)\)\)\))-118 1758 y Fr(b)n(ut)24
b(note)h(that)f(this)g(returns)g(nil)g(\(no)h(error)h(is)e(signalled\))
g(if)h(there)g(are)g(fe)n(wer)g(than)121 1978 y Fh(\(string-length)57
b(S1\))-118 2197 y Fr(characters)26 b(from)e(position)f(ST)-9
b(AR)j(T)25 b(through)f(the)h(end)g(of)f(S2.)-118 2536
y Fq(\(substring-equal)i(S1:string)g(S2:string)f(ST)-9
b(AR)l(T)i(:integer\):)33 b(boolean)748 b Fi(e)n(xpr)32
2657 y Fr(Returns)24 b(true)h(if)f(there)h(is)f(a)h(substring)e(of)i
(S2)g(starting)e(at)i(ST)-9 b(AR)j(T)24 b(and)h(string-equal)32
2777 y(to)f(S1,)h(otherwise)g(returns)f(nil.)-118 2920
y(Similar)g(to)-118 3139 y Fh(\(string-equal)57 b(S1)i(\(substring)f
(S2)h(START)g(\(+)g(START)g(\(string-length)d(S1\)\)\)\))-118
3359 y Fr(b)n(ut)24 b(note)h(that)f(this)g(returns)g(nil)g(\(no)h
(error)h(is)e(signalled\))g(if)h(there)g(are)g(fe)n(wer)g(than)-118
3578 y Fh(\(string-length)57 b(S1\))-118 3798 y Fr(characters)26
b(from)e(position)f(ST)-9 b(AR)j(T)25 b(through)f(the)h(end)g(of)f(S2.)
-118 4092 y Fk(6.3.7)119 b(Sear)n(ching)31 b(f)m(or)e(Strings)-118
4280 y Fr(The)21 b(library)f(module)g Fq(str)l(-sear)n(ch)j
Fr(pro)o(vides)d(functions)f(for)j(searching)e(for)i(a)f(string)f
(within)f(another)-118 4400 y(string.)30 b(These)24 b(functions)g(are)i
(ef)n(\002ciently)e(implemented.)-118 4520 y(The)34 b(tw)o(o)g(strings)
f(in)l(v)n(olv)o(ed)g(in)h(these)g(searching)g(operations)g(are)h
(referred)g(to)f(as)h(the)f(\224domain\224)-118 4641
y(and)d(the)h(\224tar)n(get\224.)51 b(These)31 b(functions)g(search)g
(for)h(an)g(occurrence)g(of)g(the)f(\224tar)n(get\224)h(string)f
(within)-118 4761 y(the)25 b(\224domain\224)f(string.)-118
4881 y(The)30 b(operations)f(for)h(string)e(searching)i(return)g(the)g
(inde)o(x)e(of)i(the)g(leftmost)e(character)j(in)f(the)f(\002rst)-118
5002 y(matching)j(part)i(of)g(the)f(domain)g(string)g(that)g(is)g
(found,)i(starting)e(from)g(the)h(left.)57 b(If)34 b(no)g(match)f(is)
-118 5122 y(found,)24 b(nil)g(is)h(returned.)-118 5467
y Fq(\(string-sear)n(ch)h(T)-9 b(ARG:string)25 b(DOM:string\):)p
Fl(f)p Fq(integer)-9 b(,)25 b(nil)p Fl(g)1025 b Fi(e)n(xpr)32
5588 y Fr(Searches)26 b(for)f(the)f(leftmost)g(occurrence)i(of)f(the)f
(tar)n(get)h(in)f(the)h(domain.)30 b(This)24 b(func-)32
5708 y(tion)32 b(is)h(case-sensiti)n(v)o(e.)55 b(If)34
b(passed)f(tw)o(o)g(strings,)h(Common)e(LISP)j(\224search\224)f(will)32
5828 y(gi)n(v)o(e)23 b(the)i(same)g(results.)p eop
%%Page: 68 76
68 75 bop 118 -18 a Fr(68)118 357 y Fq(\(string-sear)n(ch-fr)n(om)27
b(T)-9 b(ARG:string)25 b(DOM:string)g(ST)-9 b(AR)l(T)i(:integer\):)118
478 y Fl(f)p Fq(integer)e(,)25 b(nil)p Fl(g)2818 b Fi(e)n(xpr)268
598 y Fr(Lik)o(e)32 b(string-search,)h(b)n(ut)f(the)g(search)h(ef)n
(fecti)n(v)o(ely)d(starts)i(at)g(inde)o(x)f(ST)-9 b(AR)j(T)33
b(in)e(the)268 718 y(domain.)118 1095 y Fq(\(string-sear)n(ch-equal)c
(T)-9 b(ARG:string)25 b(DOM:string\):)p Fl(f)p Fq(integer)-9
b(,)25 b(nil)p Fl(g)759 b Fi(e)n(xpr)268 1215 y Fr(Lik)o(e)25
b(string-search)f(e)o(xcept)h(that)f(the)h(comparisons)e(are)j
(case-insensiti)n(v)o(e.)118 1605 y Fq(\(string-sear)n(ch-fr)n
(om-equal)i(T)-9 b(A:string)25 b(D:string)g(ST)-7 b(:integer\):)118
1726 y Fl(f)p Fq(integer)e(,)25 b(nil)p Fl(g)2818 b Fi(e)n(xpr)268
1846 y Fr(Lik)o(e)25 b(string-search-from)f(e)o(xcept)g(that)h(the)f
(comparisons)g(are)h(case-insensiti)n(v)o(e.)118 2309
y Fk(6.3.8)119 b(Reading)31 b(and)f(Writing)g(Strings)118
2542 y Fr(The)20 b(library)g(module)f Fq(str)l(-input)j
Fr(pro)o(vides)d(some)g(f)o(acilities)h(to)f(support)h(taking)f(input)g
(from)h(strings.)118 2662 y(Among)h(other)h(things,)f(this)g(permits)g
(a)h(user)g(to)f(obtain)g(a)i(number)e(from)h(its)f(printed)g
(representation)118 2782 y(using)j(the)h(PSL)g(number)f(parser)-5
b(.)118 3143 y Fq(\(with-input-fr)n(om-string)27 b(HEADER:list)e([BOD)l
(Y)-9 b(:f)n(orm]\):any)848 b Fi(macr)l(o)143 3263 y
Fr(The)25 b(ar)n(gument)f(HEADER)h(should)f(be)h(a)g(tw)o(o)f(element)g
(list.)118 3384 y(The)57 b(\002rst)h(element)f(should)f(be)h(an)g
(identi\002er)l(,)66 b(the)57 b(second)g(a)g(string.)127
b Fh(\()p Ff(<)118 3504 y(channel)55 b(><)c(str)s(ing)j(>)p
Fh(\))p Fr(.)69 b(The)37 b(ar)n(gument)h Ff(<)51 b(str)s(ing)j(>)38
b Fr(is)f(treated)h(as)f(if)h(it)118 3624 y(were)c(the)f(te)o(xt)f(of)i
(a)f(\002le.)56 b(The)34 b(ar)n(gument)e Ff(<)43 b(channel)k(>)33
b Fr(is)g(bound)f(to)h(an)g(input)118 3745 y(channel)d(which)g(is)g
(opened)g(to)g(gi)n(v)o(e)f(access)i(to)f Ff(<)38 b(str)s(ing)j(>)p
Fr(.)47 b(Once)31 b(the)f(channel)118 3865 y(has)25 b(been)h(opened,)g
(each)g(form)f(BOD)-5 b(Y)25 b(is)g(e)n(v)n(aluated)g(\(the)g(forms)g
(are)h(e)n(v)n(aluated)f(in)118 3986 y(a)g(left)f(to)g(right)g
(order\).)31 b(It)24 b(is)g(e)o(xpected)g(that)g(these)g(forms)g(will)g
(be)g(used)g(to)g(read)h(and)118 4106 y(process)20 b(input)f(from)i
Ff(<)27 b(str)s(ing)k(>)p Fr(.)f(The)20 b(v)n(alue)g(of)g(the)g(last)g
(form)g(is)g(returned.)29 b(Once)118 4226 y(the)c(application)f(of)h
(with-input-from-string)e(is)h(complete)h(the)g(input)f(channel)h(will)
118 4347 y(be)g(closed.)357 4757 y Fh(\(de)59 b(string-to-words)e
(\(string\))477 4877 y(\(with-input-from-string)596 4998
y(\(channel)h(string\))596 5118 y(\(do)h(\(\(result)f(nil)i(\(aconc)e
(result)g(item\)\))895 5238 y(\(item)h(\(channelread)e(channel\))h
(\(channelread)f(channel\)\)\))835 5359 y(\(\(eq)i(item)g($eof$\))g
(result\)\)\)\))357 5738 y(1)h(lisp>)e(\(string-to-words)f
("DOCUMENTATION)f(IS)k(FUN"\))357 5858 y(\(DOCUMENTATION)d(IS)i(FUN\))p
eop
%%Page: 69 77
69 76 bop -118 -18 a Fg(6.3.)55 b(COMMON)24 b(LISP)i(STRING)g
(FUNCTIONS)1582 b Fr(69)-118 357 y Fq(\(string-r)n(ead)26
b(STR:string\):)32 b(any)2108 b Fi(e)n(xpr)-88 478 y
Fr(Reads)31 b(one)f(s-e)o(xpression)e(from)i(the)g(string)f(STR.)i(The)
f(function)f(channelread)h(is)-118 598 y(used)k(to)h(do)f(this.)59
b(Note)35 b(that)f(it)g(is)g(not)g(necessary)h(to)g(terminate)f(the)g
(string)g(with)-118 718 y(a)i(delimiter)f(character)-5
b(.)65 b(An)35 b(end)h(of)g(\002le)g(character)i(is)d(also)g
(considered)h(to)g(be)g(a)-118 839 y(delimiter)24 b(character)-5
b(.)121 997 y Fh(1)60 b(lisp>)e(\(string-read)f("TOKEN"\))121
1118 y(TOKEN)121 1238 y(2)j(lisp>)e(\(string-read)f("TWO)i(TOKENS"\))
121 1359 y(TWO)-118 1562 y Fr(Notice)27 b(that)g(characters)h(be)o
(yond)e(the)h(\002rst)h(s-e)o(xpression)d(are)k(ignored.)37
b(This)27 b(function)f(is)h(de\002ned)-118 1682 y(in)d(terms)h(of)f
(with-input-from-string.)121 1911 y Fh(\(de)59 b(string-read)e
(\(string\))241 2031 y(\(with-input-from-string)360 2151
y(\(ch)i(string\))360 2272 y(\(channelread)e(ch\)\)\))-118
2500 y Fr(The)27 b(library)f(module)g Fq(string-output)j
Fr(pro)o(vides)c(a)i(f)o(acility)f(for)i(writing)d(to)i(strings.)35
b(The)27 b(function)-118 2621 y(bldmsg)21 b(pro)o(vides)g(the)h
(capability)g(to)g(construct)f(a)i(string)f(using)f(formatting)g
(directi)n(v)o(es.)29 b(Ho)n(we)n(v)o(er)l(,)-118 2741
y(complicated)20 b(strings)g(can)i(be)g(constructed)e(more)i(easily)f
(using)f(the)h(macro)h(with-output-to-string.)-118 2861
y(F)o(or)29 b(e)o(xample,)f(longer)h(strings)e(can)i(be)g(constructed)f
(by)g(including)f(the)i(channellinelength)e(func-)-118
2982 y(tion;)38 b(items)c(can)h(be)f(printed)g(to)h(the)f(string)g
(incrementally)f(\(in)i(a)g(stream-lik)o(e)e(f)o(ashion\))i(from)f(a)
-118 3102 y(loop)-118 3441 y Fq(\(with-output-to-string)27
b(HEADER:list)e([BOD)l(Y)-9 b(:f)n(orm]\):)31 b(string)793
b Fi(macr)l(o)-85 3561 y Fr(The)34 b(ar)n(gument)f(HEADER)h(should)e
(be)i(a)g(tw)o(o)f(element)g(list.)55 b(The)34 b(\002rst)f(element)-118
3682 y(should)26 b(be)h(an)g(identi\002er)-5 b(.)37 b(The)27
b(second)g(element)g(can)g(be)g(either)g(a)h(string)e(or)h(nil)f(\(in)
-118 3802 y(which)33 b(case)h(a)g(def)o(ault)g(initial)e(string)h(is)g
(allocated\))h(\226)f(in)h(either)f(case,)k(the)c(initial)-118
3923 y(string)24 b(is)g(e)o(xtened)g(as)h(necessary)-6
b(.)-118 4020 y(The)38 b(written)g(string)f(is)g(return)i(as)f(a)g
(result)g(\(this)f(is)h(a)g(substring)f(cop)o(y)h(of)g(the)g(string)f
(used)h(for)-118 4141 y(writing\).)30 b(F)o(or)24 b(e)o(xample,)121
4344 y Fh(\(setf)59 b(row)241 4465 y(\(with-output-to-string)54
b(\(wchan)59 b(nil\))360 4585 y(\(channellinelength)d(wchan)i(350\))360
4705 y(\(for)h(\(in)g(tab)g('\(0)g(100)g(200)g(300\)\))420
4826 y(\(in)g(str)g('\("A")g("B")g("C")g("D"\)\))420
4946 y(\(do)g(\(channelprintf)e(wchan)h("\045t\045w")h(tab)g(str\)\))
420 5066 y(\)\)\))p eop
%%Page: 70 78
70 77 bop 118 -18 a Fr(70)p eop
%%Page: 71 79
71 78 bop -118 953 a Fn(Flo)n(w)53 b(of)e(Contr)l(ol)-118
1468 y Ft(7.1)143 b(Intr)m(oduction)-118 1691 y Fr(In)31
b(a)g(PSL)h(program)f(the)g(\003o)n(w)g(of)g(control)f(is)h(described)g
(primarily)f(by)h(function)f(application.)48 b(A)-118
1811 y(function)30 b(may)g(call)h(an)o(y)f(number)g(of)h(other)f
(functions,)h(including)f(itself.)47 b(This)30 b(allo)n(ws)g(comple)o
(x)-118 1932 y(operations)e(to)h(be)h(described)f(by)g(a)h(number)f(of)
g(small)g(functions,)g(each)h(of)g(which)f(implements)e(a)-118
2052 y(simple)c(operation.)31 b(In)24 b(addition,)g(PSL)h(pro)o(vides)f
(a)h(number)f(of)h(other)g(control)f(constructs.)-118
2346 y Fk(7.1.1)119 b(Conditionals)-118 2533 y Fq(Conds)25
b(and)h(Ifs)-118 2940 y(\(cond)g([U:f)n(orm-list]\):)31
b(any)1668 b Fi(open-compiled)24 b(fe)n(xpr)-118 3309
y Fr(A)d(typical)f(application)g(of)h(cond)f(is)h(sho)n(wn)f(belo)n(w)
-6 b(,)20 b(the)h(square)g(brack)o(ets)g(are)g(used)g(to)f(indicate)h
(zero)-118 3429 y(of)k(more)f(occurances)i(of)f(an)g(e)o(xpression.)121
3766 y Fh(\(COND)59 b(\([\(<predicate>)d([<action>]\)]\)\))-118
3982 y Fr(The)24 b(\002rst)g(form)g(in)g(each)h(clause)f(is)g(treated)h
(as)f(a)h(predicate;)f(the)g(remaining)f(\(zero)i(or)g(more\))f(forms)
-118 4102 y(are)29 b(treated)f(as)h(if)f(the)o(y)f(were)i(enclosed)f
(within)f(a)i(progn.)40 b(The)29 b(e)n(v)n(aluation)d(proceeds)i(by)g
(sequen-)-118 4223 y(tially)k(e)n(v)n(aluating)f(the)i(predicates)g(in)
g(the)g(order)h(of)f(their)g(appearance)h(until)e(one)h(e)n(v)n
(aluates)f(to)h(a)-118 4343 y(non-nil)25 b(v)n(alue.)34
b(Then)26 b(the)g(remaining)f(forms)h(in)f(this)h(clause)g(are)h(e)n(v)
n(aluated)e(and)h(the)g(v)n(alue)f(of)h(the)-118 4463
y(last)e(form)h(is)g(returned)g(as)g(the)g(result.)31
b(If)25 b(only)f(the)h(predicate)g(appears,)h(then)e(its)h(v)n(alue)f
(\(if)h(non-nil\))-118 4584 y(becomes)e(the)g(v)n(alue)g(returned.)30
b(If)24 b(no)f(predicate)h(is)f(non-nil)f(then)h(the)g(result)g(is)g
(nil.)30 b(The)23 b(follo)n(wing)-118 4704 y(de\002nition)h
(demonstrates)f(the)i(use)g(of)g(cond.)121 5040 y Fh(\(de)59
b(size)g(\(data\))241 5161 y(\(cond)f(\(\(pairp)g(data\))h(\(length)f
(data\)\))599 5281 y(\(\(stringp)g(data\))h(\(string-length)d(data\)\))
599 5402 y(\(\(vectorp)i(data\))h(\(vector-size)e(data\)\))599
5522 y(\(t)j('unknown\)\)\))-118 5738 y Fr(This)24 b(function)g(will)g
(compute)g(the)g(length)g(of)h(lists)f(strings)f(and)i(v)o(ectors.)-118
5858 y(The)g(follo)n(wing)e(macros)h(are)i(de\002ned)f(in)f(the)h
(USEFUL)g(module.)1604 6066 y(71)p eop
%%Page: 72 80
72 79 bop 118 -18 a Fr(72)118 357 y Fq(\(if)25 b(E:f)n(orm)g(S0:f)n
(orm)g([S:f)n(orm]\):)32 b(any)1856 b Fi(macr)l(o)149
478 y Fr(The)30 b(form)g(S0)h(is)f(e)n(v)n(aluated)f(if)i(the)f(test)g
(E)g(is)g(non-nil,)h(otherwise)f(the)g(remaining)118
598 y(forms)36 b(S)h(are)h(e)n(v)n(aluated,)g(the)f(v)n(alue)f(of)g
(the)h(last)f(is)g(returned.)67 b(If)37 b(is)f(a)h(macro)g(to)118
718 y(simplify)23 b(the)h(writing)g(of)g(a)h(common)e(form)i(of)f(cond)
h(in)f(which)g(there)h(are)g(only)f(tw)o(o)118 839 y(clauses)h(and)f
(the)h(antecedent)g(of)g(the)g(second)f(is)h(t.)118 972
y(The)g(e)o(xpression)357 1197 y Fh(\(if)59 b(\(minusp)g(number\))f
('negative)f('positive\))118 1418 y Fr(is)24 b(preferred)i(o)o(v)o(er)
357 1642 y Fh(\(cond)59 b(\(\(minusp)f(number\))g('negative\))835
1763 y(\(t)i('positive\)\))118 1984 y Fr(Notice)25 b(that)f(a)h(single)
f(form)g(is)h(e)n(v)n(aluated)e(when)i(the)f(test)h(e)o(xpression)e(E)i
(is)f(non-nil)g(b)n(ut)g(there)h(may)118 2104 y(be)g(an)o(y)f(number)h
(of)f(e)o(xpressions)g(e)n(v)n(aluated)f(when)i(the)g(v)n(alue)f(of)h
(E)g(is)f(nil.)118 2228 y(Related)h(macros)g(for)g(common)f(cond)g
(forms)h(are)g(when)g(and)g(unless.)118 2571 y Fq(\(when)h(E:f)n(orm)f
([S:f)n(orm]\):)32 b(any)2061 b Fi(macr)l(o)139 2691
y Fr(When)21 b(the)f(v)n(alue)g(of)h(the)f(test)g(e)o(xpression)g(E)g
(is)h(non-nil)e(the)i(forms)f(S)h(are)g(e)n(v)n(aluated.)118
2812 y(The)31 b(v)n(alue)f(of)h(the)g(last)g(form)f(is)h(returned)g(as)
g(the)g(result.)48 b(The)31 b(result)g(is)f(nil)g(if)h(the)118
2932 y(test)24 b(e)o(xpresson)g(E)h(is)f(nil.)118 3304
y Fq(\(unless)h(E:f)n(orm)h([U:f)n(orm]\):)31 b(any)2011
b Fi(macr)l(o)141 3425 y Fr(If)24 b(the)f(v)n(alue)f(of)i(E)f(is)f(nil)
h(then)f(the)h(forms)g(S)h(are)g(e)n(v)n(aluated.)29
b(The)23 b(result)f(is)h(nil)f(if)h(the)118 3545 y(test)h(e)o
(xpression)g(E)h(is)f(non-nil.)118 3643 y(The)h(boolean)e(functions)h
(and)g(and)h(or)f(\(see)h(Chapter)g(2\),)f(may)g(be)h(used)f(as)h
(conditional)d(forms.)31 b(F)o(or)118 3763 y(e)o(xample)24
b(an)h(e)o(xpression)f(lik)o(e)118 4108 y Fh(\(and)59
b(\(pairp)f(x\))i(\(eq)f(\(car)g(x\))g('a\)\))118 4450
y Fr(which)29 b(relies)g(upon)g(the)g(order)h(of)g(the)f(e)n(v)n
(aluation)e(of)j(the)f(ar)n(guments)g(is)g(often)g(used.)44
b(If)30 b(and)g(had)118 4570 y(e)n(v)n(aluated)37 b(the)h(second)g(ar)n
(gument)f(\002rst)h(an)h(error)f(may)g(ha)n(v)o(e)g(been)g(generated.)
71 b(Ho)n(we)n(v)o(er)l(,)40 b(the)118 4690 y(ar)n(guments)28
b(are)h(al)o(w)o(ays)f(e)n(v)n(aluated)f(from)h(left)h(to)f(right.)40
b(Or)29 b(may)f(be)g(used)g(to)g(retrie)n(v)o(e)g(a)h(v)n(alue)e(as)118
4811 y(in)e(the)f(function)g(de\002nition)g(belo)n(w)-6
b(.)118 5035 y Fh(\(de)59 b(dispatch)f(\(data)h(arguments\))118
5156 y(\(apply)g(\(or)g(\(get)g(data)f('function\))g
(default-function\))118 5276 y(arguments\)\))118 5497
y Fr(In)20 b(this)g(e)o(xample)f(the)h(function)g(which)g(is)f(applied)
h(is)g(either)g(found)g(on)g(the)g(property)g(list)f(of)h(the)g(data)
118 5618 y(or)k(it)f(is)g(a)h(def)o(ault.)30 b(In)24
b(reading)f(such)g(an)h(e)o(xpression)e(one)i(considers)f(an)g(ar)n
(gument)h(to)f(be)g(preferred)118 5738 y(o)o(v)o(er)k(an)o(ything)f
(which)i(follo)n(ws)e(it.)40 b(Note)27 b(that)h(the)g(use)f(of)h(these)
g(functions)f(as)h(conditionals)e(may)118 5858 y(yield)e(code)h(which)g
(is)f(confusing.)30 b(F)o(or)25 b(e)o(xample)e(the)i(code)p
eop
%%Page: 73 81
73 80 bop -118 -18 a Fg(7.2.)55 b(CASE)26 b(AND)e(SELECTQ)i(ST)-9
b(A)e(TEMENTS)1628 b Fr(73)-118 409 y Fh(\(setq)59 b(x)g(\(and)g(y)h
(3\)\))-118 735 y Fr(will)29 b(set)g(x)h(to)f(3)g(if)h(y)g(is)f(bound)g
(to)g(a)h(v)n(alue)f(other)g(than)h(nil,)g(otherwise)f(x)g(will)g(be)h
(set)f(to)h(nil.)44 b(It)30 b(is)-118 856 y(recommended)24
b(that)h(the)f(follo)n(wing)f(be)i(used)f(instead.)-118
1062 y Fh(\(setq)59 b(x)g(\(if)g(y)h(3)f(nil\)\))-118
1268 y Fr(The)28 b(follo)n(wing)d(v)o(ersion)i(of)h(if)g(is)f
(de\002ned)h(in)f(the)h(module)f Fq(if)p Fr(.)39 b(It)28
b(is)f(upw)o(ard)h(compatible)e(with)h(the)-118 1388
y(if)g(macro)g(de\002ned)g(abo)o(v)o(e.)36 b(This)26
b(v)o(ersion)f(will)h(accept)i(the)e(k)o(e)o(yw)o(ords)g(then,)h(else,)
g(and)g(elseif.)37 b(If)27 b(a)-118 1508 y(k)o(e)o(yw)o(ord)19
b(appears)g(immediately)f(after)i(the)g(conditional)e(e)o(xpression)g
(of)h(the)h(if)f(then)g(the)h(e)o(xpression)-118 1629
y(is)k(tak)o(en)h(to)f(be)h(in)g(k)o(e)o(yw)o(ord)f(form.)-118
1968 y Fq(\(if)h Ff(<)p Fq(expr)p Ff(>)g Fq([then)h Ff(<)p
Fq(expr)p Ff(>)g Fq(...)k(][)p Ff(<)p Fq(elseif-part)p
Ff(>)c Fq(...)31 b(][else)25 b Ff(<)p Fq(expr)p Ff(>)g
Fq(...)31 b(]\):)-118 2089 y(any)3213 b Fi(e)n(xpr)-118
2285 y Fr(This)25 b(is)g(not)g(the)h(same)g(notation)e(used)i
(generally)f(in)h(the)f(PSL)i(manual.)33 b(Square)27
b(brack)o(ets)e(enclose)-118 2406 y(parts)g(optionally)f(present.)34
b(The)25 b(ellipses)g(indicate)g(arbitrary)h(additional)f(repetitions)f
(of)i(the)f(thing)-118 2526 y(appearing)g(just)e(before)j(them.)k(The)
25 b(elseif-part)f(may)h(be)g(one)g(of)g(tw)o(o)f(forms.)-118
2646 y Ff(<)p Fr(elseif-part)p Ff(>)g Fr(=)i(else)e(if)h
Ff(<)p Fr(e)o(xpr)p Ff(>)f Fr([then)h Ff(<)p Fr(e)o(xpr)p
Ff(>)f Fr(...)31 b(])-118 2767 y Ff(<)p Fr(elseif-part)p
Ff(>)24 b Fr(=)i(else)e(if)h Ff(<)p Fr(e)o(xpr)p Ff(>)f
Fr([then)h Ff(<)p Fr(e)o(xpr)p Ff(>)f Fr(...)31 b(])-118
3109 y Ft(7.2)143 b(Case)34 b(and)h(Selectq)g(Statements)-118
3334 y Fr(Case)28 b(is)g(a)g(form)g(of)g(conditional)e(in)h(which)h(a)g
(\224k)o(e)o(y\224)f(v)n(alue)h(is)f(compared)h(against)e(a)j(set)e(of)
h(v)n(alues)-118 3454 y(in)34 b(order)h(to)f(choose)h(a)f
(corresponding)g(set)g(of)h(forms)f(to)g(e)n(v)n(aluate.)60
b(The)34 b(\224k)o(e)o(y\224)h(v)n(alue)f(must)f(be)-118
3574 y(an)g(inte)o(ger)-5 b(.)54 b(This)32 b(is)h(a)g(restricted)g
(cond,)h(and)f(therefore)h(can)f(be)g(compiled)f(into)g(more)h(ef)n
(\002cient)-118 3695 y(code.)39 b(The)28 b(compiler)f(e)o(xpends)f
(some)h(ef)n(fort)h(to)f(e)o(xamine)g(special)g(cases)h(\(for)g(e)o
(xample)f(compact)-118 3815 y(vs.)j(non-compact)24 b(sets)h(of)g(cases)
g(and)f(short)h(vs.)30 b(long)24 b(sets)g(of)h(cases\).)-118
4155 y Fq(\(case)g(I:f)n(orm)g([U:case-clause]\):)32
b(any)1289 b Fi(open-compiled)24 b(fe)n(xpr)-97 4275
y Fr(Case)e(selects)e(a)h(case-clause)h(\(one)f(of)g(the)g(U')-5
b(s\),)21 b(to)f(e)n(v)n(aluate)g(based)h(on)g(the)g(v)n(alue)f(of)-118
4395 y(I.)28 b(The)g(e)o(xpression)e(I)i(should)f(e)n(v)n(aluate)g(to)g
(an)h(inte)o(ger)-5 b(.)38 b(Each)28 b(clause)g(has)g(the)f(form)-118
4516 y(\(case-e)o(xpression)d(form\),)h(where)g(the)g(case-e)o
(xpression)f(has)h(one)g(of)g(the)g(follo)n(wing)-118
4636 y(forms.)-68 4739 y(nil)721 b(the)25 b(def)o(ault)f(case)-68
4859 y(\(i1)g(i2)h(...)30 b(in\))373 b(where)25 b(each)h(ik)e(is)h(an)g
(inte)o(ger)-68 4980 y(\(\(range)g(lo)n(w)f(high\)\))99
b(where)25 b(lo)n(w)f(and)h(high)f(are)i(inte)o(gers)e(and)g(lo)n(w)g
(is)g(less)759 5100 y(than)h(or)g(equal)f(to)h(high)-118
5265 y(The)g(follo)n(wing)e(e)o(xample)h(illustrates)f(the)i(use)f(of)h
(case)121 5497 y Fh(\(case)59 b(i)g(\(\(1\))g(\(print)g("first"\)\))599
5618 y(\(\(2)g(3\))h(\(print)e("second"\)\))599 5738
y(\(\(\(range)g(4)i(10\)\))f(\(print)f("third"\)\))599
5858 y(\(nil)h(\(print)g("fourth"\)\)\))p eop
%%Page: 74 82
74 81 bop 118 -18 a Fr(74)118 357 y Fq(\(selectq)26 b(I:f)n(orm)e
([U:selectq-clause]\):)33 b(any)1638 b Fi(macr)l(o)156
478 y Fr(This)38 b(function)f(selects)h(an)g(action)f(based)h(on)g(the)
g(v)n(alue)g(of)g(the)g(\224k)o(e)o(y\224)g(I.)g(Each)118
598 y(selectq-clause)d(is)f(of)h(the)g(form)g(\(k)o(e)o(y-part)f
([action]\).)61 b(The)35 b(k)o(e)o(y-part)g(is)f(a)h(list)f(of)118
718 y(k)o(e)o(ys,)24 b(t,)g(or)g(otherwise.)30 b(If)25
b(there)g(is)f(only)f(one)i(k)o(e)o(y)f(in)g(a)g(k)o(e)o(y-part)g(it)g
(may)g(be)h(written)118 839 y(in)31 b(place)h(of)g(a)g(list)f
(containing)f(it,)j(pro)o(vided)d(that)h(the)h(k)o(e)o(y)f(is)g(not)g
(a)h(list,)g(nil,)h(t,)g(or)118 959 y(otherwise.)118
1080 y(After)26 b(I)g(is)f(e)n(v)n(aluated,)f(it)h(is)g(compared)g
(against)g(the)g(members)g(of)g(each)i(k)o(e)o(y-part)e(in)118
1200 y(turn.)38 b(If)28 b(the)g(k)o(e)o(y)f(is)g(eq)g(to)g(an)o(y)g
(member)h(of)f(the)g(k)o(e)o(y-part)h(then)f(each)h(of)f(the)h(forms)
118 1320 y(in)33 b(that)g(selectq-clause)g(are)i(e)n(v)n(aluated.)55
b(The)34 b(v)n(alue)e(of)i(the)f(last)g(form)g(of)h(the)f(list)118
1441 y(is)d(the)h(v)n(alue)f(of)h(the)f(selectq.)48 b(If)32
b(a)f(selectq-clause)f(with)g(k)o(e)o(y-part)g(t)h(or)g(otherwise)118
1561 y(is)c(reached,)h(its)f(forms)f(are)i(e)n(v)n(aluated)e(without)g
(further)h(testing.)36 b(A)28 b(t)f(or)g(otherwise)118
1682 y(clause)22 b(should)f(be)i(the)f(last)f(clause.)30
b(If)23 b(no)f(clause)g(is)f(satis\002ed)h(then)g(nil)g(is)f(returned.)
357 1925 y Fh(\(selectq)58 b(\(car)h(w\))477 2046 y(\(\(nil\))f(nil\))
477 2166 y(\(end)h(\(print)f('done\))h('end\))477 2286
y(\(\(0)g(1)g(2)h(3)g(4)f(5)h(6)f(7)h(8)f(9\))h('digit\))477
2407 y(\(otherwise)d('other\)\))118 2751 y Ft(7.3)143
b(Sequencing)33 b(Ev)o(aluation)118 2976 y Fr(These)d(functions)g(pro)o
(vide)f(for)i(e)o(xplicit)e(control)g(sequencing,)i(and)g(the)f
(de\002nition)f(of)i(blocks)e(al-)118 3097 y(tering)24
b(the)h(scope)g(of)g(local)f(v)n(ariables.)118 3436 y
Fq(\(let)h(A:list)g([B:f)n(orm]\):)32 b(any)2246 b Fi(macr)l(o)147
3557 y Fr(The)28 b(general)h(form)f(follo)n(ws,)g(the)g(square)h(brack)
o(ets)g(are)g(used)f(to)g(indicate)g(zero)h(or)118 3677
y(more)c(occurances)g(of)g(an)g(e)o(xpression.)357 3858
y Fh(\(LET)59 b(\([\(<var>)f(<value>\)]\))g([<body>]\))118
4065 y Fr(The)26 b Ff(<)p Fr(v)n(alue)p Ff(>)p Fr(s)e(are)i(e)n(v)n
(aluated)f(\(in)g(an)h(unspeci\002ed)f(order\),)h(and)g(then)f(the)g
Ff(<)p Fr(v)n(ar)p Ff(>)p Fr(s)g(are)h(bound)f(to)118
4185 y(these)32 b(v)n(alues.)52 b(The)32 b(body)-6 b(,)33
b(consisting)d(of)j(the)f Ff(<)p Fr(body)p Ff(>)f Fr(forms,)i(is)f(e)n
(v)n(aluated)f(in)h(a)g(left)g(to)g(right)118 4306 y(order)-5
b(.)47 b(The)30 b(v)n(alue)g(returned)g(is)g(the)g(result)g(of)g(the)h
(last)e(body)h(form)g(or)g(nil)g(if)g(the)g(body)g(is)g(empty)-6
b(.)118 4426 y(Note)33 b(that)g(the)g Ff(<)p Fr(v)n(alue)p
Ff(>)p Fr(s)f(are)i(e)n(v)n(aluated)e(in)h(the)g(outer)g(en)l
(vironment,)h(before)f(the)g Ff(<)p Fr(v)n(ar)p Ff(>)p
Fr(s)g(are)118 4546 y(bound.)118 4788 y(This)24 b(function)g(is)g(equi)
n(v)n(alent)f(to)357 5022 y Fh(\(\(lambda)58 b(\([<var>]\))g
([<body>]\))g([<value>]\))118 5256 y Fr(The)19 b(let-style)f(is)g
(attracti)n(v)o(e)g(since)h(it)f(places)h(the)f Ff(<)p
Fr(v)n(ar)p Ff(>)p Fr(s)h(close)f(to)h(their)f(binding)g(forms)g(\()p
Ff(<)p Fr(v)n(alue)p Ff(>)p Fr(s\),)118 5376 y(thereby)25
b(increasing)f(readability)-6 b(.)118 5618 y(There)27
b(are)h(tw)o(o)f(shorthand)f(formats)g(for)h(\()p Ff(<)p
Fr(v)n(ar)p Ff(>)g(<)p Fr(v)n(alue)p Ff(>)p Fr(\).)36
b(One)27 b(is)g(\()p Ff(<)32 b(v)t(ar)i(>)p Fr(\))27
b(and)g(the)g(other)118 5738 y(is)f(just)g Ff(<)32 b(v)t(ar)i(>)p
Fr(.)i(Both)27 b(of)g(these)g(mean)f(bind)h Ff(<)k(v)t(ar)j(>)27
b Fr(to)f(nil.)36 b(As)27 b(a)g(rule)g(of)g(style,)f(you)h(should)118
5858 y(use)i(\()p Ff(<)36 b(v)t(ar)j(>)29 b Fr(nil\))f(if)i(you)e(mean)
h(to)g(use)g(the)g(v)n(alue)g(of)g Ff(<)36 b(v)t(ar)i(>)30
b Fr(without)d(assigning)h(it)h(it)f(\002rst,)p eop
%%Page: 75 83
75 82 bop -118 -18 a Fg(7.3.)55 b(SEQ)o(UENCING)25 b(EV)-13
b(ALU)l(A)i(TION)1959 b Fr(75)-118 289 y(and)25 b(just)f(\()p
Ff(<)j(v)t(ar)k(>)p Fr(\))24 b(or)h Ff(<)j(v)t(ar)i(>)25
b Fr(if)g(you)f(do)h(not)f(care)i(what)e Ff(<)k(v)t(ar)i(>)25
b Fr(gets)f(bound)g(to.)-118 532 y(The)h(follo)n(wing)e(e)o(xpression)g
(returns)i(the)f(middle)g(element)g(of)h(a)g(v)o(ector)-5
b(.)121 778 y Fh(\(let)59 b(\(\(n)g(\(vector-size)e(vector\)\)\))241
899 y(\(unless)h(\(zerop)g(n\))360 1019 y(\(vector-fetch)f(vector)h
(\(add1)h(\(/)g(n)h(2\)\)\)\)\))-118 1482 y Fq(\(let*)25
b(A:list)f([B:f)n(orm]\):)32 b(any)2197 b Fi(macr)l(o)-92
1602 y Fr(Let*)26 b(is)g(just)f(lik)o(e)h(let)g(e)o(xcept)g(that)f(it)h
(mak)o(es)g(the)g(assignments)e(sequentially)-6 b(.)33
b(That)-118 1723 y(is,)22 b(the)g(\002rst)g(binding)f(is)h(made)g
(before)h(the)f(v)n(alue)g(for)g(the)g(second)g(one)g(is)g(computed.)
-118 1843 y(The)j(e)o(xample)f(belo)n(w)g(illustrates)f(the)i(dif)n
(ference)g(between)g(let)f(and)h(let*.)121 2036 y Fh(1)60
b(lisp>)e(\(setq)h(front)g('red)f(back)h('orange\))121
2156 y(orange)121 2277 y(2)h(lisp>)e(\(let)h(\(\(front)f('blue\))h
(\(back)f(front\)\))118 b(back\))121 2397 y(red)121 2517
y(3)60 b(lisp>)e(\(let*)h(\(\(front)f('blue\))g(\(back)h(front\)\))118
b(back\))121 2638 y(blue)-118 3071 y Fq(\(pr)n(ogn)26
b([U:f)n(orm]\):)31 b(any)1781 b Fi(open-compiled)24
b(fe)n(xpr)-84 3192 y Fr(U)34 b(is)f(a)h(set)g(of)g(e)o(xpressions)e
(which)i(are)g(e)o(x)o(ecuted)f(sequentially)-6 b(.)56
b(The)34 b(v)n(alue)f(re-)-118 3312 y(turned)24 b(is)h(the)f(v)n(alue)h
(of)f(the)h(last)f(e)o(xpression.)-118 3683 y Fq(\(pr)n(og2)h(A:f)n
(orm)g(B:f)n(orm\):)32 b(any)1548 b Fi(open-compiled)24
b(e)n(xpr)-91 3803 y Fr(Returns)k(the)f(v)n(alue)g(of)g(the)h(second)f
(ar)n(gument)g(B.)h(Note)f(that)g(prog2)g(e)o(xpects)g(only)-118
3924 y(tw)o(o)d(ar)n(guments.)-118 4295 y Fq(\(pr)n(og1)h([U:f)n
(orm]\):)32 b(any)2356 b Fi(macr)l(o)-86 4415 y Fr(Prog1)31
b(is)h(a)g(function)f(de\002ned)h(in)f(the)g(USEFUL)i(package.)51
b(Prog1)32 b(e)n(v)n(aluates)f(its)-118 4536 y(ar)n(guments)24
b(in)g(order)l(,)h(lik)o(e)g(progn,)f(b)n(ut)g(returns)h(the)g(v)n
(alue)f(of)h(the)f(\002rst.)-118 4907 y Fq(\(pr)n(og)h(V)-13
b(ARS:id-list)25 b([PR)m(OGRAM:id,f)n(orm]\):)30 b(any)25
b(open-compiled)h(fexpr)-87 5027 y Fr(V)-13 b(ARS)32
b(is)f(a)h(list)e(of)i(ids)f(which)g(are)h(considered)f(\003uid)g(if)h
(the)f(prog)g(is)g(interpreted)-118 5148 y(and)d(local)g(if)g(compiled)
f(\(see)i(the)f(\224V)-11 b(ariables)28 b(and)g(Bindings\224)g
(Section,)g(9.2\).)41 b(The)-118 5268 y(prog')-5 b(s)26
b(v)n(ariables)h(are)g(allocated)g(space)h(when)f(the)g(prog)g(form)f
(is)h(applied,)g(and)g(are)-118 5388 y(deallocated)20
b(when)h(the)f(prog)g(is)g(e)o(xited.)28 b(Prog)21 b(v)n(ariables)f
(are)h(initialized)e(to)h(nil.)29 b(The)-118 5509 y(program)d(is)g(a)h
(set)f(of)g(e)o(xpressions)f(to)h(be)h(e)n(v)n(aluated)e(in)h(order)h
(of)g(their)f(appearance)-118 5629 y(in)c(the)f(prog)h(function.)29
b(An)22 b(id)g(which)f(appears)h(at)h(the)e(top)h(le)n(v)o(el)f(of)h
(the)g(program)f(are)-118 5750 y(labels)i(which)g(can)h(be)g(referred)h
(by)f(go.)30 b(The)24 b(v)n(alue)f(returned)g(by)h(the)f(prog)h
(function)-118 5870 y(is)g(determined)g(by)h(a)g(return)g(function)f
(or)h(nil)f(if)h(the)f(prog)h(\224f)o(alls)f(through\224.)p
eop
%%Page: 76 84
76 83 bop 118 -18 a Fr(76)357 289 y Fh(\(de)59 b(sum-up)g(\(seq\))537
409 y(\(prog)f(\(sum\))656 529 y(\(setq)h(sum)g(0\))596
650 y(loop)656 770 y(\(when)g(\(null)f(seq\))h(\(return)f(sum\)\))656
891 y(\(when)h(\(numberp)f(\(first)g(seq\)\))776 1011
y(\(setq)g(sum)h(\(plus)g(sum)g(\(first)g(seq\)\)\))776
1131 y(\(setq)f(seq)h(\(rest)g(seq\)\))776 1252 y(\(go)g(loop\)\)\)\))
357 1474 y(1)h(lisp>)e(\(sum-up)h('\(1)g(3)g(5\)\))357
1594 y(9)357 1714 y(2)h(lisp>)e(\(sum-up)h('\(a\)\))357
1835 y(nil)118 2056 y Fr(There)25 b(are)h(restrictions)e(as)h(to)f
(where)i(the)e(control)h(functions)e(go)i(and)g(return)g(may)f(be)h
(placed.)31 b(The)118 2177 y(functions)f(go)g(and)h(return)g(are)g
(intended)f(to)h(be)g(used)f(within)g(a)h(prog.)48 b(This)30
b(is)g(so)h(that)f(the)o(y)g(may)118 2297 y(ha)n(v)o(e)k(only)f
(locally)g(determinable)g(ef)n(fects.)59 b(Unfortunately)33
b(these)g(restrictions)g(are)i(not)e(consis-)118 2418
y(tent)d(across)h(compiled)f(and)g(interpreted)h(code.)48
b(It)31 b(is)f(recommended)g(that)g(if)h(a)g(non-local)f(e)o(xit)g(is)
118 2538 y(required)25 b(then)f(use)h(catch)g(and)g(thro)n(w)f(\(see)h
(section)f(8.5\).)118 2658 y(In)33 b(interpreted)f(code,)i(upon)e
(encountering)g(a)h(return)f(a)h(search)g(is)f(made)h(for)g(the)f
(latest)g(instance)118 2779 y(of)i(an)g(entrance)g(to)f(a)h(prog.)57
b(If)34 b(the)f(search)h(is)f(successful)g(then)h(the)f(e)n(v)n
(aluation)f(of)i(that)f(prog)g(is)118 2899 y(considered)24
b(complete,)f(the)h(v)n(alue)f(returned)h(is)f(the)h(ar)n(gument)f(to)h
(return.)30 b(If)24 b(the)g(search)h(for)f(a)g(prog)118
3020 y(f)o(ails)h(then)f(the)h(message)118 3241 y Fh(*****)59
b(RETURN)f(attempted)g(outside)g(the)h(scope)g(of)g(a)h(PROG)118
3463 y Fr(is)34 b(displayed.)58 b(The)34 b(treatment)g(of)g(return)g
(is)g(much)g(dif)n(ferent)f(when)h(the)h(code)f(is)g(compiled.)57
b(A)118 3584 y(return)31 b(may)f(appear)h(outside)e(the)i(scope)f(of)h
(a)g(prog.)47 b(F)o(or)31 b(e)o(xample,)g(the)f(compiler)g(will)f
(compile)118 3704 y(the)c(sequence)118 3926 y Fh(\(if)59
b(\(not)g(\(numberp)f(x\)\))h(\(return)f('unknown\)\))118
4046 y(\(compute)g(x\)\))118 4268 y Fr(as)25 b(if)g(it)f(were)i(were)f
(enclosed)g(within)e(a)i(prog.)118 4490 y Fh(\(prog)59
b(\(\))238 4610 y(\(if)g(\(not)g(\(numberp)f(x\)\))h(\(return)f
('unknown\)\))238 4730 y(\(return)g(\(compute)g(x\)\)\)\))118
4952 y Fr(Upon)29 b(reaching)h(a)f(go)g(within)g(interpreted)g(code)g
(a)h(search)g(is)f(made)g(for)h(the)f(latest)g(entrance)h(to)f(a)118
5073 y(prog.)37 b(If)27 b(this)f(search)h(is)g(successful)f(then)h(a)g
(second)g(search)g(is)g(made)f(for)i(a)f(label)f(which)h(matches)118
5193 y(the)e(ar)n(gument)f(to)h(go.)30 b(The)25 b(f)o(ailure)g(of)g
(either)f(search)i(is)e(an)h(error)-5 b(.)31 b(If)25
b(the)g(\002rst)g(search)g(f)o(ails)g(then)118 5415 y
Fh(*****)59 b(GO)g(attempted)f(outside)g(the)h(scope)g(of)g(a)h(PROG)
118 5637 y Fr(is)24 b(printed.)30 b(The)25 b(message)118
5858 y Fh(*****)59 b(`LABEL')f(is)h(not)g(a)h(label)f(within)f(the)h
(current)f(scope)p eop
%%Page: 77 85
77 84 bop -118 -18 a Fg(7.3.)55 b(SEQ)o(UENCING)25 b(EV)-13
b(ALU)l(A)i(TION)1959 b Fr(77)-118 289 y(is)20 b(printed)g(if)g(the)h
(second)f(search)h(f)o(ails.)29 b(When)21 b(a)f(prog)h(form)f(is)g
(compiled)g(the)g(compiler)g(e)o(xpects)g(to)-118 409
y(be)j(able)f(to)g(resolv)o(e)g(all)h(label)f(references.)31
b(Thus)22 b(e)n(v)o(ery)g(go)h(must)e(appear)i(within)f(a)h(prog)f
(otherwise)-118 529 y(the)j(follo)n(wing)d(error)k(message)e(is)h
(printed.)-118 749 y Fh(*****)59 b(FORM)f(invalid)h(go)-118
968 y Fr(In)38 b(addition,)i(the)e(ar)n(gument)g(to)g(a)g(go)g(must)f
(refer)i(to)f(a)g(label)g(de\002ned)h(inside)e(the)h(prog)g(which)-118
1088 y(contains)24 b(that)g(go.)31 b(The)24 b(message)-118
1307 y Fh(*****)59 b(Compiler)f(bug:)g(missing)h(label)f(LABEL)-118
1527 y Fr(is)24 b(printed)g(to)h(indicate)f(when)h(this)f(second)g
(restriction)g(is)g(not)h(met.)-118 1866 y Fq(\(go)g(LABEL:id\):)33
b(None)25 b(Retur)o(ned)1367 b Fi(open-compiled)24 b(fe)n(xpr)-94
1986 y Fr(Go)f(alters)h(the)f(normal)g(\003o)n(w)h(of)f(control)g
(within)g(a)h(prog)f(function.)30 b(The)23 b(ne)o(xt)g(state-)-118
2106 y(ment)h(of)h(a)g(prog)g(function)f(to)g(be)h(e)n(v)n(aluated)f
(is)g(immediately)f(preceded)i(by)g(label.)-118 2475
y Fq(\(r)n(etur)o(n)h(U:f)n(orm\):)31 b(None)26 b(Retur)o(ned)1362
b Fi(open-compiled)24 b(e)n(xpr)-89 2596 y Fr(W)l(ithin)j(a)j(prog,)f
(return)g(terminates)f(the)g(e)n(v)n(aluation)f(of)i(a)g(prog)g(and)g
(returns)f(U)h(as)-118 2716 y(the)c(v)n(alue)f(of)h(the)f(prog.)-118
3040 y Fk(7.3.1)119 b(Iteration)-118 3446 y Fq(\(while)25
b(E:f)n(orm)g([S:f)n(orm]\):)32 b(nil)2105 b Fi(macr)l(o)-79
3566 y Fr(This)39 b(is)g(a)g(commonly)f(used)h(construct)g(for)g
(inde\002nite)g(iteration)f(in)h(PSL.)h(E)f(is)-118 3687
y(e)n(v)n(aluated;)h(if)c(non-nil)f(the)h(S')-5 b(s)36
b(are)h(e)n(v)n(aluated)e(from)h(left)f(to)h(right)f(and)h(then)g(the)
-118 3807 y(process)f(is)f(repeated.)62 b(If)36 b(E)f(e)n(v)n(aluates)e
(to)i(nil)f(the)h(while)g(returns)g(nil.)60 b(Exit)34
b(may)-118 3928 y(be)c(used)g(to)f(terminate)g(the)h(while)g(and)g(to)f
(return)h(a)g(v)n(alue.)46 b(Ne)o(xt)29 b(may)h(be)g(used)f(to)-118
4048 y(terminate)24 b(the)h(current)g(iteration.)-118
4397 y Fq(\(r)n(epeat)h([S:f)n(orm])g(E:f)n(orm\):)31
b(nil)2063 b Fi(macr)l(o)-93 4517 y Fr(The)24 b(S')-5
b(s)25 b(are)g(e)n(v)n(aluated)e(left)i(to)f(right,)g(and)g(then)g(E)h
(is)f(e)n(v)n(aluated.)30 b(This)23 b(is)h(repeated)-118
4637 y(until)30 b(the)g(v)n(alue)g(of)h(E)g(is)g(non-nil,)g(at)g(which)
f(point)g(repeat)h(returns)g(nil.)48 b(Ne)o(xt)30 b(and)-118
4758 y(e)o(xit)e(may)h(be)h(used)f(in)g(the)g(S')-5 b(s)30
b(to)f(branch)g(to)g(the)h(ne)o(xt)e(iteration)h(of)g(a)h(repeat)g(or)f
(to)-118 4878 y(terminate)24 b(one)h(and)g(possibly)e(return)h(a)i(v)n
(alue.)-118 5247 y Fq(\(next\):)32 b(None)25 b(Retur)o(ned)1288
b Fi(open-compiled,)24 b(r)l(estricted)g(macr)l(o)-92
5367 y Fr(This)h(terminates)h(the)g(current)g(iteration)f(of)h(the)g
(most)f(closely)h(surrounding)f(while)-118 5488 y(or)38
b(repeat,)k(and)c(causes)g(the)g(ne)o(xt)g(to)f(commence.)71
b(Both)38 b(while)g(and)g(repeat)g(are)-118 5608 y(macros)29
b(which)g(e)o(xpand)g(into)g(prog')-5 b(s)29 b(and)g(ne)o(xt)g(is)g
(essentially)g(a)g(go.)45 b(The)30 b(restric-)-118 5728
y(tions)24 b(on)h(the)g(placement)f(of)i(ne)o(xt)e(are)i(similar)e(to)g
(those)h(of)g(go,)g(see)h(section)e(8.3)h(for)-118 5849
y(details.)p eop
%%Page: 78 86
78 85 bop 118 -18 a Fr(78)118 357 y Fq(\(exit)25 b([U:f)n(orm]\):)32
b(None)25 b(Retur)o(ned)936 b Fi(open-compiled,r)l(estricted)23
b(macr)l(o)149 478 y Fr(The)31 b(U')-5 b(s)30 b(are)h(e)n(v)n(aluated)f
(left)g(to)g(right,)i(the)e(most)g(closely)g(surrounding)f(while)h(or)
118 598 y(repeat)f(is)g(terminated,)f(and)h(the)g(v)n(alue)f(of)h(the)f
(last)h(U)f(is)h(returned.)42 b(W)l(ith)28 b(no)h(ar)n(gu-)118
718 y(ment)g(nil)h(is)f(returned.)46 b(Both)30 b(while)f(and)h(repeat)g
(are)h(macros)e(which)h(e)o(xpand)f(into)118 839 y(prog')-5
b(s)28 b(and)g(e)o(xit)f(is)h(essentially)f(a)i(return.)41
b(The)28 b(restrictions)f(on)h(the)g(placement)g(of)118
959 y(e)o(xit)c(are)i(similar)d(to)i(those)f(of)h(return,)f(see)i
(section)e(8.3)g(for)h(details.)118 1050 y(The)g(follo)n(wing)e
(function)h(de\002ntion)g(is)h(intended)f(to)g(illustrate)g(the)g(use)h
(of)g(repeat)g(and)g(while.)30 b(The)118 1170 y(function)c(will)h
(return)g(a)g(list)f(of)h(prime)g(numbers)f(which)h(are)h(less)e(than)h
(or)g(equal)g(to)g(the)g(ar)n(gument)118 1290 y(N,)e(which)f(is)h
(assumed)f(to)g(be)h(greater)g(than)g(one.)238 1501 y
Fh(\(de)59 b(primes)f(\(n\))357 1621 y(\(let)h(\(\(result)f(\(list)h
(2\)\))716 1742 y(\(number)f(3\))716 1862 y(\(pointer\))656
1983 y(\(prime\)\))477 2103 y(\(while)g(\(<=)h(number)g(n\))596
2223 y(\(setq)g(pointer)f(result\))596 2344 y(\(setq)h(prime)g(t\))596
2464 y(\(repeat)716 2585 y(\(when)g(\(zerop)f(\(remainder)f(number)i
(\(first)f(pointer\)\)\))835 2705 y(\(setq)h(prime)g(nil\)\))716
2825 y(\(setq)g(pointer)f(\(rest)g(pointer\)\))716 2946
y(\(or)h(\(null)g(pointer\))f(\(not)g(prime\)\)\))596
3066 y(\(when)h(prime)g(\(setq)f(result)h(\(aconc)f(result)h
(number\)\)\))596 3186 y(\(incr)g(number\)\))477 3307
y(\(cons)f(1)i(result\)\)\))118 3571 y Fq(F)n(or)118
3758 y Fr(A)21 b(simple)f(for)h(construct)g(is)f(a)n(v)n(ailable)h(in)f
(the)h(basic)g(PSL)h(system;)f(an)g(e)o(xtended)g(v)o(ersion)e(is)i
(de\002ned)118 3879 y(in)33 b(the)h(USEFUL)g(package.)58
b(The)34 b(basic)f(PSL)i(for)f(pro)o(vides)e(only)h(the)g(iterator)h
(FR)l(OM)g(and)g(the)118 3999 y(action)25 b(clause)f(DO.)h(PSL)h(users)
e(should)g(use)h(the)f(e)o(xtended)g(v)o(ersion,)g(described)h(here:)
118 4338 y Fq(\(f)n(or)g([S:f)n(orm]\):)32 b(any)2495
b Fi(macr)l(o)138 4458 y Fr(Each)20 b(ar)n(gument)g(to)f(for)i(is)e(a)h
(one)g(of)g(the)g(clauses)g(described)f(belo)n(w)-6 b(.)28
b(If)21 b(an)f(ar)n(gument)118 4579 y(is)k(not)h(a)g(clause)g(then)f
(one)h(of)g(the)f(follo)n(wing)f(continuable)h(errors)h(will)f(occur)-5
b(.)357 4745 y Fh(*****)59 b(For)g(clauses)f(may)h(not)g(be)h(atomic:)e
(`SYMBOL')357 4955 y(*****)h(Unknown)f(for)h(clause)g(operator:)e
(`LIST')118 5166 y Fr(A)21 b(clause)g(is)g(a)g(list,)g(its)f(\002rst)h
(element)g(is)f(an)h(identi\002er)l(,)h(the)f(remaining)f(elements)g
(are)i(ar)n(guments.)28 b(A)118 5286 y(clause)23 b(may)f(introduce)g(a)
g(local)h(v)n(ariable,)f(specify)g(a)h(return)g(v)n(alue,)f(or)g
(specify)h(when)f(the)g(iteration)118 5407 y(should)i(cease.)118
5527 y(The)34 b(\002rst)g(fe)n(w)g(clauses)g(are)h(used)f(to)f
(introduce)h(local)f(v)n(ariables.)58 b(Some)34 b(of)g(these)g(clauses)
g(also)118 5648 y(pro)o(vide)24 b(the)h(means)f(to)g(stop)g(loop)g
(iteration.)357 5858 y Fh(\(in)59 b(<variable>)f(<list>)g(<function>\))
p eop
%%Page: 79 87
79 86 bop -118 -18 a Fg(7.3.)55 b(SEQ)o(UENCING)25 b(EV)-13
b(ALU)l(A)i(TION)1959 b Fr(79)-118 289 y(The)19 b(v)n(ariable)f
Ff(<)p Fr(v)n(ariable)p Ff(>)g Fr(is)h(set)f(to)h(successi)n(v)o(e)e
(elements)h(of)h Ff(<)p Fr(list)p Ff(>)p Fr(.)27 b(The)19
b(ar)n(gument)g Ff(<)p Fr(function)p Ff(>)-118 409 y
Fr(is)31 b(optional.)50 b(If)33 b(present,)g(it)e(may)h(be)g(either)f
(the)h(name)g(of)f(a)i(function)e(or)g(a)i(lambda)e(e)o(xpression.)-118
529 y(The)22 b(function)f(is)g(applied)h(to)f(the)h(e)o(xtracted)g
(element)f(before)h(it)g(is)f(assigned)g(to)h Ff(<)p
Fr(v)n(ariable)p Ff(>)p Fr(.)29 b(Once)-118 650 y(the)h(ar)n(gument)f
Ff(<)p Fr(list)p Ff(>)g Fr(is)g(e)o(xhausted)g(the)g(iteration)g(will)g
(stop.)45 b(The)30 b(only)f(ar)n(gument)h(which)f(will)-118
770 y(be)c(e)n(v)n(aluated)f(is)g Ff(<)p Fr(list)p Ff(>)p
Fr(.)241 1031 y Fh(1)59 b(lisp>)g(\(for)g(\(in)g(v)g('\(0)g(1\))h
(add1\))1018 1151 y(\(do)f(\(print)f(v\)\)\))241 1271
y(1)241 1392 y(2)241 1512 y(nil)121 1769 y(\(on)h(<variable>)f
(<list>\))-118 2025 y Fr(The)30 b(v)n(ariable)f Ff(<)p
Fr(v)n(ariable)p Ff(>)h Fr(is)f(set)h(to)f(successi)n(v)o(e)g(cdrs)h
(of)g Ff(<)p Fr(list)p Ff(>)p Fr(.)45 b(The)30 b(\002rst)g(v)n(alue)g
(assigned)f(to)-118 2145 y Ff(<)p Fr(v)n(ariable)p Ff(>)34
b Fr(is)h Ff(<)p Fr(list)p Ff(>)p Fr(.)59 b(Once)35 b(the)g
Ff(<)p Fr(list)p Ff(>)f Fr(is)g(e)o(xhausted)g(the)h(iteration)f(will)g
(stop.)60 b(The)35 b(only)-118 2266 y(ar)n(gument)24
b(which)h(will)f(be)h(e)n(v)n(aluated)e(is)i Ff(<)p Fr(list)p
Ff(>)p Fr(.)241 2526 y Fh(1)59 b(lisp>)g(\(for)g(\(on)g(v)g('\(0)g
(1\)\))1018 2646 y(\(do)g(\(print)f(v\)\)\))241 2767
y(\(0)h(1\))241 2887 y(\(1\))241 3008 y(nil)121 3264
y(\(from)g(<variable>)e(<initial>)h(<final>)g(<step>\))-118
3520 y Fr(The)30 b(v)n(ariable)f Ff(<)p Fr(v)n(ariable)p
Ff(>)f Fr(is)i(set)f(to)g Ff(<)p Fr(initial)p Ff(>)f
Fr(for)i(the)f(\002rst)h(iteration)f(of)h(the)f(loop.)44
b(The)30 b(v)n(alue)-118 3641 y(of)c Ff(<)p Fr(v)n(ariable)p
Ff(>)g Fr(will)f(be)i(incremented)f(by)g Ff(<)p Fr(step)p
Ff(>)f Fr(before)i(each)g(follo)n(wing)d(iteration.)35
b(Once)26 b(the)-118 3761 y(v)n(alue)33 b(of)g Ff(<)p
Fr(v)n(ariable)p Ff(>)g Fr(is)g(lar)n(ger)h(than)f Ff(<)p
Fr(\002nal)p Ff(>)g Fr(the)g(iteration)f(will)h(stop.)55
b(Both)34 b Ff(<)p Fr(initial)p Ff(>)d Fr(and)-118 3881
y Ff(<)p Fr(step)p Ff(>)26 b Fr(are)i(optional,)f(the)f(def)o(ault)h(v)
n(alues)g(for)g(each)h(is)e(1.)38 b(The)27 b(ar)n(gument)g
Ff(<)p Fr(\002nal)p Ff(>)g Fr(is)g(optional,)-118 4002
y(in)f(which)g(case)h(the)f(iteration)f(must)g(be)i(stopped)e(by)h
(another)g(clause.)36 b(Each)26 b(ar)n(gument)g(e)o(xcept)g(for)-118
4122 y Ff(<)p Fr(v)n(ariable)p Ff(>)g Fr(will)h(be)g(e)n(v)n(aluated)f
(once,)i(before)g(the)f(\002rst)g(iteration.)37 b(T)-8
b(o)27 b(specify)g Ff(<)p Fr(step)p Ff(>)g Fr(without)-118
4243 y Ff(<)p Fr(initial)p Ff(>)37 b Fr(and)j Ff(<)p
Fr(\002nal)p Ff(>)p Fr(,)i(or)d Ff(<)p Fr(\002nal)p Ff(>)h
Fr(with)e Ff(<)p Fr(initial)p Ff(>)g Fr(omitted)f(place)j(nil)e(in)h
(the)g(slot)f(to)h(be)-118 4363 y(omitted.)241 4623 y
Fh(1)59 b(lisp>)g(\(for)g(\(from)f(v)i(1)f(5)h(2\))1018
4744 y(\(do)f(\(print)f(v\)\)\))241 4864 y(1)241 4984
y(3)241 5105 y(5)121 5361 y(\(FOR)h(<variable>)e(<initial>)h(<next>\))
-118 5618 y Fr(At)32 b(the)g(outset)f(of)i(the)f(\002rst)g(iteration,)i
(the)e(v)n(ariable)g Ff(<)p Fr(v)n(ariable)p Ff(>)f Fr(will)h(be)g(set)
g(to)g(the)g(e)n(v)n(aluation)-118 5738 y(of)24 b Ff(<)p
Fr(initial)p Ff(>)p Fr(.)29 b(Prior)c(to)e(subsequent)g(iterations,)h
(the)g(e)o(xpression)e Ff(<)p Fr(ne)o(xt)p Ff(>)i Fr(will)f(be)h(e)n(v)
n(aluated)f(and)-118 5858 y(assigned)h(to)g Ff(<)p Fr(v)n(ariable)p
Ff(>)p Fr(.)p eop
%%Page: 80 88
80 87 bop 118 -18 a Fr(80)477 289 y Fh(1)59 b(lisp>)g(\(for)g(\(for)g
(v)g(1)h(\(add1)e(v\)\))1254 409 y(\(until)g(\(>)i(v)f(3\)\))1254
529 y(\(do)g(\(print)f(v\)\)\))477 770 y(1)477 891 y(2)477
1011 y(3)477 1131 y(nil)357 1362 y(\(with)h([<variable-form>]\))118
1593 y Fr(Each)34 b(ar)n(gument)f Ff(<)p Fr(v)n(ariable-form)p
Ff(>)g Fr(is)g(either)g Ff(<)p Fr(v)n(ariable)p Ff(>)g
Fr(or)g(\()p Ff(<)p Fr(v)n(ariable)p Ff(>)g(<)p Fr(initial)p
Ff(>)p Fr(\).)55 b(The)118 1713 y(square)27 b(brack)o(ets)g(are)h(used)
e(to)h(indicate)f(zero)h(or)g(more)g(occurances)h(of)e
Ff(<)p Fr(v)n(ariable-form)p Ff(>)p Fr(.)36 b(If)28 b(the)118
1834 y(\002rst)j(form)f(is)g(used)h(then)f(the)g(v)n(ariable)g(will)g
(be)h(set)f(to)g(nil)g(prior)g(to)h(the)f(\002rst)h(iteration.)47
b(W)l(ith)30 b(the)118 1954 y(second)25 b(form)f(the)h(v)n(ariable)f
(will)g(be)h(set)g(to)f(the)h(v)n(alue)f(of)h Ff(<)p
Fr(initial)p Ff(>)p Fr(.)357 2185 y Fh(\(do)59 b([<form>]\))118
2416 y Fr(The)39 b(square)h(brack)o(ets)f(are)h(used)f(to)g(indicate)f
(zero)i(or)g(more)f(occurances)g(of)h Ff(<)p Fr(form)p
Ff(>)p Fr(.)73 b(Each)118 2536 y(e)o(xpression)24 b Ff(<)p
Fr(form)p Ff(>)h Fr(is)g(e)n(v)n(aluated)f(during)g(each)i(iteration.)
31 b(The)o(y)25 b(are)h(e)n(v)n(aluated)e(in)h(the)g(order)g(of)118
2657 y(their)k(appearance.)44 b(Y)-11 b(ou)28 b(may)h(use)g(return)g
(within)e(a)j Ff(<)p Fr(form)p Ff(>)p Fr(,)f(it)f(will)g(cause)i(an)f
(immediate)e(e)o(xit)118 2777 y(from)e(the)f(for)-5 b(.)118
2898 y(There)26 b(are)g(tw)o(o)f(clauses)g(which)g(allo)n(w)f(for)h
(the)g(e)n(v)n(aluation)f(of)h(e)o(xpressions)f(before)i(the)f(\002rst)
g(itera-)118 3018 y(tion,)f(and)h(after)g(the)g(last)f(iteration.)357
3249 y Fh(\(initially)58 b([<form>]\))118 3480 y Fr(The)39
b(square)f(brack)o(ets)h(are)g(used)f(to)g(indicate)g(zero)h(or)g(more)
f(occurances)h(of)g Ff(<)p Fr(form)p Ff(>)p Fr(.)71 b(Once)118
3600 y(the)30 b(iteration)g(v)n(ariables)g(ha)n(v)o(e)g(been)g(bound)g
(to)g(their)g(v)n(alues)g(each)h(e)o(xpression)e Ff(<)p
Fr(form)p Ff(>)h Fr(will)f(be)118 3721 y(e)n(v)n(aluated.)h(The)o(y)24
b(are)h(e)n(v)n(aluated)f(in)g(the)h(order)g(of)g(their)g(appearance.)
357 3952 y Fh(\(finally)58 b([<form>]\))118 4183 y Fr(The)29
b(square)f(brack)o(ets)h(are)g(used)f(to)g(indicate)g(zero)h(or)g(more)
f(occurances)h(of)g Ff(<)p Fr(form)p Ff(>)p Fr(.)41 b(After)29
b(the)118 4303 y(\002nal)24 b(iteration)f(each)i(e)o(xpression)e
Ff(<)p Fr(form)p Ff(>)g Fr(will)g(be)i(e)n(v)n(aluated.)k(The)o(y)23
b(are)i(e)n(v)n(aluated)e(in)g(the)h(order)118 4423 y(of)36
b(their)g(appearance.)66 b(The)36 b(use)g(of)h(the)f(clauses)g(al)o(w)o
(ays)g(and)g(ne)n(v)o(er)f(\(described)i(belo)n(w\),)h(may)118
4544 y(pre)n(v)o(ent)e(e)n(v)n(aluation)f(of)h(the)h(ar)n(guments)f(to)
g(this)g(clause.)66 b(There)37 b(are)h(clauses)e(which)h(specify)f(a)
118 4664 y(return)25 b(v)n(alue,)f(if)h(none)f(of)h(them)f(are)h(used)g
(then)f(the)h(v)n(alue)f(of)h(the)f(last)h Ff(<)p Fr(form)p
Ff(>)f Fr(will)g(be)h(the)f(v)n(alue)118 4785 y(of)h(the)g(for)-5
b(.)477 5016 y Fh(1)59 b(lisp>)g(\(for)g(\(from)g(v)g(1)h(3\))1254
5136 y(\(finally)e(v\)\))477 5256 y(4)477 5377 y(nil)477
5497 y(2)h(lisp>)g(\(for)g(\(for)g(v)g(1)h(\(add1)e(v\)\))1254
5618 y(\(always)g(\(<)h(v)h(3\)\))1254 5738 y(\(finally)e(v\)\))477
5858 y(nil)p eop
%%Page: 81 89
81 88 bop -118 -18 a Fg(7.3.)55 b(SEQ)o(UENCING)25 b(EV)-13
b(ALU)l(A)i(TION)1959 b Fr(81)-118 289 y(The)36 b(ne)o(xt)f(fe)n(w)h
(clauses)g(are)h(used)e(to)h(b)n(uild)f(a)h(v)n(alue)g(to)f(be)h
(returned)g(from)g(for)g(Except)g(for)g(the)-118 409
y(returns)29 b(and)h(returning)e(clauses,)j(a)f(second)f(ar)n(gument)g
(is)g(used)g(in)h(these)f(clauses)g(to)g(specify)h(that)-118
529 y(instead)25 b(of)h(returning)f(the)h(result)f(it)h(will)f(be)h
(stored)f(as)h(the)g(v)n(alue)f(of)h(this)f(second)h(ar)n(gument.)33
b(This)-118 650 y(means)24 b(that)h(the)f(second)h(ar)n(gument)f
(should)g(be)h(an)g(identi\002er)l(,)f(it)h(will)f(not)g(be)h(e)n(v)n
(aluated.)121 839 y Fh(1)60 b(lisp>)e(\(for)h(\(in)g(v)h('\(0)f(1\)\))
898 959 y(\(collect)f(\(add1)h(v\)\)\))121 1080 y(\(1)g(2\))121
1200 y(2)h(lisp>)e(\(for)h(\(in)g(v)h('\(0)f(1\)\))898
1320 y(\(collect)f(\(add1)h(v\))g(result\)\))121 1441
y(nil)121 1561 y(3)h(lisp>)e(result)121 1681 y(\(1)h(2\))-118
1870 y Fr(If)25 b(more)g(than)f(one)h(return)g(v)n(alue)f(is)g(implied)
g(then)g(an)h(error)h(will)e(result)121 2059 y Fh(1)60
b(lisp>)e(\(for)h(\(in)g(v)h('\(0)f(1\)\))898 2180 y(\(collect)f(v\))
898 2300 y(\(adjoin)g(v\)\))121 2421 y(*****)h(For)g(loops)f(may)i
(only)e(return)h(one)g(value)121 2610 y(\(returns)f([<form>]\))-118
2798 y Fr(Prior)30 b(to)f(returning)g(from)g(the)h(for)f(each)i
Ff(<)p Fr(form)p Ff(>)e Fr(is)g(e)n(v)n(aluated.)44 b(The)29
b(order)h(of)g(e)n(v)n(alution)d(is)i(left)-118 2919
y(to)e(right.)39 b(The)28 b(v)n(alue)g(of)g(the)f(last)h
Ff(<)p Fr(form)p Ff(>)f Fr(is)g(returned)h(as)g(the)g(v)n(alue)f(of)h
(the)g(for)-5 b(.A)27 b(synon)o(ym)f(for)-118 3039 y(returns)e(is)h
(returning.)121 3228 y Fh(\(collect)58 b(<form>)g(<variable>\))-118
3417 y Fr(This)26 b(clause)g(is)g(used)g(to)g(b)n(uild)g(a)g(list.)35
b(During)26 b(each)h(iteration)e(the)i(v)n(alue)e(of)i
Ff(<)p Fr(form)p Ff(>)f Fr(is)g(added)g(at)-118 3538
y(the)f(end)f(of)h(the)g(list.)k(The)c(use)g(of)g(the)g(optional)e(ar)n
(gument)h Ff(<)p Fr(v)n(ariable)p Ff(>)g Fr(is)h(described)g(abo)o(v)o
(e.)241 3727 y Fh(1)59 b(lisp>)g(\(for)g(\(on)g(v)g('\(one)g(two\)\))
1018 3847 y(\(collect)f(v\)\))241 3967 y(\(\(one)g(two\))h(\(two\)\))
121 4156 y(\(ADJOIN)f(<form>)h(<variable>\))121 4277
y(\(ADJOINQ)f(<form>)g(<variable>\))-118 4466 y Fr(These)30
b(clauses)g(are)h(similar)e(to)h(collect.)47 b(The)30
b(dif)n(ference)h(is)f(that)f(the)i(v)n(alue)e(of)h Ff(<)p
Fr(form)p Ff(>)g Fr(is)g(only)-118 4586 y(added)39 b(to)g(the)g(list)f
(if)i(it)e(is)h(not)g(already)h(an)f(element.)74 b(T)-8
b(o)39 b(detemine)f(membership)g(in)h(the)g(list)-118
4706 y(adjoin)28 b(uses)h(member)l(,)h(adjoinq)e(uses)h(memq.)43
b(The)29 b(use)g(of)g(the)g(optional)f(ar)n(gument)h
Ff(<)p Fr(v)n(ariable)p Ff(>)-118 4827 y Fr(is)24 b(described)h(abo)o
(v)o(e.)241 5016 y Fh(1)59 b(lisp>)g(\(for)g(\(in)g(i)g('\("one")f
("one"\)\))1018 5136 y(\(adjoin)g(i)h(one\))1018 5256
y(\(adjoinq)f(i)h(two\)\))241 5377 y(nil)241 5497 y(2)g(lisp>)g(one)241
5618 y(\("one"\))241 5738 y(3)g(lisp>)g(two)241 5858
y(\("one")f("one"\))p eop
%%Page: 82 90
82 89 bop 118 -18 a Fr(82)357 289 y Fh(\(JOIN)59 b(<form>)f
(<variable>\))357 409 y(\(CONC)h(<form>)f(<variable>\))118
635 y Fr(These)33 b(clauses)g(are)h(similar)e(to)h(collect.)56
b(The)33 b(dif)n(ference)g(is)g(that)g(the)g(v)n(alue)f(of)i
Ff(<)p Fr(form)p Ff(>)e Fr(is)h(ap-)118 755 y(pended)26
b(\(nonc)f(is)g(used)h(with)f(the)g(conc)h(clause\),)g(to)g(the)f(end)h
(of)f(the)h(list.)32 b(The)26 b(use)g(of)f(the)h(optional)118
876 y(ar)n(gument)f Ff(<)p Fr(v)n(ariable)p Ff(>)f Fr(is)g(described)h
(abo)o(v)o(e.)477 1102 y Fh(1)59 b(lisp>)g(\(for)g(\(on)g(v)h('\(one)e
(two\)\))1254 1222 y(\(join)h(v\)\))477 1342 y(\(one)g(two)g(two\))118
1568 y Fr(Y)-11 b(ou)29 b(should)f(be)i(careful)g(with)f(conc.)44
b(In)30 b(the)f(e)o(xample,)h(if)f(conc)h(were)g(used)f(in)g(place)h
(of)f(join)g(the)118 1689 y(computation)23 b(w)o(ould)h(ne)n(v)o(er)g
(terminate.)357 1914 y Fh(\(UNION)59 b(<form>)f(<variable>\))357
2035 y(\(UNIONQ)g(<form>)h(<variable>\))118 2261 y Fr(These)25
b(clauses)h(are)g(used)f(to)g(b)n(uild)f(a)i(set.)32
b(During)24 b(each)i(iteration)f(the)g(union)f(of)i Ff(<)p
Fr(form)p Ff(>)e Fr(and)i(the)118 2381 y(set)k(being)f(constructed)g
(is)g(computed.)44 b(Set)30 b(membership)e(is)h(determined)g(with)g
(equal)h(for)g(union,)118 2501 y(and)25 b(eq)g(for)g(unionq.)k(The)c
(use)g(of)g(the)g(optional)e(ar)n(gument)h Ff(<)p Fr(v)n(ariable)p
Ff(>)g Fr(is)h(described)f(abo)o(v)o(e.)477 2727 y Fh(1)59
b(lisp>)g(\(for)g(\(in)g(v)h('\(\(0)e(2\))i(\(0)f(1)h(2)f(3\))g
(\(0\)\)\))1254 2848 y(\(unionq)f(v\)\))477 2968 y(\(3)h(2)h(1)f(0\))
357 3194 y(\(INTERSECTION)e(<form>)i(<variable>\))357
3314 y(\(INTERSECTIONQ)e(<form>)h(<variable>\))118 3540
y Fr(These)29 b(clauses)h(are)g(similar)e(to)h(union)f(and)i(unionq.)43
b(The)29 b(dif)n(ference)h(is)f(that)g(the)g(intersection)f(of)118
3661 y(sets)f(in)f(constructed)g(instead)h(of)g(the)f(union.)36
b(The)27 b(use)g(of)g(the)g(optional)e(ar)n(gument)i
Ff(<)p Fr(v)n(ariable)p Ff(>)f Fr(is)118 3781 y(described)f(abo)o(v)o
(e.)477 4007 y Fh(1)59 b(lisp>)g(\(for)g(\(in)g(v)h('\(\(0)e(2\))i(\(0)
f(1)h(2)f(3\))g(\(0\)\)\))1254 4127 y(\(intersectionq)d(v\)\))477
4248 y(\(0\))357 4473 y(\(COUNT)j(<form>)f(<variable>\))118
4699 y Fr(Returns)24 b(the)f(number)h(of)f(times)g Ff(<)p
Fr(form)p Ff(>)g Fr(e)n(v)n(aluates)g(to)g(a)h(nonnil)e(v)n(alue.)30
b(The)24 b(use)g(of)f(the)h(optional)118 4820 y(ar)n(gument)h
Ff(<)p Fr(v)n(ariable)p Ff(>)f Fr(is)g(described)h(abo)o(v)o(e.)477
5045 y Fh(1)59 b(lisp>)g(\(for)g(\(in)g(v)h('\(0)f(1)g(2\)\))1254
5166 y(\(count)f(\(zerop)h(\(remainder)e(v)j(2\)\)\)\))477
5286 y(2)357 5512 y(\(SUM)f(<form>)g(<variable>\))118
5738 y Fr(Returns)19 b(the)g(sum)f(of)h(each)g(e)n(v)n(aluation)e(of)i
Ff(<)p Fr(form)p Ff(>)p Fr(.)28 b(The)19 b(use)g(of)g(the)f(optional)g
(ar)n(gument)g Ff(<)p Fr(v)n(ariable)p Ff(>)118 5858
y Fr(is)24 b(described)h(abo)o(v)o(e.)p eop
%%Page: 83 91
83 90 bop -118 -18 a Fg(7.3.)55 b(SEQ)o(UENCING)25 b(EV)-13
b(ALU)l(A)i(TION)1959 b Fr(83)241 289 y Fh(1)59 b(lisp>)g(\(for)g(\(in)
g(v)g('\(2)g(3)h(4\)\))1018 409 y(\(sum)f(v\)\))241 529
y(9)121 764 y(\(PRODUCT)f(<form>)g(<variable>\))-118
998 y Fr(Returns)35 b(the)g(product)g(of)g(each)h(e)n(v)n(aluation)d
(of)i Ff(<)p Fr(form)p Ff(>)p Fr(.)61 b(The)36 b(use)f(of)g(the)g
(optional)f(ar)n(gument)-118 1118 y Ff(<)p Fr(v)n(ariable)p
Ff(>)24 b Fr(is)g(described)h(abo)o(v)o(e.)241 1353 y
Fh(1)59 b(lisp>)g(\(for)g(\(in)g(v)g('\(2)g(3)h(4\)\))1018
1474 y(\(product)e(v\)\))241 1594 y(24)121 1828 y(\(MAXIMIZE)g(<form>)g
(<variable>\))-118 2062 y Fr(Returns)23 b(the)g(maximum)f(v)n(alue)g
(of)i Ff(<)p Fr(form)p Ff(>)p Fr(.)29 b(The)24 b(use)f(of)g(the)g
(optional)f(ar)n(gument)h Ff(<)p Fr(v)n(ariable)p Ff(>)g
Fr(is)-118 2183 y(described)i(abo)o(v)o(e.)241 2418 y
Fh(1)59 b(lisp>)g(\(for)g(\(in)g(v)g('\(1)g(2)h(3\)\))1018
2538 y(\(maximize)d(v\)\))241 2658 y(3)121 2893 y(\(MINIMIZE)h(<form>)g
(<variable>\))-118 3127 y Fr(Returns)25 b(the)f(minimum)e(v)n(alue)i
(of)h Ff(<)p Fr(form)p Ff(>)p Fr(.)30 b(The)25 b(use)f(of)h(the)f
(optional)g(ar)n(gument)g Ff(<)p Fr(v)n(ariable)p Ff(>)g
Fr(is)-118 3247 y(described)h(abo)o(v)o(e.)241 3482 y
Fh(1)59 b(lisp>)g(\(for)g(\(in)g(v)g('\(1)g(2)h(3\)\))1018
3602 y(\(minimize)d(v\)\))241 3723 y(1)121 3957 y(\(MAXIMAL)h(<value>)g
(<test>)h(<variable>\))121 4077 y(\(MINIMAL)f(<value>)g(<test>)h
(<variable>\))-118 4312 y Fr(These)32 b(clauses)g(are)h
(generalizations)e(of)i(the)f(clauses)f(maximize)h(and)g(minimize.)51
b(Maximal)31 b(de-)-118 4432 y(termines)e(the)h(greatest)g(v)n(alue)f
(of)h Ff(<)p Fr(test)p Ff(>)f Fr(o)o(v)o(er)g(all)h(of)g(the)f(loop)g
(iterations.)45 b(The)30 b(corresponding)-118 4552 y(v)n(alue)c(of)i
Ff(<)p Fr(v)n(alue)p Ff(>)e Fr(is)h(returned.)38 b(As)27
b(a)g(particular)g(case)h(it)f(is)f(possible)g(to)h(return)g(the)g(v)n
(alue)g(of)g(an)-118 4673 y(iteration)f(v)n(ariable)h(for)g(which)f
(some)h(function)f(attains)g(a)i(maximum)d(v)n(alue.)37
b(The)27 b(functions)f(used)-118 4793 y(for)i(comparisons)f(are)i
(greaterp)f(and)g(lessp.)40 b(The)28 b(use)f(of)h(the)g(optional)f(ar)n
(gument)h Ff(<)p Fr(v)n(ariable)p Ff(>)f Fr(is)-118 4913
y(described)e(abo)o(v)o(e.)241 5148 y Fh(1)59 b(lisp>)g(\(for)g(\(in)g
(v)g('\(2)g(-2\)\))1018 5269 y(\(minimal)f(v)h(\(-)g(\(expt)g(v)h(2\))f
(\(*)g(7)h(v\)\)\)\))241 5389 y(2)-118 5623 y Fr(The)25
b(remaining)f(clauses)g(are)i(used)e(to)h(control)f(loop)g(iteration.)
121 5858 y Fh(\(ALWAYS)58 b([<form>]\))p eop
%%Page: 84 92
84 91 bop 118 -18 a Fr(84)118 289 y(The)33 b(square)f(brack)o(ets)h
(are)h(used)e(to)g(indicate)g(zero)h(or)g(more)g(occurances)g(of)g
Ff(<)p Fr(form)p Ff(>)p Fr(.)53 b(If)33 b(there)118 409
y(is)26 b(more)g(than)g(one)h(form)f(then)g(the)g(clause)h(is)f(equi)n
(v)n(alent)e(to)i(\(AL)-7 b(W)-12 b(A)i(YS)26 b(\(and)h([)p
Ff(<)p Fr(form)p Ff(>)p Fr(]\)\).)35 b(This)118 529 y(clause)e(is)g
(used)f(to)h(specify)f(a)i(return)f(v)n(alue,)h(t)f(is)f(returned)h(if)
g(each)h Ff(<)p Fr(form)p Ff(>)e Fr(is)g(non-nil)g(during)118
650 y(each)26 b(iteration.)31 b(If)26 b(one)f(of)h(the)f
Ff(<)p Fr(form)p Ff(>)p Fr(s)f(e)n(v)n(aluates)h(to)f(nil)h(then)g(the)
g(for)h(is)f(terminated)f(and)h(nil)g(is)118 770 y(returned,)g(this)f
(means)g(that)h(ar)n(guments)f(of)h(an)o(y)f(\002nally)g(clause)h(will)
f(not)g(be)h(e)n(v)n(aluated.)477 980 y Fh(1)59 b(lisp>)g(\(for)g(\(in)
g(v)h('\(1)f(0)g(2\)\))1254 1100 y(\(always)f(\(>)h(v)h(0\)\))1254
1220 y(\(do)f(\(print)f(v\)\)\))477 1341 y(1)477 1461
y(nil)357 1702 y(\(never)h([<form>]\))118 1911 y Fr(The)27
b(square)g(brack)o(ets)g(are)g(used)g(to)f(indicate)g(zero)i(or)f(more)
f(occurances)i(of)f Ff(<)p Fr(form)p Ff(>)p Fr(.)36 b(If)27
b(there)g(is)118 2032 y(more)d(than)g(one)g(form)g(then)g(the)g(clause)
g(is)g(equi)n(v)n(alent)e(to)i(\(NEVER)h(\(or)f([)p Ff(<)p
Fr(form)p Ff(>)p Fr(]\)\).)31 b(Equi)n(v)n(alent)118
2152 y(to)25 b(\(AL)-7 b(W)-12 b(A)i(YS)24 b(\(not)g([)p
Ff(<)p Fr(form)p Ff(>)p Fr(]\)\).)357 2362 y Fh(\(THEREIS)58
b(<form>\))118 2571 y Fr(If)26 b(the)f(ar)n(gument)h
Ff(<)p Fr(form)p Ff(>)f Fr(e)n(v)n(aluates)f(to)h(a)h(non-nil)f(v)n
(alue)f(then)i(the)f(for)h(is)f(terminated,)g(the)g(v)n(alue)118
2691 y(of)g Ff(<)p Fr(form)p Ff(>)f Fr(is)h(the)f(return)h(v)n(alue.)
477 2901 y Fh(1)59 b(lisp>)g(\(for)g(\(in)g(v)h('\(-1)e(0)i(2\)\))1254
3021 y(\(thereis)e(\(and)h(\(zerop)f(v\))h(v\)\))1254
3142 y(\(do)g(\(print)f(v\)\)\))477 3262 y(-1)477 3382
y(0)357 3592 y(\(WHILE)h([<form>]\))118 3801 y Fr(The)33
b(square)f(brack)o(ets)h(are)h(used)e(to)g(indicate)g(zero)h(or)g(more)
g(occurances)g(of)g Ff(<)p Fr(form)p Ff(>)p Fr(.)53 b(If)33
b(there)118 3922 y(is)c(more)g(than)f(one)h(form)g(then)g(the)g(clause)
g(is)f(equi)n(v)n(alent)f(to)i(\(WHILE)g(\(and)h([)p
Ff(<)p Fr(form)p Ff(>)p Fr(]\)\).)43 b(Loop)118 4042
y(iteration)24 b(stops)g(if)h(an)o(y)f Ff(<)p Fr(form)p
Ff(>)g Fr(e)n(v)n(aluates)g(to)g(nil.)477 4252 y Fh(1)59
b(lisp>)g(\(for)g(\(from)g(v)g(2)h(nil)f(-1\))1254 4372
y(\(while)f(\(>)i(v)f(0\)\))1254 4492 y(\(collect)f(\(sqrt)g(v\)\))1254
4613 y(\(finally)g(\(print)g(v\)\)\))477 4733 y(0)477
4854 y(\(1.41421)g(1.0\))357 5063 y(\(UNTIL)h([<form>]\))118
5272 y Fr(The)33 b(square)f(brack)o(ets)h(are)h(used)e(to)g(indicate)g
(zero)h(or)g(more)g(occurances)g(of)g Ff(<)p Fr(form)p
Ff(>)p Fr(.)53 b(If)33 b(there)118 5393 y(is)h(more)g(than)g(one)g
(form)g(then)g(the)g(clause)g(is)g(equi)n(v)n(alent)e(to)i(\(UNTIL)g
(\(or)h([)p Ff(<)p Fr(form)p Ff(>)p Fr(]\)\).)59 b(Loop)118
5513 y(iteration)24 b(stops)g(if)h(an)o(y)f Ff(<)p Fr(form)p
Ff(>)g Fr(e)n(v)n(aluates)g(to)g(a)h(non)g(nil)f(v)n(alue.)357
5723 y Fh(\(WHEN)59 b(<form>\))477 5843 y(Jump)g(to)g(the)g(next)g
(iteration)f(if)h(the)g(value)g(of)g(<form>)g(is)g(nil.)p
eop
%%Page: 85 93
85 92 bop -118 -18 a Fg(7.3.)55 b(SEQ)o(UENCING)25 b(EV)-13
b(ALU)l(A)i(TION)1959 b Fr(85)241 289 y Fh(1)59 b(lisp>)g(\(for)g(\(in)
g(v)g('\(-2)g(2\)\))1018 409 y(\(when)f(\(>)i(v)f(0\)\))1018
529 y(\(do)g(\(print)f(\(sqrt)h(v\)\)\)\))241 650 y(1.41421)241
770 y(nil)121 998 y(\(UNLESS)f(<form>\))-118 1225 y Fr(Jump)24
b(to)g(the)h(ne)o(xt)f(iteration)g(if)g(the)h(v)n(alue)f(of)h
Ff(<)p Fr(form)p Ff(>)g Fr(is)f(non-nil.)-118 1345 y(The)34
b(e)n(v)n(aluation)e(of)i(a)g(for)h(e)o(xpression)d(follo)n(ws)h(a)h
(speci\002c)g(order)l(,)j(irre)o(gardless)c(of)h(the)f(order)i(in)-118
1466 y(which)24 b(you)h(place)g(clauses.)2 1693 y(1.)49
b(Bind)26 b(loop)f(v)n(ariables)h(to)g(their)g(initial)f(v)n(alues.)34
b(Each)27 b(of)f(the)g(e)o(xpressions)f(which)h(represent)126
1813 y(initial)d(v)n(alues)h(is)h(e)n(v)n(aluated)e(before)j(the)e(v)n
(ariables)g(are)i(bound.)2 2017 y(2.)49 b(If)25 b(an)g(initially)e
(clause)i(is)f(present,)h(e)n(v)n(aluate)f(its)g(ar)n(guments.)2
2220 y(3.)49 b(Check)21 b(for)g(termination.)27 b(A)21
b(terminating)e(condition)g(may)h(be)g(speci\002ed)h(by)f(an)h(in,)g
(on,)g(from,)126 2340 y(while,)28 b(until,)f(thereis,)h(al)o(w)o(ays,)g
(or)g(ne)n(v)o(er)f(clause.)39 b(Satisf)o(action)28 b(of)f(a)i
(condition)d(will)h(force)126 2460 y(control)d(to)g(step)h(4)f
(\(unless)h(the)f(condition)g(w)o(as)g(speci\002ed)h(by)g(al)o(w)o(ays)
g(or)f(ne)n(v)o(er\).)2 2664 y(4.)49 b(If)36 b(present,)h(check)f(when)
f(and)g(unless)g(clauses.)62 b(If)36 b(an)o(y)e(condition)g(is)h(not)g
(satis\002ed)g(then)126 2784 y(e)n(v)n(aluate)f(the)i(body)-6
b(.)62 b(The)35 b(body)g(is)g(constructed)g(from)h(the)f(clauses)g(do,)
j(collect,)g(adjoin,)126 2904 y(adjoinq,)24 b(join,)h(conc,)h(union,)f
(unionq,)g(intersection,)f(intersectionq,)h(count,)g(sum,)g(product,)
126 3025 y(maximize,)e(minimize,)h(maximal,)f(and)i(minimal.)k
(Continue)24 b(at)h(step)f(3.)2 3228 y(5.)49 b(If)31
b(an)f(\002nally)h(clause)f(is)g(present,)i(e)n(v)n(aluate)e(its)f(ar)n
(guments.)48 b(Return)31 b(the)f(v)n(alue)g(of)g(the)h(last)126
3348 y(ar)n(gument)f(unless)g(a)i(returns)e(or)h(returning)g(clause)g
(is)f(present.)49 b(Otherwise)31 b(e)n(v)n(aluate)f(their)126
3469 y(ar)n(guments,)24 b(return)h(the)f(v)n(alue)g(of)h(the)g(last.)
-118 3915 y Fq(\(f)n(or*)g([S:f)n(orm]\):)31 b(any)2446
b Fi(macr)l(o)-92 4035 y Fr(Identical)26 b(to)g(for)g(e)o(xcept)g(that)
g(v)n(ariable)f(bindings)g(and)h(updates)f(are)i(done)f(sequen-)-118
4155 y(tially)e(instead)g(of)h(in)f(parallel)-118 4480
y Fk(7.3.2)119 b(Mapping)30 b(Functions)-118 4668 y Fr(The)25
b(mapping)f(functions)g(long)g(f)o(amiliar)g(to)h(LISP)h(programmers)e
(are)i(present)e(in)h(PSL.)h(Ho)n(we)n(v)o(er)l(,)-118
4788 y(we)h(belie)n(v)o(e)e(that)i(the)f(for)h(construct)f(described)h
(abo)o(v)o(e)f(or)h(the)f(simpler)g(foreach)i(described)e(belo)n(w)-118
4909 y(is)32 b(generally)h(more)g(useful,)i(since)d(it)h(ob)o(viates)e
(the)i(usual)g(necessity)f(of)h(constructing)f(a)h(lambda)-118
5029 y(e)o(xpression,)c(and)g(is)f(often)h(more)g(transparent.)43
b(Mapping)28 b(functions)g(with)h(more)f(than)h(tw)o(o)g(ar)n(gu-)-118
5149 y(ments)e(are)h(not)g(currently)f(supported.)39
b(Note)27 b(ho)n(we)n(v)o(er)g(that)g(se)n(v)o(eral)g(lists)g(may)g(be)
h(iterated)g(along)-118 5270 y(with)c(for)l(,)h(and)g(with)f
(considerably)g(more)g(generality)-6 b(.)30 b(F)o(or)25
b(e)o(xample:)-118 5497 y Fh(\(let)59 b(\(\(i)g(0\)\))1
5618 y(\(mapcar)g(l)g(\(function)f(\(lambda)g(\(x\))1317
5738 y(\(setq)g(i)i(\(add1)e(i\)\))1317 5858 y(\(cons)g(i)i
(x\)\)\)\)\))p eop
%%Page: 86 94
86 93 bop 118 -18 a Fr(86)118 289 y(may)25 b(be)g(e)o(xpressed)f(more)g
(transparently)g(as)118 545 y Fh(\(for)59 b(\(in)g(x)h(l\))f(\(from)g
(i)g(1\))h(\(collect)d(\(cons)i(i)h(x\)\)\))118 797 y
Fr(T)-8 b(o)27 b(augment)f(the)h(simpler)f(for)h(loop)f(present)g(in)h
(basic)g(PSL)g(the)g(follo)n(wing)e(list)h(iterator)h(has)f(been)118
918 y(pro)o(vided:)118 1260 y Fq(\(f)n(or)n(each)g(U:any\):)31
b(any)2406 b Fi(macr)l(o)143 1380 y Fr(This)24 b(macro)h(is)f
(essentially)g(equi)n(v)n(alent)f(to)h(the)h(the)f(map)h(functions)f
(as)h(follo)n(ws:)118 1534 y(Possible)f(forms)g(are:)32
b(Setting)24 b(x)h(to)f(successi)n(v)o(e)g(elements)g(of)h(u:)357
1758 y Fh(\(foreach)58 b(x)i(in)f(u)h(do)f(\(foo)g(x\)\))g(-->)g
(\(mapc)g(u)g('foo\))357 1879 y(\(foreach)f(x)i(in)f(u)h(collect)e
(\(foo)h(x\)\)-->)f(\(mapcar)g(u)i('foo\))357 1999 y(\(foreach)e(x)i
(in)f(u)h(conc)f(\(foo)f(x\)\))418 b(-->)59 b(\(mapcan)f(u)i('foo\))357
2119 y(\(foreach)e(x)i(in)f(u)h(join)f(\(foo)f(x\)\))418
b(-->)59 b(\(mapcan)f(u)i('foo\))118 2340 y Fr(Setting)24
b(x)h(to)f(successi)n(v)o(e)g(cdrs)h(of)g(u:)357 2564
y Fh(\(foreach)58 b(x)i(on)f(u)h(do)f(\(foo)g(x\)\))g(-->)g(\(map)g(u)g
('foo\))357 2685 y(\(foreach)f(x)i(on)f(u)h(collect)e(\(foo)h(x\)\)-->)
f(\(maplist)g(u)i('foo\))357 2805 y(\(foreach)e(x)i(on)f(u)h(conc)f
(\(foo)f(x\)\))418 b(-->)59 b(\(mapcon)f(u)i('foo\))357
2925 y(\(foreach)e(x)i(on)f(u)h(join)f(\(foo)f(x\)\))418
b(-->)59 b(\(mapcon)f(u)i('foo\))118 3146 y Fr(W)l(ithin)26
b(the)h(conte)o(xt)g(of)g(for)h(the)f(JOIN)g(is)g(used)g(to)g(append)g
(successi)n(v)o(e)f(v)n(alues.)37 b(Ho)n(we)n(v)o(er)l(,)26
b(inside)118 3267 y(foreach)g(successi)n(v)o(e)d(v)n(alues)h(are)i
(concatenated)f(together)-5 b(.)357 3523 y Fh(1)60 b(lisp>)e(\(setq)h
(x)h('\(a)f(b)g(c\))h(y)f(\(1)g(2)h(3\)\))357 3643 y(\(1)g(2)f(3\))357
3763 y(2)h(lisp>)e(\(for)h(\(in)g(u)h('\(x)f(y\)\))g(\(join)g(\(eval)f
(u\)\)\))357 3884 y(\(A)i(B)f(C)h(1)f(2)h(3\))357 4004
y(3)g(lisp>)e(x)357 4124 y(\(A)i(B)f(C\))357 4245 y(4)h(lisp>)e
(\(foreach)g(u)i(in)f('\(x)g(y\))h(join)f(\(eval)f(u\)\))357
4365 y(\(A)i(B)f(C)h(1)f(2)h(3\))357 4486 y(5)g(lisp>)e(x)357
4606 y(\(A)i(B)f(C)h(1)f(2)h(3\))118 5077 y Fq(\(map)25
b(X:list)g(FN:function\):)32 b(nil)2136 b Fi(e)n(xpr)138
5198 y Fr(Applies)19 b(FN)h(to)f(successi)n(v)o(e)f(cdrs)i(of)g(X.)g
(The)f(\002rst)h(v)n(alue)f(passed)h(to)f(FN)h(is)f(X,)h(unless)118
5318 y(X)25 b(is)f(nil.)357 5497 y Fh(1)60 b(lisp>)e(\(map)h('\(one)g
(two\))g(#'print\))357 5618 y(\(one)g(two\))357 5738
y(\(two\))357 5858 y(nil)p eop
%%Page: 87 95
87 94 bop -118 -18 a Fg(7.3.)55 b(SEQ)o(UENCING)25 b(EV)-13
b(ALU)l(A)i(TION)1959 b Fr(87)-118 357 y Fq(\(mapc)25
b(X:list)g(FN:function\):)32 b(nil)2092 b Fi(e)n(xpr)-93
478 y Fr(FN)25 b(is)f(applied)h(to)f(successi)n(v)o(e)f(elements)i(of)f
(list)g(X,)h(nil)f(is)g(returned.)121 677 y Fh(1)60 b(lisp>)e(\(mapc)h
('\(one)g(two\))f(#'print\))121 797 y(one)121 918 y(two)121
1038 y(nil)-118 1477 y Fq(\(mapcar)25 b(X:list)g(FN:function\):)32
b(list)1981 b Fi(e)n(xpr)-89 1598 y Fr(Similar)29 b(to)g(mapc)g(e)o
(xcept)g(that)g(the)g(return)g(v)n(alue)g(is)f(a)i(list)e(of)h(the)h
(results)e(of)h(each)-118 1718 y(applicaton)24 b(of)h(FN.)121
1917 y Fh(1)60 b(lisp>)e(\(map)h('\(\(one\))f(\(two\)\))h(#'\(lambda)e
(\(i\))j(i\)\))121 2038 y(\(one)f(two\))-118 2477 y Fq(\(mapcan)26
b(X:list)e(FN:function\):)32 b(list)1970 b Fi(e)n(xpr)-85
2597 y Fr(Similar)33 b(to)f(mapcar)i(e)o(xcept)e(that)h(the)g(v)n
(alues)f(returned)h(by)g(FN)g(are)h(nconced)f(to-)-118
2717 y(gether)25 b(instead)f(of)h(being)f(listed)f(together)-5
b(.)30 b(The)25 b(ar)n(gument)f(X)h(may)f(be)h(modi\002ed)f(to)-118
2838 y(construct)g(the)h(result.)121 3017 y Fh(1)60 b(lisp>)e(\(setq)h
(this)g('\(\(one\))f(\(two\)\)\))121 3137 y(\(\(one\))g(\(two\)\))121
3258 y(2)i(lisp>)e(\(mapcan)g(this)h(#'\(lambda)f(\(i\))h(i\)\))121
3378 y(\(one)g(two\))121 3498 y(3)h(lisp>)e(this)121
3619 y(\(\(one)h(two\))g(\(two\)\))-118 4058 y Fq(\(maplist)24
b(X:list)h(FN:function\):)32 b(list)1992 b Fi(e)n(xpr)-86
4178 y Fr(Similar)32 b(to)f(map)h(e)o(xcept)f(that)h(the)g(return)g(v)n
(alue)f(is)h(a)g(list)f(of)h(the)g(results)f(of)h(each)-118
4298 y(application)24 b(of)g(FN.)121 4498 y Fh(1)60 b(lisp>)e
(\(maplist)g('\(one)h(two\))g(#'\(lambda)e(\(i\))j(i\)\))121
4618 y(\(\(one)f(two\))g(\(two\)\))-118 5057 y Fq(\(mapcon)26
b(X:list)e(FN:function\):)32 b(list)1970 b Fi(e)n(xpr)-85
5178 y Fr(Similar)33 b(to)f(maplist)g(e)o(xcept)g(that)h(the)g(v)n
(alues)f(returned)h(by)g(FN)g(are)h(nconced)f(to-)-118
5298 y(gether)25 b(instead)f(of)h(being)f(listed)g(together)-5
b(.)121 5497 y Fh(1)60 b(lisp>)e(\(setq)h(this)g('\(one)f(two\)\))121
5618 y(\(one)h(two\))121 5738 y(2)h(lisp>)e(\(mapcon)g(this)h
(#'\(lambda)f(\(i\))h(\(copy)g(i\)\)\))121 5858 y(\(one)g(two)g(two\))p
eop
%%Page: 88 96
88 95 bop 118 -18 a Fr(88)118 289 y(Note)28 b(that)g(the)h(nconc)f
(happens)g(as)h(the)f(mapping)f(process)i(proceeds,)g(not)f(afterw)o
(ard.)43 b(Therefore)118 409 y(the)23 b(result)g(is)g(not)g(the)g(same)
g(as)g(nconcing)g(the)g(results)g(of)g(a)h(maplist.)k(Consider)c(what)f
(w)o(ould)f(occur)118 529 y(if)357 789 y Fh(\(mapcon)58
b(this)h(#'\(lambda)f(\(i\))h(i\)\))118 1045 y Fr(had)24
b(been)g(used)g(in)f(the)h(e)o(xample)f(abo)o(v)o(e.)29
b(Mapcon)23 b(w)o(ould)g(apply)h(its)f(second)g(ar)n(gument)h(to)f(its)
g(\002rst)118 1166 y(ar)n(gument)j(gi)n(ving)e(a)j(partial)f(result)g
(of)g(\(one)g(tw)o(o\).)35 b(Notice)26 b(that)g(the)g(\002rst)g(ar)n
(gument)g(to)g(mapcon)g(is)118 1286 y(eq)i(to)e(this)h(partial)g
(result.)37 b(No)n(w)27 b(mapcon)g(applies)f(its)h(second)g(ar)n
(gument)g(to)g(\(tw)o(o\),)g(the)g(cdr)h(of)f(its)118
1406 y(\002rst)g(ar)n(gument.)36 b(The)27 b(partial)f(result)g(becomes)
h(\(one)g(tw)o(o)f(tw)o(o\).)36 b(Ho)n(we)n(v)o(er)l(,)26
b(the)h(\002rst)g(ar)n(gument)f(to)118 1527 y(mapcon)h(has)g(been)g
(modi\002ed)g(because)g(nconc)g(w)o(as)g(used)g(to)g(b)n(uild)f(the)h
(partial)g(result.)37 b(The)27 b(v)n(alue)118 1647 y(of)34
b(the)f(\002rst)g(ar)n(gument)g(is)g(no)n(w)f(\(one)i(tw)o(o)f(tw)o
(o\).)56 b(The)33 b(computation)f(will)g(ne)n(v)o(er)h(terminate,)i
(the)118 1767 y(length)24 b(of)h(the)g(\002rst)g(ar)n(gument)f(to)g
(mapcon)h(will)f(continue)g(to)g(gro)n(w)-6 b(.)118 2059
y Fq(Do)118 2473 y(\(do)25 b(A:list)g(B:list)g([S:f)n(orm]\):)31
b(any)2006 b Fi(macr)l(o)147 2594 y Fr(The)28 b(general)h(form)f(follo)
n(ws,)g(the)g(square)h(brack)o(ets)g(are)g(used)f(to)g(indicate)g(zero)
h(or)118 2714 y(more)c(occurances)g(of)g(an)g(e)o(xpression.)357
2917 y Fh(\(DO)59 b(\([<var-form>]\))e(\(<exit-test>)g([<result>]\))g
([<body>]\))118 3140 y Fr(A)25 b Ff(<)p Fr(v)n(ar)n(-form)p
Ff(>)f Fr(is)h(either)f(an)h(id)g(or)g(a)g(list)e(of)i(the)g(form)357
3400 y Fh(\(<var>)59 b(<initial>)e(<next>\))118 3655
y Fr(There)25 b(are)h(four)f(basic)f(steps)h(in)f(the)h(e)n(v)n
(aluation)e(of)h(a)i(do)e(form.)238 3879 y(1.)49 b(.....)238
4102 y(2.)g(If)22 b Ff(<)p Fr(e)o(xit-test)p Ff(>)e Fr(e)n(v)n(aluates)
g(to)i(a)f(non-nil)g(v)n(alue)g(the)g Ff(<)p Fr(result)p
Ff(>)g Fr(forms)g(are)i(e)n(v)n(aluated)d(and)i(the)362
4222 y(do)i(is)g(e)o(xited,)g(unbinding)f(the)h(local)g(v)n(ariables.)
30 b(The)25 b(v)n(alue)f(of)g(a)h(do)g(is)f(the)g(v)n(alue)g(of)h(the)f
(last)362 4342 y Ff(<)p Fr(result)p Ff(>)g Fr(unless)g(there)h(are)h
(no)e Ff(<)p Fr(result)p Ff(>)g Fr(forms,)g(in)h(which)f(case)i(nil)e
(is)g(returned.)238 4566 y(3.)49 b(The)32 b(body)f(of)g(the)h(do,)h
(consisting)d(of)h(the)h Ff(<)p Fr(body)p Ff(>)f Fr(forms,)h(is)g(e)n
(v)n(aluated)e(in)h(left)h(to)f(right)362 4686 y(order)-5
b(.)238 4909 y(4.)49 b(The)38 b Ff(<)p Fr(ne)o(xt)p Ff(>)e
Fr(forms)h(are)i(e)n(v)n(aluated)e(in)g(parallel,)j(the)e(v)n(alues)f
(are)h(assigned)f(to)g(the)h(cor)n(-)362 5029 y(responding)e
Ff(<)p Fr(v)n(ar)p Ff(>)p Fr(s)g(rather)h(than)f(being)h(bound.)66
b(Once)37 b(this)f(is)g(complete)g(the)h(process)362
5150 y(continues)24 b(at)h(step)f(2.)118 5373 y(If)37
b Ff(<)p Fr(ne)o(xt)p Ff(>)f Fr(is)g(omitted,)j(the)d(v)n(alue)g(of)h
(the)g(corresponding)f Ff(<)p Fr(v)n(ar)p Ff(>)g Fr(is)g(left)h
(unchanged)f(during)118 5493 y(step)28 b(4.)40 b(If)28
b(both)g Ff(<)p Fr(initial)p Ff(>)e Fr(and)i Ff(<)p Fr(ne)o(xt)p
Ff(>)f Fr(are)i(omitted)d(or)i(if)g(the)g Ff(<)p Fr(v)n(ar)n(-form)p
Ff(>)g Fr(is)f(an)h(id)g(then)g(the)118 5614 y(v)n(ariable)c(is)h
(bound)f(to)g(nil)g(in)h(step)f(1)h(and)g(left)f(unchanged)h(during)f
(step)g(4.)118 5738 y(The)d(function)f(de\002nition)g(belo)n(w)g
(illustrates)g(the)h(use)g(of)g(do.)29 b(This)20 b(function)g(will)h
(re)n(v)o(erse)f(the)h(order)118 5858 y(of)k(elements)f(in)g(a)i(list.)
p eop
%%Page: 89 97
89 96 bop -118 -18 a Fg(7.4.)55 b(NON-LOCAL)25 b(EXITS)2351
b Fr(89)121 289 y Fh(\(de)59 b(reverse)f(\(sequence\))241
409 y(\(do)h(\(\(local)f(sequence)g(\(rest)g(local\)\))539
529 y(\(result)h(nil)g(\(cons)f(\(first)h(local\))f(result\)\)\))480
650 y(\(\(null)g(local\))h(result\)\)\))-118 1114 y Fq(\(do*)25
b(A:list)f(B:list)h([C:f)n(orm]\):)32 b(any)1939 b Fi(macr)l(o)-81
1235 y Fr(Do*)36 b(is)h(lik)o(e)f(do,)k(e)o(xcept)d(the)f(v)n(ariable)h
(bindings)e(and)i(updatings)e(are)j(done)f(se-)-118 1355
y(quentially)22 b(instead)g(of)i(in)f(parallel.)30 b(The)23
b(follo)n(wing)f(is)g(a)i(de\002nition)e(of)i(assoc)f(using)-118
1475 y(do*.)121 1649 y Fh(\(de)59 b(assoc)g(\(item)f(a-list\))241
1769 y(\(do*)g(\(\(local)h(a-list)f(\(rest)h(local\)\))599
1890 y(\(pair)g(\(first)f(local\))h(\(first)f(local\)\)\))539
2010 y(\(\(or)h(\(null)g(local\))838 2130 y(\(equal)g(item)g(\(first)f
(pair\)\)\))599 2251 y(local\)\)\))-118 2466 y Fr(If)35
b(do)e(had)i(been)f(used,)i(e)n(v)n(aluation)c(of)j(the)f
Ff(<)p Fr(initial)p Ff(>)e Fr(form)i(\(\002rst)g(local\))h(w)o(ould)e
(ha)n(v)o(e)h(resulted)-118 2587 y(in)g(an)g(error)-5
b(.)59 b(Either)34 b(local)g(w)o(ould)f(be)i(unbound)e(or)h(the)g(v)n
(alue)f(of)i(local)f(from)g(the)g(surrounding)-118 2707
y(en)l(vironment)23 b(w)o(ould)h(ha)n(v)o(e)h(been)g(used.)-118
3049 y Fq(\(do-loop)g(A:list)f(B:list)h(C:list)g([S:f)n(orm]\):)31
b(any)1533 b Fi(macr)l(o)-92 3169 y Fr(Do-loop)26 b(is)g(lik)o(e)g(do,)
h(e)o(xcept)f(that)g(it)g(tak)o(es)g(an)h(additional)e(ar)n(gument,)h
(a)h(prologue.)-118 3289 y(The)k(general)g(form)f(follo)n(ws,)h(the)g
(square)g(brack)o(ets)g(are)g(used)g(to)f(indicate)h(zero)g(or)-118
3410 y(more)25 b(occurances)g(of)g(an)g(e)o(xpression.)241
3604 y Fh(\(DO-LOOP)58 b(\([<var-form>]\))e(\([<first>]\))779
3724 y(\(<exit-test>[<result>]\))e([<body>]\))-118 3940
y Fr(This)30 b(is)g(e)o(x)o(ecuted)f(just)h(lik)o(e)g(the)h
(corresponding)e(do,)j(e)o(xcept)e(that)g(after)h(the)g(initial)e
(bindings)g(are)-118 4060 y(established,)22 b(b)n(ut)g(before)i(the)e
(e)o(xit)g(test)h(is)f(\002rst)h(e)n(v)n(aluated,)f(the)h(prologue)f
(forms,)g(consisting)g(of)g(the)-118 4181 y Ff(<)p Fr(\002rst)p
Ff(>)i Fr(forms,)g(are)h(e)n(v)n(aluated)e(in)h(a)h(left)f(to)g(right)g
(order)-5 b(.)30 b(Note)25 b(that)f(all)g(of)g(the)g
Ff(<)p Fr(\002rst)p Ff(>)h Fr(forms)f(are)-118 4301 y(e)n(v)n(aluated)g
(e)o(xactly)g(once,)h(assuming)e(that)h(none)h(of)g(the)f
Ff(<)p Fr(\002rst)p Ff(>)h Fr(forms)f(causes)h(an)g(error)-5
b(.)-118 4643 y Fq(\(do-loop*)25 b(A:list)f(B:list)h(C:list)f([S:f)n
(orm]\):)32 b(any)1483 b Fi(macr)l(o)-93 4763 y Fr(Do-loop*)25
b(does)g(the)g(v)n(ariable)g(bindings)e(and)j(updates)e(sequentially)g
(instead)h(of)g(in)-118 4883 y(parallel.)-118 5269 y
Ft(7.4)143 b(Non-Local)33 b(Exits)-118 5497 y Fr(The)24
b(functions)f(catch)h(and)g(thro)n(w)f(are)h(v)o(ery)g(useful)f(for)h
(discontinuing)e(a)i(computation.)29 b(As)23 b(return)-118
5618 y(pro)o(vides)i(for)h(local)g(e)o(xit,)g(this)f(pair)h(of)g
(functions)f(pro)o(vide)h(for)g(non-local)g(e)o(xit.)33
b(The)o(y)26 b(should)f(not,)-118 5738 y(ho)n(we)n(v)o(er)l(,)32
b(be)g(used)f(indiscriminately)-6 b(.)48 b(The)32 b(le)o(xical)f
(restrictions)g(on)g(their)g(more)h(local)f(counter)n(-)-118
5858 y(parts)j(ensure)g(that)g(the)f(\003o)n(w)h(of)g(control)g(can)g
(be)g(ascertained)h(by)f(looking)e(at)i(a)h(single)e(piece)h(of)p
eop
%%Page: 90 98
90 97 bop 118 -18 a Fr(90)118 289 y(code.)45 b(W)l(ith)29
b(catch)g(and)h(thro)n(w)-6 b(,)29 b(control)g(may)g(be)g(passed)g(to)g
(and)h(from)f(totally)f(unrelated)h(pieces)118 409 y(of)c(code.)118
752 y Fq(\(catch)h(T)-9 b(A)k(G:id)25 b([FORM:f)n(orm]\):)30
b(any)1188 b Fi(Open-Compiled)25 b(fe)n(xpr)145 872 y
Fr(Catch)j(e)n(v)n(aluates)d(T)-9 b(A)l(G)27 b(to)g(establish)e(a)j
(name)f(for)g(this)f(catcher)l(,)i(called)f(the)g(catch-)118
992 y(tag,)32 b(and)f(then)f(e)n(v)n(aluates)g(the)g(FORM')-5
b(s)31 b(in)f(a)h(protected)g(en)l(vironment.)47 b(If)31
b(during)118 1113 y(this)22 b(e)n(v)n(aluation)e(a)j(thro)n(w)f(occurs)
h(with)f(a)g(tag)h(that)f(is)g(the)h(same)f(as)h(the)f(catch-tag)h
(\(as)118 1233 y(de\002ned)g(by)g(the)f(function)g(eq\),)i(catch)f
(immediately)e(returns)h(the)h(result)f(of)h(the)f(form)118
1354 y(gi)n(v)o(en)29 b(as)i(the)f(second)g(ar)n(gument)g(to)g(the)h
(thro)n(w)-6 b(.)46 b(If)31 b(no)f(thro)n(w)g(occurs,)i(the)e(results)
118 1474 y(returned)d(by)g(the)g(last)g(FORM)g(are)h(returned)f(as)g
(the)g(result)g(of)g(the)g(catch.)38 b(A)27 b(catch-)118
1594 y(tag)c(of)h(nil)e(is)h(considered)g(special,)h(it)f(serv)o(es)g
(to)f(match)h(an)o(y)g(catch-tag)h(speci\002ed)f(by)118
1715 y(thro)n(w)-6 b(.)118 2067 y Fq(\(thr)n(o)o(w)26
b(T)-9 b(A)k(G:id)25 b(V)-13 b(ALUE:any\):)31 b(None)26
b(Retur)o(ned)1447 b Fi(e)n(xpr)143 2187 y Fr(Thro)n(w)23
b(e)n(v)n(aluates)h(T)-9 b(A)l(G)24 b(to)g(produce)g(a)h(catch-tag)g
(and)f(e)n(v)n(aluates)f(V)-13 b(ALUE)24 b(to)g(pro-)118
2308 y(duce)30 b(a)g(result)f(v)n(alue.)44 b(At)29 b(this)g(point,)g
(an)h(error)g(is)f(signalled)g(if)g(there)h(is)f(no)g(acti)n(v)o(e)118
2428 y(catch)34 b(with)f(the)g(same)g(catch-tag)h(\(as)g(determined)f
(by)g(the)g(function)g(eq\).)57 b(Other)n(-)118 2548
y(wise,)42 b(control)d(is)f(passed)h(to)f(the)h(most)f(recent)i(such)e
(catch,)43 b(and)c(the)g(results)f(of)118 2669 y(e)n(v)n(aluating)23
b(V)-13 b(ALUE)24 b(become)h(the)f(results)g(of)h(the)g(catch.)118
2822 y(In)33 b(the)g(process)g(of)g(transferring)f(control)h(to)f(the)h
(catch,)i(all)e(interv)o(ening)e(constructs)h(are)i(e)o(xited.)118
2943 y(Exiting)23 b(a)j(construct)e(that)g(binds)g(v)n(ariables)g(has)h
(the)f(ef)n(fect)h(of)g(unbinding)e(those)i(v)n(ariables.)118
3067 y(thro)n(wsignal*)e([Initially:)31 b(nil])25 b(global)f(This)h
(\003uid)g(v)n(ariable)g(is)g(set)g(to)g(t)g(if)g(the)h(most)e(recent)i
(in)l(v)n(oca-)118 3187 y(tion)k(of)g(Catch)h(w)o(as)g(thro)n(wn)e(to.)
48 b(thro)n(wsignal*)28 b(is)i(set)g(to)g(nil)g(upon)g(a)h(normal)f(e)o
(xit)f(from)h(a)h(catch)118 3307 y(and)25 b(to)f(t)h(upon)f(a)h(normal)
f(e)o(xit)g(from)h(a)g(thro)n(w)-6 b(.)118 3431 y(thro)n(wtag*)19
b([Initially:)27 b(nil])20 b(global)g(This)f(\003uid)i(v)n(ariable)f
(is)g(set)g(to)g(the)g(catch-tag)h(of)f(the)h(most)e(recent)118
3552 y(thro)n(w)118 3676 y(The)h(catch,)h(thro)n(w)d(pair)i(supply)e(a)
i(construct)f(which)h(allo)n(ws)e(for)i(some)f(control)g(o)o(v)o(er)g
(the)g(e)n(v)n(aluation)118 3796 y(of)26 b(an)g(e)o(xpression.)32
b(Exceptions)25 b(can)h(be)g(detected)g(during)f(the)h(e)n(v)n
(aluation)e(of)h(the)h(e)o(xpression)f(and)118 3916 y(appropriate)i
(action)g(can)g(be)h(tak)o(en.)37 b(The)28 b(functions)e(which)h(follo)
n(w)e(de\002ne)j(a)g(simple)e(parser)-5 b(.)37 b(The)118
4037 y(parse)27 b(is)f(done)g(inside)f(a)i(catch.)35
b(If)27 b(there)f(are)h(no)f(errors)h(then)f(the)g(result)g(of)g(the)g
(parse)h(is)f(returned.)118 4157 y(When)i(an)h(error)g(arises)f(the)g
(computation)f(is)h(aborted)g(with)g(a)g(call)h(on)f(thro)n(w)-6
b(.)40 b(An)28 b(error)h(message)118 4278 y(is)24 b(printed)h(prior)f
(to)h(aborting)f(the)g(parse.)118 4534 y Fh(\(de)59 b(parse)g
(\(*buffer*\))238 4655 y(\(catch)f('parse-error)f(\(list)i('s)g
(\(parse-np\))f(\(parse-vp\)\)\)\))118 4895 y(\(de)h(parse-np)f(\(\))
238 5016 y(\(if)h(\(memq)f(\(car)h(*buffer*\))f('\(a)h(an)g(the\)\))357
5136 y(`\(np)g(\(det)g(,\(pop)g(*buffer*\)\))e(\(n)i(,\(pop)g
(*buffer*\)\)\))357 5256 y(\(parse-error)e("Bad)i(word)g(in)g(noun)g
(phrase:)f(\045w\045n"\)\)\))118 5497 y(\(de)h(parse-vp)f(\(\))238
5618 y(\(if)h(\(memq)f(\(car)h(*buffer*\))f('\(sings)g(talks\)\))357
5738 y(`\(vp)h(\(v)g(,\(pop)g(*buffer*\)\)\))357 5858
y(\(parse-error)e("Not)i(a)h(verb:)e(\045w\045n"\)\)\))p
eop
%%Page: 91 99
91 98 bop -118 -18 a Fg(7.4.)55 b(NON-LOCAL)25 b(EXITS)2351
b Fr(91)-118 529 y Fh(\(de)59 b(parse-error)e(\(format-string\))1
650 y(\(throw)i('parse-error)e(\(printf)h(format-string)f(\(car)i
(*buffer*\)\)\)\))-118 846 y(1)g(lisp>)g(\(parse)g('\(the)f(bird)h
(sings\)\))-118 966 y(\(S)g(\(NP)g(\(DET)g(THE\))g(\(N)g(BIRD\)\))g
(\(VP)g(\(V)g(SINGS\)\)\))-118 1087 y(2)g(lisp>)g(\(parse)g('\(the)f
(bird)h(eats\)\))-118 1207 y(Not)g(a)h(verb:)e(eats)-118
1327 y(nil)-118 1448 y(3)h(lisp>)g(\(parse)g('\(it)f(is)i(small\)\))
-118 1568 y(Bad)f(word)g(in)g(noun)g(phrase:)f(it)-118
1689 y(nil)-118 1885 y Fr(The)28 b(follo)n(wing)d(macros)j(are)g(pro)o
(vided)f(to)g(aid)h(in)f(the)h(use)f(of)h(catch)g(and)g(thro)n(w)f
(with)g(a)h(nil)f(catch-)-118 2005 y(tag,)d(by)h(e)o(xamining)e(thro)n
(wsignal*)g(and)h(thro)n(wtag*:)-118 2344 y Fq(\(catch-all)h
(HANDLER:function)i([FORM:f)n(orm]\):)k(any)1095 b Fi(macr)l(o)-80
2464 y Fr(Has)38 b(the)g(same)g(semantics)f(as)h(catch)h(e)o(xcept)e
(that)h(all)g(thro)n(ws,)i(independent)d(of)-118 2585
y(catch-tag,)28 b(will)e(be)h(caught.)37 b(The)27 b(HANDLER)g(must)e
(be)i(a)h(function)e(of)h(tw)o(o)f(ar)n(gu-)-118 2705
y(ments.)j(If)22 b(a)h(thro)n(w)e(occurs,)h(the)g(HANDLER)g(will)g(be)g
(called)g(on)g(the)g(catch-tag)g(and)-118 2826 y(the)k(v)n(alue)h
(passed)f(by)g(the)h(thro)n(w)-6 b(.)35 b(The)27 b(HANDLER)f(may)h
(itself)f(issue)g(a)h(thro)n(w)-6 b(,)25 b(in)-118 2946
y(which)f(case)i(the)e(catch-all)h(acts)g(as)g(a)g(\002lter)-5
b(.)-118 3294 y Fq(\(unwind-all)26 b(HANDLER:function)g([FORM:f)n
(orm]\):)31 b(any)1001 b Fi(macr)l(o)-90 3415 y Fr(This)27
b(function)g(is)g(v)o(ery)g(similar)g(to)g(catch-all.)40
b(Ho)n(we)n(v)o(er)l(,)27 b(if)h(no)f(thro)n(w)g(occurs)h(the)-118
3535 y(HANDLER)d(will)f(be)h(called)f(on)h(nil)f(and)h(the)f(v)n(alue)h
(returned.)-118 3884 y Fq(\(unwind-pr)n(otect)j(FORM:f)n(orm)c
([CLEANUPFORM:f)n(orm]\):)31 b(any)663 b Fi(macr)l(o)-96
4004 y Fr(The)22 b(FORM)h(is)e(e)n(v)n(aluated)g(and,)i(re)o(gardless)e
(of)h(ho)n(w)f(it)g(is)h(e)o(xited)f(\(a)i(normal)e(return,)-118
4125 y(thro)n(w)-6 b(,)20 b(or)g(error\),)i(the)f(CLEANUPFORMs)g(will)e
(be)i(e)n(v)n(aluated.)28 b(One)21 b(common)e(use)-118
4245 y(of)25 b(unwind-protect)e(is)i(to)f(ensure)h(that)f(a)i(\002le)f
(will)f(be)h(closed)f(after)i(processing.)121 4400 y
Fh(\(setq)59 b(channel)f(\(open)h(file)f(....\)\))121
4520 y(\(unwind-protect)e(\(process-file\))838 4640 y(\(close)j
(channel\)\))-118 4820 y Fr(This)23 b(primiti)n(v)o(e)f(can)i(be)h
(used)f(to)f(implement)g(arbitrary)h(kinds)f(of)h(state-binding)f
(without)g(fear)i(that)-118 4940 y(an)g(unusual)f(return)g(\(an)i
(error)f(or)g(thro)n(w\),)f(will)g(violate)g(the)h(binding.)121
5136 y Fh(\(defmacro)58 b(bind)h(\(\(name)f(value\))g(.)i(body\))241
5256 y(\(let)e(\(\(old-value)g(\(gensym\)\)\))360 5377
y(`\(let)h(\(\(,old-value)e(,name\)\))539 5497 y(\(unwind-protect)360
5618 y(\(progn)i(\(setq)f(,name)h(,value\))779 5738 y(,@body\))360
5858 y(\(setq)g(,name)f(,old-value\)\)\)\)\))p eop
%%Page: 92 100
92 99 bop 118 -18 a Fr(92)357 289 y Fh(1)60 b(lisp>)e(\(setq)h(number)g
(5\))357 409 y(5)357 529 y(2)h(lisp>)e(\(bind)h(\(number)f(2\))i
(\(print)e(number\))g(\(/)i(number)e(0\)\))357 650 y(2)357
770 y(*****)h(Attempt)f(to)h(divide)g(by)g(zero)g(in)g(Quotient)357
891 y(3)h(lisp>)e(number)357 1011 y(5)118 1239 y Fr(Note:)35
b(Certain)28 b(special)f(tags)g(are)h(used)f(in)g(the)g(PSL)h(system,)e
(and)i(should)e(not)g(be)i(interfered)f(with)118 1360
y(casually:)168 1573 y($error$)515 b(Used)25 b(by)f(error)i(and)e
(errorset)h(which)g(are)976 1693 y(implemented)e(in)h(terms)h(of)g
(catch)g(and)g(thro)n(w)-6 b(,)976 1813 y(\(see)25 b(Chapter)h(16\).)
168 1934 y($unwind-protect$)98 b(A)25 b(special)f(catch-tag)h(placed)g
(to)g(ensure)976 2054 y(that)f(all)h(thro)n(ws)e(pause)i(at)g(the)976
2175 y(unwind-protect)f(\224mark\224.)168 2295 y($prog$)525
b(Used)25 b(to)f(communicate)g(between)g(interpreted)h(progs,)f(gos.)p
eop
%%Page: 93 101
93 100 bop -118 953 a Fn(Function)51 b(De\002nition)h(and)g(Binding)
-118 1468 y Ft(8.1)143 b(Function)34 b(De\002nition)f(in)j(PSL)-118
1691 y Fr(Functions)21 b(in)g(PSL)i(are)f(global)f(entities.)28
b(T)-8 b(o)22 b(a)n(v)n(oid)f(function-v)n(ariable)g(naming)f(clashes,)
i(the)g(Stan-)-118 1812 y(dard)h(LISP)i(Report)e(required)g(that)g(no)g
(v)n(ariable)g(ha)n(v)o(e)g(the)g(same)g(name)h(as)f(a)h(function.)29
b(There)24 b(is)f(no)-118 1932 y(con\003ict)i(in)f(PSL,)i(as)e
(separate)i(function)e(cells)g(and)h(v)n(alue)f(cells)h(are)g(used.)
-118 2053 y(The)i(\002rst)g(major)g(section)g(in)f(this)h(chapter)g
(describes)g(ho)n(w)f(to)h(de\002ne)h(ne)n(w)f(functions;)g(the)g
(second)-118 2173 y(describes)34 b(the)h(binding)e(of)i(v)n(ariables)e
(in)i(PSL.)g(The)f(\002nal)h(section)f(presents)g(binding)f(functions)
-118 2293 y(useful)24 b(in)h(b)n(uilding)e(ne)n(w)h(interpreter)h
(functions.)-118 2589 y Fk(8.1.1)119 b(Function)31 b(T)-9
b(ypes)-118 2777 y Fr(Ev)n(al-type)38 b(functions)h(are)h(those)f
(called)g(with)g(e)n(v)n(aluated)g(ar)n(guments.)74 b(NoEv)n(al)38
b(functions)h(are)-118 2897 y(called)23 b(with)f(une)n(v)n(aluated)g
(ar)n(guments.)29 b(Spread-type)23 b(functions)f(ha)n(v)o(e)h(their)g
(ar)n(guments)f(passed)h(in)-118 3018 y(a)32 b(one-to-one)f
(correspondence)g(with)g(their)g(formal)g(parameters.)50
b(NoSpread)32 b(functions)f(recei)n(v)o(e)-118 3138 y(their)24
b(ar)n(guments)h(as)f(a)i(single)e(list.)-118 3258 y(There)h(are)h
(four)f(function)f(types)g(implemented)f(in)h(PSL:)-68
3471 y(e)o(xpr)172 b(An)35 b(Ev)n(al,)j(Spread)e(function,)h(with)d(a)i
(maximum)d(number)i(of)h(ar)n(guments.)61 b(The)280 3592
y(maximum)20 b(depends)i(upon)f(the)h(implementation.)27
b(In)22 b(referring)g(to)g(the)f(formal)h(pa-)280 3712
y(rameters)f(we)f(mean)h(their)f(v)n(alues.)28 b(Each)21
b(function)e(of)h(this)g(type)g(should)f(al)o(w)o(ays)h(be)280
3833 y(called)h(with)g(the)g(e)o(xpected)g(number)f(of)i(parameters,)f
(as)h(indicated)e(in)h(the)g(function)280 3953 y(de\002nition.)-68
4073 y(fe)o(xpr)139 b(A)31 b(NoEv)n(al,)h(NoSpread)g(function.)48
b(There)32 b(is)f(no)g(limit)e(on)i(the)g(number)f(of)i(ar)n(gu-)280
4194 y(ments.)39 b(In)28 b(referring)g(to)f(the)h(formal)f(parameters)h
(we)g(mean)g(the)f(une)n(v)n(aluated)f(ar)n(-)280 4314
y(guments,)c(collected)h(as)h(a)f(single)f(list,)h(and)g(passed)g(as)g
(a)h(single)e(formal)h(parameter)280 4435 y(to)i(the)f(function)g(body)
-6 b(.)-68 4555 y(ne)o(xpr)122 b(An)43 b(Ev)n(al,)k(NoSpread)c
(function.)84 b(Each)44 b(call)f(on)f(this)g(kind)g(of)h(function)f
(may)280 4675 y(present)36 b(a)g(dif)n(ferent)f(number)h(of)f(ar)n
(guments,)j(which)e(are)g(e)n(v)n(aluated,)h(collected)280
4796 y(into)24 b(a)g(list,)f(and)i(passed)e(in)h(to)g(the)g(function)g
(body)f(as)i(a)f(single)f(formal)h(parameter)-5 b(.)-68
4916 y(macro)99 b(The)28 b(macro)g(is)f(a)h(function)f(which)g(creates)
i(a)f(ne)n(w)f(S-e)o(xpression)g(for)h(subsequent)280
5036 y(e)n(v)n(aluation)i(or)i(compilation.)50 b(There)33
b(is)e(no)h(limit)e(to)i(the)f(number)h(of)g(ar)n(guments)280
5157 y(a)g(macro)g(may)f(ha)n(v)o(e.)50 b(The)32 b(descriptions)e(of)h
(the)g(e)n(v)n(al)g(and)g(e)o(xpand)g(functions)g(in)280
5277 y(Chapter)26 b(11)e(pro)o(vide)g(precise)h(details.)-118
5550 y Fk(8.1.2)119 b(Notes)29 b(on)h(Code)h(P)n(ointers)-118
5738 y Fr(A)k(code-pointer)g(may)f(be)i(displayed)e(by)g(the)h(print)g
(functions)e(or)j(e)o(xpanded)e(by)h(e)o(xplode.)60 b(The)-118
5858 y(v)n(alue)28 b(appears)h(in)g(the)g(con)l(v)o(ention)e(of)i(the)g
(implementation)d(e.g.)43 b(\(#)p Ff(<)p Fr(Code:A)29
b(N)p Ff(>)p Fr(,)g(where)h(A)f(is)1604 6066 y(93)p eop
%%Page: 94 102
94 101 bop 118 -18 a Fr(94)118 289 y(the)32 b(number)f(of)g(ar)n
(guments)g(of)h(the)f(function,)h(and)g(N)f(is)h(the)f(function')-5
b(s)30 b(entry)i(point\).)50 b(A)31 b(code-)118 409 y(pointer)24
b(may)g(not)g(be)g(created)h(by)g(compress.)k(\(See)d(Chapter)f(12)f
(for)h(descriptions)e(of)h(e)o(xplode)g(and)118 529 y(compress.\))58
b(The)35 b(code-pointer)e(associated)h(with)f(a)i(compiled)e(function)g
(may)h(be)g(retrie)n(v)o(ed)g(by)118 650 y(getd)27 b(and)f(is)h(v)n
(alid)f(as)g(long)h(as)f(PSL)i(is)f(in)f(e)o(x)o(ecution.)35
b(Normally)26 b(a)h(code-pointer)g(is)f(stored)h(using)118
770 y(putd.)50 b(It)31 b(may)g(be)h(check)o(ed)g(for)g(equi)n(v)n
(alence)e(by)h(eq.)51 b(The)31 b(v)n(alue)g(may)g(be)h(check)o(ed)g
(for)f(being)g(a)118 891 y(code-pointer)25 b(by)f(the)h(codep)g
(function.)118 1430 y Fk(8.1.3)119 b(Functions)31 b(Useful)f(in)g
(Function)i(De\002nition)118 1698 y Fr(In)38 b(PSL,)g(ids)e(ha)n(v)o(e)
h(a)h(function)e(cell)i(that)f(usually)f(contains)g(an)i(e)o(x)o
(ecutable)e(instruction)g(which)118 1818 y(either)24
b(JUMPs)f(directly)g(to)g(the)h(entry)g(point)e(of)i(a)g(compiled)f
(function)f(or)i(e)o(x)o(ecutes)f(a)h(CALL)g(to)f(an)118
1938 y(auxiliary)j(routine)h(that)f(handles)h(interpreted)g(functions,)
f(unde\002ned)h(functions,)g(or)g(other)g(special)118
2059 y(services)36 b(\(such)g(as)g(auto-loading)f(functions,)j(etc\).)
65 b(The)36 b(user)g(can)h(pass)e(anon)o(ymous)f(function)118
2179 y(objects)28 b(around)g(either)h(as)f(a)h(code-pointer)l(,)g
(which)f(is)g(a)h(tagged)f(object)h(referring)g(to)f(a)h(compiled)118
2300 y(code)c(block,)f(or)h(a)g(lambda)g(e)o(xpression,)e(representing)
h(an)h(interpreted)g(function.)118 2677 y Fq(\(putd)i(Fname:id)e
(TYPE:ftype)i(BOD)l(Y)-9 b(:)118 2797 y(lambda,code-pointer\):id)2338
b Fi(e)n(xpr)138 2918 y Fr(Creates)21 b(a)f(function)f(with)g(name)h
(Fname)g(and)g(type)g(TYPE,)g(with)f(body)g(as)h(the)g(func-)118
3038 y(tion)i(de\002nition.)29 b(If)24 b(successful,)e(putd)h(returns)f
(the)h(name)g(of)g(the)g(de\002ned)g(function.)118 3226
y(If)k(the)f(body)f(is)h(a)g(lambda)g(there)g(are)h(tw)o(o)e(possible)g
(outcomes.)34 b(When)26 b(the)g(switch)f(comp)g(is)h(set)g(to)118
3347 y(t)32 b(the)f(body)g(will)g(be)h(compiled)e(and)i(a)g(special)f
(instruction)f(to)h(jump)g(to)g(the)h(start)f(of)h(the)f(code)h(is)118
3467 y(placed)26 b(in)f(the)h(function)f(cell.)34 b(If)26
b(the)g(switch)f(*comp)g(is)g(set)h(to)f(nil)g(then)h(the)f(body)h(is)f
(sa)n(v)o(ed)g(on)h(the)118 3588 y(property)f(list)e(under)i(the)g
(indicator)f(*lambdalink)f(and)i(a)g(call)f(to)h(an)g(interpreter)g
(function)357 4020 y Fh(\(lambdalink\))57 b(is)j(placed)e(in)h(the)g
(function)f(cell.)118 4415 y Fr(If)29 b(the)f(body)g(is)f(a)i
(code-pointer)f(then)g(a)g(special)g(instruction)f(to)h(jump)f(to)h
(the)g(start)g(of)g(the)h(code)f(is)118 4535 y(placed)d(in)f(the)h
(function)f(cell.)118 4694 y(The)h(T)-8 b(ype)25 b(is)f(recorded)h(on)g
(the)g(property)f(list)g(of)h(Fname)g(if)f(it)h(is)f(not)g(an)h(e)o
(xpr)-5 b(.)118 4853 y(After)28 b(using)e(putd)g(on)h(Fname,)h(getd)e
(will)h(return)g(a)g(pair)g(which)g(speci\002es)g(the)g(type)g(and)g
(the)g(body)118 4973 y(of)e(the)g(de\002nition.)118 5132
y(The)g(follo)n(wing)e(switches)h(are)h(useful)g(when)f(de\002ning)h
(functions.)118 5509 y Fq(*r)n(edefmsg)h Fr(=)f([Initially:)k(t])2275
b Fi(switc)o(h)318 5629 y Fr(If)25 b(*redefmsg)g(is)f(not)g(nil,)g(the)
h(message)318 5750 y Fh(***)59 b(Function)f(`FOO')h(has)g(been)g
(redefined)318 5870 y Fr(is)24 b(printed)g(whene)n(v)o(er)h(a)g
(function)f(is)g(rede\002ned.)p eop
%%Page: 95 103
95 102 bop -118 -18 a Fg(8.1.)55 b(FUNCTION)26 b(DEFINITION)f(IN)g(PSL)
1820 b Fr(95)-118 357 y Fq(*usermode)26 b Fr(=)f(\(Initially:)k(t\))
2251 b Fi(switc)o(h)82 478 y Fr(Controls)33 b(action)g(on)h
(rede\002nition)f(of)h(a)g(function.)57 b(All)33 b(functions)g
(de\002ned)h(when)82 598 y(*usermode)29 b(is)g(t)h(are)h(\003agged)f
(USER.)g(Functions)f(which)h(are)h(\003agged)f(USER)g(can)82
718 y(be)23 b(rede\002ned)h(freely)-6 b(.)30 b(If)23
b(an)g(attempt)f(is)h(made)g(to)g(rede\002ne)h(a)f(function)f(which)h
(is)f(not)82 839 y(\003agged)j(USER,)g(the)g(query)82
959 y Fh(Do)59 b(you)g(really)g(want)f(to)i(redefine)e(the)h(system)f
(function)82 1080 y(FOO?)82 1200 y Fr(is)38 b(made,)k(requiring)37
b(a)i(Y)-13 b(,)39 b(N,)f(YES,)h(NO,)g(or)f(B)h(response.)72
b(B)39 b(starts)f(the)g(break)82 1320 y(loop,)f(so)e(that)g(one)g(can)h
(change)g(the)f(setting)f(of)i(*usermode.)61 b(After)36
b(e)o(xiting)e(the)82 1441 y(break)h(loop,)h(one)f(must)e(answer)i(Y)
-13 b(,)35 b(Y)-10 b(es,)37 b(N,)d(or)h(No)f(\(See)i(yesp)f(in)f
(Chapter)h(12\).)82 1561 y(If)30 b(*usermode)f(is)g(nil,)i(all)e
(functions)g(can)h(be)g(rede\002ned)h(freely)-6 b(,)31
b(and)e(all)h(functions)82 1682 y(de\002ned)f(ha)n(v)o(e)f(the)g(USER)h
(\003ag)g(remo)o(v)o(ed.)41 b(This)27 b(pro)o(vides)h(some)f
(protection)h(from)82 1802 y(rede\002ning)d(system)e(functions.)-118
2050 y Fq(*comp)i Fr(=)g([Initially:)k(nil])2356 b Fi(switc)o(h)82
2171 y Fr(The)39 b(v)n(alue)g(of)g(*comp)g(controls)g(whether)g(or)h
(not)e(putd)h(compiles)f(the)i(function)82 2291 y(before)32
b(de\002ning)g(it.)52 b(If)32 b(*comp)f(is)h(nil)f(the)h(function)f(is)
h(de\002ned)g(as)g(a)h(lambda)e(e)o(x-)82 2412 y(pression.)50
b(If)32 b(*comp)f(is)g(non-nil,)h(the)f(function)g(is)g(\002rst)h
(compiled.)49 b(Compilation)82 2532 y(produces)28 b(certain)h(changes)g
(in)f(the)h(semantics)f(of)h(functions,)g(see)g(Chapter)g(19)g(for)82
2652 y(information.)-118 2880 y Fq(\(getd)d(U:any\):)31
b(nil,)25 b(pair)2432 b Fi(e)n(xpr)-92 3001 y Fr(If)27
b(U)g(is)f(not)g(the)g(name)g(of)h(a)f(de\002ned)h(function,)f(nil)g
(is)g(returned.)35 b(otherwise)26 b(\(e)o(xpr)l(,)-118
3121 y(fe)o(xpr)l(,)e(macro,)h(ne)o(xpr)f(.)31 b(code-pointer)l(,)25
b(lambda\))f(is)g(returned.)-118 3490 y Fq(\(copyd)i(NEW)-5
b(:id)24 b(OLD:id\):)32 b(NEW)-5 b(:id)1903 b Fi(e)n(xpr)-87
3611 y Fr(Normally)31 b(the)g(function)g(body)g(and)g(type)g(of)h(NEW)f
(become)g(the)h(same)f(as)h(those)-118 3731 y(of)f(OLD.)f(Ho)n(we)n(v)o
(er)l(,)h(if)f(the)h(switch)e(*comp)h(is)g(set)h(to)f(t)g(and)h(the)f
(body)g(of)h(OLD)f(is)-118 3851 y(not)d(compiled)g(then)h(NEW)g(will)f
(be)i(set)f(to)f(the)h(compiled)f(v)o(ersion)g(of)h(the)g(body)g(of)
-118 3972 y(OLD.)c(If)i(no)e(de\002nition)g(e)o(xists)f(for)j(OLD)e(an)
h(error:)121 4117 y Fh(*****)59 b(OLD)g(has)g(no)g(definition)f(in)h
(COPYD)-118 4307 y Fr(is)24 b(gi)n(v)o(en.)29 b(NEW)c(is)g(returned.)
-118 4646 y Fq(\(r)n(emd)h(U:id\):)31 b(nil,)25 b(pair)2462
b Fi(e)n(xpr)-91 4767 y Fr(Remo)o(v)o(es)26 b(the)g(function)g(named)h
(U)f(from)h(the)g(set)f(of)h(de\002ned)g(functions.)36
b(Returns)-118 4887 y(the)21 b(\(ftype)g(.)30 b(function\))20
b(pair)i(or)f(nil,)g(as)h(does)f(getd.)29 b(If)21 b(the)h(function)e
(type)h(is)g(not)f(e)o(xpr)-118 5007 y(then)27 b(it)f(w)o(as)i
(recorded)f(on)g(the)g(property)g(list)f(when)h(the)g(function)g(w)o
(as)g(de\002ned.)38 b(In)-118 5128 y(such)f(cases)i(this)e(function)g
(remo)o(v)o(es)f(the)i(type)g(information)e(from)i(the)f(property)-118
5248 y(list.)-118 5550 y Fk(8.1.4)119 b(Function)31 b(De\002nition)h
(in)e(LISP)g(Syntax)-118 5738 y Fr(The)24 b(functions)g(de,)g(df,)h
(dn,)f(dm,)g(and)h(ds)f(are)h(used)f(in)g(PSL)i(to)e(de\002ne)h
(functions)e(and)i(macros.)30 b(The)-118 5858 y(functions)24
b(are)h(compiled)f(if)h(the)f(compiler)g(is)h(loaded)f(and)h(the)g
(switch)f(comp)g(is)g(set)h(to)f(t.)p eop
%%Page: 96 104
96 103 bop 118 -18 a Fr(96)118 357 y Fq(\(de)26 b(Fname:id)f(P)-7
b(ARAMS:id-list)25 b([FN:f)n(orm]\):)31 b(id)1360 b Fi(macr)l(o)146
478 y Fr(De\002nes)29 b(the)f(function)f(named)g(Fname,)i(of)f(type)g
(e)o(xpr)-5 b(.)40 b(The)28 b(forms)f(FN)i(are)f(made)118
598 y(into)d(a)h(lambda)f(e)o(xpression)g(with)g(the)h(formal)f
(parameter)h(list)f(P)-9 b(ARAMS,)26 b(and)g(this)118
718 y(is)e(used)h(as)g(the)g(body)f(of)h(the)f(function.)118
839 y(Pre)n(vious)i(de\002nitions)f(of)h(the)h(function)e(are)i(lost.)
35 b(The)26 b(name)g(of)h(the)f(de\002ned)h(func-)118
959 y(tion,)d(Fname,)h(is)f(returned.)118 1080 y(The)37
b(COMMON)e(module)h(de\002nes)h(the)f(macro)g(DeFun)h(which)f(is)g
(equi)n(v)n(alent)f(to)118 1200 y(de.)118 1550 y Fq(\(df)26
b(Fname:id)f(P)-7 b(ARAM:id-list)24 b([FN:f)n(orm]\):)32
b(id)1426 b Fi(macr)l(o)144 1671 y Fr(De\002nes)26 b(the)g(function)f
(named)h(Fname,)g(of)g(type)f(fe)o(xpr)-5 b(.)33 b(The)26
b(forms)f(FN)i(are)f(made)118 1791 y(into)k(a)h(lambda)f(e)o(xpression)
g(with)g(the)h(formal)f(parameter)i(list)d(P)-9 b(ARAM,)31
b(and)g(this)118 1912 y(is)c(used)h(as)g(the)f(body)g(of)h(the)g
(function.)39 b(The)27 b(parameter)i(list)d(should)h(only)g(contain)118
2032 y(one)e(parameter)-5 b(.)118 2152 y(Pre)n(vious)26
b(de\002nitions)f(of)h(the)h(function)e(are)i(lost.)35
b(The)26 b(name)g(of)h(the)f(de\002ned)h(func-)118 2273
y(tion,)d(Fname,)h(is)f(returned.)118 2636 y Fq(\(dn)i(Fname:id)f(P)-7
b(ARAM:id-list)24 b([FN:f)n(orm]\):)32 b(id)1404 b Fi(macr)l(o)143
2756 y Fr(De\002nes)25 b(the)g(function)f(named)g(Fname,)h(of)g(type)f
(ne)o(xpr)-5 b(.)30 b(The)24 b(forms)h(FN)g(are)g(made)118
2877 y(into)30 b(a)h(lambda)f(e)o(xpression)g(with)g(the)h(formal)f
(parameter)i(list)d(P)-9 b(ARAM,)31 b(and)g(this)118
2997 y(is)c(used)h(as)g(the)f(body)g(of)h(the)g(function.)39
b(The)27 b(parameter)i(list)d(should)h(only)g(contain)118
3117 y(one)e(parameter)-5 b(.)118 3238 y(Pre)n(vious)26
b(de\002nitions)f(of)h(the)h(function)e(are)i(lost.)35
b(The)26 b(name)g(of)h(the)f(de\002ned)h(func-)118 3358
y(tion,)d(Fname,)h(is)f(returned.)118 3721 y Fq(\(dm)i(Mname:id)f(P)-7
b(ARAM:id-list)24 b([FN:f)n(orm]\):)31 b(id)1344 b Fi(macr)l(o)141
3842 y Fr(De\002nes)22 b(the)g(function)g(named)g(Fname,)h(of)f(type)g
(macro.)30 b(The)23 b(forms)f(FN)g(are)h(made)118 3962
y(into)30 b(a)h(lambda)f(e)o(xpression)g(with)g(the)h(formal)f
(parameter)i(list)d(P)-9 b(ARAM,)31 b(and)g(this)118
4083 y(is)c(used)h(as)g(the)f(body)g(of)h(the)g(function.)39
b(The)27 b(parameter)i(list)d(should)h(only)g(contain)118
4203 y(one)e(parameter)-5 b(.)118 4323 y(Pre)n(vious)26
b(de\002nitions)f(of)h(the)h(function)e(are)i(lost.)35
b(The)26 b(name)g(of)h(the)f(de\002ned)h(func-)118 4444
y(tion,)d(Fname,)h(is)f(returned.)118 4588 y(The)h(function)f(list)g
(can)h(be)g(de\002ned)g(as)g(follo)n(ws)357 4803 y Fh(\(dm)59
b(list)g(\(a\))477 4923 y(\(if)g(\(<)g(\(length)f(a\))i(2\))f(\(\))596
5044 y(\(cons)g('cons)955 5164 y(\(cons)g(\(second)f(a\))1314
5284 y(\(ncons)g(\(cons)h('list)f(\(rest)h(\(rest)g(a\)\)\)\)\)\)\)\))
118 5497 y Fr(No)n(w)27 b(consider)g(what)g(occurs)g(during)g(the)g(e)n
(v)n(aluation)e(of)j(\(list)e(1)h(2\).)38 b(The)28 b(list)e(\(list)g(1)
i(2\))f(is)g(passed)118 5618 y(to)g(the)g(list)f(macro)h(which)g
(returns)f(\(cons)h(1)g(\(list)g(2\)\))g(for)g(further)h(e)n(v)n
(aluation.)35 b(The)27 b(e)n(v)n(aluator)f(will)118 5738
y(call)33 b(the)g(list)f(macro)h(again)g(for)g(\(list)f(2\).)56
b(This)32 b(second)h(call)g(on)f(the)h(macro)g(will)g(return)g(\(cons)g
(2)118 5858 y(\(list\)\).)f(Finally)-6 b(,)24 b(\(list\))h(is)g
(transformed)f(into)h(nil)g(by)g(a)g(third)g(call)g(on)g(the)g(list)g
(macro)g(and)g(the)h(entire)p eop
%%Page: 97 105
97 104 bop -118 -18 a Fg(8.1.)55 b(FUNCTION)26 b(DEFINITION)f(IN)g(PSL)
1820 b Fr(97)-118 289 y(process)23 b(will)g(terminate)f(after)i(e)n(v)n
(aluating)e(\(cons)h(1)h(\(cons)f(2)g(nil\)\).)30 b(Notice)23
b(the)h(lack)f(of)g(distinction)-118 409 y(between)h(program)g(and)g
(data)h(The)f(data)h(structure)f(representation)f(of)i(the)f(function)f
(call)i(is)f(passed)-118 529 y(to)g(the)h(function)f(as)h(its)f
(parameter)-5 b(.)-118 870 y Fq(\(ds)25 b(Sname:id)h(P)-7
b(ARAMS:id-list)24 b([FN:f)n(orm]\):)32 b(id)1371 b Fi(macr)l(o)-80
991 y Fr(De\002nes)38 b(the)f(function)g(named)h(Sname)g(of)g(type)f
(macro.)70 b(The)37 b(syntax)g(of)h(ds)f(is)-118 1111
y(similar)24 b(to)g(that)g(of)h(de)g(e)o(xcept)g(that)f(a)h(macro)g(is)
f(de\002ned)i(instead)e(of)h(an)g(e)o(xpr)-5 b(.)-118
1263 y(Perhaps)30 b(the)f(beha)n(vior)f(of)i(this)e(function)g(is)h
(best)f(described)i(with)e(an)h(e)o(xample.)43 b(The)29
b(e)n(v)n(aluation)-118 1383 y(of)121 1625 y Fh(\(ds)59
b(first)g(\(x\))g(\(car)g(x\)\))-118 1866 y Fr(will)24
b(generate)h(an)g(e)o(xpression)f(similar)f(to)121 2108
y Fh(\(dm)59 b(first)g(\(a\))241 2228 y(\(prog)f(\(x\))599
2348 y(\(setq)h(a)g(\(cdr)g(a\)\))599 2469 y(\(setq)g(x)g(\(car)g
(a\)\))599 2589 y(\(return)f(\(list)h('car)g(x\)\)\)\))-118
2830 y Fr(which)34 b(is)f(then)h(e)n(v)n(aluated.)58
b(A)34 b(sequence)g(of)h(assignment)d(statements)h(are)i(created)g(to)f
(initialize)-118 2950 y(each)28 b(parameter)h(to)e(its)g(corresponding)
g(ar)n(gument.)40 b(Each)28 b(id)g(within)e(the)i(body)g(FN)g(which)f
(is)h(not)-118 3070 y(in)h(the)g(parameter)h(list)f(is)g(quoted.)44
b(It)29 b(is)g(an)h(error)g(to)f(call)g(a)h(macro)g(de\002ned)g(this)e
(w)o(ay)i(with)e(more)-118 3191 y(ar)n(guments)j(than)h(are)h
(speci\002ed)g(by)e(the)h(parameter)h(list.)52 b(An)32
b(error)g(of)h(this)e(type)h(will)f(cause)h(the)-118
3311 y(message)121 3553 y Fh(*****)59 b(Argument)f(mismatch)g(in)h
(SMacro)f(expansion)-118 3793 y Fr(to)28 b(be)h(printed.)42
b(When)28 b(a)h(call)g(is)f(made)h(without)e(enough)h(ar)n(guments)g
(the)h(additional)e(parameters)-118 3914 y(are)e(set)g(to)f(nil.)-118
4036 y(The)h(follo)n(wing)e(macro)h(utilities)f(are)j(in)e(the)h
Fq(useful)g Fr(module.)-118 4377 y Fq(\(defmacr)n(o)h(A:id)f(B:f)n(orm)
g([C:f)n(orm]\):)32 b(id)1728 b Fi(macr)l(o)-91 4497
y Fr(Defmacro)28 b(is)f(a)h(useful)f(tool)f(for)i(de\002ning)f(macros.)
38 b(The)28 b(form)f(of)h(an)f(application)-118 4617
y(of)38 b(defmacro)f(is)g(gi)n(v)o(en)f(belo)n(w)-6 b(,)40
b(square)d(brack)o(ets)h(are)g(used)g(to)f(indicate)g(zero)h(or)-118
4738 y(more)25 b(occurances)g(of)g(an)g(e)o(xpression.)121
4924 y Fh(\(DEFMACRO)58 b(<name>)g(<pattern>)g([<form>]\))-118
5136 y Fr(The)30 b(pattern)f(is)h(an)g(list,)g(each)g(element)f(is)h
(either)g(an)g(id)f(or)h(a)g(pair)-5 b(.)45 b(All)30
b(of)g(the)f(ids)g(in)h(the)g(pattern)-118 5256 y(are)e(local)e(v)n
(ariables)h(which)f(may)h(be)g(used)g(freely)g(in)g(the)g(body)f(\(the)
h(\241form\277s\).)37 b(When)27 b(the)g(macro)-118 5377
y(is)k(called)g(the)g(pattern)g(is)g(matched)g(against)f(the)i(cdr)f
(of)h(the)f(macro)g(call,)i(binding)d(the)h(ids)g(of)g(the)-118
5497 y(pattern)26 b(to)h(their)f(corresponding)g(parts)h(of)g(the)f
(call.)37 b(Once)27 b(the)g(binding)e(is)i(complete)f(the)h(body)f(is)
-118 5618 y(e)n(v)n(aluated,)d(the)h(result)g(is)g(the)g(v)n(alue)f(of)
i(the)f(last)g(form.)30 b(Defmacro)24 b(is)g(often)g(used)g(with)g
(backquote.)-118 5738 y(The)j(follo)n(wing)f(e)o(xamples)g(illustrate)h
(the)g(use)g(of)h(defmacro.)39 b(The)27 b(\002rst)h(is)f(intended)f(to)
i(pro)o(vide)e(a)-118 5858 y(contrast)e(with)g(ds.)p
eop
%%Page: 98 106
98 105 bop 118 -18 a Fr(98)357 289 y Fh(\(defmacro)58
b(car)h(\(s\))477 409 y(`\(car)f(,s\)\))357 619 y(\(defmacro)g(nth)h
(\(s)g(i\))477 739 y(\(if)g(\(onep)g(i\))596 860 y(`\(car)g(,s\))596
980 y(`\(nth)g(\(cdr)g(,s\))g(,\(sub1)f(i\)\)\)\))118
1408 y Fq(\(de\003ambda)27 b(name:id)e(P)-7 b(ARAMS:id-list)25
b([FN:f)n(orm]\):)31 b(id)1072 b Fi(macr)l(o)146 1529
y Fr(De\002nes)29 b(the)e(function)g(named)h(name,)g(of)g(type)g
(macro.)40 b(De\003ambda)28 b(is)g(similar)f(to)118 1649
y(ds)35 b(e)o(xcept)g(that)g(the)h(body)f(of)g(the)h(de\002nition)e(is)
h(enclosed)g(within)g(a)g(lambda)g(e)o(x-)118 1770 y(pression.)46
b(The)30 b(number)f(of)h(parameters)h(of)f(the)g(lambda)f(e)o
(xpression)g(is)g(the)h(same)118 1890 y(as)i(the)f(number)g
(speci\002ed)g(by)g(P)-9 b(ARAMS.)32 b(When)g(the)f(macro)g(is)g
(applied)g(each)h(of)118 2010 y(the)22 b(ar)n(guments)g(are)h(e)n(v)n
(aluated)e(and)h(then)g(bound)f(to)h(the)g(parameters)g(of)h(the)f
(lambda)118 2131 y(e)o(xpression.)59 b(Finally)-6 b(,)36
b(the)f(body)f(of)h(the)f(lambda)g(is)h(e)n(v)n(aluated.)59
b(Note)34 b(that)h(each)118 2251 y(ar)n(gument)30 b(is)g(e)n(v)n
(aluated)f(once.)48 b(This)30 b(may)g(not)g(be)h(true)f(had)g(the)h
(macro)f(been)h(de-)118 2372 y(\002ned)i(using)e(ds.)52
b(The)33 b(follo)n(wing)d(e)o(xample)h(illustrates)g(when)h
(de\003ambda)g(should)118 2492 y(be)25 b(used)g(in)g(place)h(of)f(ds.)
31 b(The)26 b(e)o(xpansion)d(of)j(the)f(\002rst)g(v)o(ersion)f(of)h
(Check)h(contains)118 2612 y(tw)o(o)i(occurances)i(of)e
(\(long-calculation)g(n\),)h(where)g(the)g(e)o(xpansion)e(of)i(the)f
(second)118 2733 y(v)o(ersion)c(only)g(contains)g(one.)357
2895 y Fh(\(ds)59 b(check)g(\(any\))477 3015 y(\(when)f(\(>)i(any)f
(0\))g(\(compute)f(any\)\)\))357 3256 y(\(deflambda)g(check)g(\(any\))
477 3376 y(\(when)g(\(>)i(any)f(0\))g(\(compute)f(any\)\)\))357
3617 y(\(check)h(\(long-calculation)d(n\)\))357 3858
y(\(when)j(\(>)g(\(long-calculation)d(n\))j(0\))239 b(\045)60
b(Expansion)d(of)j(the)f(first)477 3978 y(\(compute)f
(\(long-calculation)e(n\)\)\))178 b(\045)60 b(version)e(of)h(check)357
4219 y(\(\(lambda)f(\(any\))1314 b(\045)60 b(Expansion)d(of)j(the)f
(second)537 4339 y(\(when)f(\(>)i(any)f(0\))1075 b(\045)60
b(version)e(of)h(check)656 4460 y(\(compute)f(any\)\)\))417
4580 y(\(long-calculation)e(n\)\))118 4873 y Fk(8.1.5)119
b(BackQuote)118 5279 y Fq(\(backquote)27 b(A:f)n(orm\):)k(f)n(orm)2174
b Fi(macr)l(o)145 5399 y Fr(Backquote)27 b(is)f(the)h(function)f(name)h
(for)g(`)g(\(accent)g(gra)n(v)o(e\).)37 b(W)l(ith)26
b(some)g(printers)h(it)118 5520 y(may)i(be)g(dif)n(\002cult)g(to)f
(distinguish)f(between)i(the)g(quote)g(and)g(accent)h(gra)n(v)o(e)f
(charac-)118 5640 y(ters.)i(F)o(or)24 b(this)g(reason,)g(in)g(the)g(e)o
(xamples)g(which)g(follo)n(w)f('e)o(xpression)g(is)h(written)g(as)118
5761 y(\(quote)h(e)o(xpression\).)k(Y)-11 b(ou)25 b(must)e(load)i
(USEFUL)g(to)f(de\002ne)i(backquote.)118 5858 y(In)f(the)g(pre)n(vious)
e(section)h(the)h(function)f(list)g(w)o(as)h(de\002ned)g(as)g(a)g
(macro.)p eop
%%Page: 99 107
99 106 bop -118 -18 a Fg(8.1.)55 b(FUNCTION)26 b(DEFINITION)f(IN)g(PSL)
1820 b Fr(99)121 289 y Fh(\(dm)59 b(list)g(\(a\))241
409 y(\(if)g(\(<)g(\(length)f(a\))i(2\))360 529 y(\(\))360
650 y(\(cons)f(\(quote)f(cons\))719 770 y(\(cons)g(\(second)h(a\))1077
891 y(\(ncons)g(\(cons)f(\(quote)h(list\)\(rest)e(\(rest)i(a\)\)\)\))
121 1011 y(\)\)\)\))-118 1217 y Fr(The)38 b(body)f(of)h(this)f
(de\002nition)g(is)h(some)n(what)e(dif)n(\002cult)i(to)f(read.)71
b(An)38 b(abbre)n(viated)f(syntax)g(w)o(as)-118 1338
y(de)n(v)o(eloped)e(to)g(aid)h(both)f(the)h(writer)g(and)g(the)g
(reader)-5 b(.)65 b(The)36 b(notation,)i(called)e(\224backquote\224)g
(\(`\),)-118 1458 y(w)o(orks)27 b(as)h(an)g(\224anti-quote\224.)39
b(Unquoted)27 b(forms)g(within)f(its)h(scope)h(are)g(assumed)f(to)h(be)
f(constants.)-118 1579 y(T)-8 b(o)24 b(indicate)g(that)f(a)i(form)f
(should)f(be)h(e)n(v)n(aluated,)f(one)h(should)f(pre\002x)i(the)f(form)
g(with)f(a)h(comma)g(\(,\).)-118 1699 y(Consider)h(the)f
(rede\002nition)g(of)h(the)g(macro)g(list.)121 1905 y
Fh(\(dm)59 b(list)g(\(a\))241 2026 y(\(if)g(\(<)g(\(length)f(a\))i(2\))
360 2146 y(\(\))360 2266 y(`\(cons)f(,\(second)f(a\))779
2387 y(,\(cons)g(\(quote)g(list\))h(\(rest)g(\(rest)f(a\)\)\)\)\)\))
-118 2593 y Fr(While)29 b(this)f(is)h(an)g(impro)o(v)o(ement,)f(the)h
(e)o(xplicit)f(construction)f(,\(cons)i(\(quote)g(list\))g(\(rest)g
(\(rest)g(a\)\)\))-118 2714 y(clutters)i(up)h(the)f(appearance.)53
b(The)32 b(application)e(of)i(cons)g(is)f(there)h(to)f(indicate)h(that)
f(we)h(w)o(ant)g(to)-118 2834 y(combine)e(the)g(result)h(of)f(\(rest)h
(\(rest)g(a\)\))g(with)f(the)h(identi\002er)g(list.)47
b(The)31 b(form)f(,\(list)g(\(rest)h(\(rest)g(a\)\))-118
2954 y(will)f(not)g(gi)n(v)o(e)g(this)g(ef)n(fect,)j(instead)d(it)g(w)o
(ould)g(create)i(a)f(list)f(of)h(tw)o(o)g(elements.)48
b(The)31 b(at-sign)f(\(@\))-118 3075 y(is)i(used)g(in)g(conjunction)e
(with)i(the)g(comma)g(to)f(mean)i(\224splice-in\224)f(rather)g(than)g
(\224cons-in\224.)53 b(This)-118 3195 y(results)24 b(in)g(the)h(follo)n
(wing)e(de\002ntion.)121 3402 y Fh(\(dm)59 b(list)g(\(a\))241
3522 y(\(if)g(\(<)g(\(length)f(a\))i(2\))360 3642 y(\(\))360
3763 y(`\(cons)f(,\(second)f(a\))h(\(list)f(,@\(rest)h(\(rest)f
(a\)\)\)\)\)\))-118 4188 y Fq(\(unquote)27 b(A:any\):)k(Unde\002ned)
2141 b Fi(fe)n(xpr)-87 4308 y Fr(Function)31 b(name)g(for)h(comma)e(,.)
50 b(It)31 b(is)g(an)h(error)g(to)e(e)n(v)n(al)h(this)f(function;)j(it)
e(should)-118 4429 y(occur)25 b(only)f(inside)g(a)h(backquote.)-118
4797 y Fq(\(unquotel)h(A:any\):)32 b(Unde\002ned)2113
b Fi(fe)n(xpr)-91 4918 y Fr(Function)27 b(name)g(for)h(comma-atsign)d
(,@.)38 b(It)27 b(is)g(an)h(error)g(to)e(e)n(v)n(al)h(this)f(function;)
h(it)-118 5038 y(should)c(only)i(occur)g(inside)f(a)h(backquote.)-118
5136 y(The)e(tw)o(o)f(e)o(xamples)g(which)h(follo)n(w)f(are)h(similar)f
(de\002nitions)g(of)h(an)g(arithmetic)f(if)h(form.)30
b(There)24 b(are)-118 5256 y(four)g(ar)n(guments:)29
b(a)24 b(test)f(form,)h(a)f(ne)o(gati)n(v)o(e)f(form,)h(a)h(zero)h
(form,)e(and)h(a)g(positi)n(v)o(e)d(form.)30 b(One)24
b(of)f(the)-118 5377 y(last)28 b(three)h(forms)g(is)f(chosen)h(to)f(be)
h(e)n(v)n(aluated)f(according)h(to)f(whether)h(the)f(test)h(form)f(is)h
(positi)n(v)o(e,)-118 5497 y(ne)o(gati)n(v)o(e,)h(or)h(zero.)50
b(The)31 b(\002rst)g(uses)g(the)g(traditional)f(dm)g(while)h(the)g
(second)f(uses)h(defmacro)g(and)-118 5618 y(backquote.)56
b(Clearly)33 b(the)h(second)f(is)g(much)f(simpler)-5
b(.)55 b(T)-8 b(o)33 b(clarify)h(printer)f(output,)h(there)f(are)i(no)
-118 5738 y(occurances)c(of)g(the)f(accent)h(gra)n(v)o(e)g(character)g
(in)f(the)h(\002rst)f(de\002nition)g(and)h(the)f(second)g(de\002nition)
-118 5858 y(does)24 b(not)h(contain)f(an)h(occurance)g(of)g(the)g
(quote)f(character)-5 b(.)p eop
%%Page: 100 108
100 107 bop 118 -18 a Fr(100)118 289 y Fh(\(dm)59 b(number-if)f
(\(calling-form\))238 409 y(\(list)g('let)596 529 y('\(\(var)h
(\(gensym\)\)\))596 650 y(\(list)g('let)955 770 y(\(list)g(\(list)f
('var)h(\(nth)g(calling-form)e(2\)\)\))955 891 y(\(list)i('cond)1314
1011 y(\(list)f(\(list)h('minusp)f('var\))1672 1131 y(\(nth)h
(calling-form)e(3\)\))1314 1252 y(\(list)h(\(list)h('zerop)f('var\))
1672 1372 y(\(nth)h(calling-form)e(4\)\))1314 1493 y(\(list)h(t)i
(\(nth)f(calling-form)e(5\)\)\)\)\)\))118 1733 y(\(defmacro)h
(number-if)g(\(test)g(minus-form)g(zero-form)g(plus-form\))238
1854 y(\(let)h(\(\(var)f(\(gensym\)\)\))357 1974 y(`\(let)h(\(\(,var)f
(,test\)\))537 2094 y(\(cond)g(\(\(minusp)g(,var\))h(,minus-form\))895
2215 y(\(\(zerop)f(,var\))h(,zero-form\))895 2335 y(\(t)h
(,plus-form\)\)\)\)\))118 2782 y Fk(8.1.6)119 b(Macr)n(oExpand)118
3237 y Fq(\(macr)n(oexpand)27 b(A:f)n(orm)d([B:id]\):)33
b(f)n(orm)1763 b Fi(macr)l(o)155 3358 y Fr(Macroe)o(xpand)35
b(is)h(a)h(useful)f(tool)g(for)h(deb)n(ugging)e(macro)h(de\002nitions.)
65 b(If)37 b(gi)n(v)o(en)118 3478 y(one)h(ar)n(gument,)j(macroe)o
(xpand)c(e)o(xpands)g(all)g(the)h(macros)g(in)f(that)h(form.)69
b(Often)118 3598 y(one)38 b(wishes)f(for)h(more)f(control)g(o)o(v)o(er)
g(this)g(process.)69 b(F)o(or)38 b(e)o(xample,)h(if)f(a)g(macro)118
3719 y(e)o(xpands)19 b(into)h(a)h(let,)f(we)h(may)f(not)g(wish)f(to)h
(see)h(the)f(let)g(itself)g(e)o(xpanded)f(to)h(a)h(lambda)118
3839 y(e)o(xpression.)36 b(Therefore)27 b(additional)f(ar)n(guments)g
(may)g(be)h(gi)n(v)o(en)f(to)g(macroe)o(xpand.)118 3959
y(If)32 b(these)f(are)h(supplied,)g(the)o(y)e(should)g(be)i(the)f
(names)g(of)g(macros,)i(and)e(only)g(those)118 4080 y(speci\002ed)25
b(are)h(e)o(xpanded.)118 4527 y Fq(Lo)o(w)f(Le)o(v)o(el)g(Function)h
(De\002nition)g(Primiti)o(v)o(es)118 4764 y Fr(The)k(follo)n(wing)d
(functions)i(are)h(used)f(especially)g(by)g(putd)g(and)h(Getd,)g
(de\002ned)g(abo)o(v)o(e)e(in)i(Section)118 4884 y(9.1.3,)24
b(and)h(by)f(e)n(v)n(al)g(and)h(apply)-6 b(,)24 b(de\002ned)h(in)f
(Chapter)i(11.)118 5247 y Fq(\(funboundp)i(U:id\):)j(boolean)2222
b Fi(e)n(xpr)141 5367 y Fr(T)-7 b(ests)23 b(whether)g(there)g(is)g(a)g
(de\002nition)f(in)h(the)g(function)f(cell)h(of)g(U;)g(returns)f(nil)h
(if)g(so,)118 5488 y(t)i(if)f(not.)118 5608 y(Note:)30
b(The)24 b(functional)f(v)n(alue)h(of)g(an)g(identi\002er)g(which)g
(does)f(not)h(de\002ne)h(a)f(function)118 5728 y(is)e(actually)f(a)i
(call)f(on)g(unde\002nedfunction.)29 b(The)22 b(e)n(v)n(aluation)e(of)i
(unde\002nedfunction)118 5849 y(will)i(result)g(in)h(a)g(continuable)f
(error)-5 b(.)p eop
%%Page: 101 109
101 108 bop -118 -18 a Fg(8.1.)55 b(FUNCTION)26 b(DEFINITION)f(IN)g
(PSL)1770 b Fr(101)-118 357 y Fq(\(fboundp)27 b(U:id\):)k(boolean)2258
b Fi(macr)l(o)-81 478 y Fr(Equi)n(v)n(alent)35 b(to)i(\(not)g
(\(funboundp)f(U\)\),)i(the)f(function)f(funboundp)g(is)h(described)
-118 598 y(abo)o(v)o(e.)-118 957 y Fq(\(\003ambdalinkp)26
b(U:id\):)32 b(boolean)2122 b Fi(e)n(xpr)-91 1078 y Fr(T)-7
b(ests)27 b(whether)g(U)g(is)g(an)h(interpreted)f(function;)g(return)g
(t)g(if)g(so,)h(nil)e(if)i(not.)37 b(This)26 b(is)-118
1198 y(done)k(by)g(checking)g(for)g(the)g(special)g(code-address)g(of)g
(the)g(lambdalink)f(function,)-118 1319 y(which)24 b(calls)h(the)f
(interpreter)-5 b(.)-118 1698 y Fq(\(fcodep)26 b(U:id\):)32
b(boolean)2410 b Fi(e)n(xpr)-93 1819 y Fr(T)-7 b(ests)24
b(whether)h(U)g(is)f(a)h(compiled)f(function;)g(returns)g(t)h(if)f(so,)
h(nil)f(if)h(not.)-118 2198 y Fq(\(mak)o(efunbound)j(U:id\):)j(nil)2267
b Fi(e)n(xpr)-88 2319 y Fr(Mak)o(es)31 b(U)f(an)h(unde\002ned)f
(function)g(by)g(planting)f(a)i(special)f(call)h(to)f(the)g(function,)
-118 2439 y(unde\002nedfunction,)23 b(in)g(the)h(function)f(cell)h(of)g
(U.)g(See)h(funboundp)d(abo)o(v)o(e)h(for)h(more)-118
2559 y(information)f(about)i(unde\002nedfunction.)-118
2919 y Fq(\(mak)o(e\003ambdalink)h(U:id\):)32 b(nil)2167
b Fi(e)n(xpr)-93 3039 y Fr(Mak)o(es)25 b(U)g(an)h(interpreted)e
(function)h(by)g(planting)e(a)j(special)f(call)g(to)g(an)g(interpreter)
-118 3159 y(support)f(function)g(\(lambdalink\))f(function)h(in)h(the)f
(function)g(cell)h(of)g(U.)-118 3539 y Fq(\(mak)o(efcode)h(U:id)f
(C:code-pointer\):)33 b(nil)1789 b Fi(e)n(xpr)-80 3659
y Fr(Mak)o(es)38 b(U)f(a)i(compiled)e(function)g(by)g(planting)g(a)h
(special)g(JUMP)f(to)h(the)g(code-)-118 3780 y(address)25
b(associated)f(with)g(C.)-118 4139 y Fq(\(getfcodepointer)j(U:id\):)k
(code-pointer)1826 b Fi(e)n(xpr)-93 4259 y Fr(Gets)24
b(the)h(code-pointer)f(for)h(U.)-118 4645 y Fq(\(code-number)l(-of-ar)o
(guments)k(C:code-pointer\):)k Fl(f)p Fq(nil,integer)p
Fl(g)874 b Fi(e)n(xpr)-91 4765 y Fr(Some)27 b(compiled)f(functions)f
(ha)n(v)o(e)i(the)g(ar)n(gument)f(number)g(the)o(y)g(e)o(xpect)h
(stored)f(in)-118 4886 y(association)e(with)g(the)g(code-pointer)h(C.)g
(This)f(inte)o(ger)l(,)g(or)h(nil)f(is)g(returned.)-118
5280 y Fk(8.1.7)119 b(Function)31 b(T)-9 b(ype)30 b(Pr)n(edicates)-118
5708 y Fq(\(expr)o(p)c(U:any\):)31 b(boolean)2373 b Fi(e)n(xpr)-93
5828 y Fr(T)-7 b(est)24 b(if)h(U)g(is)f(a)h(code-pointer)l(,)g(lambda)f
(form,)g(or)h(an)g(id)g(with)f(e)o(xpr)g(de\002nition.)p
eop
%%Page: 102 110
102 109 bop 118 -18 a Fr(102)118 357 y Fq(\(fexpr)o(p)26
b(U:any\):)32 b(boolean)2339 b Fi(e)n(xpr)143 478 y Fr(T)-7
b(est)25 b(if)f(U)h(is)f(an)h(id)g(with)f(fe)o(xpr)h(de\002nition.)118
851 y Fq(\(nexpr)o(p)i(U:any\):)k(boolean)2317 b Fi(e)n(xpr)143
971 y Fr(T)-7 b(est)25 b(if)f(U)h(is)f(an)h(id)g(with)f(ne)o(xpr)g
(de\002nition.)118 1344 y Fq(\(macr)n(op)i(U:any\):)31
b(boolean)2296 b Fi(e)n(xpr)143 1465 y Fr(T)-7 b(est)25
b(if)f(U)h(is)f(an)h(id)g(with)f(macro)h(de\002nition.)118
1841 y Ft(8.2)143 b(Wrappers)118 2073 y Fr(Once)20 b(a)h(function)e
(has)h(been)g(de\002ned,)h(one)f(may)f(w)o(ant)h(it)g(to)f(do)h
(something)e(a)i(little)f(dif)n(ferent,)h(or)g(just)118
2193 y(a)30 b(little)e(bit)h(more.)44 b(Breaking)30 b(and)f(tracing)h
(functions)e(for)i(deb)n(ugging)e(purposes)h(can)g(be)h(thought)118
2314 y(of)i(in)f(this)f(w)o(ay)-6 b(.)50 b(Ha)n(ving)31
b(a)h(function)e(k)o(eep)i(track)f(of)h(the)f(time)g(spent)g(in)g(its)f
(e)o(x)o(ecution)g(can)i(also)118 2434 y(be)24 b(thought)e(of)i(in)g
(this)e(w)o(ay)-6 b(.)30 b(The)24 b(Wrappers)g(module)f(pro)o(vides)f
(a)j(con)l(v)o(enient)d(f)o(acility)h(to)h(support)118
2554 y(this.)118 2679 y(When)f(a)g(function)g(is)f(wrapped,)i(its)e
(name)h(becomes)f(a)i(reference)g(for)g(tw)o(o)e(dif)n(ferent)h
(function)f(def-)118 2799 y(initions.)28 b(In)23 b(PSL)h(it)e(is)h
(possible)e(to)i(create)g(distinct)f(identi\002ers)g(which)h(ha)n(v)o
(e)f(the)h(same)g(name.)29 b(The)118 2920 y(original)k(name)h(of)g(the)
f(function)g(is)h(associated)f(with)g(a)i(ne)n(w)e(function)g(called)h
(the)g(wrapper)-5 b(.)57 b(In)118 3040 y(general)31 b(a)f(wrapper)h
(does)e(additional)g(w)o(ork)h(before)h(and/or)f(after)g(applying)f
(the)h(original)f(de\002ni-)118 3160 y(tion.)35 b(The)26
b(original)f(de\002nition)h(is)g(associated)f(with)h(an)g(identi\002er)
h(whose)f(name)g(is)g(identical)f(with)118 3281 y(the)g(original)e
(name)i(b)n(ut)f(which)g(is)g(not)g(interned.)30 b(Application)24
b(of)g(getd)h(to)f(the)g(original)g(name)g(will)118 3401
y(return)f(the)f(original)g(de\002nition.)29 b(Since)23
b(a)g(wrapper)g(is)f(identi\002ed)g(by)g(an)h(indicator)f(on)g(the)h
(property)118 3522 y(list)31 b(of)h(its)f(name)g(getd)h(kno)n(ws)e
(when)i(to)f(look)g(else)n(where)h(for)g(the)g(original)f(function)g
(de\002nition,)118 3642 y(and)25 b(putd)f(kno)n(ws)f(to)i(alter)g(the)f
(original)g(de\002nition,)g(not)g(the)h(wrapper)-5 b(.)118
3767 y(T)d(ypically)21 b(a)i(wrapper)g(may)e(be)i(added)f(to)g(a)g
(function)g(and)g(later)g(remo)o(v)o(ed.)29 b(A)22 b(function)f
(potentially)118 3887 y(may)36 b(be)h(wrapped)g(up)g(inside)e(more)i
(than)f(one)h(wrapper)g(at)g(the)f(same)h(time.)66 b(It)36
b(is)h(possible)e(to)118 4007 y(rede\002ne)c(a)e(wrapped)h(function)e
(b)n(ut)h(if)h(the)f(order)h(or)f(number)g(of)h(formal)f(parameters)g
(is)g(changed)118 4128 y(then)c(it)f(will)g(be)h(necessary)g(to)f
(unwrap)h(all)g(wrappers)g(\002rst.)118 4450 y Fk(8.2.1)119
b(Notes)29 b(on)h(Writing)g(Wrappers)118 4646 y Fr(This)24
b(section)g(describes)h(guidelines)e(for)i(writing)f(wrappers.)118
4771 y(If)30 b(a)f(wrapper)g(is)g(put)f(on)h(a)g(function)f(that)h(is)f
(used)h(either)g(directly)g(or)g(indirectly)f(by)g(the)h(wrapper)118
4891 y(body)h(an)g(in\002nite)g(recursion)h(may)f(result.)47
b(Functions)29 b(used)h(by)g(the)h(PSL)g(interpreter)f(are)h(partic-)
118 5011 y(ularly)k(susceptible)g(to)g(this)g(problem.)63
b(W)-8 b(e)36 b(require)g(a)h(means)e(to)g(a)n(v)n(oid)h(in\002nite)f
(recursion.)63 b(In)118 5132 y(general)32 b(it)g(is)f(not)g(easy)i(to)e
(restrict)h(the)f(set)h(of)g(functions)f(which)g(can)i(be)f(called)g
(indirectly)f(by)g(a)118 5252 y(piece)g(of)g(code.)49
b(Man)o(y)30 b(PSL)i(system)e(functions)g(use)g(other)h(system)f
(functions.)48 b(Furthermore,)32 b(a)118 5373 y(modi\002cation)d(to)h
(the)h(system)e(may)h(change)h(these)f(relationships.)46
b(Some)30 b(system)f(functions)h(call)118 5493 y(functions)d(through)g
(functional)g(v)n(ariables)g(or)h(functional)e(v)n(alues)h(stored)h(on)
f(property)h(lists.)38 b(This)118 5613 y(means)25 b(that)f(some)g(of)h
(the)g(relationships)e(between)i(system)e(functions)h(change)h(o)o(v)o
(er)f(time.)118 5738 y(Instead)i(of)f(a)n(v)n(oiding)g(recursion)g
(introduced)g(by)h(wrappers,)g(we)g(can)g(detect)g(and)f(reco)o(v)o(er)
h(from)f(it.)118 5858 y(Wrapper)35 b(bypasses)e(do)h(this.)58
b(A)34 b(wrapper)h(bypass)e(is)h(implemented)e(through)i(a)g(\003uid)g
(v)n(ariable,)p eop
%%Page: 103 111
103 110 bop -118 -18 a Fg(8.2.)55 b(WRAPPERS)2665 b Fr(103)-118
289 y(called)31 b(the)f(controlling)f(v)n(ariable)h(for)h(that)g
(wrapper)-5 b(.)48 b(On)31 b(entry)f(to)g(a)h(wrapper)l(,)i(the)e(v)n
(alue)f(of)g(the)-118 409 y(controlling)23 b(v)n(ariable)h(is)g(check)o
(ed.)32 b(A)24 b(non-nil)g(v)n(alue)g(implies)f(that)i(a)g(pre)n(vious)
e(in)l(v)n(ocation)g(of)i(this)-118 529 y(wrapper)k(has)g(not)g(been)g
(completed.)42 b(T)-8 b(o)29 b(a)n(v)n(oid)g(a)g(recursi)n(v)o(e)f
(call)h(on)g(the)g(wrapper)l(,)h(a)g(call)f(on)f(the)-118
650 y(wrapped)d(function)f(replaces)h(e)n(v)n(aluation)e(of)i(the)g
(wrapper)-5 b(.)-118 770 y(If)21 b(the)f(v)n(alue)g(of)h(the)f
(controlling)f(v)n(ariable)h(is)g(nil)g(the)g(wrapper)h(is)f(e)n(v)n
(aluated.)29 b(During)20 b(e)n(v)n(aluation)e(of)-118
891 y(the)i(wrapper)h(the)f(controlling)e(v)n(ariable)i(is)g(set)g(to)f
(t)h(e)o(xcept)g(during)g(the)g(application)f(of)h(the)g(wrapped)-118
1011 y(function,)k(at)h(which)f(point)g(it)g(should)g(be)h(set)f(to)h
(nil.)-118 1131 y(Syntactically)-6 b(,)23 b(wrapper)j(bodies)e(of)h
(the)f(follo)n(wing)f(form)i(are)g(supported:)-118 1294
y Fh(\(lambda)58 b(<args>)1 1414 y(\(cond)h(\(<var>)g
(<wrapped-fn-call>\))360 1535 y(\(t)g(\(prog)g(\(<var>)g(<id>*\))659
1655 y(\(setq)g(<var>)f(t\))659 1775 y(<call-expr>*\)\)\)\))-118
2016 y(<call-expr>)f(::=)i(<expr>)838 2137 y(|)h(\(<call-expr>*\))838
2257 y(|)g(\(setq)f(<var>)f(nil\))h(<setq-and-wrapped-fn-call>)54
b(\(setq)59 b(<var>)f(t\))-118 2498 y(<setq-and-wrapped-fn-call>)c(::=)
779 2618 y(|)59 b(<wrapped-fn-call>)779 2739 y(|)g(\(setq)g(<id>)g
(<wrapped-fn-call>\))-118 2979 y(<wrapped-fn-call>)d(::=)j
(\(wrapped-function)d(<expr>*\))958 3100 y(|)j(\(funcall)f
('wrapped-function)e(<expr>*\))-118 3340 y(<var>)j(::=)g(<id>)-118
3461 y(<id>)g(is)g(any)g(PSL)g(identifier)f(<expr>)g(is)i(any)f(PSL)g
(s-expression.)-118 3623 y Fr(The)25 b(controlling)e(v)n(ariable)h(of)h
(the)f(wrapper)i(is)e Ff(<)j(v)t(ar)k(>)p Fr(.)f(It)25
b(must)f(be)h(a)g(\003uid)f(v)n(ariable)g(whose)h(top)-118
3744 y(le)n(v)o(el)e(v)n(alue)i(is)f(nil.)-118 3864 y(The)g(notation)f
(is)g(BNF)i(with)f(the)g(addition)e(of)i(the)g(re)o(gular)g(e)o
(xpression)f(\224*\224)h(operator)-5 b(.)30 b(This)24
b(opera-)-118 3985 y(tor)g(is)h(used)f(to)h(indicate)f(zero)h(or)g
(more)g(repetitions)f(of)g(an)h(item.)-118 4105 y(Note)35
b(that)g(setf)h(is)f(not)g(supported)g(in)g(place)h(of)g(setq.)63
b(Y)-11 b(ou)35 b(should)f(not)h(use)h(apply)f(in)g(place)h(of)-118
4225 y(funcall)29 b(or)g(let)g(in)g(place)g(of)g(prog.)44
b(Y)-11 b(ou)29 b(can)g(eliminate)f(redundant)h(instances)f(of)i
(\(setq)e Ff(<)36 b(v)t(ar)i(>)-118 4346 y Fr(t\))e(and)g(\(setq)g
Ff(<)49 b(v)t(ar)i(>)36 b Fr(nil\).)64 b(F)o(or)37 b(e)o(xample,)h(if)e
(a)g Fh(<wrapped-fn-call>)d Fr(appears)j(at)g(the)-118
4466 y(be)o(ginning)23 b(of)i(a)g(prog)f(then)h(the)f(form)h
Fh(\(setq)59 b(<var>)f(nil\))24 b Fr(can)i(be)f(omitted.)-118
4752 y Fk(8.2.2)119 b(Exported)30 b(Functions)-118 5159
y Fq(\(wrap)25 b(name:id)h(wtype:id)g(BOD)l(Y)-9 b(:list)24
b(COMPILE?:boolean\):)31 b(id)788 b Fi(e)n(xpr)-89 5279
y Fr(Wrap)29 b(creates)g(a)g(wrapper)-5 b(.)42 b(name)29
b(is)f(the)g(name)h(of)g(the)f(function)g(to)g(be)h(wrapped.)-118
5399 y(wtype)k(is)f(an)i(id)f(which)f(identi\002es)h(the)g(wrapper)h
(type,)h(it)d(must)g(be)i(a)f(member)g(of)-118 5520 y(the)26
b(list)f(wrapper)n(-standard-order)i(\(documented)e(belo)n(w\).)35
b(BOD)-5 b(Y)26 b(is)g(a)g(list)f(which)-118 5640 y(should)e(be)i(a)h
(lambda)e(e)o(xpression.)-118 5738 y(Wrap)g(rede\002nes)h(the)f
(functional)f(v)n(alue)g(of)h(name.)30 b(The)24 b(original)f(function)g
(is)h(renamed.)30 b(The)24 b(print)-118 5858 y(representation)g(of)h
(this)f(ne)n(w)g(name)h(is)f(identical)g(to)h(name)f(b)n(ut)h(the)f
(identi\002ers)h(are)g(distinct.)p eop
%%Page: 104 112
104 111 bop 118 -18 a Fr(104)118 289 y(When)36 b(BOD)-5
b(Y)35 b(is)g(a)h(lambda)f(e)o(xpression)g(\(you)g(are)h(encouraged)g
(to)f(use)h(a)g(lambda)f(e)o(xpression)118 409 y(for)29
b(this)f(ar)n(gument\),)i(then)e(the)h(ne)n(w)f(name)h(of)g(the)f
(function)g(which)h(is)f(being)g(wrapped)h(is)g(substi-)118
529 y(tuted)24 b(for)h(each)h(occurance)g(of)f(wrapper)n(-function.)30
b(The)25 b(result)f(of)h(this)f(substitution)e(becomes)j(the)118
650 y(de\002nition)f(of)h(the)g(wrapper)-5 b(.)118 791
y(When)24 b(BOD)-5 b(Y)23 b(is)h(not)f(a)h(lambda)f(e)o(xpression)f(a)i
(dif)n(ferent)g(method)e(is)i(used)f(to)g(create)i(the)f(wrapper)-5
b(.)118 912 y(BOD)g(Y)36 b(is)g(embedded)g(within)g(a)g(lambda)g(e)o
(xpression)g(which)g(has)g(the)g(same)h(number)e(of)i(ar)n(gu-)118
1032 y(ments)c(as)g(the)g(function)g(which)g(is)g(being)g(wrapped.)56
b(Each)34 b(occurance)g(of)g(the)f(form)g(\(wrapped-)118
1153 y(in)l(v)n(ocation\),)24 b(is)g(replaced)h(by)g(an)g(application)f
(of)g(the)h(wrapped)g(function.)118 1294 y(If)g(COMPILE?)h(is)e(t)h
(then)f(the)h(wrapper)g(will)f(be)h(compiled.)118 1436
y(The)34 b(wrappers)h(package)g(permits)e(a)h(function)g(to)g(ha)n(v)o
(e)g(an)o(y)f(number)h(of)g(wrappers)h(of)f(an)o(y)g(per)n(-)118
1556 y(mitted)h(type.)65 b(F)o(or)36 b(a)h(gi)n(v)o(en)d(type)i(of)h
(wrapper)l(,)i(a)e(ne)n(w)f(wrapper)g(al)o(w)o(ays)g(encloses)g(pree)o
(xisting)118 1677 y(wrappers)25 b(of)g(that)f(type.)31
b(Ho)n(we)n(v)o(er)l(,)23 b(you)i(are)g(advised)f(against)g(depending)g
(upon)g(this)g(ordering.)118 2037 y Fq(\(r)n(emo)o(v)o(e-wrapper)j
(name:id)f(TYPE:id\):)32 b(boolean)1415 b Fi(e)n(xpr)146
2157 y Fr(Remo)o(v)o(es)27 b(a)h(wrapper)h(of)f(type)g(TYPE)g(from)f
(the)h(identi\002er)g(name.)40 b(If)29 b(name)e(does)118
2278 y(not)e(ha)n(v)o(e)g(a)g(wrapper)h(of)f(this)g(type)g(then)f(the)i
(return)f(v)n(alue)f(will)h(be)g(nil,)g(otherwise)f(t)118
2398 y(is)g(returned.)118 2768 y Fq(\(wrapped?)32 b(name:id\):)g
(boolean)2100 b Fi(e)n(xpr)143 2888 y Fr(Returns)25 b(t)f(if)h(there)g
(is)g(at)f(least)h(one)g(wrapper)g(on)g(name.)118 3278
y Fq(\(wrapper)l(-of-type?)33 b(name:id)26 b(TYPE:id\):)32
b(name:id)26 b(nil)1223 b Fi(e)n(xpr)150 3399 y Fr(Searches)34
b(for)e(a)h(wrapper)g(of)f(the)g(gi)n(v)o(en)f(type)h(on)g(name.)52
b(name)33 b(is)e(returned)i(if)f(a)118 3519 y(wrapper)25
b(is)g(found,)f(otherwise)g(nil)g(is)h(returned.)118
3909 y Fq(\(wrapper)l(-types)i(name:id\):)32 b(list)2120
b Fi(e)n(xpr)141 4029 y Fr(Returns)23 b(a)g(list)f(of)h(all)f(the)h
(types)f(of)h(all)g(the)f(wrappers)h(around)g(the)g(function)f(named)
118 4150 y(name.)118 4520 y Fq(\(function-lambda-list)k(FN:id,)f
(code-pointer)-9 b(,)27 b(lambda\):)k(list)1018 b Fi(e)n(xpr)155
4640 y Fr(Returns)37 b(a)h(list)e(suitable)g(for)i(use)f(as)g(the)g
(formal)g(parameter)g(list)f(of)h(a)h(wrapper)118 4760
y(for)i(that)f(function.)73 b(If)40 b(the)f(function)f(is)h
(interpreted,)k(the)c(ar)n(gument)g(list)f(of)h(the)118
4881 y(de\002nition)26 b(is)g(returned.)35 b(If)27 b(the)f(actual)h(ar)
n(gument)f(list)f(is)h(not)g(a)n(v)n(ailable,)g(names)g(for)118
5001 y(the)f(ar)n(guments)f(are)i(in)l(v)o(ented.)k(If)25
b(FN)h(is)e(not)g(a)i(lambda)e(e)o(xpression,)g(code-pointer)l(,)118
5121 y(or)h(identi\002er)g(then)f(it)g(is)h(an)g(error)-5
b(.)118 5407 y Fh(*****)59 b(FN)g(is)g(not)h(a)f(function.)118
5717 y Fr(It)25 b(is)f(also)h(an)g(error)g(if)g(FN)g(is)f(an)h
(identi\002er)g(which)f(does)h(not)f(ha)n(v)o(e)h(a)g(functional)f(v)n
(alue.)118 5858 y Fh(*****)59 b(FN)g(is)g(not)h(defined)e(as)h(a)h
(function.)p eop
%%Page: 105 113
105 112 bop -118 -18 a Fg(8.2.)55 b(WRAPPERS)2665 b Fr(105)-118
357 y Fq(\(function-basic-de\002nition)28 b(name:id\):)k(name:id)1475
b Fi(e)n(xpr)-95 478 y Fr(Returns)22 b(the)h(basic)f(de\002nition)g(of)
h(name,)f(whether)h(or)g(not)f(a)h(set)f(or)h(wrappers)g(is)f(as-)-118
598 y(sociated)k(with)g(it.)35 b(Note)27 b(that)f(getd)g(and)h(putd)e
(operate)i(on)f(this)g(basic)g(de\002nition.)36 b(If)-118
718 y(you)25 b(wish)g(to)g(rede\002ne)h(a)g(wrapped)g(function)e(and)i
(the)f(number)g(or)h(order)g(of)f(formal)-118 839 y(parameters)e(will)f
(change)i(it)e(is)h(necessary)h(to)e(\002rst)i(unwrap)f(all)f(wrappers)
i(\002rst.)30 b(Ap-)-118 959 y(plications)f(of)i(the)f(wrapped)h
(function)f(within)f(the)i(wrapper)g(will)f(not)g(be)g(updated)-118
1080 y(when)25 b(the)f(wrapped)h(function)f(is)g(rede\002ned.)-118
1448 y Fq(wrapper)l(-standard-order)29 b Fr(=)c([Initially:)k(\(trace)d
(break)f(meter\)])937 b Fi(global)82 1569 y Fr(Only)31
b(wrapper)h(types)f(which)g(are)h(members)f(of)h(this)f(list)f(are)j
(le)o(gal)d(ar)n(guments)h(to)82 1689 y(primiti)n(v)o(e)18
b(functions)i(that)g(operate)h(on)g(wrappers.)29 b(The)21
b(wrappers)g(of)g(each)h(function)82 1809 y(are)34 b(nested)g(so)g
(that)f(each)i(wrapper)f(type)g(appears)g(earlier)h(in)e(wrapper)n
(-standard-)82 1930 y(order)g(than)h(the)f(type)g(of)h(an)o(y)e
(wrapper)i(it)f(encloses.)57 b(Wrap)33 b(wraps)h(according)f(to)82
2050 y(this)28 b(ordering,)h(b)n(ut)g(changing)f(this)g(list)g(does)h
(not)f(cause)h(the)g(ordering)g(of)g(e)o(xisting)82 2171
y(wrappers)c(to)f(be)h(changed.)-118 2430 y Fk(8.2.3)119
b(Examples)-118 2618 y Fr(Assume)24 b(that)h(foo)h(is)e(a)i(commonly)e
(called)h(function)g(whose)g(ar)n(gument)g(is)g(a)g(lar)n(ge)h(data)g
(structure.)-118 2739 y(Y)-11 b(ou)31 b(ha)n(v)o(e)g(found)f(that)h
(foo)g(is)g(sometimes)f(called)h(with)f(an)i(ar)n(gument)f(of)g(nil)f
(and)i(w)o(ould)e(lik)o(e)h(to)-118 2859 y(cause)23 b(a)g(break)g(when)
g(this)e(situation)g(arises)i(so)f(that)h(you)f(can)h(disco)o(v)o(er)e
(where)i(foo)g(is)f(being)g(called)-118 2979 y(from.)-118
3100 y(Since)28 b(foo)g(is)g(a)g(commonly)e(used)i(function)f(a)h
(break)g(on)g(each)g(entry)g(to)g(foo)f(is)h(unsatisf)o(actory)-6
b(.)38 b(A)-118 3220 y(trace)c(of)g(each)h(entry)e(and)h(e)o(xit)f(is)g
(not)h(suf)n(\002cient)f(\226)h(it)f(doesn')n(t)g(tell)h(you)f(who)g
(called)h(foo)g(in)f(the)-118 3341 y(critical)26 b(case.)35
b(The)27 b(solution)d(is)i(to)g(wrap)g(foo)g(is)g(an)g(advice)h
(wrapper)-5 b(.)35 b(Such)26 b(a)h(wrapper)g(will)e(print)-118
3461 y(a)g(backtrace)h(and)e(enter)h(a)h(continuable)d(break)i(loop)g
(when)f(an)h(ar)n(gument)g(of)f(nil)h(is)f(disco)o(v)o(ered.)-118
3582 y(First,)d(load)f(the)h Fq(br)n(eak-trace)i Fr(module.)28
b(This)20 b(will)g(result)g(in)g(the)h Fq(wrappers)h
Fr(module)d(being)i(loaded)-118 3702 y(and)h(the)h(breaktrace)g
(function)f(being)g(de\002ned)h(\(see)g(Chapter)h(17)e(for)h(more)f
(information)f(on)i(break-)-118 3822 y(trace\).)59 b(The)34
b(wrapper)n(-type)g(advice)g(is)f(added)h(as)g(the)g(innermost)e
(wrapper)j(on)e(the)h(ordered)g(list)-118 3943 y(referenced)26
b(by)f(wrapper)n(-standard-order)g(\(assuming)e(it)i(is)f(not)g
(already)h(on)g(the)g(list\).)1 4173 y Fh(\(load)59 b(break-trace\))894
b(\045)60 b(loads)e(wrappers)g(&)2094 4293 y(breakpoint)f(function)1
4414 y(\(if)j(\(not)e(member)h('advice)f(wrapper-standard-order\))d
(then)121 4534 y(\(setf)k(wrapper-standard-order)480
4655 y(\(append)f(wrapper-standard-order)d('\(advice\)\)\)\))1
4895 y(\(de)60 b(debug-foo)d(\(\))121 5016 y(\(wrap)181
5136 y('foo)1553 b(\045)60 b(function)e(to)h(wrap)181
5256 y('advice)1373 b(\045)60 b(wrapper)e(type)181 5377
y(`\(lambda)g(\(x\))1075 b(\045)60 b(wrapper)e(body)h(generator)360
5497 y(\(cond)g(\(\(null)f(x\))779 5618 y(\(backtrace\))779
5738 y(\(breakpoint)f("Foo)i(\(x=nil\)"\)\)\))360 5858
y(\(wrapped-function)d(x\)\))p eop
%%Page: 106 114
106 113 bop 118 -18 a Fr(106)417 289 y Fh(nil\)\))1553
b(\045)60 b(don't)e(compile)2270 409 y(\045)i(the)f(wrapper)f(body)118
613 y Fr(The)26 b(abo)o(v)o(e)f(will)g(w)o(ork)h(\002ne)g(as)g(long)f
(as)h(foo)g(is)g(an)g(e)o(xpr)f(which)h(is)f(not)g(used)h(by)g(the)f
(interpreter)h(or)118 733 y(by)32 b(the)g Fq(wrappers)h
Fr(module)e(itself.)52 b(In)32 b(the)g(more)g(general)g(case,)j(the)d
(function)f(deb)n(ug-foo)h(must)118 853 y(ha)n(v)o(e)25
b(three)g(changes:)238 1057 y(1.)49 b(If)25 b(foo)g(is)f(not)g(an)h(e)o
(xpr)l(,)f(then)h(all)f(occurrences)i(of)e(\(wrapped-function)h
Ff(<)i(ar)s(g)t(s)g(>)p Fr(\))e(must)e(be)362 1177 y(replaced)i(by)g
(\(funcall)g('wrapped-function)f Ff(<)j(ar)s(g)t(s)g(>)p
Fr(\).)238 1375 y(2.)49 b(If)28 b(foo)g(is)f(used)h(by)f(the)h(PSL)g
(interpreter)l(,)h(by)e(the)h Fh(wrappers)e Fr(module,)h(or)h(by)g(e)o
(xpression)362 1495 y(in)33 b(the)g(wrapper)h(body)f(then)g(it)g(will)f
(be)i(necessary)f(to)g(kno)n(w)g(when)g(foo)g(is)g(called)g(during)362
1615 y(the)h(e)n(v)n(aluation)f(of)i(foo')-5 b(s)34 b(wrapper)-5
b(.)59 b(This)34 b(will)g(allo)n(w)f(you)h(to)h(bypass)e(e)n(v)n
(aluation)g(of)i(the)362 1736 y(wrapper)l(,)30 b(you)e(can)h(simply)d
(apply)i(the)h(wrapped)f(function.)41 b(Otherwise)28
b(an)h(in\002nite)f(recur)n(-)362 1856 y(sion)f(could)f(result.)38
b(The)28 b(de\002nition)e(belo)n(w)h(uses)g(the)g(\003uid)g(v)n
(ariable)g(\(called)g(a)h(controlling)362 1976 y(v)n(ariable\))c
(in-foo-wrapper?)32 b(to)24 b(achie)n(v)o(e)g(this)g(ef)n(fect.)238
2174 y(3.)49 b(If)31 b(foo)g(is)f(possibly)f(used)i(within)f(the)g
(interpreter)l(,)j(then)d(the)h(wrapper)g(must)f(be)h(compiled.)362
2294 y(This)d(means)h(that)f(if)h(\(not)g(\(interpreti)n(v)o(e-wrapper)
n(-ok?)42 b('foo\)\),)30 b(then)f(the)f(fourth)h(ar)n(gument)362
2414 y(to)24 b(the)h(function)f(wrap)h(must)f(be)h(t,)f(or)h(wrap)g
(will)f(signal)g(an)h(error)-5 b(.)118 2618 y(The)25
b(re)n(vised)f(de\002nition)g(of)h(deb)n(ug-foo)f(follo)n(ws.)118
2923 y Fh(\(fluid)118 b('\(in-foo-wrapper?\)\))295 b(\045)59
b(necessary)f(initializations)f(of)238 3044 y(\(setq)h(in-foo-wrapper?)
f(nil\))357 b(\045)60 b(the)f(controlling)117 b(variable)118
3164 y(\(change)58 b(2\))238 3368 y(\(de)h(debug-foo)f(\(\))357
3488 y(\(wrap)417 3608 y('foo)417 3729 y('advice)417
3849 y(`\(lambda)g(\(x\))596 3969 y(\(cond)h(\(in-foo-wrapper?)1072
b(\045)60 b(change)e(2)1015 4090 y(\(funcall)g('wrapped-function)e
(x\)\))178 b(\045)60 b(change)e(1)955 4210 y(\(t)1015
4331 y(\(prog)g(\(in-foo-wrapper?\))1134 4451 y(\(setq)h
(in-foo-wrapper?)d(t\))1134 4571 y(\(cond)j(\(\(null)f(x\))1553
4692 y(\(backtrace\))1553 4812 y(\(breakpoint)f("Foo)i
(\(x=nil\)"\)\)\))1134 4933 y(\(setq)g(in-foo-wrapper?)d(nil\))1134
5053 y(\(return)1194 5173 y(\(funcall)i('wrapped-function)e(x\))j(\045)
h(change)e(1)1134 5294 y(\)\)\)\))417 5414 y(\(not)h
(\(interpretive-wrapper-ok?)54 b('foo\)\)\)\))237 b(\045)60
b(change)e(3)118 5618 y Fr(The)21 b(function)f(break-on-condition)f
(will)h(cause)h(entry)g(into)f(a)h(continuable)f(break)h(loop)f(just)g
(before)118 5738 y(the)h(function)g(fn)g(is)g(applied)g(if)g(the)g
(result)g(of)g(e)n(v)n(aluating)f(the)h(form)g(bound)g(to)g(bool-e)o
(xpr)f(is)h(non-nil.)118 5858 y(A)k(sample)f(call)h(might)e(be)i
(\(break-on-condition)f('foo)h('\(eq)g(x)g(2\)\).)p eop
%%Page: 107 115
107 114 bop -118 -18 a Fg(8.3.)55 b(V)-13 b(ARIABLES)26
b(AND)e(BINDINGS)1903 b Fr(107)-118 289 y Fh(\(setf)59
b(in-wrapper?)e(nil\))-118 409 y(\(fluid)h('\(in-wrapper?\)\))-118
650 y(\(de)h(break-on-condition)d(\(fn)j(bool-expr\))121
770 y(\045)h(First,)e(get)h(the)g(parameter-list)e(of)i(the)g
(function.)1 891 y(\(let)g(\(\(parameter-list)e(\(function-lambda-list)
e(fn\)\)\))121 1011 y(\(wrap)181 1131 y(fn)181 1252 y('advice)181
1372 y(`\(lambda)j(,parameter-list)360 1493 y(\(cond)h(\(in-wrapper?)
838 1613 y(\(funcall)f('wrapped-function)e(,@parameter-list\)\))719
1733 y(\(t)779 1854 y(\(prog)i(\(in-wrapper?\))898 1974
y(\(setq)h(in-wrapper?)e(t\))898 2094 y(\(cond)i(\(,bool-expr)1317
2215 y(\(breakpoint)e("In)i(\045p,)g(condition)f(\045p=\045p")1436
2335 y(',fn)119 b(',bool-expr)57 b(,bool-expr\)\)\))1317
2456 y(\(setq)h(in-wrapper?)f(nil\))1317 2576 y(\(return)1376
2696 y(\(funcall)h('wrapped-function)1914 2817 y(,@parameter-list\)\))
898 2937 y(\)\)\)\))181 3057 y(\(not)h(\(interpretive-wrapper-ok?)54
b(fn\)\))181 3178 y(\))61 3298 y(\)\))-118 4327 y Ft(8.3)143
b(V)-13 b(ariables)33 b(and)i(Bindings)-118 4775 y Fr(V)-11
b(ariables)31 b(in)f(PSL)i(are)g(ids,)g(and)f(associated)f(v)n(alues)g
(are)i(usually)e(stored)h(in)f(and)h(retrie)n(v)o(ed)g(from)-118
4895 y(the)i(v)n(alue)h(cell)f(of)h(this)f(id.)57 b(If)34
b(v)n(ariables)f(appear)h(as)g(parameters)g(in)g(lambda)f(e)o
(xpressions)f(or)i(in)-118 5016 y(prog')-5 b(s,)28 b(the)h(contents)e
(of)i(the)f(v)n(alue)g(cell)g(are)h(sa)n(v)o(ed)f(on)g(a)h(binding)e
(stack.)41 b(A)29 b(ne)n(w)f(v)n(alue)g(or)g(nil)g(is)-118
5136 y(stored)h(in)g(the)g(v)n(alue)g(cell)g(and)g(the)g(computation)f
(proceeds.)45 b(On)29 b(e)o(xit)f(from)h(the)g(lambda)g(or)h(prog)-118
5256 y(the)25 b(old)f(v)n(alue)h(is)g(restored.)31 b(This)25
b(is)f(called)h(the)g(\224shallo)n(w)f(binding\224)g(model)h(of)g(LISP)
-11 b(.)26 b(It)f(is)g(chosen)-118 5377 y(to)34 b(permit)g(compiled)f
(code)h(to)g(do)h(binding)d(ef)n(\002ciently)-6 b(.)59
b(F)o(or)34 b(e)n(v)o(en)g(more)g(ef)n(\002cienc)o(y)-6
b(,)36 b(compiled)-118 5497 y(code)22 b(may)g(eliminate)e(the)i(v)n
(ariable)g(names)f(and)h(simply)f(k)o(eep)h(v)n(alues)f(in)g(re)o
(gisters)g(or)h(a)h(stack.)29 b(The)-118 5618 y(scope)j(of)h(a)f(v)n
(ariable)g(is)g(the)h(range)f(o)o(v)o(er)g(which)g(the)g(v)n(ariable)g
(has)g(a)h(de\002ned)g(v)n(alue.)53 b(There)33 b(are)-118
5738 y(three)25 b(dif)n(ferent)f(binding)g(mechanisms)f(in)i(PSL.)p
eop
%%Page: 108 116
108 115 bop 118 -18 a Fr(108)168 273 y(Local)25 b(Binding)143
b(Only)32 b(compiled)f(functions)g(bind)h(v)n(ariables)g(locally)-6
b(.)53 b(Local)32 b(v)n(ariables)885 394 y(occur)39 b(as)f(formal)h
(parameters)f(in)g(lambda)g(e)o(xpressions)f(and)i(as)g(prog)885
514 y(form)g(v)n(ariables.)74 b(The)40 b(binding)e(occurs)h(as)h(a)g
(lambda)f(e)o(xpression)f(is)885 634 y(e)n(v)n(aluated)f(or)h(as)g(a)g
(prog)g(form)g(is)f(e)o(x)o(ecuted.)70 b(The)38 b(scope)g(of)g(a)g
(local)885 755 y(v)n(ariable)24 b(is)g(the)h(body)f(of)h(the)g
(function)f(in)g(which)h(it)f(is)g(de\002ned.)168 875
y(Fluid)g(Binding)160 b(Fluid)32 b(v)n(ariables)g(are)i(global)e(in)g
(scope)h(b)n(ut)f(may)g(occur)i(as)e(formal)h(pa-)885
996 y(rameters)27 b(or)g(prog)g(form)g(v)n(ariables.)37
b(In)27 b(interpreted)g(functions,)g(all)g(for)n(-)885
1116 y(mal)35 b(parameters)g(and)g(local)h(v)n(ariables)e(are)i
(considered)f(to)g(ha)n(v)o(e)g(\003uid)885 1236 y(binding)21
b(until)h(changed)g(to)h(local)f(binding)f(by)i(compilation.)28
b(A)23 b(v)n(ariable)885 1357 y(can)i(be)h(treated)g(as)f(a)h(\003uid)f
(only)g(by)g(declaration.)32 b(If)26 b(\003uid)f(v)n(ariables)g(are)885
1477 y(used)j(as)h(parameters)f(or)h(locals)f(the)o(y)g(are)h(rebound)f
(in)g(such)g(a)h(w)o(ay)g(that)885 1598 y(the)23 b(pre)n(vious)e
(binding)h(may)g(be)h(restored.)31 b(All)22 b(references)i(to)f
(\003uid)g(v)n(ari-)885 1718 y(ables)30 b(are)h(to)e(the)i(currently)e
(acti)n(v)o(e)h(binding.)45 b(Access)31 b(to)e(the)h(v)n(alues)g(is)885
1838 y(by)24 b(name,)h(going)f(to)g(the)h(v)n(alue)f(cell.)168
1959 y(Global)g(Binding)99 b(In)39 b(theory)g(global)f(v)n(ariables)g
(may)h(ne)n(v)o(er)f(be)i(used)e(as)h(parameters)h(in)885
2079 y(lambda)34 b(e)o(xpressions)e(or)j(as)g(prog)f(v)n(ariables.)59
b(This)33 b(restriction)h(is)g(not)885 2199 y(enforced)29
b(in)f(PSL.)i(Y)-11 b(ou)28 b(are)i(encouraged)f(not)f(to)g(declare)i
(an)e(identi\002er)885 2320 y(global)c(if)h(it)g(is)g(used)f(as)i(a)f
(parameter)h(in)e(a)i(lambda)f(e)o(xpression)e(or)j(prog.)885
2440 y(F)o(or)k(more)f(information)g(see)h(the)g(Section)g(Fluid)f(and)
h(Global)f(Declara-)885 2561 y(tions,)23 b(Chapter)j(19.)118
2996 y Fk(8.3.1)119 b(Binding)31 b(T)-9 b(ype)30 b(Declaration)118
3455 y Fq(\(\003uid)c(IDLIST)-7 b(:id-list\):)31 b(nil)2301
b Fi(e)n(xpr)141 3576 y Fr(The)23 b(ids)g(in)f(IDLIST)i(are)g(declared)
f(as)h(\003uid)e(type)h(v)n(ariables.)30 b(An)22 b(id)h(which)g(has)g
(not)118 3696 y(been)31 b(pre)n(viously)e(declared)i(is)g(initialized)e
(to)i(nil.)48 b(V)-11 b(ariables)30 b(in)h(IDLIST)g(already)118
3817 y(declared)f(\003uid)f(are)h(ignored.)44 b(It)30
b(is)f(an)g(error)h(to)f(attempt)g(to)f(change)i(the)f(type)g(of)h(a)
118 3937 y(v)n(ariable)24 b(from)h(global)f(to)g(\003uid.)118
4113 y Fh(*****)59 b(ID)g(cannot)g(be)g(changed)f(to)h(FLUID)118
4477 y Fq(\(global)24 b(IDLIST)-7 b(:id-list\):)32 b(nil)2234
b Fi(e)n(xpr)143 4598 y Fr(The)25 b(ids)g(of)g(IDLIST)g(are)h(declared)
f(global)f(type)h(v)n(ariables.)31 b(If)25 b(an)g(id)g(has)g(not)f
(been)118 4718 y(pre)n(viously)35 b(declared,)40 b(it)c(is)g
(initialized)f(to)i(nil.)65 b(V)-11 b(ariables)36 b(which)h(ha)n(v)o(e)
f(already)118 4838 y(been)d(declared)g(global)f(are)h(ignored.)53
b(Attempting)31 b(to)h(change)h(the)f(type)g(of)h(an)g(id)118
4959 y(from)25 b(\003uid)f(to)h(global)f(will)g(result)g(in)g(an)h
(error)-5 b(.)118 5200 y Fh(*****)59 b(ID)g(cannot)g(be)g(changed)f(to)
h(GLOBAL)118 5588 y Fq(\(un\003uid)27 b(IDLIST)-7 b(:id-list\):)31
b(nil)2190 b Fi(e)n(xpr)149 5708 y Fr(The)31 b(v)n(ariables)e(in)i
(IDLIST)g(which)f(ha)n(v)o(e)h(been)f(declared)i(as)e(\003uid)h(are)g
(no)g(longer)118 5828 y(considered)25 b(\003uid.)30 b(Other)25
b(v)n(ariables)f(are)h(ignored.)p eop
%%Page: 109 117
109 116 bop -118 -18 a Fg(8.4.)55 b(USER)26 b(BINDING)f(FUNCTIONS)1906
b Fr(109)-118 289 y Fk(8.3.2)119 b(Binding)31 b(T)-9
b(ype)30 b(Pr)n(edicates)-118 695 y Fq(\(\003uidp)c(U:id\):)32
b(boolean)2443 b Fi(e)n(xpr)-93 815 y Fr(If)25 b(U)g(has)g(been)g
(declared)g(\003uid)g(then)f(t)h(is)f(returned,)h(otherwise)f(nil)g(is)
g(returned.)-118 1177 y Fq(\(globalp)h(U:id\):)31 b(boolean)2377
b Fi(e)n(xpr)-93 1297 y Fr(If)25 b(U)g(has)g(been)g(declared)g(global)f
(then)g(t)h(is)f(returned,)h(otherwise)f(nil)g(is)h(returned.)-118
1666 y Fq(\(unboundp)j(U:id\):)j(boolean)2255 b Fi(e)n(xpr)-93
1786 y Fr(If)25 b(U)g(does)f(not)h(ha)n(v)o(e)f(a)h(v)n(alue)f(then)h
(t)g(is)f(returned,)h(otherwise)f(nil)g(is)g(returned.)-118
2148 y Ft(8.4)143 b(User)34 b(Binding)h(Functions)-118
2372 y Fr(The)g(follo)n(wing)f(functions)h(are)h(a)n(v)n(ailable)f(to)g
(b)n(uild)f(one')-5 b(s)35 b(o)n(wn)g(interpreter)h(functions)e(that)h
(use)-118 2492 y(the)23 b(b)n(uilt-in)e(Fluid)i(binding)e(mechanism,)h
(and)h(interact)g(well)g(with)f(the)h(automatic)f(unbinding)f(that)-118
2613 y(tak)o(es)k(place)g(during)f(Thro)n(w)g(and)g(Error)i(calls.)-118
2952 y Fq(\(unbindn)h(N:integer\):)32 b(Unde\002ned)2014
b Fi(e)n(xpr)-83 3072 y Fr(Used)36 b(in)f(user)n(-de\002ned)h
(interpreter)f(functions)f(\(lik)o(e)h(prog\))h(to)f(restore)g(pre)n
(vious)-118 3192 y(bindings)23 b(to)h(the)h(last)f(N)h(v)n(alues)f
(bound.)-118 3561 y Fq(\(lbind1)h(IDname:id)h(V)-13 b(ALUET)n
(OBIND:any\):)32 b(Unde\002ned)1107 b Fi(e)n(xpr)-92
3682 y Fr(Support)25 b(for)i(lambda-lik)o(e)e(binding.)32
b(The)26 b(current)g(v)n(alue)g(of)g(IDname)f(is)h(sa)n(v)o(ed)f(on)
-118 3802 y(the)g(binding)e(stack;)h(the)h(v)n(alue)f(of)h(V)-13
b(ALUET)n(OBIND)24 b(is)h(then)f(bound)g(to)h(IDname.)-118
4171 y Fq(\(pbind1)h(IDname:id\):)32 b(Unde\002ned)2019
b Fi(e)n(xpr)-86 4291 y Fr(Support)33 b(for)f(prog.)54
b(Binds)32 b(nil)g(to)g(IDname)g(after)h(sa)n(ving)f(v)n(alue)g(on)g
(the)g(binding)-118 4412 y(stack.)e(Essentially)24 b(\(lbind1)f(IDname)
i(nil\).)p eop
%%Page: 110 118
110 117 bop 118 -18 a Fr(110)p eop
%%Page: 111 119
111 118 bop -118 953 a Fn(The)51 b(Inter)n(pr)l(eter)-118
1469 y Ft(9.1)143 b(Ev)o(aluator)33 b(Functions)h(Ev)o(al)g(and)h(A)l
(pply)-118 1693 y Fr(The)21 b(e)n(v)n(aluator)f(is)g(responsible)g(for)
h(the)g(e)o(x)o(ecution)e(of)i(PSL)h(programs.)29 b(The)21
b(e)n(v)n(aluator)f(is)g(a)n(v)n(ailable)-118 1814 y(to)32
b(the)g(user)g(through)f(the)h(function)g(e)n(v)n(al.)51
b(This)32 b(function)f(gi)n(v)o(es)g(the)h(operational)f(semantics,)i
(or)-118 1934 y(meaning,)c(to)g(the)g(programming)f(constructs)g(found)
h(in)g(PSL.)h(W)l(ith)f(e)n(v)n(al)f(we)i(ha)n(v)o(e)f(the)g(ability)f
(to)-118 2055 y(e)n(v)n(aluate)d(constructed)g(e)o(xpressions.)33
b(The)26 b(ability)f(to)h(e)n(v)n(aluate)f(lists)g(which)g(ha)n(v)o(e)h
(the)g(appearance)-118 2175 y(of)f(e)o(xpressions)e(highlights)g(the)h
(program)h(data)g(duality)e(of)i(LISP)-11 b(.)-118 2296
y(Apply)29 b(represents)i(the)f(piece)g(of)g(the)h(e)n(v)n(aluator)e
(which)g(is)h(responsible)f(for)i(in)l(v)n(oking)d(functions.)-118
2416 y(An)o(y)c(list)h(which)g(is)g(not)g(quoted)f(is)h(tak)o(en)h(to)f
(be)g(a)h(function)f(application)f(by)h(the)g(e)n(v)n(aluator)-5
b(.)31 b(Apply)-118 2537 y(pro)o(vides)23 b(the)i(user)g(with)f(a)h
(tool)f(to)g(e)o(xplicity)g(in)l(v)n(ok)o(e)g(functions.)-118
2658 y(In)31 b(e)n(v)n(al,)g(apply)f(and)h(the)g(support)e(functions)h
(which)h(follo)n(w)-6 b(,)30 b(errors)h(are)h(continuable.)47
b(When)31 b(an)-118 2778 y(error)d(occurs)g(the)f(user)h(is)f
(permitted)g(to)g(correct)h(the)g(of)n(fending)e(e)o(xpression)h(or)g
(perhaps)h(de\002ne)g(a)-118 2898 y(missing)c(function)g(\(see)i
(Chapter)g(16)f(for)h(more)g(information\).)31 b(If)26
b(the)f(number)g(of)h(ar)n(guments)f(to)g(a)-118 3019
y(function)c(is)h(not)f(equal)h(to)g(the)g(number)g(of)g(parameters)g
(speci\002ed)h(by)f(the)g(de\002nition)f(then)h(the)g(error)-118
3251 y Fh(*****)59 b(Argument)f(number)g(mismatch)-118
3484 y Fr(occurs.)75 b(If)40 b(there)g(is)g(an)f(id)h(in)f(the)g
(function)g(position)f(of)i(a)g(form,)j(and)d(there)g(is)f(no)g
(function)-118 3604 y(de\002nition)24 b(associated)g(with)g(it,)g(an)h
(error)h(occurs)f(and)f(the)h(message)-118 3837 y Fh(*****)59
b(`NAME')f(is)h(an)h(undefined)d(function)-118 4069 y
Fr(is)29 b(printed.)43 b(If)30 b(the)f(function)f(position)g(is)h(not)f
(occupied)i(by)f(an)g(id,)h(lambda)f(e)o(xpression)f(or)h(code-)-118
4189 y(pointer)24 b(then)g(it)h(is)f(an)h(error)h(and)e(one)h(of)g(the)
g(follo)n(wing)e(is)h(printed.)-118 4422 y Fh(*****)59
b(Ill-formed)e(expression)h(in)h(EVAL)g(`FORM')-118 4654
y(*****)g(Ill-formed)e(expression)h(`FORM')-118 4886
y Fr(The)25 b(\002rst)g(message)f(is)g(displayed)g(when)h(the)g(error)g
(is)f(detected)h(within)f(e)n(v)n(al.)-118 5226 y Fq(\(e)o(v)o(al)g
(U:f)n(orm\):)31 b(any)2576 b Fi(e)n(xpr)-92 5346 y Fr(The)26
b(v)n(alue)f(of)h(the)f(form)h(U)g(is)f(computed.)33
b(Since)26 b(e)n(v)n(al)f(is)g(a)h(function)f(of)h(type)f(e)o(xpr)-118
5467 y(it)e(will)g(recei)n(v)o(e)g(its)g(ar)n(gument)g(already)h(e)n(v)
n(aluated.)29 b(Since)24 b(it)f(will)f(then)i(e)n(v)n(aluate)e(the)-118
5587 y(ar)n(gument)33 b(itself,)h(it)e(may)h(seem)g(as)g(though)f(the)h
(e)n(v)n(aluation)e(is)i(done)g(twice.)55 b(The)-118
5708 y(ar)n(gument)24 b(U)h(cannot)g(access)g(local)g(v)n(ariables.)
-118 5858 y(As)f(a)i(basis)e(for)h(discussion,)e(an)i(approximation)e
(to)h(the)h(actual)g(de\002nition)f(of)g(e)n(v)n(al)g(is)h(gi)n(v)o
(en.)1579 6066 y(111)p eop
%%Page: 112 120
112 119 bop 118 -18 a Fr(112)357 289 y Fh(\(de)59 b(eval)g(\(e\))477
409 y(\(cond)f(\(\(is-constant)f(e\))j(\(denote)e(e\)\))835
529 y(\(\(idp)h(e\))g(\(valuecell)f(e\)\))835 650 y(\(t)i(\(let)f
(\(\(fun)f(\(first)h(e\)\))1373 770 y(\(args)g(\(rest)g(e\)\)\))1134
891 y(\(cond)g(\(\(and)g(\(idp)f(fun\))1852 1011 y(\(not)g(\(funboundp)
g(fun\)\)\))1553 1131 y(\(selectq)g(\(first)g(\(getd)h(fun\)\))1672
1252 y(\(expr)g(\(apply)f(fun)h(\(evlis)g(args\)\)\))1672
1372 y(\(fexpr)g(\(apply)f(fun)h(\(list)g(args\)\)\))1672
1493 y(\(nexpr)1792 1613 y(\(apply)f(fun)2210 1733 y(\(list)h(\(evlis)
118 b(args\)\)\)\))1672 1854 y(\(macro)1792 1974 y(\(eval)58
b(\(apply)h(fun)g(\(list)g(e\)\)\)\)\)\))1493 2094 y(\(\(or)g(\(codep)f
(fun\))1792 2215 y(\(is-lambda)f(fun\)\))1553 2335 y(\(apply)h(fun)h
(\(evlis)g(args\)\)\))1493 2456 y(\(t)g(\(error\)\)\)\)\)\)\))118
2674 y Fr(Ev)n(al)31 b(\002rst)h(determines)g(if)g(its)f(ar)n(gument)g
(is)h(a)g(constant.)52 b(Examples)31 b(of)h(constants)f(are)h(numbers,)
118 2795 y(strings,)21 b(v)o(ectors)f(and)h(quoted)f(e)o(xpressions.)28
b(F)o(or)21 b(the)g(most)f(part,)i(the)f(function)f(denote)h(will)f
(simply)118 2915 y(return)29 b(its)f(ar)n(gument.)43
b(Ho)n(we)n(v)o(er)l(,)29 b(if)g(the)g(constant)f(is)g(a)h(quoted)g(e)o
(xpression)e(then)i(the)g(e)o(xpression)118 3035 y(is)24
b(returned)h(as)g(v)n(alue.)357 3254 y Fh(1)60 b(lisp>)e(\(eval)h
("STRING"\))357 3374 y("STRING")357 3495 y(2)h(lisp>)e(\(eval)h
(\(mkquote)f('\(one\)\)\))357 3615 y(\(ONE\))118 3834
y Fr(An)36 b(identi\002er)g(is)g(considered)f(a)i(v)n(ariable.)64
b(In)36 b(such)g(a)g(case,)j(e)n(v)n(al)d(returns)f(the)h(contents)g
(of)g(the)118 3954 y(v)n(alue)g(cell)g(of)g(the)g(identi\002er)-5
b(.)64 b(Of)37 b(course)f(things)f(are)i(not)e(quite)h(all)g(that)g
(simple.)63 b(This)36 b(raises)118 4075 y(a)k(conceptual)e(issue)h
(about)g(when)g(to)g(\002nd)g(the)g(v)n(alues.)73 b(The)39
b(issue)f(is)h(one)g(of)h(scoping)e(rules.)118 4195 y(Scoping)25
b(rules)g(come)h(into)e(play)h(when)h(functions)e(are)i(de\002ned.)33
b(In)26 b(particular)l(,)f(this)g(in)l(v)n(olv)o(es)f(free)118
4315 y(v)n(ariables)32 b(\(those)g(v)n(ariables)g(which)g(are)h(not)f
(parameters)h(of)g(the)f(de\002nition\).)54 b(One)32
b(approach)h(is)118 4436 y(static)24 b(scoping.)29 b(This)24
b(strate)o(gy)f(locates)h(the)g(v)n(alues)f(of)h(free)i(v)n(ariables)d
(at)h(the)g(time)g(the)g(function)f(is)118 4556 y(de\002ned.)45
b(PSL)30 b(uses)f(a)h(second)f(approach)h(called)g(dynamic)e(scoping.)
44 b(Using)28 b(this)h(approach,)i(the)118 4677 y(v)n(alues)24
b(of)h(free)h(v)n(ariables)e(are)h(not)g(determined)f(until)f(the)i
(function)f(is)g(applied.)357 4895 y Fh(1)60 b(lisp>)e(\(setq)h(number)
g(0\))357 5016 y(0)357 5136 y(2)h(lisp>)e(\(de)i(bar)f(\(\))g(\(foo\))g
(\(add1)f(number\)\))357 5256 y(BAR)357 5377 y(3)i(lisp>)e(\(de)i(foo)f
(\(\))g(\(setq)g(number)f(1\)\))357 5497 y(FOO)357 5618
y(\045)i(When)f(bar)g(was)g(defined)f(the)h(value)g(of)g(number)g(was)g
(0,)357 5738 y(\045)h(during)e(the)h(evaluation)357 5858
y(\045)h(of)f(bar)g(the)g(application)f(of)h(foo)g(changed)f(the)h
(value)p eop
%%Page: 113 121
113 120 bop -118 -18 a Fg(9.1.)55 b(EV)-13 b(ALU)l(A)i(T)n(OR)24
b(FUNCTIONS)i(EV)-13 b(AL)24 b(AND)h(APPL)-10 b(Y)1179
b Fr(113)121 289 y Fh(\045)60 b(of)f(number)f(to)i(1.)f(If)121
409 y(\045)h(static)e(scoping)g(were)h(being)g(used)g(then)f(the)i
(result)121 529 y(\045)g(would)e(be)i(1)f(instead)f(of)i(2.)121
650 y(4)g(lisp>)e(\(bar\))121 770 y(2)-118 1093 y Fr(The)26
b(PSL)h(en)l(vironment)d(\(the)i(v)n(alues)g(associated)f(with)g(v)n
(ariables\))h(will)f(typically)g(change)h(during)-118
1213 y(e)n(v)n(aluation.)38 b(When)27 b(a)h(function)f(is)g(applied,)h
(the)g(v)n(ariables)f(speci\002ed)h(by)f(its)g(de\002nition)g(are)h
(asso-)-118 1334 y(ciated)i(with)f(the)h(ar)n(guments)f(of)h(the)g
(application.)45 b(As)29 b(a)i(result,)f(the)g(v)n(alue)f(of)h(each)h
(v)n(ariable)e(has)-118 1454 y(changed.)61 b(As)35 b(noted)f(abo)o(v)o
(e,)j(the)e(v)n(alue)f(of)h(a)h(v)n(ariable)e(is)h(found)f(in)h(its)f
(v)n(alue)g(cell.)62 b(Ho)n(we)n(v)o(er)l(,)-118 1574
y(the)29 b(de\002nition)g(and)g(access)h(of)g(v)n(alues)f(depends)g
(upon)g(the)g(binding)f(strate)o(gy)h(being)g(used)g(by)g(the)-118
1695 y(implementation.)e(T)-8 b(w)o(o)22 b(common)f(techniques)h(are)h
(shallo)n(w)e(binding)f(\(used)j(in)e(the)i(current)f(imple-)-118
1815 y(mentation)h(of)h(PSL\),)h(and)g(deep)f(binding.)29
b(In)c(a)f(deep)h(bound)f(system)f(the)h(en)l(vironment)f(is)h
(de\002ned)-118 1936 y(by)29 b(a)g(table)g(of)g(names)f(and)h(v)n
(alues.)43 b(Each)29 b(time)f(a)i(v)n(ariable)e(is)h(set)f(to)h(a)g(v)n
(alue,)h(an)f(entry)g(is)f(added)-118 2056 y(to)d(the)g(table.)32
b(T)-8 b(o)25 b(locate)h(the)f(v)n(alue)g(of)g(a)h(v)n(ariable)e(this)h
(table)g(must)f(be)i(searched.)33 b(When)25 b(there)h(are)-118
2176 y(multiple)i(de\002nitions)g(for)i(a)g(gi)n(v)o(en)e(v)n(ariable)h
(within)f(this)h(table,)h(the)g(con)l(v)o(ention)e(is)h(adopted)g(that)
-118 2297 y(it)c(is)f(al)o(w)o(ays)h(the)g(latest)g(v)n(alue)f(which)h
(is)g(retrie)n(v)o(ed.)31 b(W)l(ith)25 b(this)f(strate)o(gy)g(we)h(can)
h(easily)f(restore)g(an)-118 2417 y(old)32 b(v)n(alue,)h(by)f(simply)f
(remo)o(ving)f(the)i(current)h(v)n(alue)f(from)g(the)g(table.)52
b(W)l(ith)32 b(shallo)n(w)f(binding,)-118 2538 y(the)24
b(v)n(alue)f(of)i(a)f(v)n(ariable)g(is)f(positioned)g(with)g(the)h(id)g
(which)f(represents)h(the)g(v)n(ariable.)30 b(In)25 b(this)e(case)-118
2658 y(there)32 b(is)g(no)f(need)h(to)g(search)g(for)g(a)h(v)n(alue.)51
b(It)32 b(is)f(kno)n(wn)g(to)h(al)o(w)o(ays)f(be)h(in)g(a)g(\002x)o(ed)
g(location,)g(the)-118 2778 y(v)n(alue)24 b(cell)g(of)h(the)f(id.)30
b(This)24 b(second)g(technique)g(mak)o(es)g(\002nding)g(v)n(alues)f
(much)h(more)g(ef)n(\002cient,)h(b)n(ut)-118 2899 y(it)f(is)h(much)f
(more)g(dif)n(\002cult)g(no)n(w)g(to)h(k)o(eep)g(track)g(of)g(pre)n
(vious)e(v)n(alues.)-118 3153 y(If)29 b(the)f(e)o(xpression)f(being)h
(e)n(v)n(aluated)g(is)g(neither)g(a)h(constant)f(or)g(a)h(v)n(ariable)f
(it)g(is)g(assumed)g(to)g(be)h(a)-118 3273 y(function)i(application)h
(form.)53 b(When)32 b(we)g(apply)g(the)g(function)g(de\002nition)f(to)h
(the)g(ar)n(guments)g(we)-118 3394 y(associate)24 b(the)g(parameters)h
(of)f(the)g(de\002nition)g(with)f(the)h(ar)n(guments.)30
b(This)24 b(process)g(of)g(association)-118 3514 y(is)h(called)h
(binding)e(and)h(simulates)f(substitution.)30 b(W)l(ithin)25
b(the)g(ne)n(w)g(en)l(vironment)g(the)g(body)g(of)g(the)-118
3634 y(function)d(is)h(e)n(v)n(aluated.)29 b(Notice)22
b(we)i(do)e(not)h(e)o(xplicitly)e(substitute)g(the)i(v)n(alues)f(for)h
(the)g(v)n(ariables)g(in)-118 3755 y(an)i(e)o(xpression.)121
4091 y Fh(1)60 b(lisp>)e(\(eval)h('\(\(lambda)f(\(this\))g(\(add1)h
(this\)\))f(0\)\))121 4211 y(1)121 4332 y(\045)i(If)f(an)g(expression)f
(is)h(neither)f(a)i(constant)e(or)121 4452 y(\045)i(a)f(variable)f
(then)h(it)g(is)h(assumed)121 4573 y(\045)g(to)f(be)g(a)h(function)e
(application)f(form.)121 4693 y(2)j(lisp>)e(\(eval)h('\(one\)\))121
4813 y(*****)g(`ONE')f(is)i(an)f(undefined)f(function)-118
5136 y Fr(Ev)n(al)34 b(\002rst)g(looks)f(at)i(the)f(function)g
(position,)h(making)e(sure)h(a)h(function)f(de\002nition)f(is)h(a)n(v)n
(ailable.)-118 5256 y(The)28 b(manner)g(in)g(which)g(the)g(function)f
(is)h(applied)g(depends)f(upon)h(the)g(type)g(of)g(the)g(function.)40
b(F)o(or)-118 5377 y(both)26 b(e)o(xprs)g(and)g(ne)o(xprs)g(the)g(ar)n
(guments)g(are)i(e)n(v)n(aluated)d(in)h(a)h(left)g(to)f(right)g(order)g
(by)h(the)f(function)-118 5497 y(e)n(vlis.)37 b(Since)28
b(ne)o(xprs)e(e)o(xpect)h(a)h(single)e(ar)n(gument,)i(the)f(ar)n
(guments)g(are)h(gathered)f(into)f(a)i(list.)37 b(The)-118
5618 y(ar)n(guments)29 b(to)g(an)h(fe)o(xpr)f(are)h(not)f(e)n(v)n
(aluated)f(b)n(ut)h(the)o(y)g(are)h(gathered)f(into)g(a)h(list.)44
b(The)29 b(remaining)-118 5738 y(function)37 b(type)g(to)h(consider)f
(is)g(macro.)70 b(The)38 b(entire)g(function)f(application)f(form)i(is)
f(passed)h(to)-118 5858 y(macros.)30 b(The)25 b(result)f(of)h(applying)
f(the)h(macro)g(is)f(then)g(e)n(v)n(aluated.)p eop
%%Page: 114 122
114 121 bop 118 -18 a Fr(114)118 357 y Fq(\(apply)25
b(FUN:id,)g(function)h(ARGS:any-list\):)31 b(any)1444
b Fi(e)n(xpr)143 478 y Fr(Applies)24 b(the)g(function)g(FUN)h(to)g(the)
f(list)g(of)h(ar)n(guments)f(ARGS.)h(The)g(follo)n(wing)e(is)118
598 y(an)i(approximation)e(of)i(the)g(real)g(code.)357
775 y Fh(\(de)59 b(apply)g(\(fun)g(args\))477 895 y(\(cond)f(\(\(and)h
(\(idp)g(fun\))g(\(not)g(\(funboundp)e(fun\)\)\))895
1016 y(\(if)i(\(fcodep)g(fun\))1015 1136 y(\(codeapply)e
(\(getfcodepointer)f(fun\))j(args\))1015 1256 y(\(lambdaapply)e(\(get)i
(fun)g('*lambdalink\))e(args\)\)\))835 1377 y(\(\(codep)i(fun\))g
(\(codeapply)e(fun)i(args\)\))835 1497 y(\(\(is-lambda)f(fun\))h
(\(lambdaapply)e(fun)i(args\)\))835 1618 y(\(t)h(\(error\)\)\)\))118
1822 y Fr(Apply)28 b(uses)h(the)g(additional)f(functions)g(codeapply)h
(and)g(lambdaapply)f(to)h(actually)f(e)n(v)n(aluate)h(the)118
1942 y(body)f(of)h(the)g(function.)41 b(The)29 b(ar)n(guments)f(in)g
(ARGS)i(are)f(not)g(e)n(v)n(aluated)e(\(for)i(e)o(xample,)g(by)f(a)i
(call)118 2062 y(on)25 b(e)n(vlis\).)31 b(This)24 b(may)h(seem)g(odd)g
(since)g(the)g(type)g(of)h(the)f(function)f(may)h(be)g(e)o(xpr)g(or)g
(ne)o(xpr)-5 b(.)31 b(Apply)118 2183 y(assumes)25 b(that)g(the)g(ar)n
(guments)g(are)h(in)f(the)g(form)h(required)f(for)h(binding)e(to)h(the)
g(formal)g(parameters)118 2303 y(of)39 b(FUN.)g(Getcodepointer)f
(returns)g(the)h(code-pointer)f(associated)h(with)f(an)h(id.)72
b(The)38 b(body)g(of)118 2424 y(a)g(function)g(which)f(is)h(not)f
(compiled)g(is)h(found)f(on)h(the)g(property)f(list)g(of)h(its)g(name,)
j(under)d(the)118 2544 y(*lambdalink)23 b(indicator)-5
b(.)357 2773 y Fh(1)60 b(lisp>)e(\(setq)h(fn)g('add1\))357
2894 y(ADD1)357 3014 y(2)h(lisp>)e(\(de)i(fn)f(\(a\))g(\(sub1)g(a\)\))
357 3134 y(FN)357 3255 y(3)h(lisp>)e(\(apply)h(fn)g('\(1\)\))357
3375 y(2)357 3496 y(4)h(lisp>)e(\(apply)h('fn)g('\(1\)\))357
3616 y(0)357 3736 y(5)h(lisp>)e(\(apply)h('cons)g('\(\(add1)f(2\))h
(3\)\))357 3857 y(\(\(add1)g(2\))g(.)h(3\))298 b(\045)60
b(NOT)f(\(3)g(.)g(3\))118 4305 y Fq(\(funcall)26 b(FUN:id,)e(function)j
([ARGUMENT)-7 b(:any]\):)31 b(any)1100 b Fi(macr)l(o)149
4425 y Fr(Equi)n(v)n(alent)28 b(to)i(\(apply)g(FUN)h(\(list)f
(ARGUMENT1)g(...)48 b(ARGUMENTN\)\).)30 b(This)118 4545
y(function)24 b(is)g(de\002ned)i(in)e(the)h(USEFUL)g(module.)118
4895 y Ft(9.2)143 b(Support)34 b(Functions)g(f)l(or)h(Ev)o(al)g(and)g
(A)l(pply)118 5338 y Fq(\(e)o(vlis)24 b(U:any-list\):)31
b(any-list)2289 b Fi(e)n(xpr)143 5458 y Fr(Evlis)24 b(e)n(v)n(aluates)f
(each)j(element)e(of)h(U)g(The)g(list)e(of)i(results)f(is)h(returned.)
357 5618 y Fh(\(de)59 b(evlis)g(\(p\))477 5738 y(\(if)g(\(not)g
(\(pairp)f(p\)\))596 5858 y(\(\))p eop
%%Page: 115 123
115 122 bop -118 -18 a Fg(9.3.)55 b(SPECIAL)26 b(EV)-13
b(ALU)l(A)i(T)n(OR)24 b(FUNCTIONS,)i(Q)o(UO)l(TE)f(AND)f(FUNCTION)447
b Fr(115)360 289 y Fh(\(cons)59 b(\(eval)f(\(first)h(u\)\))719
409 y(\(evlis)f(\(rest)h(u\)\)\)\)\))-118 848 y Fq(\(idapply)25
b(FN:id)g(U:any-list\):)31 b(any)2042 b Fi(e)n(xpr)-98
968 y Fr(Applies)20 b(the)g(function)f(referenced)j(by)e(FN)g(to)g(the)
g(ar)n(gument)g(list)g(U.)g(An)g(equi)n(v)n(alent)-118
1089 y(form)26 b(w)o(ould)f(be)h(\(apply)g(FN)h(U\).)f(The)g(use)g(of)h
(idapply)e(is)g(more)h(ef)n(\002cient.)35 b(If)27 b(FN)f(is)-118
1209 y(not)e(an)h(id)f(it)h(is)f(an)h(error)h(and)e(the)h(message)121
1409 y Fh(*****)59 b(Ill-formed)e(function)h(expression)-118
1629 y Fr(is)24 b(printed.)-118 1971 y Fq(\(codeapply)i
(FN:code-pointer)g(U:any-list\):)31 b(any)1478 b Fi(e)n(xpr)-84
2092 y Fr(The)34 b(body)f(of)i(compiled)e(function)g(referenced)i(by)f
(FN)g(is)g(e)o(x)o(ecuted)f(with)g(ar)n(gu-)-118 2212
y(ments)24 b(in)g(U.)-118 2564 y Fq(\(codee)o(v)o(alapply)h
(FN:code-pointer)h(U:any-list\):)31 b(any)1309 b Fi(e)n(xpr)-89
2684 y Fr(\(codee)n(v)n(alapply)28 b(FN)h(U\))g(is)g(essentially)f
(\(codeapply)g(FN)i(\(e)n(vlis)e(U\)\).)h(The)g(dif)n(fer)n(-)-118
2805 y(ence)c(between)g(the)g(tw)o(o)f(is)h(that)f(the)h(\002rst)f(is)h
(more)f(ef)n(\002cient)h(than)g(the)f(second.)-118 3157
y Fq(\(e)o(vpr)n(ogn)h(U:f)n(orm-list\):)31 b(any)2239
b Fi(e)n(xpr)-80 3277 y Fr(The)38 b(forms)g(in)f(U)h(are)h(e)n(v)n
(aluated)e(in)g(a)i(left)f(to)f(right)h(order)-5 b(.)70
b(The)38 b(v)n(alue)f(of)h(the)-118 3397 y(last)28 b(is)g(returned.)42
b(This)28 b(function)g(is)g(used)g(in)g(situations)f(where)i(an)g
(application)e(of)-118 3518 y(progn)f(is)f(implied.)34
b(F)o(or)26 b(e)o(xample,)f(the)h(de\002nition)g(of)g(man)o(y)f
(functions)g(consists)g(of)-118 3638 y(a)d(sequence)g(of)f(e)o
(xpressions.)28 b(Each)22 b(e)o(xpression)f(is)g(e)n(v)n(aluated)f(and)
i(the)f(v)n(alue)g(of)h(the)-118 3759 y(last)i(is)h(returned,)f
(without)g(ha)n(ving)g(to)g(wrap)h(the)g(de\002nition)f(inside)g(a)h
(progn.)121 3955 y Fh(\(de)59 b(evprogn)f(\(u\))241 4075
y(\(if)h(\(pairp)f(u\))360 4196 y(\(progn)h(\(while)f(\(pairp)g(\(cdr)h
(u\)\))898 4316 y(\(eval)g(\(car)g(u\)\))898 4436 y(\(setq)g(u)g(\(cdr)
g(u\)\)\))779 4557 y(\(eval)f(\(car)h(u\)\)\))360 4677
y(nil\)\))-118 5039 y Ft(9.3)143 b(Special)34 b(Ev)o(aluator)f
(Functions,)h(Quote)g(and)h(Function)-118 5488 y Fq(\(quote)26
b(U:any\):)31 b(any)2532 b Fi(fe)n(xpr)-88 5608 y Fr(Quote)30
b(is)g(used)g(to)g(distinguish)e(a)i(constant)g(s-e)o(xpression)e(from)
i(one)h(which)f(is)f(to)-118 5728 y(be)38 b(e)n(v)n(aluated.)70
b(The)38 b(return)g(v)n(alue)f(is)h(U.)g(Since)g(quote)g(is)g(an)g(fe)o
(xpr)g(U)g(is)g(ne)n(v)o(er)-118 5849 y(e)n(v)n(aluated.)p
eop
%%Page: 116 124
116 123 bop 118 -18 a Fr(116)118 357 y Fq(\(mkquote)27
b(U:any\):)k(list)2448 b Fi(e)n(xpr)143 478 y Fr(Returns)25
b(the)g(result)f(of)h(\(list)f('quote)g(U\).)118 847
y Fq(\(function)i(FN:function\):)33 b(function)1958 b
Fi(fe)n(xpr)154 967 y Fr(Function)34 b(is)h(similar)f(to)h(quote,)j(e)o
(xcept)d(that)g(its)f(ar)n(gument)h(is)g(a)h(reference)h(to)e(a)118
1087 y(function.)60 b(FN)36 b(is)e(either)h(the)g(name)f(of)i(a)f
(function,)h(a)g(lambda)e(e)o(xpression,)i(or)f(a)118
1208 y(code-pointer)-5 b(.)41 b(It)28 b(is)g(not)g(correct)h(to)f(use)h
(quote)f(to)g(suppress)g(the)g(e)n(v)n(aluation)f(of)h(an)118
1328 y(e)o(xpression)h(which)g(represents)h(a)h(function.)45
b(The)30 b(misuse)f(of)h(function)f(can)i(ef)n(fect)118
1449 y(the)22 b(w)o(ay)g(in)f(which)h(code)g(is)g(compiled,)f(in)h
(particular)l(,)g(application)f(of)h(the)f(mapping)118
1569 y(functions)j(\(see)h(Chapter)g(???)32 b(for)25
b(more)g(information\).)118 1667 y(Use)34 b(of)g(the)g(read)g(macro)g
(#')g(will)f(result)g(in)g(an)h(application)f(of)h(function.)57
b(F)o(or)34 b(e)o(xample,)h(if)f(the)118 1787 y(reader)f(encounters)f
(#'fun)g(the)h(e)o(xpression)e(\(FUNCTION)i(FUN\))f(will)g(be)g
(returned.)53 b(This)32 b(read)118 1907 y(macro)25 b(is)f(part)h(of)g
(the)g Fh(useful)e Fr(package.)118 2246 y Ft(9.4)143
b(Support)34 b(Functions)g(f)l(or)h(Macr)m(o)h(Ev)o(aluation)118
2688 y Fq(\(expand)26 b(L:list)f(FN:function\):)33 b(list)2002
b Fi(e)n(xpr)148 2808 y Fr(Expand)30 b(is)f(a)i(con)l(v)o(enient)d(w)o
(ay)i(to)g(e)o(xpand)f(a)i(certain)f(type)f(of)i(macro.)46
b(PSL)31 b(sup-)118 2929 y(ports)21 b(functions)f(lik)o(e)h(plus)g
(which)g(accept)h(an)o(y)f(number)g(of)h(ar)n(guments.)29
b(The)21 b(macro)118 3049 y(plus)j(is)g(actually)h(de\002ned)g(in)f
(terms)h(of)g(the)f(binary)h(operator)g(plus2.)k(F)o(or)c(e)o(xample,)
357 3217 y Fh(\(plus)59 b(1)g(2)h(3\))118 3413 y Fr(e)o(xpands)24
b(into)357 3631 y Fh(\(plus2)59 b(1)g(\(plus2)g(2)g(3\)\))118
3849 y Fr(FN)31 b(should)e(be)i(a)g(function)e(which)i(accepts)f(tw)o
(o)g(ar)n(guments,)i(and)e(L)h(should)e(be)h(a)h(list)f(of)g(v)n(alues)
118 3970 y(which)25 b(are)g(acceptable)g(to)g(FN)g(as)g(ar)n(guments.)
357 4188 y Fh(\(de)59 b(expand)g(\(l)g(fn\))477 4308
y(\(cond)f(\(\(not)h(\(pairp)g(l\)\))g(l\))835 4429 y(\(\(not)g
(\(pairp)g(\(cdr)f(l\)\)\))h(\(car)g(l\)\))835 4549 y(\(t)h(\(list)e
(fn)i(\(car)f(l\))g(\(expand)f(\(cdr)h(l\))g(fn\)\)\)\)\))357
4790 y(1)h(lisp>)e(\(dm)i(plus)e(\(a\))i(\(expand)e(\(rest)g(a\))i
('plus2\)\))357 4910 y(plus)357 5031 y(2)g(lisp>)e(\(macroexpand)g
('\(plus)g(1)h(2)h(3\)\))357 5151 y(\(plus2)f(1)g(\(plus2)g(2)g(3\)\))
118 5588 y Fq(\(r)n(ob)n(ustexpand)27 b(L:)f(list)e(FN:)h(function)h
(EMPTYCASE:)h(f)n(orm\):)k(list)763 b Fi(e)n(xpr)145
5708 y Fr(If)27 b(the)g(list)f(L)h(is)f(empty)g(then)h(EMPTYCASE)g(is)g
(e)n(v)n(aluated,)f(otherwise)g(the)h(result)118 5828
y(of)e(\(e)o(xpand)f(L)h(FN\))g(is)g(returned.)p eop
%%Page: 117 125
117 124 bop -118 957 a Fn(Input)51 b(and)h(Output)-118
1475 y Ft(10.1)142 b(Intr)m(oduction)-118 1706 y Fr(One)23
b(cate)o(gory)g(of)g(input)f(and)h(output)f(in)h(LISP)h(is)f
(\224symbolic\224)f(I/O.)h(This)f(allo)n(ws)g(a)i(user)f(to)g(print)f
(or)-118 1827 y(read)30 b(possibly)e(comple)o(x)g(LISP)i(objects)f
(with)g(one)g(or)g(a)h(fe)n(w)g(calls)f(on)g(standard)g(functions.)44
b(PSL)-118 1947 y(also)24 b(has)h(po)n(werful)f(general-purpose)h(I/O.)
-118 2071 y(Input)31 b(from)h(multiple)e(sources)i(and)g(output)f(to)h
(multiple)e(destinations)g(can)i(be)g(done)g(in)g(PSL)h(all)-118
2192 y(at)e(the)g(same)g(time.)48 b(PSL)32 b(pro)o(vides)d(I/O)i
(functions)f(with)g(e)o(xplicit)g(speci\002cation)g(of)h(sources)g(and)
-118 2312 y(destinations)k(for)i(I/O.)g(On)g(the)g(other)g(hand)g(for)g
(con)l(v)o(enience)g(it)g(is)f(often)h(desirable)g(to)g(let)f(the)-118
2432 y(source)h(or)g(destination)e(be)i(implicit.)64
b(PSL)38 b(pro)o(vides)d(the)i(full)f(set)h(of)g(I/O)f(operations)g
(through)-118 2553 y(functions)24 b(with)g(an)h(implicit)e(source)h(or)
h(destination.)-118 2677 y(The)36 b(functions)f(with)g(and)h(without)f
(an)h(e)o(xplicit)f(channel)h(designator)f(ar)n(gument)h(are)g
(described)-118 2797 y(together)i(in)f(this)h(chapter)-5
b(.)70 b(In)39 b(each)f(case)h(calling)f(the)g(function)f(with)h(the)g
(implicit)e(source)i(or)-118 2918 y(destination)17 b(is)i(the)g(same)g
(as)g(calling)f(the)h(v)o(ersion)f(with)h(e)o(xplicit)e(channel)i(ar)n
(gument)g(and)g(supplying)-118 3038 y(the)25 b(v)n(alue)f(of)h(the)f(v)
n(ariable)h(in*)f(or)h(out*)f(as)h(the)f(channel.)-118
3162 y(The)j(current)g(input)f(or)i(output)d(channel)i(can)h(be)f
(changed)g(by)g(setting)f(or)h(rebinding)f(the)h(v)n(ariables)-118
3283 y Fq(in*)f Fr(or)h Fq(out*)p Fr(.)72 b(Historically)-6
b(,)25 b(the)i(functions)e(rds)i(and)f(wrs)h(ha)n(v)o(e)f(been)h(used)f
(for)h(this)e(and)i(the)o(y)f(are)-118 3403 y(also)e(a)n(v)n(ailable)g
(along)h(with)f(their)g(special)h(features.)-118 3722
y Fk(10.1.1)118 b(Or)o(ganization)31 b(of)e(this)h(Chapter)-118
3917 y Fr(W)-8 b(e)36 b(\002rst)h(discuss)e(the)h(syntax)f(used)h(for)g
(symbolic)f(input)g(and)h(output.)63 b(The)36 b(syntax)f(described)-118
4038 y(applies)25 b(to)h(PSL)h(programs,)f(interacti)n(v)o(e)f(typein,)
g(format)h(of)h(data)f(in)g(data)g(\002les,)h(and)f(to)g(output)f(by)
-118 4158 y(PSL)g(programs)g(e)o(xcept)f(when)h(special)f(formatting)g
(is)g(used.)-118 4282 y(Functions)34 b(for)g(printing)f(and)i(reading)f
(follo)n(w)-6 b(.)58 b(All)34 b(\(te)o(xtual\))g(input)f(and)i(output)e
(functions)h(are)-118 4403 y(discussed.)f(Ne)o(xt)25
b(is)h(open,)g(for)g(setting)f(up)g(input)g(and)h(output)f(with)g
(\002les,)h(plus)f(related)h(functions.)-118 4523 y(A)36
b(great)g(deal)h(of)f(user)g(input/output)e(programming)g(can)j(be)f
(done)g(using)f(just)g(a)i(subset)e(of)h(the)-118 4643
y(functions)24 b(described)g(in)h(these)f(\002rst)h(sections.)-118
4767 y(PSL)h(includes)f(functions)g(that)g(load)h(program)f(modules)g
(and)h(e)o(x)o(ecute)f(command)g(\002les.)33 b(The)o(y)26
b(are)-118 4888 y(essential)g(to)g(b)n(uilding)f(of)i(softw)o(are)g
(systems)e(e)n(v)o(en)h(if)h(the)g(system)e(itself)i(does)f(no)h(I/O.)f
(Functions)-118 5008 y(of)f(this)f(type)g(are)i(described)e(ne)o(xt.)
-118 5132 y(The)30 b(section)g(on)g(I/O)g(channels)h(discusses)e(some)h
(features)h(a)n(v)n(ailable)e(for)i(switching)e(the)h(current)-118
5253 y(output)k(from)i(channel)g(to)f(channel,)j(and)e(documents)e
(some)i(\003uid)f(v)n(ariables)g(used)h(in)f(directing)-118
5373 y(some)24 b(of)h(the)g(system')-5 b(s)23 b(input)g(and)i(output.)
-118 5497 y(Functions)j(in)g(the)h(ne)o(xt)f(section)g(actually)g
(operate)h(on)g(objects)f(such)g(as)h(lists)e(and)i(strings!)42
b(Since)-118 5618 y(I/O)28 b(functions)g(scan)g(input)g(and)g(format)g
(output,)g(and)h(since)f(it)g(is)g(possible)f(to)h(read)h(from)f(or)h
(print)-118 5738 y(to)d(a)h(string,)f(I/O)h(functions)f(can)h(be)g
(useful)f(for)h(b)n(uilding)e(strings)h(and)g(for)h(scanning)f(them.)36
b(Some)-118 5858 y(b)n(uilt-in)23 b(functions)h(are)h(described.)1579
6066 y(117)p eop
%%Page: 118 126
118 125 bop 118 -18 a Fr(118)118 289 y(The)23 b(last)g(tw)o(o)g
(sections)f(describe)i(mechanisms)d(that)i(mak)o(e)g(possible)f(some)h
(sophisticated)f(uses)g(of)118 409 y(the)i(PSL)h(I/O)f(system.)29
b(One)24 b(describes)g(the)g(mechanism)f(in)h(PSL)h(that)e(permits)g
(writing)g(to)h(a)g(string)118 529 y(or)g(taking)f(input)f(from)i(the)f
(te)o(xt)g(b)n(uf)n(fer)g(of)h(a)g(te)o(xt)f(editor)-5
b(.)29 b(The)24 b(other)f(discusses)g(the)g(tables)g(used)h(by)118
650 y(the)h(PSL)g(scanner)l(,)g(which)g(is)f(modi\002able.)118
992 y Ft(10.2)143 b(Printed)34 b(Repr)m(esentation)e(of)k(LISP)f
(Objects)118 1216 y Fr(Most)24 b(of)g(this)g(section)g(is)g(de)n(v)n
(oted)f(to)i(the)f(representation)g(of)h(tok)o(ens.)k(In)c(addition)e
(to)h(tok)o(ens)g(there)118 1337 y(are)30 b(composite)e(objects)g(with)
g(printed)h(representations:)38 b(lists)28 b(and)h(v)o(ectors.)43
b(W)-8 b(e)29 b(brie\003y)h(discuss)118 1457 y(their)25
b(printed)f(formats)g(\002rst.)118 1663 y Fh("\(")59
b(expression)f(expression)117 b(.)60 b(.)f(.)h("\)")118
1783 y("\(")f(expression)f(expression)f(.)j(.)f(.)h(".")f(expression\))
118 1904 y("[")g(expression)f(expression)f(.)j(.)f(.)h("]")118
2109 y Fr(Of)37 b(these)g(the)g(\002rst)g(tw)o(o)f(are)i(for)f(lists.)
66 b(Where)38 b(possible,)g(the)f(\002rst)g(notation)f(is)g(preferred)j
(and)118 2229 y(the)30 b(printing)e(routines)h(use)h(it)f(e)o(xcept)h
(when)g(the)f(second)h(form)f(is)h(needed.)46 b(The)30
b(second)f(form)h(is)118 2350 y(required)i(when)f(the)h(cdr)g(of)f(a)h
(pair)g(is)f(neither)g(nil)g(nor)g(another)h(pair)-5
b(.)50 b(The)32 b(third)f(notation)f(is)h(for)118 2470
y(v)o(ectors.)f(F)o(or)25 b(e)o(xample:)118 2702 y Fh(\(A)59
b(.)h(\(B)f(.)h(C\)\))f(\045)h(An)f(s-expression)118
2822 y(\(A)g(B)h(.)g(C\))298 b(\045)60 b(Same)e(value,)h(list)g
(notation)118 2942 y(\(A)g(B)h(C\))418 b(\045)60 b(An)f(ordinary)f
(list)118 3063 y([A)h(B)h(C])418 b(\045)60 b(A)f(vector)118
3294 y Fr(The)25 b(follo)n(wing)e(standards)h(for)h(representing)f(tok)
o(ens)g(are)i(used:)263 3499 y Fl(\017)49 b Fr(An)29
b(id)h(normally)e(consists)h(of)g(uppercase)h(letters)g(and)f(digits.)
44 b(The)30 b(\002rst)g(character)g(can)g(be)362 3620
y(a)c(digit)e(when)i(the)f(\002rst)h(non-digit)e(character)i(is)f(a)h
(plus)f(sign,)g(minus)f(sign,)h(or)g(a)h(letter)g(other)362
3740 y(than)19 b(\224E\224)h(or)g(\224B\224.)30 b(W)-8
b(e)20 b(e)o(xclude)f(lo)n(wercase)g(letters)h(because)g(the)f(PSL)h
(reader)h(will)e(normally)362 3861 y(con)l(v)o(ert)h(lo)n(wercase)g
(letters)g(to)g(uppercase.)29 b(Although)19 b(the)h(user)h(may)f(use)g
(lo)n(wercase)g(letters,)362 3981 y(the)31 b(interpreter)h(only)f(sees)
g(uppercase.)52 b(This)31 b(con)l(v)o(ersion)f(is)h(controlled)g(by)g
(the)g(v)n(alue)g(of)362 4101 y(the)26 b(switch)g(*raise,)g(a)h(v)n
(alue)f(of)g(nil)g(will)f(suppress)h(this)f(con)l(v)o(ersion.)35
b(In)26 b(addition)f(to)h(letters)362 4222 y(and)f(numbers,)f(the)i
(follo)n(wing)d(characters)j(are)g(considered)f(alphabetic)f(for)i(the)
f(purpose)f(of)362 4342 y(notating)f(symbols.)661 4615
y Fh(+)59 b(-)h($)g(&)f(*)h(/)f(:)h(;)f(|)h(<)f(=)h(>)f(?)h(\210)g(_)f
(\230)h(@)362 4889 y Fr(There)24 b(is)f(an)h(escape)g(con)l(v)o(ention)
e(for)i(notating)e(an)i(id)f(whose)g(name)h(contains)e(special)i(char)n
(-)362 5009 y(acters.)33 b(In)25 b(addition)f(to)h(lo)n(wercase)g
(letters)g(the)g(follo)n(wing)e(characters)j(are)g(considered)f(spe-)
362 5129 y(cial.)661 5377 y Fh(!)59 b(")h(\045)g(')f(\()h(\))f(.)h([)f
(])h(`)f(,)h(#)f(|)661 5618 y(JULIE)298 b(\045)59 b(three)g(ways)g(to)g
(notate)f(the)i(same)e(symbol)661 5738 y(julie)661 5858
y(JuLie)p eop
%%Page: 119 127
119 126 bop -118 -18 a Fg(10.2.)55 b(PRINTED)25 b(REPRESENT)-9
b(A)e(TION)26 b(OF)f(LISP)h(OBJECTS)1018 b Fr(119)425
289 y Fh(+$)425 409 y(1+)425 529 y(+1)477 b(\045)60 b(this)f(is)g(a)h
(number,)e(not)h(an)g(id)425 650 y(x\2102+y\2102)177
b(\045)60 b(a)g(single)e(symbol)27 896 y Fl(\017)49 b
Fr(Strings)36 b(be)o(gin)h(with)f(a)i(double)e(quote)h(\(\224\))h(and)f
(include)g(all)g(characters)h(up)f(to)g(a)g(closing)126
1016 y(double)24 b(quote.)31 b(A)25 b(double)f(quote)g(can)i(be)f
(included)f(in)g(a)i(string)e(by)g(doubling)g(it.)30
b(An)25 b(empty)126 1137 y(string,)i(consisting)f(of)h(only)g(the)g
(enclosing)g(quote)g(marks,)g(is)g(allo)n(wed.)38 b(The)28
b(characters)g(of)126 1257 y(a)d(string)f(are)h(not)g(af)n(fected)g(by)
f(the)h(v)n(alue)f(of)h(the)g(*raise.)30 b(Examples:)425
1503 y Fh("This)58 b(is)i(a)f(string")425 1624 y("This)f(is)i(a)f
(""string""")425 1744 y("")27 1990 y Fl(\017)49 b Fr(Inte)o(gers)30
b(be)o(gin)f(with)h(a)h(digit,)g(optionally)d(preceded)k(by)e(a)h(+)g
(or)f(-)h(sign,)g(and)g(consist)e(only)126 2110 y(of)j(digits.)50
b(The)32 b(global)f(input)g(radix)h(is)g(10;)i(there)f(is)e(no)h(w)o
(ay)g(to)f(change)i(this.)51 b(Ho)n(we)n(v)o(er)l(,)126
2231 y(numbers)28 b(of)g(dif)n(ferent)g(radices)h(may)g(be)f(read)h(by)
g(the)f(follo)n(wing)f(con)l(v)o(ention.)40 b(A)29 b(decimal)126
2351 y(number)g(from)g(2)g(to)g(36)g(follo)n(wed)f(by)i(a)f(sharp)h
(sign)e(\(#\),)j(causes)e(the)h(digits)e(\(and)h(possibly)126
2472 y(letters\))23 b(that)f(follo)n(w)g(to)h(be)h(read)f(in)g(the)g
(radix)g(of)h(the)f(number)f(preceding)h(the)g(#.)31
b([F)o(ootnote:)126 2592 y(Octal)c(numbers)g(can)h(also)f(be)h(written)
f(as)h(a)g(string)f(of)g(digits)f(follo)n(wed)h(by)g(the)h(letter)f
(\224B\224.])126 2712 y(Thus)j(63)g(may)g(be)h(entered)g(as)g(8#77,)g
(or)g(255)f(as)h(16#f)n(f)f(or)h(16#FF)-8 b(.)30 b(The)h(output)e
(radix)i(can)126 2833 y(be)i(changed,)j(by)d(setting)g(outputbase*.)55
b(If)34 b(outputbase*)e(is)h(not)g(10,)j(the)d(printed)g(inte)o(ger)126
2953 y(appears)k(with)g(appropriate)g(radix.)68 b(Leading)36
b(zeros)i(are)g(suppressed)e(and)i(a)f(minus)f(sign)126
3074 y(precedes)25 b(the)g(digits)e(if)i(the)g(inte)o(ger)f(is)g(ne)o
(gati)n(v)o(e.)k(Examples:)664 3320 y Fh(100)664 3440
y(+5234)664 3560 y(-8#44)58 b(\(equal)h(to)g(-36\))27
3807 y Fl(\017)49 b Fr(Floats)19 b(ha)n(v)o(e)h(a)g(period)g(and/or)f
(a)i(letter)e(\224e\224)i(or)f(\224E\224)g(in)g(them.)28
b(An)o(y)19 b(of)h(the)g(follo)n(wing)e(are)j(read)126
3927 y(as)31 b(\003oats.)48 b(The)31 b(v)n(alue)f(appears)h(in)g(the)f
(format)h([-]n.nn...nnE[-]mm)e(if)i(the)g(magnitude)e(of)126
4047 y(the)g(number)f(is)h(too)f(lar)n(ge)i(or)f(small)f(to)h(display)f
(in)g([-]nnnn.nnnn)g(format.)43 b(The)29 b(crosso)o(v)o(er)126
4168 y(point)j(is)g(determined)g(by)h(the)g(implementation.)52
b(In)33 b(BNF)-8 b(,)34 b(\003oats)f(are)h(recognized)f(by)f(the)126
4288 y(grammar:)484 4534 y Fh(<base>)418 b(::=)59 b
(<unsigned-integer>.|)1501 4655 y(.<unsigned-integer>|)1501
4775 y(<unsigned-integer>.)1501 4895 y(<unsigned-integer>)484
5016 y(<ebase>)358 b(::=)59 b(<base>|<unsigned-integer>)484
5136 y(<unsigned-float>)e(::=)i(<base>|)1740 5256 y
(<ebase>e<unsigned-integer>|)1740 5377 y(<ebase>e-<unsigned-integer>|)
1740 5497 y(<ebase>e+<unsigned-integer>|)1740 5618 y
(<ebase>E<unsigned-integer>|)1740 5738 y(<ebase>E-<unsigned-integer>|)
1740 5858 y(<ebase>E+<unsigned-integer>)p eop
%%Page: 120 128
120 127 bop 118 -18 a Fr(120)721 289 y Fh(<float>)596
b(::=)59 b(<unsigned-float>|)1976 409 y(+<unsigned-float>|)1976
529 y(-<unsigned-float>)362 770 y Fr(That)25 b(is:)900
1010 y Fh([+|-][nnn][.]nnn{e|E}[+|-]nnn)900 1250 y(nnn.)900
1371 y(.nnn)900 1491 y(nnn.nnn)362 1731 y Fr(Examples:)900
1971 y Fh(1e6)900 2092 y(.2)900 2212 y(2.)900 2332 y(2.0)900
2453 y(-1.25E-9)263 2693 y Fl(\017)49 b Fr(Code-pointers)20
b(cannot)f(be)h(read)h(directly)-6 b(,)20 b(b)n(ut)f(can)i(be)f
(printed)f(and)h(constructed.)29 b(Currently)362 2813
y(printed)24 b(as)601 3053 y Fh(#<Code)59 b(argument-count)d
(hexadecimal-address>.)263 3294 y Fl(\017)49 b Fr(An)o(ything)34
b(else)h(is)h(printed)f(as)h(#)p Ff(<)p Fr(Unkno)n(wn:nnnn)p
Ff(>)p Fr(,)f(where)h(nnnn)g(is)f(the)g(he)o(xadecimal)362
3414 y(v)n(alue)f(found)f(in)h(the)g(ar)n(gument)g(re)o(gister)-5
b(.)58 b(Such)34 b(items)g(are)h(not)e(le)o(gal)g(LISP)i(entities)f
(and)362 3534 y(may)c(cause)i(garbage)e(collector)h(errors)g(if)g(the)o
(y)f(are)h(found)g(in)f(the)h(heap.)49 b(The)o(y)30 b(cannot)g(be)362
3655 y(read)25 b(in.)118 3993 y Ft(10.3)143 b(Functions)33
b(f)l(or)j(Printing)118 4246 y Fk(10.3.1)119 b(Basic)29
b(Printing)118 4652 y Fq(\(prin1)d(ITM:any\):)31 b(ITM:any)2206
b Fi(e)n(xpr)118 5120 y Fq(\(channelprin1)27 b(CHAN:io-channel)e
(ITM:any\):)32 b(ITM:any)1079 b Fi(e)n(xpr)145 5240 y
Fr(Channelprin1)26 b(is)g(the)h(basic)f(printing)g(function.)35
b(F)o(or)27 b(well-formed,)f(non-circular)118 5361 y(structures,)e(the)
h(result)f(can)h(be)g(parsed)g(by)g(the)f(function)g(read.)118
5730 y Fq(\(prin2)i(ITM:any\):)31 b(ITM:any)2206 b Fi(e)n(xpr)p
eop
%%Page: 121 129
121 128 bop -118 -18 a Fg(10.3.)55 b(FUNCTIONS)26 b(FOR)g(PRINTING)1872
b Fr(121)-118 357 y Fq(\(channelprin2)27 b(CHAN:io-channel)e
(ITM:any\):)32 b(ITM:any)1079 b Fi(e)n(xpr)-77 478 y
Fr(Channelprin2)40 b(is)h(similar)f(to)g(channelprin1,)k(e)o(xcept)d
(that)f(strings)g(are)i(printed)-118 598 y(without)35
b(the)i(surrounding)f(double)g(quotes,)j(and)e(delimiters)f(within)f
(ids)i(are)h(not)-118 718 y(preceded)25 b(by)g(the)g(escape)g
(character)-5 b(.)-118 872 y(The)25 b(follo)n(wing)e(e)o(xample)h
(illustrates)f(the)i(dif)n(ference)g(between)g(prin1)f(and)h(prin2.)
-118 1131 y Fh(ARGUMENT)297 b(PRIN1)477 b(PRIN2)-118
1371 y(A!\045WORD)357 b(A!\045WORD)g(A\045WORD)-118 1492
y("STRING")297 b("STRING")g(STRING)-118 1965 y Fq(\(print)26
b(U:any\):)31 b(U:any)2477 b Fi(e)n(xpr)-118 2436 y Fq(\(channelprint)
27 b(CHAN:io-channel)e(U:any\):)32 b(U:any)1350 b Fi(e)n(xpr)-95
2556 y Fr(Display)23 b(U)g(using)f(channelprin1)h(and)g(then)g
(terminate)g(the)g(line)f(using)h(channelter)n(-)-118
2677 y(pri.)-118 3026 y Fk(10.3.2)118 b(Whitespace)30
b(Printing)h(Functions)-118 3440 y Fq(\(ter)o(pri\):)h(nil)2879
b Fi(e)n(xpr)-118 3911 y Fq(\(channelter)o(pri)27 b(CHAN:io-channel\):)
32 b(nil)1752 b Fi(e)n(xpr)-82 4031 y Fr(Write)36 b(an)g(end)g(of)g
(line)f(character)-5 b(.)65 b(The)36 b(number)f(of)h(characters)h
(output)e(on)g(the)-118 4152 y(current)25 b(line)f(\(that)g(which)h(is)
f(referenced)i(by)e(channelposn\),)g(is)g(de\002ned)h(to)g(be)f(zero)
-118 4272 y(and)f(the)g(number)f(of)h(lines)f(output)g(on)h(the)g
(current)g(page)g(\(that)g(which)f(is)h(referenced)-118
4393 y(by)h(channelposn\),)g(is)h(incremented.)-118 4765
y Fq(\(spaces)g(N:integer\):)32 b(nil)2427 b Fi(e)n(xpr)-118
5237 y Fq(\(channelspaces)26 b(CHAN:io-channel)g(N:integer\):)32
b(nil)1300 b Fi(e)n(xpr)-93 5357 y Fr(N)25 b(spaces)g(are)g(written.)
-118 5730 y Fq(\(tab)g(N:integer\):)32 b(nil)2560 b Fi(e)n(xpr)p
eop
%%Page: 122 130
122 129 bop 118 -18 a Fr(122)118 357 y Fq(\(channeltab)27
b(CHAN:io-channel)e(N:integer\):)32 b(nil)1433 b Fi(e)n(xpr)143
478 y Fr(Mo)o(v)o(e)23 b(to)i(column)f(N)118 608 y Fh(\(channelspaces)
57 b(ch)i(\(-)g(N)h(\(channelposn)d(ch\)\)\))118 728
y Fr(If)36 b(the)f(position)e(on)i(the)f(current)i(output)e(line)g(is)h
(past)f(column)g(N)h(then)g(channelterpri)g(is)g(called)118
848 y(before)25 b(mo)o(ving)e(to)i(column)f(N.)118 1138
y Fk(10.3.3)119 b(F)m(ormatted)29 b(Printing)118 1544
y Fq(\(printf)d(FORMA)-9 b(T)i(:string)24 b([ARGS:any]\):)32
b(nil)1588 b Fi(e)n(xpr)118 2012 y Fq(\(channelprintf)27
b(CHAN:io-channel)f(FORMA)-9 b(T)i(:string)24 b([ARGS:any]\):nil)493
b Fi(e)n(xpr)140 2132 y Fr(Channelprintf)22 b(is)g(a)g(simple)f
(routine)g(for)i(formatted)e(printing.)29 b(The)22 b(FORMA)-11
b(T)22 b(is)g(a)118 2253 y(string.)30 b(The)24 b(characters)h(of)g
(this)e(string)h(are)h(printed)f(unless)f(a)i(a)g(interpret)f(and)g
(print)118 2373 y(the)31 b(other)f(ar)n(guments)g(to)h(channelprintf.)
48 b(The)31 b(follo)n(wing)d(format)j(characters)g(are)118
2494 y(currently)25 b(supported.)168 2616 y(\045b)121
b(The)39 b(ne)o(xt)e(ar)n(gument)h(is)g(assumed)f(to)h(be)g(an)g(inte)o
(ger)l(,)j(it)d(is)g(passed)f(to)422 2736 y(spaces.)168
2857 y(\045c)127 b(The)27 b(ne)o(xt)f(ar)n(gument)h(should)e(be)i(a)g
(single)f(character)l(,)i(it)f(is)f(printed)g(by)h(a)422
2977 y(call)e(on)g(writechar)-5 b(.)168 3098 y(\045d)121
b(Print)25 b(the)g(ne)o(xt)f(ar)n(gument)g(as)h(a)g(decimal)g(inte)o
(ger)-5 b(.)168 3218 y(\045e)127 b(The)25 b(ne)o(xt)f(ar)n(gument)h(is)
f(e)n(v)n(aluated)g(by)g(a)h(call)g(on)g(e)n(v)n(al.)168
3338 y(\045f)138 b(Print)24 b(an)g(end-of-line)g(character)h(if)f(not)g
(at)g(the)f(be)o(ginning)f(of)i(the)g(output)422 3459
y(line)h(\(does)g(not)f(use)g(a)i(matching)d(ar)n(gument\).)168
3579 y(\045l)143 b(Print)28 b(the)f(ne)o(xt)g(ar)n(gument)g(using)f
(print2l,)h(this)g(is)g(the)g(same)g(as)h(\045w)f(e)o(x-)422
3700 y(cept)d(that)g(lists)f(are)h(printed)f(without)g(the)h(top)f(le)n
(v)o(el)g(pair)h(of)g(parenthesis.)422 3820 y(The)h(empty)f(list)g(is)g
(printed)h(as)f(a)i(blank.)168 3940 y(\045n)121 b(Print)25
b(end-of-line)g(character)h(\(does)e(not)h(use)f(a)h(matching)f(ar)n
(gument\).)168 4061 y(\045o)121 b(Print)25 b(the)g(ne)o(xt)f(ar)n
(gument)g(as)h(an)g(octal)g(inte)o(ger)-5 b(.)168 4181
y(\045p)121 b(Print)25 b(the)g(ne)o(xt)f(ar)n(gument)g(using)g(prin1.)
168 4301 y(\045p)121 b(Print)25 b(the)g(ne)o(xt)f(ar)n(gument)g(using)g
(prin1.)168 4422 y(\045r)138 b(Print)23 b(the)g(ne)o(xt)f(ar)n(gument)g
(using)g(errprin,)h(the)g(result)f(is)g(the)h(same)f(as)h(\045p)422
4542 y(e)o(xcept)i(that)f(a)h(surrounding)f(pair)h(of)g(quotes)f(are)h
(also)f(printed.)168 4663 y(\045s)132 b(The)22 b(ne)o(xt)e(ar)n(gument)
h(is)g(assumed)f(to)h(be)h(a)f(string,)g(the)g(surrounding)f(dou-)422
4783 y(ble)25 b(quotes)f(are)i(not)e(printed.)168 4903
y(\045t)143 b(The)25 b(ne)o(xt)f(ar)n(gument)g(is)g(assumed)g(to)g(be)g
(an)h(inte)o(ger)l(,)f(it)g(is)g(passed)g(to)g(tab)l(.)168
5024 y(\045w)99 b(Print)25 b(the)g(ne)o(xt)f(ar)n(gument)g(using)g
(prin2.)168 5144 y(\045x)121 b(Print)25 b(the)g(ne)o(xt)f(ar)n(gument)g
(as)h(a)g(he)o(xadecimal)f(inte)o(ger)-5 b(.)118 5256
y(If)23 b(the)f(character)i(follo)n(wing)c(\045)j(is)f(not)g(either)g
(one)g(of)h(the)f(abo)o(v)o(e)g(or)g(another)g(\045,)h(it)f(causes)h
(an)f(error)-5 b(.)118 5377 y(Thus,)24 b(to)h(include)f(a)h(\045)g(in)f
(the)h(format)f(to)h(be)g(printed,)f(use)h(\045.)118
5497 y(There)35 b(is)f(no)g(checking)g(for)h(correspondence)f(between)h
(the)f(number)f(of)i(ar)n(guments)f(that)f(FOR-)118 5618
y(MA)-11 b(T)30 b(e)o(xpects)f(and)h(the)g(number)g(gi)n(v)o(en.)45
b(If)31 b(the)f(number)f(gi)n(v)o(en)g(is)h(less)f(than)h(the)g(number)
g(in)g(the)118 5738 y(FORMA)-11 b(T)24 b(string,)e(garbage)i(will)e(be)
h(inserted)g(for)h(the)f(missing)f(ar)n(guments.)29 b(If)24
b(the)f(number)g(gi)n(v)o(en)118 5858 y(is)h(greater)i(than)e(the)h
(number)f(in)h(the)f(FORMA)-11 b(T)25 b(string,)f(then)h(the)f(e)o
(xtra)h(ones)f(are)i(ignored.)p eop
%%Page: 123 131
123 130 bop -118 -18 a Fg(10.3.)55 b(FUNCTIONS)26 b(FOR)g(PRINTING)1872
b Fr(123)-118 357 y Fq(\(pr)n(ettyprint)27 b(U:f)n(orm\):)k(U:f)n(orm)
2113 b Fi(e)n(xpr)-93 478 y Fr(Prettyprints)24 b(U.)-118
845 y Fk(10.3.4)118 b(The)30 b(Fundamental)i(Printing)f(Function)-118
1265 y Fq(\(writechar)26 b(CH:character\):)32 b(character)1798
b Fi(e)n(xpr)-118 1462 y Fq(\(channelwritechar)27 b(CHANNEL:io-channel)
-118 1582 y(CH:character\):)32 b(character)2271 b Fi(e)n(xpr)-84
1703 y Fr(Write)33 b(one)h(character)g(to)g(the)f(de)n(vice)g
(speci\002ed)h(by)g(CHANNEL.)f(All)g(output)f(is)-118
1823 y(de\002ned)g(in)f(terms)h(of)f(this)g(function.)51
b(The)32 b(number)f(of)h(characters)g(output)f(on)g(the)-118
1943 y(current)g(line)g(\(that)g(which)g(is)g(referenced)i(by)e
(channelposn\),)h(and)f(the)g(number)g(of)-118 2064 y(lines)24
b(output)f(on)h(the)g(current)h(page)f(\(that)g(which)g(is)g
(referenced)i(by)e(channellposn\),)-118 2184 y(are)33
b(updated.)54 b(Each)32 b(channel)h(speci\002es)g(an)f(output)g
(function,)h(it)f(is)g(this)g(function)-118 2305 y(that)24
b(is)h(applied)f(to)g(CHANNEL)h(and)g(CH)g(to)f(actually)h(write)f(the)
h(character)-5 b(.)-118 2821 y Fk(10.3.5)118 b(Additional)32
b(Printing)f(Functions)-118 3241 y Fq(\(prin2l)25 b(L:any\):)32
b(L:any)-5 b(,)25 b(nil)2288 b Fi(e)n(xpr)-91 3362 y
Fr(Prin2,)26 b(e)o(xcept)h(that)f(a)h(list)e(is)h(printed)g(without)f
(the)i(top)f(le)n(v)o(el)f(parentheses.)36 b(If)27 b(L)f(is)-118
3482 y(a)f(pair)g(then)f(the)h(return)g(v)n(alue)f(is)g(nil,)g
(otherwise)h(the)f(return)h(v)n(alue)f(will)g(be)h(L.)-118
3858 y Fq(\(prin2t)h(X:any\):)31 b(any)2532 b Fi(e)n(xpr)-118
4055 y Fq(\(channelprin2t)27 b(CHAN:io-channel)e(X:any\):)31
b(any)1406 b Fi(e)n(xpr)-93 4175 y Fr(Output)23 b(X)i(using)f
(channelprin2)g(and)h(terminate)f(line)g(with)g(channelterpri.)-118
4424 y Fq(\(princ)i(ITM:any\):)32 b(ITM:any)2211 b Fi(e)n(xpr)-118
4771 y Fq(\(channelprinc)27 b(CHAN:io-channel)e(ITM:any\):)32
b(ITM:any)1085 b Fi(e)n(xpr)-93 4891 y Fr(Same)25 b(function)f(as)h
(channelprin2.)-118 5140 y Fq(\(err)o(prin)h(U:any\):)32
b(None)25 b(Retur)o(ned)1991 b Fi(e)n(xpr)-93 5260 y
Fr(Prin1)25 b(with)f(special)g(quotes)g(to)h(highlight)d(U.)-118
5509 y Fq(\(err)n(or)o(printf)27 b(FORMA)-9 b(T)i(:string)24
b([ARGS:any]\):)32 b(nil)1364 b Fi(e)n(xpr)-85 5629 y
Fr(Errorprintf)32 b(is)h(similar)f(to)g(printf,)j(e)o(xcept)d(that)h
(errout*)f(is)h(used)f(in)h(place)g(of)g(the)-118 5750
y(currently)e(selected)f(output)g(channel.)49 b(Channelterpri)31
b(is)f(called)h(before)h(and)e(after)-118 5870 y(printing)23
b(if)i(the)g(line)f(position)f(is)h(greater)i(than)e(zero.)p
eop
%%Page: 124 132
124 131 bop 118 -18 a Fr(124)118 644 y Fq(\(eject\):)33
b(nil)2927 b Fi(e)n(xpr)118 841 y Fq(\(channeleject)27
b(CHAN:io-channel\):)32 b(nil)1801 b Fi(e)n(xpr)143 962
y Fr(Skip)25 b(to)f(top)g(of)h(ne)o(xt)f(output)g(page.)118
1542 y Fk(10.3.6)119 b(Printing)31 b(Status)e(and)i(Mode)118
1764 y Fr(F)o(or)25 b(information)e(on)i(directing)f(v)n(arious)g
(kinds)f(of)i(output)f(see)h(the)g(section)f(on)g(channels.)118
2119 y Fq(outputbase*)i Fr(=)f([Initially:)30 b(10])2122
b Fi(global)318 2240 y Fr(This)22 b(\003uid)h(can)g(be)g(set)g(to)g
(control)f(the)h(radix)g(in)f(which)h(inte)o(gers)f(are)i(printed)e
(out.)30 b(If)318 2360 y(the)25 b(radix)f(is)h(not)f(10,)g(the)h(radix)
g(is)f(gi)n(v)o(en)f(before)j(a)f(sharp)f(sign.)357 2638
y Fh(1)60 b(lisp>)e(16)357 2758 y(16)357 2878 y(2)i(lisp>)e(\(setq)h
(outputbase*)e(8\))357 2999 y(8#10)357 3119 y(3)j(lisp>)e(16)357
3240 y(8#20)118 3744 y Fq(\(posn\):)32 b(integer)2740
b Fi(e)n(xpr)118 4228 y Fq(\(channelposn)27 b(CHAN:io-channel\):)k
(integer)1614 b Fi(e)n(xpr)143 4348 y Fr(Returns)25 b(number)f(of)h
(characters)h(output)d(on)i(the)f(current)h(line)g(of)g(this)f
(channel.)118 4734 y Fq(\(lposn\):)32 b(integer)2712
b Fi(e)n(xpr)118 5218 y Fq(\(channellposn)26 b(CHAN:io-channel\):)32
b(integer)1586 b Fi(e)n(xpr)143 5338 y Fr(Returns)25
b(number)f(of)h(lines)f(output)g(on)g(this)g(page)h(of)g(this)f
(channel.)118 5730 y Fq(\(linelength)i(LEN:)p Fl(f)p
Fq(integer)-9 b(,)26 b(nil)p Fl(g)p Fq(\):)31 b(integer)1706
b Fi(e)n(xpr)p eop
%%Page: 125 133
125 132 bop -118 -18 a Fg(10.4.)55 b(FUNCTIONS)26 b(FOR)g(READING)1888
b Fr(125)-118 363 y Fq(\(channellinelength)27 b(CHAN:io-channel)e(LEN:)
h Fl(f)p Fq(integer)-9 b(,)25 b(nil)p Fl(g)p Fq(\):)31
b(integer)555 b Fi(e)n(xpr)-80 484 y Fr(F)o(or)38 b(each)h(channel)f
(there)h(is)f(a)g(restriction)g(on)g(the)g(length)f(of)h(output)f
(lines.)71 b(If)-118 604 y(LEN)29 b(is)g(nil)g(then)g(the)g(v)n(alue)g
(returned)g(will)g(be)g(the)h(current)f(maximum)f(length.)44
b(If)-118 725 y(LEN)26 b(is)g(an)h(inte)o(ger)e(greater)j(than)e(zero)h
(then)f(it)g(will)f(become)i(the)f(ne)n(w)g(maximum.)-118
845 y(Ho)n(we)n(v)o(er)l(,)g(if)g(the)h(ar)n(gument)f(is)g(zero)i
(there)f(will)e(be)i(no)g(restrictions)e(on)i(the)f(size)h(of)-118
965 y(the)g(output)f(lines.)37 b(The)27 b(follo)n(wing)f(e)o(xample)g
(illustrates)g(ho)n(w)g(this)g(length)h(is)f(used.)-118
1086 y(PSL)f(uses)g(a)g(similar)f(function)g(to)g(apply)g(output)g
(functions)g(lik)o(e)g(prin1.)121 1285 y Fh(\(de)59 b
(check-line-length)d(\(length)i(ch)i(fn)f(token\))241
1406 y(\(when)f(\(and)h(\(>)g(\(+)h(\(channelposn)d(ch\))i(length\))
1077 1526 y(\(channellinelength)d(ch)j(nil\)\))898 1647
y(\(>)g(\(channellinelength)d(ch)j(nil\))g(0\)\))360
1767 y(\(channelwritechar)d(ch)j(\(char)g(eol\)\)\))241
1887 y(\(idapply)f(fn)h(\(list)g(ch)g(token\)\)\))-118
2108 y Fr(The)40 b(\003uid)g(v)n(ariables)f(PrinLe)n(v)o(el)g(and)h
(PrinLength)g(allo)n(w)f(the)h(user)g(to)g(control)f(ho)n(w)g(deep)h
(the)-118 2229 y(printer)d(will)f(print)h(and)g(ho)n(w)g(man)o(y)f
(elements)g(at)i(a)f(gi)n(v)o(en)f(le)n(v)o(el)g(the)h(printer)g(will)g
(print.)67 b(This)-118 2349 y(is)33 b(useful)f(for)i(objects)e(which)h
(are)h(v)o(ery)f(lar)n(ge)h(or)f(deep.)56 b(These)33
b(v)n(ariables)g(af)n(fect)g(the)g(functions)-118 2469
y(prin1,)24 b(prin2,)g(princ,)h(print,)f(and)g(printf)h(\(and)g(the)f
(corresponding)g(Channel)h(functions\).)-118 2812 y Fq(prinle)o(v)o(el)
g Fr(=)g([Initially:)k(nil])2263 b Fi(global)82 2932
y Fr(Controls)25 b(ho)n(w)g(man)o(y)g(le)n(v)o(els)f(deep)i(a)g(nested)
g(data)g(object)f(will)g(print.)33 b(If)27 b(PrinLe)n(v)o(el)82
3053 y(is)21 b(nil,)h(then)f(no)g(control)h(is)f(e)o(x)o(ercised.)29
b(Otherwise)21 b(the)h(v)n(alue)f(should)f(be)i(an)g(inte)o(ger)-5
b(.)82 3173 y(An)24 b(object)h(to)f(be)h(printed)f(is)h(at)f(le)n(v)o
(el)g(0.)-118 3425 y Fq(prinlength)i Fr(=)f([Initially:)30
b(nil])2188 b Fi(global)82 3545 y Fr(Controls)20 b(ho)n(w)g(man)o(y)f
(elements)h(at)h(a)g(gi)n(v)o(en)e(le)n(v)o(el)h(are)h(printed.)29
b(A)21 b(v)n(alue)f(of)g(nil)h(indi-)82 3666 y(cates)i(that)g(there)g
(be)g(no)g(limit)f(to)g(the)h(number)g(of)g(components)f(printed.)29
b(Otherwise)82 3786 y(the)24 b(v)n(alue)h(of)f(PrinLength)h(should)e
(be)i(an)g(inte)o(ger)-5 b(.)-118 4094 y Ft(10.4)142
b(Functions)34 b(f)l(or)i(Reading)-118 4354 y Fk(10.4.1)118
b(Reading)31 b(S-Expr)n(essions)-118 4767 y Fq(\(r)n(ead\):)h(any)2891
b Fi(e)n(xpr)-118 4965 y Fq(\(channelr)n(ead)27 b(CHAN:io-channel\):)32
b(any)1764 b Fi(e)n(xpr)-67 5085 y Fr(Reads)52 b(and)g(returns)f(the)g
(ne)o(xt)g(S-e)o(xpression)g(from)g(input)f(channel)i(CHAN.)-118
5205 y(V)-11 b(alid)25 b(input)f(forms)h(are:)33 b(v)o(ector)n
(-notation,)24 b(dot-notation,)g(list-notation,)f(numbers,)-118
5326 y(strings,)35 b(and)f(identi\002ers.)57 b(Identi\002ers)34
b(are)h(interned)e(\(see)h(the)g(intern)f(function)g(in)-118
5446 y(Chapter)c(4\),)g(unless)e(the)h(\003uid)g(v)n(ariable)g
(*compressing)f(is)g(non-nil.)40 b(Channelread)-118 5566
y(returns)26 b(the)g(v)n(alue)g(of)g(the)g(global)g(v)n(ariable)g
($eof$)g(when)g(the)g(end)h(of)f(the)g(currently)-118
5687 y(selected)f(input)e(channel)i(is)g(reached.)p eop
%%Page: 126 134
126 133 bop 118 -18 a Fr(126)357 289 y Fh(\(de)59 b(channelread)f
(\(ch\))477 409 y(\(let)h(\(\(currentscantable*)c(lispscantable*\))835
529 y(\(currentreadmacroindicator*)f('lispreadmacro\)\))596
650 y(\(channelreadtokenwithhooks)g(ch\)\)\))118 1265
y Fr(Channelread)34 b(uses)f(the)g(function)g(channelreadtok)o
(enwithhooks.)54 b(T)-8 b(ok)o(ens)33 b(are)h(scanned)g(within)118
1385 y(the)g(conte)o(xt)e(of)i(the)g(scan)g(table)f(bound)g(to)h
(lispscantable*.)56 b(The)33 b(scan)h(table)g(is)f(used)h(to)f(recog-)
118 1505 y(nize)27 b(special)g(character)i(types,)e(for)g(e)o(xample,)g
(delimiters)f(lik)o(e)g(\(,)i(\),)g(and)f(space.)39 b(The)27
b(read)g(macro)118 1626 y(mechanism)35 b(is)h(used)g(to)f(parse)i(s-e)o
(xpressions)d(\(see)j(section)e(12.4.5)h(for)g(more)g(information)f(on)
118 1746 y(read)25 b(macros\).)31 b(PSL)26 b(uses)e(a)h(number)g(of)f
(read)i(macros)e(which)h(are)g(described)g(belo)n(w)-6
b(.)168 2041 y(\()456 b(S-e)o(xpressions)25 b(are)i(gathered)e(into)g
(a)h(list)e(until)h(the)g(matching)g(right)g(parenthe-)657
2162 y(sis)31 b(is)f(read.)50 b(Both)31 b(list)f(and)h(dot)f(notation)g
(are)h(recognized.)50 b(A)31 b(pair)g(or)g(list)f(is)657
2282 y(returned.)168 2402 y(\))456 b(If)37 b(a)g(right)f(parenthesis)g
(is)g(read)h(and)f(a)h(matching)e(left)i(parenthesis)e(had)i(not)657
2523 y(been)25 b(pre)n(viously)f(read)h(then)f(it)h(will)f(be)h
(ignored.)168 2643 y Fe([)462 b Fr(S-e)o(xpressions)29
b(are)h(gathered)f(into)f(a)i(v)o(ector)f(until)f(a)h(matching)f(right)
h(brack)o(et)657 2764 y(is)c(read.)31 b(A)25 b(v)o(ector)f(is)h
(returned.)168 2884 y(')456 b(The)26 b(ne)o(xt)e(s-e)o(xpression)g
(read)i(is)f(quoted,)g(the)g(result)g(is)g(of)g(the)g(form)g(\(Q)o(UO)l
(TE)657 3004 y(S-EXPRESSION\).)168 3125 y(\(char)g(eof\))100
b(If)36 b(an)g(end)g(of)f(\002le)h(character)h(is)e(read)h(while)f(a)h
(list)e(or)i(v)o(ector)f(is)g(being)g(con-)657 3245 y(structed)g(then)f
(the)h(follo)n(wing)e(error)i(will)f(occur)-5 b(.)61
b(*****)34 b(Une)o(xpected)g(EOF)657 3366 y(while)25
b(reading)f(on)h(channel.)168 3486 y(`N')351 b(Otherwise)25
b(the)f(v)n(alue)h(of)g Ff(eof)35 b Fr(is)25 b(returned.)118
3733 y(The)g(follo)n(wing)e(read)i(macros)g(are)g(de\002ned)h(in)e(the)
h Fh(useful)e Fr(module.)168 3929 y(#\264)123 b(this)28
b(is)h(lik)o(e)g(the)h(quote)f(mark)g(')h(b)n(ut)f(it)g(is)g(used)h
(for)f(function)g(instead)g(of)374 4050 y(quote.)h(F)o(or)25
b(e)o(xample)e(#'name)i(reads)g(as)g(\(FUNCTION)h(N)m(AME\).)168
4170 y(#/)128 b(this)18 b(returns)i(the)g(numeric)f(form)h(of)g(the)f
(follo)n(wing)f(character)j(read)g(with-)374 4290 y(out)j(raising)g
(it.)30 b(F)o(or)25 b(e)o(xample)f(#/a)g(is)h(97)f(while)h(#/A)f(is)g
(65.)168 4411 y(#)p Fl(n)106 b Fr(This)18 b(is)g(a)h(read)h(macro)f
(for)g(char)g(\(see)g(Chapter)h(6)f(for)g(more)f(information\).)374
4531 y(Note)38 b(that)g(the)g(ar)n(gument)g(will)g(be)g(raised)h(if)f
(*raise)h(is)f(non-nil.)70 b(F)o(or)374 4652 y(e)o(xample,)23
b(#)p Fl(n)p Fr(a)i(=)g(#)p Fl(n)p Fr(A)g(=)g(65.)168
4772 y(#.)131 b(This)22 b(causes)i(the)f(follo)n(wing)f(e)o(xpression)g
(to)h(be)h(e)n(v)n(aluated)e(at)i(read)g(time.)374 4892
y(F)o(or)g(e)o(xample,)g(`\(1)h(2)g(#.\(plus)f(1)h(2\))f(4\))h(reads)g
(as)g(\(1)g(2)g(3)g(4\).)168 5013 y(#+)100 b(The)31 b(ne)o(xt)g(tw)o(o)
g(e)o(xpressions)e(are)k(read.)51 b(If)31 b(the)h(\002rst)f(is)g(a)h
(system)e(name)374 5133 y(which)18 b(is)g(the)h(current)g(system)f
(then)h(the)f(second)h(e)o(xpression)f(is)g(returned.)374
5254 y(Otherwise)37 b(another)h(e)o(xpression)f(is)h(read)h(and)f(it)g
(becomes)g(the)g(v)n(alue)374 5374 y(returned.)168 5494
y(#-)123 b(The)31 b(ne)o(xt)g(tw)o(o)g(e)o(xpressions)e(are)k(read.)51
b(If)31 b(the)h(\002rst)f(is)g(a)h(system)e(name)374
5615 y(which)d(is)h(not)f(the)h(current)g(system)f(then)h(the)f(second)
h(e)o(xpression)f(is)g(re-)374 5735 y(turned.)43 b(Otherwise)29
b(another)g(e)o(xpression)f(is)h(read)g(and)h(it)e(becomes)h(the)374
5855 y(v)n(alue)24 b(returned.)p eop
%%Page: 127 135
127 134 bop -118 -18 a Fg(10.4.)55 b(FUNCTIONS)26 b(FOR)g(READING)1888
b Fr(127)-118 289 y Fk(10.4.2)118 b(Reading)31 b(Single)g(Characters)
-118 712 y Fq(\(r)n(eadchar\):)i(character)2444 b Fi(e)n(xpr)-118
1187 y Fq(\(channelr)n(eadchar)28 b(CHANNEL:io-channel\):)k(character)
1113 b Fi(e)n(xpr)-89 1308 y Fr(Reads)29 b(one)g(character)h(\(an)g
(inte)o(ger\))e(from)h(CHANNEL.)f(All)h(input)f(is)g(de\002ned)h(in)
-118 1428 y(terms)37 b(of)g(this)g(function.)67 b(If)38
b(CHANNEL)f(is)g(not)g(open)g(or)g(is)g(open)g(for)h(writing)-118
1548 y(only)-6 b(,)24 b(an)i(error)h(is)e(generated.)33
b(If)27 b(there)f(is)f(a)h(non-zero)g(v)n(alue)f(in)g(the)g(backup)h(b)
n(uf)n(fer)-118 1669 y(associated)21 b(with)g(CHANNEL,)g(the)h(b)n(uf)n
(fer)f(is)g(emptied)g(\(set)g(to)g(zero\))i(and)e(the)h(v)n(alue)-118
1789 y(returned.)66 b(Otherwise,)40 b(the)c(reading)h(function)f
(associated)g(with)g(CHANNEL)g(is)-118 1909 y(called)26
b(with)g(CHANNEL)g(as)h(ar)n(gument,)f(and)g(the)g(v)n(alue)g(it)g
(returns)g(is)g(returned)g(by)-118 2030 y(channelreadchar)-5
b(.)121 2233 y Fh(*****)59 b(Channel)f(not)h(open)121
2525 y(*****)g(Channel)f(open)h(for)g(write)f(only)-118
3028 y Fq(\(r)n(eadch\):)33 b(id)2863 b Fi(e)n(xpr)-118
3503 y Fq(\(channelr)n(eadch)28 b(CHAN:io-channel\):)j(id)1737
b Fi(e)n(xpr)-81 3624 y Fr(Lik)o(e)36 b(channelreadchar)l(,)k(b)n(ut)c
(returns)g(the)h(id)f(for)h(the)f(character)i(rather)f(than)f(its)-118
3744 y(ASCII)26 b(code.)-118 4101 y Fq(\(unr)n(eadchar)h
(CH:character\):)33 b(Unde\002ned)1689 b Fi(e)n(xpr)-118
4576 y Fq(\(channelunr)n(eadchar)28 b(CHAN:io-channel)e
(CH:character\):)32 b(Unde\002ned)563 b Fi(e)n(xpr)-94
4697 y Fr(The)24 b(input)f(backup)h(function.)29 b(Ch)c(is)e(deposited)
g(in)h(the)g(backup)f(b)n(uf)n(fer)h(associated)-118
4817 y(with)36 b(Chan.)68 b(This)36 b(function)g(should)g(be)i(only)e
(called)h(after)h(channelreadchar)f(is)-118 4937 y(called,)32
b(and)e(before)h(an)o(y)f(interv)o(ening)f(input)g(operations,)i(since)
f(it)g(is)g(used)g(by)g(the)-118 5058 y(tok)o(en)23 b(scanner)-5
b(.)30 b(The)23 b(unread)g(b)n(uf)n(fer)g(only)g(holds)f(one)h
(character)l(,)i(so)e(it)f(is)h(generally)-118 5178 y(useless)h(to)g
(unread)h(more)g(than)g(one)f(character)-5 b(.)-118 5534
y Fk(10.4.3)118 b(Reading)31 b(T)-11 b(ok)o(ens)-118
5738 y Fr(The)19 b(functions)e(described)i(here)h(pertain)e(to)h(the)f
(tok)o(en)h(scanner)g(and)g(reader)-5 b(.)29 b(Globals)18
b(and)g(switches)-118 5858 y(used)24 b(by)h(these)g(functions)e(are)j
(de\002ned)f(at)g(the)g(end)f(of)h(this)f(section.)p
eop
%%Page: 128 136
128 135 bop 118 -18 a Fr(128)118 363 y Fq(\(channelr)n(eadtok)o(en)28
b(CHANNEL:io-channel\):)33 b Fl(f)p Fq(id,)24 b(number)-9
b(,)27 b(string)p Fl(g)617 b Fi(e)n(xpr)148 484 y Fr(This)30
b(is)f(the)h(basic)g(PSL)h(tok)o(en)e(scanner)-5 b(.)47
b(The)30 b(v)n(alue)f(returned)h(is)g(an)g(item)f(corre-)118
604 y(sponding)j(to)h(the)g(ne)o(xt)g(tok)o(en)g(from)g(the)g(input)g
(stream.)56 b(An)33 b(id)g(will)g(be)h(interned)118 725
y(unless)g(the)g(switch)f Fq(*compr)n(essing)i Fr(is)f(non-nil.)58
b(If)35 b(*compressing)d(is)i(t)g(then)g(the)118 845
y(print)24 b(name)h(of)g(the)f(id)h(is)f(passed)h(to)f(ne)n(wid,)g
(otherwise)g(it)g(is)h(passed)f(to)h(intern.)118 998
y(The)g(global)f(v)n(ariable)g(toktype*)g(is)g(set)h(as)g(follo)n(ws.)
168 1115 y(0)99 b(if)25 b(the)g(tok)o(en)f(is)g(an)h(ordinary)g(id,)168
1235 y(1)99 b(if)25 b(the)g(tok)o(en)f(is)g(a)i(string,)168
1356 y(2)99 b(if)25 b(the)g(tok)o(en)f(is)g(a)i(number)l(,)e(or)168
1476 y(3)99 b(if)25 b(the)g(tok)o(en)f(is)g(an)h(unescaped)g(delimiter)
f(such)g(as)317 1596 y(\224\(\224,)i(b)n(ut)e(not)g(\224!\(\224)i(In)f
(this)f(last)g(case,)h(the)g(v)n(alue)317 1717 y(returned)g(is)g(the)f
(id)h(whose)f(print)g(name)h(is)f(the)317 1837 y(same)h(as)g(the)g
(delimiter)-5 b(.)118 1952 y(The)25 b(precise)g(beha)n(vior)f(of)h
(this)f(function)g(depends)h(on)f(tw)o(o)g(\003uid)h(v)n(ariables:)118
2076 y(Currentscantable*)g(is)f(bound)g(to)h(a)g(v)o(ector)f(kno)n(wn)g
(as)h(a)g(scan)g(table.)30 b(Described)25 b(belo)n(w)-6
b(.)118 2199 y(Currentreadmacroindicator*)20 b(is)h(bound)e(to)h(an)h
(id)f(kno)n(wn)f(as)i(a)g(read)g(macro)f(indicator)-5
b(.)29 b(Described)118 2319 y(belo)n(w)-6 b(.)118 2667
y Fq(\(ratom\):)32 b Fl(f)p Fq(id,)24 b(number)-9 b(,)27
b(string)p Fl(g)2117 b Fi(e)n(xpr)143 2787 y Fr(Reads)25
b(a)h(tok)o(en)e(from)g(the)h(current)g(input)f(channel.)118
3159 y Fq(\(channelr)n(eadtok)o(enwithhooks)29 b(CHANNEL:io-channel\):)
118 3280 y(any)3213 b Fi(e)n(xpr)147 3400 y Fr(This)27
b(function)h(reads)g(a)h(tok)o(en)f(and)g(performs)g(an)o(y)g(action)g
(speci\002ed)g(if)h(the)f(tok)o(en)118 3520 y(is)e(mark)o(ed)g(as)h(a)f
(read)h(macro)g(under)f(the)g(current)h(indicator)-5
b(.)34 b(Read)27 b(uses)f(this)g(func-)118 3641 y(tion)37
b(internally)-6 b(.)69 b(Uses)38 b(the)g(v)n(ariable)g
(currentreadmacroindicator*)g(urrentread-)118 3761 y(macroindicator*)24
b(to)g(determine)h(the)f(current)h(indicator)-5 b(.)118
4084 y Fk(10.4.4)119 b(Reading)31 b(Entir)n(e)f(Lines)118
4496 y Fq(\(r)n(eadline\):)i(string)2642 b Fi(e)n(xpr)143
4616 y Fr(Same)25 b(as)g(\(channelreadline)g(in*\))118
4711 y Fq(\(channelr)n(eadline)i(CHANNEL:io-channel\):)33
b(string)1310 b Fi(e)n(xpr)140 4831 y Fr(A)22 b(string)e(is)h(returned)
h(which)f(contains)g(each)h(character)h(from)f(the)f(current)h
(position)118 4952 y(of)j(the)g(scanner)g(to)f(the)h(ne)o(xt)f
(end-of-line)g(or)h(end-of-\002le)h(character)-5 b(.)118
5424 y Fk(10.4.5)119 b(Read)30 b(Macr)n(os)118 5618 y
Fr(At)21 b(the)g(top)g(le)n(v)o(el)f(of)i(PSL,)g(an)g(e)o(xpression)e
(is)h(read,)h(it)f(is)g(e)n(v)n(aluated,)g(and)g(then)g(the)g(result)g
(is)g(printed.)118 5738 y(Normally)30 b(a)g(macro)h(is)f(e)o(xpanded)g
(during)f(e)n(v)n(aluation.)46 b(The)31 b(read)g(macro)f(is)g(a)h(dif)n
(ferent)f(type)g(of)118 5858 y(macro,)23 b(it)g(is)f(e)o(xpanded)h
(during)f(the)h(reading)f(phase.)30 b(When)23 b(the)g(reader)h
(encounters)f(a)g(read)g(macro)p eop
%%Page: 129 137
129 136 bop -118 -18 a Fg(10.4.)55 b(FUNCTIONS)26 b(FOR)g(READING)1888
b Fr(129)-118 289 y(character)l(,)31 b(the)e(the)f(macro)h(is)g(e)o(x)o
(ecuted)f(and)h(the)g(result)f(is)h(inserted)f(in)h(place)g(of)g(the)g
(read)g(macro)-118 409 y(character)-5 b(.)-118 531 y(A)20
b(read)h(macro)f(must)f(be)i(a)f(function)f(of)i(tw)o(o)e(ar)n
(guments,)i(the)f(\002rst)g(should)f(represent)i(a)f(IO)g(channel,)-118
652 y(the)28 b(second)g(a)g(character)-5 b(.)42 b(A)28
b(character)h(which)f(represents)g(a)g(read)h(macro)f(must)f(be)h(set)g
(to)g(one)g(of)-118 772 y(tw)o(o)38 b(types)g(in)h(the)f(scan)h(table.)
72 b(It)39 b(may)f(be)h(either)g(a)g(delimiter)f(or)g(a)h(diphthong.)71
b(Diphthong)-118 893 y(corresponds)30 b(to)g(double)g(character)i(read)
f(macros,)h(delimiter)e(to)g(single)g(character)h(read)h(macros.)-118
1013 y(In)27 b(addition,)g(the)g(id)g(which)g(corresponds)g(to)g(the)g
(character)h(must)f(ha)n(v)o(e)g(a)g(reference)i(to)e(the)g(name)-118
1133 y(of)h(the)g(function)f(on)h(its)f(property)h(list.)39
b(F)o(or)28 b(a)h(diphthong)d(the)i(indicator)f(must)g(be)h
(lispdiphthong,)-118 1254 y(for)d(a)g(delimiter)f(it)g(must)g(be)h
(lispreadmacro.)-118 1376 y(The)30 b(quote)g(macro)g(may)f(be)i
(de\002ned)f(as)g(follo)n(ws.)45 b(Note)30 b(that)g(we)g(cannot)g(use)g
('form)g(in)g(place)g(of)-118 1497 y(\(quote)24 b(form\))h(until)f(we)h
(ha)n(v)o(e)f(de\002ned)i(the)e(read)i(macro.)-118 1741
y Fh(\(de)59 b(doquote)f(\(channel)g(ch\))1 1861 y(\(list)h(\(quote)g
(quote\))f(\(channelread)f(channel\)\)\))-118 2103 y(\(put)i(\(quote)f
(!'\))h(\(quote)g(lispreadmacro\)\(function)54 b(doquote\)\))-118
2346 y(\(putv)59 b(lispscantable*)d(\(char)j(!'\))g(delimiter\))-118
2588 y Fr(This)26 b(says)g(that)g(when)g(a)h(single)f(quote)f(is)i
(read,)g(PSL)g(should)e(replace)j(it)e(with)f(a)i(list)f(consisting)e
(of)-118 2708 y(quote)30 b(and)g(the)h(ne)o(xt)f(e)o(xpression)f(in)h
(the)h(input)e(\(obtained)h(by)g(an)h(e)o(xplicit)e(call)i(to)f
(channelread\).)-118 2829 y(Since)38 b(de\002ning)f(a)g(character)i(as)
e(a)g(read)h(macro)g(mak)o(es)e(it)h(dif)n(\002cult)g(to)f(use)i(the)f
(character)h(in)f(a)-118 2949 y(normal)24 b(w)o(ay)-6
b(,)24 b(read)i(macros)e(should)g(not)g(be)h(letters)g(or)f(digits.)
-118 3257 y Fk(10.4.6)118 b(T)-11 b(erminal)30 b(Interaction)-118
3667 y Fq(\(y)o(esp)25 b(MESSA)-5 b(GE:string\):)32 b(boolean)1930
b Fi(e)n(xpr)-81 3788 y Fr(If)37 b(the)g(user)g(responds)f(y)h(or)g
(yes,)j(yesp)c(returns)h(a)g(non-nil)f(v)n(alue.)66 b(A)37
b(response)-118 3908 y(of)32 b(n)g(or)h(no)f(results)f(in)h(a)h(v)n
(alue)e(of)i(nil.)52 b(It)32 b(is)g(possible)f(to)h(enter)h(a)f(break)h
(loop)e(by)-118 4029 y(responding)d(with)h(b)l(.)45 b(After)30
b(quitting)e(the)h(break)h(loop,)g(one)g(must)e(still)h(respond)g(y)-6
b(,)-118 4149 y(yes,)25 b(n,)f(or)h(no.)-118 4487 y Fk(10.4.7)118
b(Input)31 b(Status)f(and)g(Mode)-118 4897 y Fq(pr)n(omptstring*)c
Fr(=)50 b([Initially:)29 b(\224x)c(lisp)p Ff(>)p Fr(\224])1716
b Fi(global)82 5018 y Fr(Displayed)27 b(as)h(a)h(prompt)e(when)h(an)o
(y)g(input)f(is)g(tak)o(en)i(from)f(TTY)-13 b(.)28 b(Prompts)f(should)
82 5138 y(therefore)42 b(not)f(be)h(directly)f(printed.)80
b(Instead)42 b(the)f(v)n(alue)g(should)g(be)g(bound)g(to)82
5258 y(promptstring*.)-118 5509 y Fq(*eolinstringok)25
b Fr(=)g([Initially:)k(nil])2029 b Fi(switc)o(h)82 5629
y Fr(If)25 b(*eolinstringok)e(is)h(non-nil,)f(the)i(w)o(arning)g
(message)82 5750 y Fh(***)59 b(String)f(continued)g(over)h(end-of-line)
82 5870 y Fr(is)24 b(suppressed.)p eop
%%Page: 130 138
130 137 bop 118 -18 a Fr(130)118 357 y Fq(*raise)25 b
Fr(=)50 b([Initially:)29 b(t])2436 b Fi(switc)o(h)318
478 y Fr(If)27 b(*raise)f(is)g(non-nil,)g(all)g(characters)h(input)f
(for)g(ids)g(through)g(PSL)h(input)e(functions)318 598
y(are)j(raised)f(to)g(upper)h(case.)39 b(If)28 b(*raise)f(is)g(nil,)g
(characters)i(are)f(input)e(as)i(is.)38 b(A)27 b(string)318
718 y(is)d(unaf)n(fected)h(by)g(*raise.)118 983 y Fq(*compr)n(essing)g
Fr(=)g([Initially:)30 b(nil])2058 b Fi(switc)o(h)318
1104 y Fr(If)23 b(*compressing)f(is)g(non-nil,)h(channelreadtok)o(en)f
(and)h(other)g(functions)f(that)h(call)g(it)318 1224
y(do)h(not)h(intern)f(ids.)118 1469 y Fq(curr)n(entscantable*)j
Fr(=)f([Initially:)j(NIL])1809 b Fi(global)318 1589 y
Fr(This)24 b(v)n(ariable)g(is)h(set)f(to)h(lispscantable*)e(by)i(the)f
(function)g(read)118 1854 y Fq(curr)n(entr)n(eadmacr)n(oindicator*)29
b Fr(=)50 b([Initially:)29 b(NIL)c(])1309 b Fi(global)318
1974 y Fr(The)29 b(function)f(read)i(binds)e(this)h(v)n(ariable)f(to)h
(the)g(v)n(alue)g(LISPREADMA)l(CR)l(O.)h(Its)318 2095
y(v)n(alue)23 b(determines)h(the)g(property)f(list)g(indicator)h(used)g
(in)f(looking)g(up)h(read)g(macros.)318 2215 y(The)i(user)g(may)g
(de\002ne)h(a)g(set)f(of)g(read)h(macros)f(using)f(some)h(ne)n(w)g
(indicator)f(and)h(re-)318 2335 y(bind)19 b(this)h(v)n(ariable.)28
b(Ordinary)20 b(read)h(macros)f(may)g(be)h(added)f(by)g(putting)f
(properties)318 2456 y(on)24 b(ids)h(under)f(the)h(LISPREADMA)l(CR)l(O)
h(indicator)-5 b(.)118 2825 y Ft(10.5)143 b(File)35 b(System)f
(Interface:)42 b(Open)34 b(and)h(Close)118 3301 y Fq(\(open)26
b Fd(FILEN)m(AME:string)c(A)l(CCESSTYPE:id\):)k(CHANNEL:io-channel)805
b Fi(e)n(xpr)153 3422 y Fr(If)35 b(AccessT)-8 b(ype)34
b(is)g(eq)h(to)f(input)f(or)i(output,)g(an)g(attempt)e(is)h(made)g(to)g
(access)h(the)118 3542 y(system-dependent)26 b(FILEN)m(AME)g(for)i
(reading)f(or)g(writing.)37 b(If)27 b(the)g(attempt)g(is)f(un-)118
3663 y(successful,)33 b(an)f(error)h(is)f(generated;)j(otherwise)d(a)g
(free)h(channel)f(is)f(returned)h(and)118 3783 y(initialized)24
b(to)g(the)h(def)o(ault)f(conditions)f(for)i(ordinary)g(\002le)g(input)
f(or)h(output.)118 3949 y(If)30 b(none)f(of)h(these)f(conditions)f
(hold,)i(a)g(\002le)g(is)f(not)g(a)n(v)n(ailable,)h(or)f(there)h(are)g
(no)g(free)g(channels,)g(an)118 4070 y(error)c(is)e(generated.)357
4429 y Fh(*****)59 b(Unknown)f(access)h(type)357 4549
y(*****)g(Improperly)e(set-up)i(special)f(IO)h(open)g(call)357
4669 y(*****)g(File)g(not)g(found)357 4790 y(*****)g(No)g(free)g
(channels)118 5132 y Fr(If)26 b(AccessT)-8 b(ype)25 b(is)g(eq)h(to)e
(SPECIAL,)j(no)e(\002le)h(is)e(opened.)32 b(Instead)26
b(the)f(channel)g(is)g(initialized)f(as)h(a)118 5253
y(generalized)g(input)f(and/or)g(output)g(stream.)30
b(See)c(belo)n(w)-6 b(.)118 5608 y Fq(\(\002lep)26 b(N)n(AME:string\):)
32 b(boolean)2113 b Fi(e)n(xpr)146 5728 y Fr(This)26
b(function)h(will)f(return)i(t)f(if)g(\002le)h(N)m(AME)e(can)i(be)g
(opened,)f(and)h(nil)f(if)g(not,)g(e.g.)118 5849 y(if)e(it)f(does)h
(not)f(e)o(xist.)p eop
%%Page: 131 139
131 138 bop -118 -18 a Fg(10.6.)55 b(LO)m(ADING)24 b(MODULES)2182
b Fr(131)-118 357 y Fq(\(close)25 b(CHANNEL:io-channel\):)32
b(io-channel)1592 b Fi(e)n(xpr)-84 478 y Fr(The)34 b(closing)e
(function)h(associated)g(with)g(CHANNEL)h(is)g(called,)h(with)e(CHAN-)
-118 598 y(NEL)d(as)g(its)f(ar)n(gument.)46 b(If)31 b(it)e(is)h(ille)o
(gal)e(to)i(close)f(CHANNEL,)h(if)g(CHANNEL)g(is)-118
718 y(not)i(open,)i(or)e(if)h(CHANNEL)f(is)g(associated)g(with)g(a)g
(\002le)h(and)g(the)f(\002le)h(cannot)f(be)-118 839 y(closed)24
b(by)g(the)h(operating)f(system,)f(this)h(function)f(generates)i(an)g
(error)-5 b(.)31 b(Otherwise,)-118 959 y(CHANNEL)25 b(is)f(mark)o(ed)h
(as)g(free)g(and)g(is)f(returned.)-118 1089 y(Here)34
b(is)e(a)h(simple)f(e)o(xample)g(of)h(input)f(from)h(a)g(particular)g
(\002le)g(with)f(output)g(sent)h(to)f(the)h(current)-118
1210 y(output)27 b(channel.)39 b(This)28 b(function)f(reads)h(forms)f
(from)h(the)g(\002le)g(MYFILE.D)l(A)-11 b(T)27 b(and)h(prints)f(out)h
(all)-118 1330 y(those)35 b(whose)g(car)h(is)f(eq)h(to)f(its)f
(parameter)-5 b(.)63 b(Using)34 b(unwind-protect,)j(we)f(are)g(assured)
f(that)g(the)-118 1450 y(channel)25 b(\(and)g(the)f(\002le\),)i(will)d
(be)i(closed)g(in)f(all)h(cases,)g(including)e(errors.)1
1667 y Fh(\(de)60 b(filter-my-file)c(\(x\))121 1788 y(\(let)j(\(\(chan)
f(\(open)h("MYFILE.DAT")e('input\)\))480 1908 y(form\))241
2028 y(\(unwind-protect)360 2149 y(\(while)i(\(neq)f(\(setq)h(form)g
(\(channelread)e(chan\)\))1077 2269 y($eof$\))779 2389
y(\(if)i(\(and)g(\(pairp)f(form\))h(\(eq)g(\(car)g(form\))f(x\)\))898
2510 y(\(print)h(form\)\)\))360 2630 y(\(close)g(chan\)\)\)\))-118
2968 y Ft(10.6)142 b(Loading)35 b(Modules)-118 3192 y
Fr(T)-8 b(w)o(o)21 b(con)l(v)o(enient)e(procedures)i(are)h(a)n(v)n
(ailable)e(for)h(loading)f(modules.)28 b(V)-11 b(arious)20
b(f)o(acilities)g(described)-118 3312 y(in)29 b(this)g(manual)h(are)g
(actually)g(in)f(loadable)h(modules)f(and)g(their)h(documentation)e
(notes)i(that)f(the)o(y)-118 3432 y(must)21 b(be)i(loaded.)30
b(Loadable)22 b(modules)f(typically)h(e)o(xist)f(as)i(F)-7
b(ASL)23 b(\002les)g(.B)g(\002les)f(see)h(the)g(section)f(on)-118
3553 y(the)j(compiler)f(for)h(information)e(on)i(producing)e(F)-7
b(ASL)26 b(\002les.)-118 3898 y Fq(\(load)f([FILE:)p
Fl(f)p Fq(string,)g(id)p Fl(g)p Fq(]\):)32 b(nil)2030
b Fi(macr)l(o)-94 4018 y Fr(F)o(or)24 b(each)h(ar)n(gument)e(FILE,)i
(an)f(attempt)f(is)h(made)f(to)h(locate)g(a)h(corresponding)e(\002le.)
-118 4139 y(If)36 b(a)h(\002le)f(is)f(found)h(then)f(it)h(will)f(be)h
(loaded)f(by)h(a)g(call)g(on)g(an)g(appropriate)g(func-)-118
4259 y(tion.)58 b(A)34 b(full)g(\002le)g(name)g(is)g(constructed)g(by)f
(using)h(the)g(directory)g(speci\002cations)-118 4379
y(in)25 b(loaddirectories*)g(and)g(the)h(e)o(xtensions)d(in)j(loade)o
(xtensions*.)k(The)c(strings)e(from)-118 4500 y(each)g(list)f(are)i
(used)f(in)f(a)h(left)g(to)g(right)f(order)l(,)h(for)g(a)g(gi)n(v)o(en)
f(string)g(from)h(loaddirecto-)-118 4620 y(ries*)g(each)h(e)o(xtension)
e(from)i(loade)o(xtensions*)d(is)i(used.)30 b(More)24
b(information)g(about)-118 4741 y(loaddirectories*)g(and)g(loade)o
(xtensions*)f(can)i(be)g(found)f(belo)n(w)-6 b(.)-118
4871 y(While)29 b(the)g(\002le)g(is)g(being)f(loaded)h(*usermode)g
(will)f(be)h(set)g(to)g(nil.)43 b(If)30 b(a)f(\002le)h(cannot)e(be)i
(found)e(the)-118 4991 y(call)d(on)f(load)h(will)f(be)h(aborted.)121
5208 y Fh(*****)59 b(`FILE')f(load)h(module)f(not)h(found)-118
5425 y Fr(If)25 b(either)g(*v)o(erboseload)f(or)g(*printloadnames)f(is)
i(non-nil)f(then)121 5641 y Fh(***)59 b(loading)f(FULL-NAME)-118
5858 y Fr(is)24 b(printed)g(just)g(prior)h(to)f(loading)g(the)h
(\002le.)31 b(Once)25 b(a)g(\002le)g(has)g(been)g(loaded)f(the)h
(message)p eop
%%Page: 132 140
132 139 bop 118 -18 a Fr(132)357 289 y Fh(***)59 b(FILE)g(loaded)118
487 y Fr(will)26 b(be)g(printed)g(if)h(the)f(*v)o(erboseload)f(is)h
(non-nil.)35 b(In)26 b(addition,)g(the)g(name)g(FILE)h(is)f(added)h(to)
f(the)118 607 y(list)i(referenced)i(by)e(options*.)41
b(If)29 b(an)g(attempt)f(is)g(made)h(to)f(load)g(a)h(\002le)h(which)e
(has)g(been)h(partially)118 728 y(loaded)c(then)238 926
y Fh(***)59 b(Warning:)f(Load)h(of)g(FILE)g(previously)e(requested,)h
(but)h(incomplete.)118 1125 y Fr(will)27 b(be)h(printed.)40
b(If)29 b(FILE)f(is)g(found)f(to)h(be)g(in)g(options*)e(then)i(the)f
(attempt)g(to)h(load)g(FILE)g(will)f(be)118 1245 y(ignored.)357
1443 y Fh(***)59 b(FILE)g(already)f(loaded)118 1642 y
Fr(Note)20 b(that)f(memq)f(is)i(used)f(to)g(determine)g(if)h(FILE)g(is)
f(in)g(options*.)28 b(Therefore)20 b(when)g(you)f(use)g(string)118
1762 y(ar)n(guments)36 b(for)i(loading)e(\002les,)k(although)35
b(identical)i(names)f(for)h(ids)g(refer)h(to)e(the)h(same)g(object,)118
1882 y(identical)24 b(names)h(for)g(strings)e(refer)j(to)f(dif)n
(ferent)f(objects.)118 2228 y Fq(\(r)n(eload)i([FILE:)p
Fl(f)p Fq(string,id)p Fl(g)p Fq(]\):)32 b(nil)1968 b
Fi(macr)l(o)148 2348 y Fr(Reload)30 b(is)g(v)o(ery)f(similar)g(to)g
(load.)45 b(The)30 b(dif)n(ference)g(between)g(the)g(tw)o(o)f(is)h
(that)f(for)118 2468 y(each)j(name)f(FILE,)h(the)f(\002rst)h(occurance)
g(of)f(FILE)h(in)f(options*)f(will)g(be)i(remo)o(v)o(ed)118
2589 y(before)25 b(attempting)f(to)g(load)g(the)h(\002le.)118
2958 y Fq(\(imports)g(FILES:list\):)32 b(nil)2321 b Fi(e)n(xpr)153
3078 y Fr(This)33 b(function)h(is)g(also)g(used)g(to)g(load)g(modules.)
58 b(If)35 b(imports)e(is)h(in)l(v)n(ok)o(ed)f(as)i(an-)118
3198 y(other)24 b(module)e(is)h(being)h(loaded,)f(then)g(the)h(modules)
e(speci\002ed)i(by)g(FILES)g(will)f(not)118 3319 y(be)33
b(loaded)g(until)e(the)i(loading)f(of)h(the)g(current)g(module)f(is)g
(complete.)55 b(Otherwise)118 3439 y(imports)23 b(is)i(identical)f(to)g
(load.)118 3808 y Fq(loaddir)n(ectories*)50 b Fr(=)25
b([Initially:)30 b(list])1910 b Fi(global)318 3928 y
Fr(References)35 b(a)f(list)e(of)i(strings)e(to)i(append)f(to)g(the)h
(front)f(of)h(\002le)f(names)h(passed)f(as)318 4049 y(ar)n(guments)24
b(to)g(load,)h(reload,)g(and)f(imports.)118 4297 y Fq(loadextensions*)h
Fr(=)g([Initially:)k(association-list])1473 b Fi(global)318
4418 y Fr(References)30 b(the)e(a-list)f Fh(\(\(".b")58
b(.)120 b(faslin\))58 b(\(".lap")g(.)119 b(lapin\)\))318
4658 y Fr(The)28 b(car)i(of)e(each)i(pair)e(is)g(a)h(string)f(which)g
(represents)g(an)h(e)o(xtension)e(to)h(append)g(to)318
4779 y(the)g(end)f(of)h(the)g(\002le)g(names)g(passed)f(as)h(ar)n
(guments)g(to)f(load,)h(reload,)h(and)f(imports.)318
4899 y(The)d(cdr)f(is)g(a)h(function)f(appropriate)g(for)h(loading)f(a)
h(\002le)g(of)f(a)h(particular)g(e)o(xtension.)318 5020
y(F)o(or)g(e)o(xample,)f(a)h(\002le)g(whose)f(e)o(xtension)g(is)g(B)h
(is)g(loaded)f(with)g(the)h(function)f(f)o(aslin.)118
5268 y Fq(options*)h Fr(=)g([Initially:)k(nil])2277 b
Fi(global)318 5388 y Fr(Once)36 b(a)g(\002le)g(corresponding)f(to)g(an)
h(ar)n(gument)f(FILE)h(to)f(either)h(load,)i(reload,)g(or)318
5509 y(imports)30 b(has)h(been)h(loaded,)h(FILE)f(will)f(be)g(added)h
(to)f(the)g(list)g(referenced)i(by)e(op-)318 5629 y(tions*.)e(An)23
b(attempt)f(to)h(load)g(a)h(\002le)g(by)f(applying)f(load)h(or)g
(imports)f(will)h(be)g(aborted)318 5750 y(if)31 b(FILE)h(is)e(found)h
(in)g(options*.)48 b(Reload)31 b(remo)o(v)o(es)f(the)h(\002rst)g
(occurance)h(of)g(FILE)318 5870 y(from)25 b(options*)e(before)i
(passing)f(its)g(ar)n(gument)g(to)h(load.)p eop
%%Page: 133 141
133 140 bop -118 -18 a Fg(10.7.)55 b(READING)25 b(FILES)h(INT)n(O)f
(PSL)1943 b Fr(133)-118 357 y Fq(*v)o(erboseload)25 b
Fr(=)g([Initially:)k(nil])2080 b Fi(switc)o(h)82 478
y Fr(If)38 b(non-nil,)j(a)d(message)g(is)g(displayed)f(when)h(a)h
(request)f(is)g(made)g(to)g(load)g(a)g(\002le)82 598
y(which)25 b(has)g(already)g(been)h(loaded,)f(when)g(a)g(\002le)h(is)f
(about)g(to)f(be)i(loaded,)f(and)g(when)82 718 y(the)d(loading)g(of)g
(a)h(\002le)g(is)f(complete.)29 b(Since)23 b(*redefmsg)g(is)f(set)g(to)
g(the)g(v)n(alue)g(of)h(*v)o(er)n(-)82 839 y(boseload,)j(a)h(non-nil)e
(v)n(alue)h(will)g(also)g(cause)h(a)g(message)f(to)g(be)h(printed)e
(whene)n(v)o(er)82 959 y(a)g(function)f(is)g(rede\002ned)i(during)e(a)h
(load.)-118 1210 y Fq(*printloadnames)g Fr(=)g([Initially:)30
b(nil])1918 b Fi(switc)o(h)82 1330 y Fr(If)25 b(non-nil,)f(a)h(message)
f(is)h(printed)f(when)g(a)i(\002le)f(is)f(about)g(to)h(be)g(loaded.)
-118 1629 y Ft(10.7)142 b(Reading)34 b(Files)h(into)g(PSL)-118
1857 y Fr(The)27 b(follo)n(wing)f(procedures)i(are)g(used)f(to)g(read)h
(complete)f(\002les)g(into)g(PSL,)h(by)f(\002rst)h(calling)f(open,)-118
1977 y(and)k(then)f(processing)h(each)g(top)g(le)n(v)o(el)e(form)i(in)g
(the)g(\002le.)49 b(The)31 b(ef)n(fect)g(is)g(similar)f(to)g(what)h(w)o
(ould)-118 2097 y(happen)25 b(if)g(the)h(\002le)f(were)h(typed)f(into)g
(PSL.)h(File)f(names)g(are)h(represented)g(by)f(strings.)31
b(File)26 b(names)-118 2218 y(may)e(be)h(gi)n(v)o(en)f(using)f(full)i
(system)e(dependent)i(\002le)g(name)g(con)l(v)o(entions.)-118
2559 y Fq(*echo)g Fr(=)g([Initially:)30 b(nil])2394 b
Fi(switc)o(h)82 2679 y Fr(The)32 b(switch)g(echo)h(is)f(used)g(to)g
(control)g(the)h(echoing)f(of)g(input.)53 b(When)33 b(\(on)f(echo\))82
2800 y(is)26 b(placed)g(in)g(an)g(input)g(\002le,)h(the)f(contents)f
(of)i(the)f(\002le)g(are)h(echoed)g(on)f(the)g(standard)82
2920 y(output)j(de)n(vice.)47 b(Dskin)30 b(does)g(not)f(change)i(the)f
(v)n(alue)g(of)h(*echo,)g(so)f(one)h(may)f(say)82 3040
y(\(on)24 b(echo\))i(before)f(calling)f(dskin,)g(and)g(the)h(input)f
(will)g(be)h(echoed.)-118 3291 y Fq(\(dskin)h(N)n(AME:string\):)31
b(nil,)25 b(abort)2003 b Fi(e)n(xpr)-89 3411 y Fr(The)29
b(contents)f(of)i(the)e(\002le)i(are)g(processed)f(as)g(if)g(the)o(y)f
(were)i(typed)e(in.)43 b(If)30 b(the)f(pro-)-118 3532
y(cessing)c(of)g(the)g(\002le)h(is)f(aborted)h(the)f(return)g(v)n(alue)
g(will)g(be)g(the)h(identi\002er)f(abort)g(and)-118 3652
y(the)g(follo)n(wing)d(error)k(message)e(will)g(be)h(printed.)-118
3804 y Fh(*****)59 b(DSKIN)f(of)i(`NAME')e(aborted)g(after)h(N)g
(form\(s\))-118 4047 y Fr(A)28 b(count)f(of)g(each)i(top)e(le)n(v)o(el)
f(form)i(is)f(k)o(ept)g(as)h(the)o(y)f(are)h(processed,)g(which)g(is)f
(the)g(v)n(alue)g(N)h(in)f(the)-118 4167 y(error)32 b(message.)49
b(Once)31 b(in*)g(has)g(been)g(bound)g(to)f(the)h(channel)g(which)g
(represents)g(the)g(open)g(\002le,)-118 4288 y(each)25
b(form)g(is)f(processed)h(by)g(a)g(function)f(similar)f(to)i(the)f(one)
h(belo)n(w)-6 b(.)1 4532 y Fh(\(de)60 b(dskin-step)d(\(\))121
4653 y(\(let)i(\(\(form)f(\(funcall)g(toploopread*\)\)\))241
4773 y(\(cond)g(\(\(eq)h(form)g($eof$\))f('eof\))599
4894 y(\(\(not)h(*defn\))659 5014 y(\(funcall)f(toploopprint*)f
(\(funcall)h(toploopeval*)f(form\)\))599 5134 y(\(dfprint*)h(\(funcall)
g(dfprint*)g(form\)\))599 5255 y(\(t)i(\(prettyprint)d(form\)\)\)\)\))
-118 5497 y Fr(Note)33 b(that)g(the)h(functions)e(used)i(for)g
(reading,)h(e)n(v)n(aluating)d(and)i(printing)e(are)i(the)g(same)f(as)h
(those)-118 5618 y(used)c(in)g(toploop)f(\(see)j(Chapter)f(15)f(for)h
(more)f(information\).)47 b(If)31 b(dfprint*)e(has)i(a)g(v)n(alue)f
(\(and)g(the)-118 5738 y(switch)d(*defn)g(is)g(non-nil\),)g(then)h(it)f
(will)f(be)i(applied)f(to)g(the)g(e)o(xpression)g(instead)g(of)g
(applying)f(the)-118 5858 y(functions)36 b(bound)h(to)g(toploope)n(v)n
(al*)d(and)j(toploopprint*.)66 b(If)38 b(dfprint*)e(does)h(not)g(ha)n
(v)o(e)g(a)h(v)n(alue)p eop
%%Page: 134 142
134 141 bop 118 -18 a Fr(134)118 289 y(\(and)31 b(the)g(switch)f(*defn)
g(is)h(nil\),)g(then)g(the)f(e)o(xpression)g(will)g(be)g(simply)g(be)g
(printed)h(by)f(a)h(call)g(on)118 409 y(prettyprint.)118
548 y(Dskin)c(is)g(\003agged)i(ignore.)39 b(This)27 b(means)g(that)h
(when)g(a)g(\002le)g(is)f(compiled,)h(a)g(top)f(le)n(v)o(el)g
(application)118 668 y(of)i(dskin)e(will)g(be)i(e)n(v)n(aluated)e(b)n
(ut)h(not)g(compiled.)40 b(F)o(or)28 b(more)g(information)f(about)h
(the)g(\003ag)h(ignore)118 789 y(see)c(Chapter)h(19.)118
1152 y Fq(\(lapin)f(N)n(AME:string\):)32 b Fl(f)p Fq(nil,)24
b(abort)p Fl(g)1920 b Fi(e)n(xpr)156 1272 y Fr(Almost)37
b(identical)h(to)f(dskin.)70 b(The)39 b(dif)n(ference)f(is)g(that)g
(the)g(function)f(bound)h(to)118 1393 y(toploopprint*)25
b(is)h(not)h(applied.)37 b(In)27 b(general,)h(this)e(means)h(that)f
(the)h(results)g(of)g(e)n(v)n(al-)118 1513 y(uation)d(are)i(not)e
(printed.)118 1682 y(Note)29 b(that)g(lapin)f(is)h(not)g(\003agged)g
(ignore)g(as)h(is)e(dskin.)43 b(This)29 b(means)g(that)f(a)i(top)f(le)n
(v)o(el)f(application)118 1802 y(of)d(lapin)f(is)h(compiled)e(b)n(ut)i
(not)f(e)n(v)n(aluated.)30 b(F)o(or)25 b(more)f(information)g(on)g(ho)n
(w)g(the)h(\003ags)g(ignore)g(and)118 1922 y(e)n(v)n(al)f(ef)n(fect)h
(compilation)e(see)i(Chapter)h(19.)118 2280 y Fq(\(faslin)f(FILEN)n
(AME:string\):)32 b(nil)2052 b Fi(e)n(xpr)152 2400 y
Fr(This)34 b(is)g(an)g(ef)n(\002cient)h(binary)f(read)g(loop,)i(which)e
(fetches)g(blocks)g(of)g(code,)j(con-)118 2520 y(stants)30
b(and)h(compactly)e(stored)i(ids.)48 b(It)30 b(uses)h(a)g(bit-table)f
(to)g(relocate)h(code)g(and)g(to)118 2641 y(identify)26
b(special)g(LISP-oriented)h(constructs.)35 b(FILEN)m(AME)26
b(must)f(be)i(a)g(complete)118 2761 y(\002le)e(name.)118
3227 y Ft(10.8)143 b(About)34 b(I/O)h(Channels)118 3707
y Fq(\(rds)26 b(CHANNEL:io-channel,)g(nil\):)31 b(io-channel)1497
b Fi(e)n(xpr)145 3828 y Fr(Rds)26 b(sets)g(in*)g(to)h(the)f(v)n(alue)g
(of)h(its)e(ar)n(gument,)i(and)f(returns)h(the)f(pre)n(vious)f(v)n
(alue)h(of)118 3948 y(in*.)36 b(In)26 b(addition,)g(if)g
(specialrdsaction*)g(is)g(non-nil,)g(it)g(should)f(be)i(a)g(function)f
(of)g(2)118 4069 y(ar)n(guments,)d(which)g(is)g(called)g(with)g(the)g
(old)g(channel)g(as)h(its)f(\002rst)g(ar)n(gument)g(and)g(the)118
4189 y(ne)n(w)f(channel)h(as)f(its)g(second)g(ar)n(gument.)30
b(\(rds)22 b(nil\))g(does)h(the)f(same)g(as)h(\(rds)f(stdin*\).)118
4576 y Fq(\(wrs)j(CHANNEL:io-channel,)h(nil\):)31 b(io-channel)1481
b Fi(e)n(xpr)142 4696 y Fr(Wrs)25 b(sets)e(out*)h(to)g(the)g(v)n(alue)f
(of)h(its)g(ar)n(gument)g(and)g(returns)g(the)g(pre)n(vious)f(v)n(alue)
g(of)118 4817 y(out*.)37 b(In)27 b(addition,)f(if)h(special)o
(wrsaction*)e(is)i(non-nil,)f(it)h(should)f(be)h(a)g(function)f(of)118
4937 y(2)j(ar)n(guments,)g(which)f(is)h(called)g(with)f(the)h(old)f
(channel)h(as)g(its)f(\002rst)h(ar)n(gument)f(and)118
5058 y(the)34 b(ne)n(w)f(channel)h(as)g(its)g(second)f(ar)n(gument.)58
b(\(wrs)34 b(nil\))g(does)f(the)h(same)g(as)g(\(wrs)118
5178 y(stdout*\).)118 5272 y(Global)24 b(v)n(ariables)g(containing)g
(information)f(about)h(channels)h(are)g(listed)f(belo)n(w)-6
b(.)118 5629 y Fq(in*)25 b Fr(=)g([Initially:)k(0])2560
b Fi(global)318 5750 y Fr(Contains)22 b(the)h(currently)g(selected)g
(input)f(channel.)30 b(May)23 b(be)h(set)e(or)i(rebound)e(by)h(the)318
5870 y(user)-5 b(.)30 b(This)24 b(is)h(changed)f(by)h(the)g(function)f
(rds.)p eop
%%Page: 135 143
135 142 bop -118 -18 a Fg(10.9.)55 b(I/O)25 b(T)n(O)g(AND)f(FR)l(OM)i
(LISTS)f(AND)g(STRINGS)1336 b Fr(135)-118 357 y Fq(out*)25
b Fr(=)g([Initially:)k(1])2505 b Fi(global)82 478 y Fr(Contains)30
b(the)g(currently)h(selected)g(output)e(channel.)49 b(May)30
b(be)h(set)g(or)g(rebound)f(by)82 598 y(the)24 b(user)-5
b(.)31 b(This)24 b(is)g(changed)h(by)f(the)h(function)f(wrs.)-118
868 y Fq(stdin*)h Fr(=)50 b([Initially:)29 b(0])2408
b Fi(global)82 988 y Fr(The)34 b(standard)f(input)g(channel)h(\(b)n(ut)
g(not)f(in)h(the)g(Unix)f(sense)h(of)g(standard)g(input\).)82
1109 y(Channel)c(0)g(is)f(ordinarily)g(the)h(terminal)f(and)h(this)f(v)
n(ariable)g(is)h(not)f(intended)g(to)h(be)82 1229 y(set)24
b(or)h(rebound.)-118 1479 y Fq(stdout*)g Fr(=)g([Initially:)30
b(1])2377 b Fi(global)82 1599 y Fr(The)22 b(standard)h(output)e
(channel.)30 b(Lik)o(e)22 b(channel)h(0,)g(channel)g(1)f(is)g
(ordinarily)g(al)o(w)o(ays)82 1719 y(the)i(terminal,)g(and)h(this)f(v)n
(ariable)g(is)h(not)f(intended)g(to)g(be)h(set)g(or)g(rebound.)-118
1982 y Fq(br)n(eakin*)h Fr(=)f([Initially:)k(nil])2257
b Fi(global)82 2102 y Fr(The)26 b(channel)f(from)h(which)f(the)h(break)
g(loop)f(gets)g(its)g(input.)33 b(It)26 b(has)g(been)f(set)h(to)f(de-)
82 2223 y(f)o(ault)f(to)g(stdin*,)f(b)n(ut)h(may)g(ha)n(v)o(e)g(to)g
(be)h(changed)f(on)g(some)g(systems)f(with)h(b)n(uf)n(fered-)82
2343 y(IO.)-118 2592 y Fq(br)n(eak)o(out*)i Fr(=)f([Initially:)k(nil])
2203 b Fi(global)82 2713 y Fr(The)26 b(channel)g(to)g(which)f(the)h
(break)h(loop)e(sends)h(its)f(output.)33 b(It)27 b(has)f(been)g(set)g
(to)f(de-)82 2833 y(f)o(ault)20 b(to)g(stdout*,)g(b)n(ut)g(may)g(ha)n
(v)o(e)g(to)g(be)h(changed)g(on)f(some)g(systems)f(with)h(b)n(uf)n
(fered-)82 2954 y(IO.)-118 3203 y Fq(err)n(out*)26 b
Fr(=)f([Initially:)k(1])2374 b Fi(global)82 3323 y Fr(The)25
b(channel)f(used)h(by)f(the)h(errorprintf.)-118 3593
y Fq(specialrdsaction*)g Fr(=)g([Initially:)k(nil])1901
b Fi(global)-118 3962 y Fq(specialwrsaction*)24 b Fr(=)i([Initially:)j
(nil])1884 b Fi(global)-118 4483 y Ft(10.9)142 b(I/O)36
b(to)f(and)g(fr)m(om)g(Lists)g(and)g(Strings)-118 4970
y Fq(\(bldmsg)25 b(FORMA)-9 b(T)i(:string,)24 b([ARGS:any]\):)31
b(string)1365 b Fi(e)n(xpr)-94 5090 y Fr(Printf)24 b(to)g(string.)30
b(This)23 b(can)i(be)f(used)g(as)g(a)h(v)o(ery)f(con)l(v)o(enient)f(w)o
(ay)h(of)g(obtaining)f(the)-118 5210 y(printed)28 b(representation)h
(of)g(an)g(object)g(for)g(further)h(analysis.)42 b(In)29
b(man)o(y)f(cases)i(it)e(is)-118 5331 y(also)j(a)h(v)o(ery)f(con)l(v)o
(enient)f(w)o(ay)i(of)g(constructing)e(a)i(needed)f(string.)50
b(An)32 b(error)g(will)-118 5451 y(occur)f(on)f(o)o(v)o(er\003o)n(w)-6
b(.)46 b(Ov)o(er\003o)n(w)30 b(occurs)g(when)g(the)h(length)e(of)i(the)
f(result)g(e)o(xceeds)-118 5572 y(the)25 b(v)n(alue)f(of)h(maxtok)o
(ensize.)-118 5858 y Fh(*****)59 b(Buffer)f(overflow)g(while)h
(constructing)e(error)h(message:)g(FORMAT)p eop
%%Page: 136 144
136 143 bop 118 -18 a Fr(136)118 357 y Fq(\(\003atsize)25
b(U:any\):)32 b(integer)2361 b Fi(e)n(xpr)143 478 y Fr(Character)26
b(length)e(of)h(prin1)f(S-e)o(xpression.)118 847 y Fq(\(\003atsize2)h
(U:any\):)32 b(integer)2311 b Fi(e)n(xpr)143 967 y Fr(Prin2)25
b(v)o(ersion)f(of)g(\003atsize.)118 1316 y Fq(\(explode)i(U:any\):)31
b(id-list)2382 b Fi(e)n(xpr)154 1436 y Fr(Explode)34
b(tak)o(es)h(the)h(constituent)d(characters)k(of)e(an)h(S-e)o
(xpression)f(and)g(forms)g(a)118 1556 y(list)24 b(of)h(single)f
(character)i(ids.)31 b(It)25 b(is)g(implemented)e(via)i(the)g(function)
f(channelprin1,)118 1677 y(with)k(a)g(list)g(rather)h(than)f(a)g
(\002le)h(or)g(terminal)e(as)i(destination.)39 b(Returned)29
b(is)f(a)h(list)e(of)118 1797 y(interned)c(characters)i(representing)e
(the)g(characters)h(required)g(to)f(print)g(the)g(v)n(alue)g(of)118
1917 y(U.)357 2045 y Fh(1)60 b(lisp>)e(\(explode)g('foo\))357
2165 y(\(f)i(O)f(O\))357 2286 y(2)h(lisp>)e(\(explode)g('\(a)i(.)f
(b\)\))357 2406 y(\(!\()g(a)h(!)119 b(!.)60 b(!)119 b(b)59
b(!\)\))118 2797 y Fq(\(explode2)26 b(U:atom-v)o(ector\):)31
b(id-list)1974 b Fi(e)n(xpr)143 2917 y Fr(Prin2)25 b(v)o(ersion)f(of)g
(e)o(xplode.)118 3286 y Fq(\(compr)n(ess)i(U:id-list\):)31
b(atom-v)o(ector)1954 b Fi(e)n(xpr)142 3407 y Fr(U)23
b(is)g(a)h(list)f(of)h(single)e(character)j(identi\002ers)e(which)g(is)
g(b)n(uilt)g(into)f(a)i(PSL)h(entity)d(and)118 3527 y(returned.)45
b(Recognized)30 b(are)h(numbers,)f(strings,)f(and)h(identi\002ers)f
(with)g(the)h(escape)118 3647 y(character)36 b(pre\002xing)f(special)g
(characters.)62 b(The)35 b(formats)f(of)h(these)g(items)f(appear)118
3768 y(in)k(the)g(\224Primiti)n(v)o(e)f(Data)i(T)-8 b(ypes\224)38
b(Section,)k(Section)c(2.1.2.)71 b(Identi\002ers)39 b(are)g(not)118
3888 y(interned)26 b(on)f(the)h(id-hash-table.)34 b(Function)25
b(pointers)g(may)h(not)f(be)h(compressed.)34 b(If)118
4008 y(an)28 b(entity)e(cannot)h(be)h(parsed)g(out)f(of)g(U)h(or)f
(characters)i(are)f(left)f(o)o(v)o(er)g(after)h(parsing)118
4129 y(an)d(error)h(occurs:)357 4256 y Fh(*****)59 b(Poorly)f(formed)h
(atom)g(in)g(COMPRESS)118 4647 y Fq(\(implode)25 b(U:id-list\):)31
b(atom)2305 b Fi(e)n(xpr)143 4768 y Fr(Compress)24 b(with)g(ids)h
(interned.)118 5131 y Ft(10.10)142 b(Generalized)33 b(Input/Output)g
(Str)m(eams)118 5355 y Fr(All)j(input)g(and)g(output)g(functions)g(are)
h(implemented)e(in)h(terms)g(of)h(operations)f(on)g(\224channels\224.)
118 5475 y(A)h(channel)f(is)g(just)g(a)h(small)e(inte)o(ger)1502
5439 y Fm(1)1578 5475 y Fr(which)i(has)f(3)h(functions)e(and)i(some)f
(other)g(information)118 5596 y(associated)24 b(with)h(it.)30
b(The)25 b(three)g(functions)e(are:)p 118 5638 1418 4
v 230 5729 a Fj(1)268 5759 y Fp(The)e(range)f(of)h(channel)f(numbers)g
(is)i(from)e(0)i(to)f(MaxChannels,)f(where)h(MaxChannels)f(is)i(a)g
(system-dependent)118 5858 y(constant,)d(currently)g(31,)g(de\002ned)g
(in)i(the)f(module)f Fc(io-decls)p eop
%%Page: 137 145
137 144 bop -118 -18 a Fg(10.10.)55 b(GENERALIZED)24
b(INPUT/OUTPUT)h(STREAMS)1175 b Fr(137)2 289 y(1.)49
b(A)23 b(reading)f(function,)h(which)f(is)g(called)h(with)f(the)h
(channel)g(as)g(its)f(ar)n(gument)g(and)h(returns)f(the)126
409 y(inte)o(ger)27 b(ASCII)i(v)n(alue)e(of)h(the)g(ne)o(xt)f
(character)h(of)g(the)g(input)f(stream.)39 b(If)28 b(the)g(channel)g
(is)f(for)126 529 y(writing)c(only)-6 b(,)23 b(this)g(function)h(is)f
(writeonlychannel.)30 b(If)24 b(the)g(channel)g(has)h(not)e(been)i
(opened,)126 650 y(this)33 b(function)g(is)g(channelnotopen.)57
b(The)34 b(reading)f(function)g(is)h(responsible)f(for)h(echoing)126
770 y(characters)28 b(if)f(the)g(\003ag)g(*echo)h(is)e(non-nil.)37
b(It)27 b(should)f(use)h(the)g(function)f(writechar)h(to)g(echo)126
891 y(the)38 b(character)-5 b(.)70 b(It)38 b(may)g(not)g(be)g
(appropriate)f(for)i(a)f(read)h(function)e(to)g(echo)i(characters.)126
1011 y(F)o(or)34 b(e)o(xample,)i(the)e(\224disk\224)h(reading)f
(function)f(does)i(echoing,)h(while)e(the)g(reader)i(used)e(to)126
1131 y(implement)23 b(the)i(compress)f(function)g(does)g(not.)126
1289 y(The)j(read)g(function)f(must)g(also)g(be)h(concerned)h(with)e
(the)h(handling)e(of)i(ends)g(of)g(\224\002les\224)g(\(ac-)126
1409 y(tually)-6 b(,)27 b(ends)h(of)h(channels\))f(and)g(ends)g(of)g
(lines.)41 b(It)28 b(should)f(return)i(the)f(ASCII)h(code)g(for)f(an)
126 1529 y(end)35 b(of)g(\002le)g(character)h(\(system)e(dependent\))g
(when)h(reaching)g(the)g(end)f(of)h(a)h(channel.)60 b(It)126
1650 y(should)23 b(return)i(the)g(ASCII)h(code)f(for)h(a)f(line)f(feed)
i(character)g(to)e(indicate)h(an)g(end)g(of)g(line)f(\(or)126
1770 y(\224ne)n(wline\224\).)54 b(This)32 b(may)g(require)i(that)e(the)
g(ASCII)i(code)f(for)g(carriage)h(return)f(be)g(ignored)126
1891 y(when)24 b(read,)i(not)e(returned.)2 2085 y(2.)49
b(A)32 b(writing)f(function,)i(which)f(is)g(called)g(with)f(the)h
(channel)g(as)h(its)e(\002rst)i(ar)n(gument)e(and)h(the)126
2205 y(inte)o(ger)23 b(ASCII)j(v)n(alue)e(of)g(the)g(character)h(to)f
(write)g(as)h(its)e(second)h(ar)n(gument.)30 b(If)25
b(the)f(channel)126 2325 y(is)32 b(for)h(reading)g(only)-6
b(,)33 b(this)f(function)g(is)g(readonlychannel.)54 b(If)33
b(the)g(channel)f(has)h(not)f(been)126 2446 y(opened,)24
b(this)g(function)g(is)g(channelnotopen.)2 2640 y(3.)49
b(A)28 b(closing)f(function,)i(which)f(is)g(called)g(with)g(the)g
(channel)g(as)h(its)e(ar)n(gument)h(and)h(performs)126
2760 y(an)o(y)d(action)f(necessary)i(for)g(the)f(graceful)h
(termination)d(of)j(input)e(and/or)h(output)f(operations)126
2881 y(to)f(that)h(channel.)30 b(If)25 b(the)g(channel)g(is)f(not)g
(open,)h(this)f(function)g(is)g(channelnotopen.)-118
3072 y(The)c(other)g(information)e(associated)i(with)f(a)i(channel)f
(includes)f(the)h(current)g(position)e(in)i(the)g(output)-118
3192 y(line)h(\(used)g(by)g(posn\),)g(the)g(maximum)f(line)h(length)f
(allo)n(wed)g(\(used)h(by)g(linelength)f(and)i(the)f(printing)-118
3313 y(functions\),)h(the)f(single)h(character)h(input)e(backup)h(b)n
(uf)n(fer)g(\(used)g(by)g(the)g(tok)o(en)f(scanner\),)i(and)f(other)
-118 3433 y(system-dependent)h(information.)-118 3553
y(Ordinarily)-6 b(,)39 b(the)e(user)g(need)g(not)g(be)g(a)o(w)o(are)h
(of)f(the)g(e)o(xistence)g(of)g(this)f(mechanism.)67
b(Ho)n(we)n(v)o(er)l(,)-118 3674 y(because)34 b(of)h(its)e(generality)
-6 b(,)36 b(it)d(is)h(possible)f(to)h(implement)e(operations)h(other)h
(than)g(just)f(reading)-118 3794 y(from)25 b(and)g(writing)f(to)h
(\002les)g(using)g(it.)31 b(In)25 b(particular)l(,)g(the)g(LISP)h
(functions)f(e)o(xplode)f(and)h(compress)-118 3914 y(are)g(performed)g
(by)f(writing)g(to)g(a)h(list)f(and)g(reading)h(from)f(a)h(list,)f
(respecti)n(v)o(ely)f(\(on)h(channels)h(3)f(and)-118
4035 y(4)h(respecti)n(v)o(ely\).)-118 4325 y Fk(10.10.1)118
b(Using)30 b(the)h(\224Special\224)f(F)m(orm)g(of)f(Open)-118
4513 y Fr(If)g(Open)f(is)g(called)h(with)f(AccessT)-8
b(ype)28 b(eq)h(to)f(SPECIAL)i(and)e(the)g(global)g(v)n(ariables)g
(specialread-)-118 4633 y(function*,)f(special)o(writefunction*,)g(and)
h(specialclosefunction*)e(are)j(bound)e(to)h(ids,)g(then)f(a)h(free)
-118 4753 y(channel)33 b(is)f(returned)h(and)g(its)g(associated)f
(functions)g(are)i(set)f(to)f(the)h(v)n(alues)f(of)h(these)g(v)n
(ariables.)-118 4874 y(Other)21 b(non)g(system-dependent)f(status)g(is)
h(set)g(to)g(def)o(ault)g(conditions,)g(which)g(can)g(later)h(be)f(o)o
(v)o(errid-)-118 4994 y(den.)30 b(The)23 b(functions)f(readonlychannel)
h(and)g(writeonlychannel)f(are)h(a)n(v)n(ailable)g(as)g(error)h
(handlers.)-118 5114 y(The)h(parameter)g(Filename)g(is)f(used)h(only)f
(if)g(an)h(error)h(occurs.)-118 5235 y(The)f(follo)n(wing)e(globals)g
(are)j(used)e(by)h(the)g(functions)e(in)i(this)f(section.)-118
5574 y Fq(specialclosefunction*)50 b Fr(=)25 b([Initially:)30
b(nil])1715 b Fi(global)-118 5771 y Fq(specialr)n(eadfunction*)27
b Fr(=)e([Initially:)k(nil])1753 b Fi(global)p eop
%%Page: 138 146
138 145 bop 118 -18 a Fr(138)118 357 y Fq(specialwritefunction*)26
b Fr(=)f([Initially:)30 b(nil])1723 b Fi(global)118 889
y Ft(10.11)142 b(Scan)35 b(T)-13 b(able)35 b(Inter)n(nals)118
1112 y Fr(The)20 b(scan)h(table)f(controls)f(the)h(beha)n(viour)g(of)g
(the)g(reader)-5 b(.)30 b(It)20 b(can)h(be)f(modi\002ed)g(to)g(e)o
(xtend)f(the)h(syntax)118 1233 y(of)31 b(PSL)h(or)f(to)g(aid)g(the)g
(writing)f(of)h(other)g(parsers.)49 b(This)31 b(table)f(contains)h
(information)e(about)i(the)118 1353 y(syntax)22 b(of)i(each)g
(character)-5 b(.)30 b(It)23 b(is)g(possible)f(to)h(ha)n(v)o(e)g(se)n
(v)o(eral)f(tables)h(describing)f(dif)n(ferent)h(syntax)o(es)118
1474 y(and)i(to)f(switch)g(from)h(one)g(to)f(another)h(by)f(binding)g
(the)g(v)n(ariable)h(lispscantable*.)118 1594 y(The)38
b(table)g(is)f(a)h(v)o(ector)g(of)g(129)f(entries,)k(inde)o(x)o(ed)36
b(by)i(0)f(through)g(128.)70 b(The)37 b(\002rst)h(128)g(entries)118
1714 y(correspond)31 b(to)g(ASCII)i(character)g(code.)51
b(Each)31 b(entry)h(contains)e(an)i(inte)o(ger)f(between)g(0)g(and)h
(21.)118 1835 y(The)25 b(meaning)f(of)h(these)f(numbers)g(is)h(gi)n(v)o
(en)e(belo)n(w)-6 b(.)168 1949 y(0)25 b(.)15 b(.)g(.)g(9)99
b(DIGIT)-5 b(:)24 b(indicates)g(the)h(character)h(is)f(a)g(digit)e(and)
i(gi)n(v)o(es)e(the)i(corresponding)f(numeric)512 2069
y(v)n(alue.)168 2190 y(10)244 b(LETTER:)24 b(indicates)g(the)h
(character)h(is)e(alphabetic.)168 2310 y(11)244 b(DELIMITER:)36
b(indicates)f(the)i(character)g(is)f(a)h(delimiter)l(,)h(the)f(\002rst)
f(character)i(of)e(a)512 2430 y(diphthong)23 b(should)g(not)h(be)h
(classi\002ed)g(as)g(a)g(delimiter)-5 b(.)168 2551 y(12)244
b(COMMENT)-5 b(:)22 b(indicates)h(the)g(character)i(be)o(gins)d(a)i
(comment,)e(terminated)h(by)g(an)h(end)512 2671 y(of)h(line.)168
2792 y(13)244 b(DIPHTHONG:)19 b(indicates)h(the)g(character)h(is)e(a)i
(delimiter)d(which)i(may)g(be)g(the)g(starting)512 2912
y(character)i(of)f(a)h(diphthong.)28 b(A)21 b(diphthong)e(is)i(a)h(tw)o
(o)f(character)h(sequence)f(read)h(as)g(one)512 3032
y(tok)o(en.)168 3153 y(14)244 b(IDESCAPE:)33 b(indicates)f(that)g(the)g
(character)i(is)e(an)g(escape)h(character)l(,)j(this)31
b(charac-)512 3273 y(ter)k(is)f(used)h(within)f(id)g(names)h(to)f
(reference)j(a)e(character)h(which)f(is)f(not)g(a)i(digit)e(or)512
3393 y(alphabetic.)168 3514 y(15)244 b(STRINGQ)o(UO)l(TE:)25
b(indicates)f(that)g(the)h(character)h(is)e(used)g(to)h(delimit)e
(strings.)168 3634 y(16)244 b(P)-9 b(A)l(CKA)l(GE:)27
b(indicates)f(that)h(the)g(character)h(is)f(used)g(to)g(introduce)f(e)o
(xplicit)g(package)512 3755 y(names.)168 3875 y(17)244
b(IGNORE:)25 b(indicates)f(that)g(the)h(character)h(is)e(to)g(be)h
(ignored.)168 3995 y(18)244 b(MINUS:)24 b(indicates)g(that)h(the)f
(character)i(represents)f(a)g(minus)f(sign.)168 4116
y(19)244 b(PLUS:)25 b(indicates)f(that)g(the)h(character)h(represents)f
(a)g(plus)f(sign.)168 4236 y(20)244 b(DECIMAL:)24 b(indicates)g(that)g
(the)h(character)h(represents)f(a)g(decimal)f(point.)168
4357 y(21)244 b(IDSURR)l(OUND:)23 b(indicates)f(that)h(the)f(character)
i(is)f(to)f(act)h(for)g(identi\002ers)g(as)f(a)i(string)512
4477 y(quote)g(for)h(strings.)118 4707 y(It)31 b(may)f(be)g(tedious)g
(to)g(insert)g(an)g(idescape)h(character)h(\(!\),)g(before)f(e)n(v)o
(ery)f(delimiter)f(character)j(in)118 4828 y(the)26 b(name)h(of)g(an)f
(id.)36 b(By)27 b(setting)e(the)h(type)g(of)h(a)g(character)h(\(for)f
(e)o(xample)e(\227\),)i(to)f(idsurround)f(this)118 4948
y(can)e(be)g(a)n(v)n(oided.)30 b(Ev)o(ery)22 b(character)j(between)d
(the)h(v)o(ertical)g(bars)g(is)f(tak)o(en)h(as)g(part)g(of)g(the)f(ids)
h(name,)118 5069 y(as)i(if)g(!)31 b(were)25 b(written)f(before)i(each.)
31 b(Note)25 b(that)f(!!)31 b(corresponds)25 b(to)f(!)31
b(and)25 b(!\227)g(to)f(\227.)238 5256 y Fh(\(PUTV)58
b(LISPSCANTABLE*)f(\(CHAR)i('|\))g(IDSURROUND\))118 5497
y(|"|)298 b(\045)60 b(the)f(same)g(as)g(!")118 5618 y(|dave|)118
b(\045)60 b(the)f(name)g(of)g(the)g(id)h(is)f(dave)g(not)g(DAVE)118
5738 y(|!|!!|)118 b(\045)60 b(the)f(name)g(is)g(|!,)g(the)g(same)g
(effect)g(is)g(gotten)596 5858 y(\045)h(by)f(writing)f(!|!!)p
eop
%%Page: 139 147
139 146 bop -118 -18 a Fg(10.12.)55 b(SCAN)25 b(T)-9
b(ABLE)25 b(UTILITY)g(FUNCTIONS)1486 b Fr(139)-118 357
y Fq(lispscantable*)25 b Fr(=)g([Initially:)k(as)c(described)g(belo)n
(w])1388 b Fi(global)82 478 y Fr(Lispscantable*)30 b(associates)g(a)i
(type)e(with)h(each)g(character)-5 b(.)50 b(It)31 b(is)g(a)g(v)o(ector)
g(of)g(129)82 598 y(entries.)40 b(The)28 b(type)g(for)g(a)g(character)h
(C)g(is)f(stored)f(at)h(inde)o(x)f(\(CHAR)i(C\).)g(The)f(table)82
718 y(belo)n(w)d(lists)g(each)h(character)i(under)e(its)f(type.)34
b(The)27 b(128')n(th)e(entry)h(is)g(the)g(diphthong)82
839 y(indicator)l(,)e(LISPDIPHTHONG.)121 1247 y Fh(DIGIT)477
b(0)60 b(through)e(9)121 1367 y(LETTER)417 b(a)60 b(through)e(z,)h(A)h
(through)e(Z,)h(#,)h($,)f(&,)g(*,)h(/,)898 1487 y(@,)f(;,)h(:,)f(<,)g
(>,)h(=,)f(\210,)g(_,)h({,)f(},)g(|,)h(\230,)f(?,)898
1608 y(\210A)g(through)g(\210H,)g(\210K,)g(\210N)g(through)f(\210Y,)h
(\210\\,\210],)898 1728 y(\210\210,)g(\210_,)g(rubout)121
1849 y(DELIMITER)237 b(\(,)59 b(\),)h(',)f(`,)g(\210Z,)g([,)h(])121
1969 y(COMMENT)357 b(\045)121 2089 y(DIPHTHONG)237 b(,)121
2210 y(IDESCAPE)297 b(!)121 2330 y(STRINGQUOTE)117 b(")121
2451 y(PACKAGE)357 b(\\)121 2571 y(IGNORE)417 b(null,)59
b(tab,)g(line-feed,)e(\210L,)898 2691 y(carriage-return)f(and)k(space)
121 2812 y(MINUS)477 b(-)121 2932 y(PLUS)537 b(+)121
3052 y(DECIMAL)357 b(.)-118 3564 y Ft(10.12)142 b(Scan)35
b(T)-13 b(able)34 b(Utility)h(Functions)-118 3843 y Fr(The)25
b(follo)n(wing)e(functions)g(are)j(pro)o(vided)d(to)i(manage)g(scan)g
(tables,)f(in)g(the)h Fq(r)n(ead-utils)g Fr(module.)-118
4209 y Fq(\(printscantable)h(T)-9 b(ABLE:v)o(ector\):)34
b(nil)1861 b Fi(e)n(xpr)-90 4329 y Fr(Prints)28 b(the)g(entire)g
(scantable,)g(gi)n(v)o(es)f(the)h(0)g(...)40 b(127)28
b(entries)g(with)f(the)h(name)g(of)g(the)-118 4449 y(character)e
(class.)k(Also)24 b(prints)g(the)h(indicator)f(used)g(for)i
(diphthongs.)-118 4851 y Fq(\(copyscantable)g(OLDT)-9
b(ABLE:)p Fl(f)p Fq(v)o(ector)g(,)27 b(nil)p Fl(g)p Fq(\):)j(v)o(ector)
1258 b Fi(e)n(xpr)-97 4972 y Fr(Copies)21 b(the)g(e)o(xisting)f
(scantable)h(\(or)g(currentscantable*)g(if)h(gi)n(v)o(en)d(nil\).)29
b(The)22 b(128')n(th)-118 5092 y(entry)30 b(\(the)g(diphthong)f
(indicator\),)i(of)g(the)f(cop)o(y)g(is)g(set)g(to)g(the)g(result)g(of)
g(a)h(call)f(on)-118 5212 y(gensym.)-118 5608 y Fq(\(putdiphthong)d(T)
-9 b(ABLE:v)o(ector)28 b(D1:id)d(ID2:id)f(DIP:id\):)31
b(nil)1017 b Fi(e)n(xpr)-94 5728 y Fr(Installs)24 b(DIP)h(as)f(the)g
(name)g(of)h(the)f(diphthong)f(Id1)h(follo)n(wed)f(by)h(ID2)g(in)g(the)
h(gi)n(v)o(en)-118 5849 y(scan)g(table.)p eop
%%Page: 140 148
140 147 bop 118 -18 a Fr(140)118 289 y Ft(10.13)142 b(Binary)35
b(Read)f(Functions)118 645 y Fr(Binary)k(input)e(and)h(output)f(are)i
(necessary)f(to)g(pro)o(vide)f(an)i(ef)n(\002cient)f(access)h(to)f(lar)
n(ge)g(\002les)h(e.g.)118 765 y(for)31 b(loading)g(or)g(generating)f
(binary)h(\002les)h(\(e.g.)49 b(f)o(aslin)31 b(or)g(f)o(aslout\))g(or)g
(for)g(communication)e(with)118 885 y(other)38 b(processors)g(e.g.)70
b(graphics)38 b(or)g(database)g(processors.)70 b(Another)38
b(important)f(application)118 1006 y(is)e(the)g(connection)f(between)h
(tw)o(o)g(or)g(more)g(PSL)g(processors)g(on)g(incompatible)e
(platforms.)60 b(In)118 1126 y(the)35 b(follo)n(wing)f(descriptions)f
(HANDLE)i(means)g(something)f(system)g(speci\002c)i(which)f(in)g(man)o
(y)118 1247 y(cases)29 b(should)e(better)h(not)f(be)i(interpreted)f(by)
f(the)h(LISP)i(e)n(v)n(aluator)-5 b(.)39 b(One)28 b(can)h(v)o(ery)e
(well)h(think)f(of)118 1367 y(HANDLE)j(as)g(a)g(FILE*)h(object)e
(belonging)g(to)g(the)h(w)o(orld)g(of)g(C')-5 b(s)30
b(I/O)g(library)-6 b(.)46 b(The)30 b(results)f(of)h(a)118
1487 y(binary)25 b(read)g(function)f(is)g(usually)g(not)g(meant)h(for)g
(LISP)g(e)n(v)n(aluation,)e(either)-5 b(.)118 1890 y
Fq(\(binary)n(openr)n(ead)27 b(FILEN)n(AME:string\):)32
b(HANDLE)1293 b Fi(e)n(xpr)118 2010 y Fr(opens)38 b(the)g(\002le)h
(FILEN)m(AME)e(for)i(reading.)71 b(If)38 b(the)h(\002le)f(cannot)g(be)h
(opened,)i(an)118 2131 y(error)33 b(message)e Fh(Couldn't)58
b(open)h(binary)f(file)h(for)g(input)31 b Fr(will)g(be)118
2251 y(sho)n(wn,)24 b(an)h(error)g(condition)e(is)i(raised.)118
2676 y Fq(\(binary)n(openwrite)h(FILEN)n(AME:string\):)32
b(HANDLE)1264 b Fi(e)n(xpr)118 2797 y Fr(opens)29 b(the)g(\002le)h
(FILEN)m(AME)f(for)g(writing.)43 b(If)30 b(the)f(\002le)h(cannot)f(be)h
(opened,)g(an)g(er)n(-)118 2917 y(ror)37 b(message)e
Fh(Couldn't)58 b(open)h(binary)g(file)g(for)g(output)35
b Fr(will)g(be)118 3037 y(sho)n(wn,)24 b(an)h(error)g(condition)e(is)i
(raised.)118 3462 y Fq(\(binary)n(openappend)i(FILEN)n(AME:string\):)33
b(HANDLE)1169 b Fi(e)n(xpr)118 3583 y Fr(opens)24 b(the)g(\002le)h
(FILEN)m(AME)f(in)g(append)g(mode.)30 b(If)25 b(the)f(\002le)h(cannot)f
(be)h(opened,)f(an)118 3703 y(error)55 b(message)e Fh(Couldn't)58
b(open)h(binary)f(file)h(for)g(append)53 b Fr(will)118
3824 y(be)25 b(sho)n(wn,)f(an)g(error)i(condition)d(is)i(raised.)118
4249 y Fq(\(binary)n(openupdate)i(FILEN)n(AME:string\):)33
b(HANDLE)1191 b Fi(e)n(xpr)118 4369 y Fr(opens)30 b(the)h(\002le)g
(FILEN)m(AME)f(for)h(update.)49 b(If)31 b(the)g(\002le)g(cannot)g(be)g
(opened,)h(an)f(er)n(-)118 4489 y(ror)37 b(message)e
Fh(Couldn't)58 b(open)h(binary)g(file)g(for)g(update)35
b Fr(will)g(be)118 4610 y(sho)n(wn,)24 b(an)h(error)g(condition)e(is)i
(raised.)118 5035 y Fq(\(binaryclose)g(Filepointer:handle\):NIL)1790
b Fi(e)n(xpr)118 5155 y Fr(Closes)25 b(the)f(\002le)i(referenced)g(by)e
(\002lepointer)118 5588 y Fq(\(binaryr)n(ead)i(CHANNEL:handle\):)33
b(any)1764 b Fi(e)n(xpr)118 5708 y Fr(reads)30 b(one)g(LISP)h(item)f
(from)f(\002le)i(channel)f(and)g(returns)f(it)h(as)g(v)n(alue.)46
b(There)30 b(is)f(no)118 5828 y(w)o(ay)c(to)f(distinguish)f(error)i
(conditions)e(from)i(normal)f(return)h(v)n(alues.)p eop
%%Page: 141 149
141 148 bop -118 -18 a Fg(10.13.)55 b(BIN)m(AR)-6 b(Y)25
b(READ)g(FUNCTIONS)1838 b Fr(141)-118 357 y Fq(\(binaryr)n(eadblock)27
b(CHANNEL:handle)f(ADDR:int)f(SIZE:int\):)33 b(int)707
b Fi(e)n(xpr)-118 478 y Fr(reads)23 b(SIZE)h(LISP)g(items)e(from)h(the)
g(\002le)g(into)f(an)h(array)h(pointed)e(to)h(by)g(ADDR.)g(The)-118
598 y(number)29 b(of)h(actually)f(read)i(items)d(is)i(returned,)h
(indicating)d(error)j(or)f(end-of-\002le)g(if)-118 718
y(the)25 b(returned)f(v)n(alue)h(is)f(less)g(than)h(the)f(number)h(of)g
(items)e(requested.)-118 1087 y Fq(\(binarywrite)j(CHANNEL:handle)g(W)o
(ORD:any\):)k(NIL)1180 b Fi(e)n(xpr)-118 1208 y Fr(writes)24
b(one)h(LISP)h(item)e(in)g(W)o(ORD)i(to)e(\002le)h(channel.)-118
1556 y Fq(\(binarywriteblock)h(Filepointer:handle)h(ADDR:int)e
(SIZE:int\):)32 b(NIL)645 b Fi(e)n(xpr)-118 1677 y Fr(writes)30
b(SIZE)h(LISP)g(items)e(from)h(the)h(an)f(array)h(pointed)f(to)g(by)g
(ADDR)g(to)g(the)h(\002le)-118 1797 y(referenced)25 b(by)e(Filepointer)
-5 b(.)30 b(The)23 b(number)g(of)h(actually)f(written)g(items)g(is)g
(returned,)-118 1917 y(indicating)34 b(error)h(if)g(the)g(returned)g(v)
n(alue)g(is)f(less)h(than)g(the)g(number)f(of)h(items)f(re-)-118
2038 y(quested.)-118 2407 y Fq(\(binaryposition\002le)25
b(CHANNEL:handle,)h(SPECIAL:int\):)33 b(any)860 b Fi(e)n(xpr)-118
2527 y Fr(this)28 b(corresponds)h(to)g(C')-5 b(s)29 b(fseek)h
(operation.)43 b(The)30 b(special)f(v)n(alue)f(\(the)i(address\))f(as)
-118 2647 y(well)24 b(as)h(the)g(return)g(v)n(alue)f(is)g(system)g
(dependent,)g(please)h(in)l(v)o(estigate.)p eop
%%Page: 142 150
142 149 bop 118 -18 a Fr(142)p eop
%%Page: 143 151
143 150 bop -118 953 a Fn(T)-19 b(op)51 b(Le)m(v)n(el)h(Loop)-118
1468 y Ft(11.1)142 b(Intr)m(oduction)-118 1691 y Fr(Normally)25
b(one)h(interacts)f(with)h(PSL)g(through)f(a)i(tople)n(v)o(el)d(read-e)
n(v)n(al-print)h(loop,)g(it)h(is)g(the)f(highest)-118
1812 y(le)n(v)o(el)f(of)i(control)f(and)h(consists)f(of)g(an)h(endless)
f(loop)g(that)h(reads)g(an)g(e)o(xpression,)e(e)n(v)n(aluates)h(it,)g
(and)-118 1932 y(prints)g(the)g(result.)33 b(One)26 b(has)g(an)g(ef)n
(fect)g(on)g(the)f(state)h(of)g(PSL)g(by)g(in)l(v)n(oking)e(actions)h
(that)g(ha)n(v)o(e)h(side)-118 2052 y(ef)n(fects.)31
b(This)24 b(tople)n(v)o(el)f(loop)h(will)g(catch)h(all)f(thro)n(ws)g
(\(this)g(includes)g(errors\).)-118 2392 y Ft(11.2)142
b(The)35 b(General)f(Pur)o(pose)g(T)-13 b(op)35 b(Loop)g(Function)-118
2616 y Fr(The)27 b(user)g(interacts)f(with)g(PSL)i(through)e(toploop.)
36 b(The)27 b(purpose)f(of)h(this)f(loop)g(is)h(to)f(read)h(e)o(xpres-)
-118 2736 y(sions)d(typed)h(at)h(the)f(terminal,)g(e)n(v)n(aluate)f
(them,)h(and)h(type)f(the)g(result)g(back)h(on)f(the)g(terminal.)32
b(Such)-118 2856 y(e)o(xpressions)d(may)h(be)h(entered)f(to)g(see)h
(what)f(v)n(alue)g(the)o(y)g(return)g(or)h(to)f(produce)g(a)h(side-ef)n
(fect)g(on)-118 2977 y(the)25 b(global)f(en)l(vironment.)-118
3097 y(An)h(e)o(xpression)e(which)h(has)h(a)g(side)g(ef)n(fect)g(on)f
(the)h(global)f(en)l(vironment)1 3301 y Fh(\(setq)59
b(base)g(10\))-118 3504 y Fr(Another)24 b(e)o(xample)g(of)h(a)g(side)g
(ef)n(fect,)g(the)f(de\002nition)g(of)h(a)g(function)1
3708 y Fh(\(de)60 b(square)e(\(n\))h(\(*)g(n)h(n\)\))-118
3911 y Fr(Ev)n(aluation,)23 b(just)h(to)g(see)h(what)g(v)n(alue)f(the)h
(e)o(xpression)e(returns)1 4115 y Fh(\(square)59 b(2\))-118
4318 y Fr(A)31 b(close)h(approximation)d(to)i(the)h(beha)n(vior)f(of)g
(this)g(loop)f(is)h(gi)n(v)o(en)f(by)h(the)h(follo)n(wing)d(functional)
-118 4438 y(description:)-118 4667 y Fh(\(de)59 b(toploop)f
(\(toploopread*)659 4787 y(toploopeval*)659 4908 y(toploopprint*\))1
5028 y(\(while)h(t)121 5148 y(\(funcall)f(toploopprint*)659
5269 y(\(funcall)g(toploppeval*)1197 5389 y(\(funcall)g
(toploopread*\)\)\)\)\))-118 5618 y Fr(The)29 b(actual)g(toploop)f(of)h
(PSL)h(is)f(some)n(what)e(more)i(comple)o(x)f(than)h(the)g(simple)f
(one)h(de\002ned)h(here)-118 5738 y(because)c(it)f(pro)o(vides)f(a)i
(fe)n(w)f(e)o(xtra)g(features)h(\(these)g(are)g(described)f(belo)n
(w\).)32 b(The)25 b(important)f(point)-118 5858 y(is)g(that)h(the)f
(primiti)n(v)o(es)e(required)j(for)g(writing)f(such)g(a)i(loop)e(are)h
(all)g(a)n(v)n(ailable)f(to)g(the)h(user)-5 b(.)1579
6066 y(143)p eop
%%Page: 144 152
144 151 bop 118 -18 a Fr(144)118 289 y(Syntactically)30
b(correct)h(e)o(xpressions)e(ha)n(v)o(e)h(a)h(well)f(de\002ned)h
(mapping)e(into)g(PSL)j(data)e(structures,)118 409 y(read)j
(accomplishes)e(this)h(mapping.)52 b(F)o(or)33 b(e)o(xample,)g(linear)g
(list)e(notation)g(is)h(con)l(v)o(erted)g(into)g(the)118
529 y(internal)c(tree)i(structure)e(representation,)h(strings)f(are)h
(stored)g(in)f(a)h(more)g(ef)n(\002cient)g(non-list)e(form,)118
650 y(and)35 b(numbers)f(are)h(internalized)g(to)f(a)h(form)g
(compatible)e(with)h(the)h(arithmetic)f(unit)g(of)h(the)g(ma-)118
770 y(chine.)30 b(The)25 b(most)d(primiti)n(v)o(e)g(piece)i(of)g(read)h
(is)f(the)g(scanner)-5 b(.)30 b(This)23 b(routine)g(recognizes)i
(characters)118 891 y(special)31 b(to)g(PSL.)h(F)o(or)g(e)o(xample,)g
(space,)h(\(,)g(and)f(\).)50 b(The)32 b(scanner)g(is)e(also)h
(responsible)g(for)g(b)n(uild-)118 1011 y(ing)f(the)h(internal)f
(representation)g(of)g(identi\002ers.)48 b(The)31 b(scanner)g(must)e
(mak)o(e)i(e)n(v)o(ery)f(reference)i(to)118 1131 y(a)g(particular)g(id)
f(point)g(to)g(the)h(same)f(internal)g(structure.)51
b(This)31 b(is)h(accomplished)e(at)i(the)f(time)g(an)118
1252 y(id)c(is)f(created.)38 b(The)27 b(character)h(sequence)g(is)e
(compared)h(against)f(sequences)h(which)g(ha)n(v)o(e)f(already)118
1372 y(been)32 b(con)l(v)o(erted)e(into)h(ids.)49 b(This)31
b(comparison)f(emplo)o(ys)g(an)h(ef)n(\002cient)h(search)f(technique)g
(so)g(that)118 1493 y(not)24 b(e)n(v)o(ery)h(id)f(is)g(compared)h
(\(currently)g(a)g(hash)f(algorithm)g(is)g(used\).)118
1647 y(The)32 b(e)n(v)n(al)e(function)h(is)g(responsible)f(for)i(the)f
(e)n(v)n(aluation)f(of)h(data)h(structures)f(interpreted)g(as)g(pro-)
118 1768 y(grams.)f(A)25 b(through)f(discussion)f(of)i(this)f(can)h(be)
g(found)f(in)h(Chapter)g(11.)118 1923 y(Print)j(displays)e(data)i
(structures)g(in)f(a)h(w)o(ay)g(which)g(could)f(later)h(be)g(typed)f
(back)h(in)g(to)f(read.)40 b(Some)118 2043 y(of)33 b(the)f(more)g
(interesting)f(print)h(routines)f(do)h(prettyprinting.)52
b(That)32 b(is,)i(the)o(y)d(format)i(the)f(output)118
2163 y(using)24 b(con)l(v)o(entions)f(based)i(on)f(the)h(structural)f
(nesting)g(of)h(the)f(e)o(xpressions.)118 2318 y(Gi)n(ving)c(the)h
(user)h(the)f(po)n(wer)g(to)g(in)l(v)n(ok)o(e)g(all)g(of)h(these)f
(operation)g(from)g(his)g(code)g(is)g(a)h(v)o(ery)f(po)n(werful)118
2439 y(feature)26 b(of)e(LISP)i(which)f(sets)f(it)g(apart)h(from)g
(most)f(other)g(languages.)118 2812 y Fq(\(toploop)h
Fd(T)n(OPLOOPREAD*:function)e(T)n(OPLOOPPRINT*:function)118
2932 y(T)n(OPLOOPEV)-12 b(AL*:function)22 b(T)n(OPLOOPN)m(AME*:string)g
(WELCOMEB)m(ANNER:string\))p Fq(:)28 b(nil)94 b Fi(e)n(xpr)152
3053 y Fr(This)34 b(function)f(is)h(called)h(to)e(establish)h(a)g(ne)n
(w)g(T)-8 b(op)34 b(Loop.)58 b(It)35 b(prints)e(the)h(WEL-)118
3173 y(COMEB)m(ANNER)28 b(and)f(then)g(in)l(v)n(ok)o(es)g(a)g(Read-Ev)n
(al-Print)h(loop,)f(using)g(the)g(func-)118 3294 y(tions)35
b(de\002ned)i(by)f(T)n(OPLOOPREAD*,)k(T)n(OPLOOPEV)-13
b(AL*,)38 b(and)e(T)n(OPLOOP-)118 3414 y(PRINT*.)30 b(Since)21
b(each)g(of)g(the)f(parameters)h(to)f(toploop)f(is)i(\003uid)f(the)o(y)
g(may)g(be)h(e)o(xam-)118 3534 y(ined)29 b(or)h(changed.)45
b(T)m(iming)27 b(and)j(history)e(mechanisms)g(are)i(pro)o(vided.)44
b(A)29 b(prompt)118 3655 y(is)24 b(constructed)g(by)g(pre\002xing)g(T)n
(OPLOOPN)m(AME*)g(with)g(the)g(history)g(count.)30 b(As)24
b(a)118 3775 y(con)l(v)o(ention,)k(the)h(name)g(is)f(follo)n(wed)g(by)h
(a)g(number)f(of)h(right)f(angle)h(brack)o(ets)g(\()p
Ff(>)p Fr(\),)118 3895 y(to)c(indicate)f(the)g(depth)h(of)g(toploop)e
(in)l(v)n(ocations.)118 4299 y Fq(toploopr)n(ead*)j Fr(=)f([Initially:)
k(nil])2074 b Fi(global)318 4419 y Fr(When)25 b(toploop)e(is)h(called)h
(this)f(id)h(is)f(bound)g(to)g(the)h(function)f(used)g(for)h(reading.)
118 4702 y Fq(toploope)o(v)o(al*)f Fr(=)h([Initially:)k(nil])2097
b Fi(global)318 4823 y Fr(When)39 b(toploop)g(is)g(called)g(this)g(id)g
(is)g(bound)g(to)g(the)g(function)g(which)g(e)n(v)n(aluates)318
4943 y(input.)118 5226 y Fq(toploopname*)25 b Fr(=)g([Initially:)30
b(string])1911 b Fi(global)318 5346 y Fr(Bound)34 b(to)f(a)i(string)e
(\(currently)h(\224lisp\224\),)i(which)d(will)h(be)g(part)g(of)g(the)g
(prompt)f(for)318 5467 y(input.)118 5750 y Fq(toploople)o(v)o(el*)24
b Fr(=)h([Initially:)k(0])2131 b Fi(global)318 5870 y
Fr(Depth)24 b(of)h(top)f(loop)g(in)l(v)n(ocations.)p
eop
%%Page: 145 153
145 152 bop -118 -18 a Fg(11.2.)55 b(THE)25 b(GENERAL)f(PURPOSE)j(T)n
(OP)e(LOOP)g(FUNCTION)969 b Fr(145)-118 357 y Fq(initf)n(orms*)24
b Fr(=)h([Initially:)k(nil])2197 b Fi(global)82 478 y
Fr(A)25 b(list)e(of)i(forms)f(to)h(be)g(e)n(v)n(aluated)e(at)i
(startup,)f(\(prior)h(to)f(calling)g(main\).)30 b(The)25
b(forms)82 598 y(are)36 b(e)n(v)n(aluated)e(in)h(a)h(left)f(to)g(right)
g(order)l(,)j(once)d(the)h(last)e(form)h(is)g(e)n(v)n(aluated)g(init-)
82 718 y(forms*)24 b(is)g(set)h(to)f(nil.)-118 998 y
Fq(*output)i Fr(=)f([Initially:)k(T])2351 b Fi(switc)o(h)82
1118 y Fr(If)25 b(non-nil,)f(the)g(result)h(of)f(e)n(v)n(aluating)f
(top)i(le)n(v)o(el)e(forms)i(is)f(printed.)-118 1418
y Fq(*time)h Fr(=)g([Initially:)k(nil])2400 b Fi(switc)o(h)82
1538 y Fr(If)27 b(non-nil,)e(a)i(step)f(e)n(v)n(aluation)f(time)g(is)h
(printed)g(after)h(each)g(top)f(le)n(v)o(el)f(form)i(is)f(pro-)82
1658 y(cessed)f(within)e(toploop.)-118 1958 y Fq(\(hist)i
([N:integer]\):)32 b(nil)2427 b Fi(ne)n(xpr)-92 2078
y Fr(Hist)25 b(is)h(called)g(with)f(0,)i(1)f(or)g(2)g(inte)o(gers,)f
(which)h(control)f(ho)n(w)g(much)h(history)f(is)g(to)-118
2199 y(be)g(printed)f(out:)466 2421 y(\(hist\))276 b(Display)24
b(full)g(history)-6 b(.)466 2541 y(\(hist)24 b(n)h(m\))99
b(Display)24 b(history)g(from)g(n)h(to)f(m.)466 2662
y(\(hist)g(n\))202 b(Display)24 b(history)g(from)g(n)h(to)f(present.)
466 2782 y(\(hist)g(-n\))169 b(Display)24 b(last)g(n)h(entries.)-118
2998 y(The)f(follo)n(wing)e(functions)g(permit)h(the)h(user)g(to)g
(access)g(and)g(resubmit)e(pre)n(vious)h(e)o(xpressions,)f(and)-118
3118 y(to)i(re-e)o(xamine)h(pre)n(vious)e(results.)-118
3508 y Fq(\(inp)i(N:integer\):)33 b(any)2515 b Fi(e)n(xpr)-93
3629 y Fr(Return)25 b(N')n(th)g(input)e(at)i(this)f(le)n(v)o(el.)-118
4049 y Fq(\(r)n(edo)i(N:integer\):)32 b(any)2462 b Fi(e)n(xpr)-93
4169 y Fr(Ree)n(v)n(aluate)24 b(N')n(th)h(input.)-118
4589 y Fq(\(ans)g(N:integer\):)32 b(any)2510 b Fi(e)n(xpr)-93
4710 y Fr(Return)25 b(N')n(th)g(result.)-118 5109 y Fq(historycount*)g
Fr(=)h([Initially:)j(0])2106 b Fi(global)82 5230 y Fr(The)25
b(number)f(of)h(entries)f(which)h(ha)n(v)o(e)f(been)h(read)g(so)g(f)o
(ar)-5 b(.)-118 5509 y Fq(historylist*)24 b Fr(=)h([Initially:)k(nil])
2161 b Fi(global)82 5629 y Fr(A)31 b(list)g(of)h(pairs,)h(the)f
(\002rst)f(element)h(of)g(each)g(pair)g(represents)f(an)h(input)f
(form,)i(the)82 5750 y(second)26 b(is)f(the)h(result)g(of)g(e)n(v)n
(aluating)e(the)i(frst.)35 b(Note)26 b(that)f(the)h(top)g(le)n(v)o(el)f
(e)n(v)n(aluation)82 5870 y(of)g(historylist*)d(will)i(result)g(in)h(a)
g(circular)g(list.)p eop
%%Page: 146 154
146 153 bop 118 -18 a Fr(146)118 289 y Ft(11.3)143 b(Changing)33
b(the)j(Default)e(T)-13 b(op)34 b(Le)n(v)o(el)g(Function)118
512 y Fr(As)27 b(PSL)h(starts)f(up,)g(it)g(\002rst)g(sets)g(the)g
(stack)g(pointer)f(and)i(v)n(arious)e(other)h(v)n(ariables,)g(and)g
(then)g(calls)118 633 y(the)e(function)f(main)g(inside)g(a)h(catch)g
(form.)118 861 y Fh(\(catch)59 b('reset)f(\(main\)\))118
1089 y Fr(By)25 b(def)o(ault,)g(main)f(calls)g(standardlisp.)118
1318 y Fh(\(de)59 b(main)g(\(\))238 1438 y(\(funcall)f
('standardlisp\)\))118 1679 y(\(de)h(standardlisp)e(\(\))238
1799 y(\(let)i(\(\(currentreadmacroindicator)o(*)54 b('lispreadmacro\))
596 1919 y(\(currentscantable*)i(lispscantable*\)\))357
2040 y(\(toploop)i('read)h('print)f('eval)h("lisp")f("Portable)g
(Standard)g(LISP"\)\)\))118 2268 y Fr(In)23 b(order)h(to)e(ha)n(v)o(e)h
(a)h(sa)n(v)o(ed)e(PSL)i(come)f(up)g(in)g(a)g(dif)n(ferent)g(top)f
(loop,)h(the)g(function)f(Main)g(should)g(be)118 2388
y(appropriately)i(rede\002ned)i(by)e(the)h(user)-5 b(.)118
2728 y Fq(\(main\):)31 b(Unde\002ned)2587 b Fi(e)n(xpr)144
2848 y Fr(An)26 b(initialization)e(function)h(which)g(is)h(called)g
(after)g(the)g(stack)g(is)f(set.)34 b(Its)26 b(rede\002ni-)118
2968 y(tion)e(allo)n(ws)g(the)g(user)h(to)g(change)g(the)f(def)o(ault)h
(top)f(loop.)p eop
%%Page: 147 155
147 154 bop -118 953 a Fn(Err)l(or)51 b(Handling)-118
1468 y Ft(12.1)142 b(Intr)m(oduction)-118 1692 y Fr(In)36
b(PSL,)g(as)g(in)f(most)g(LISP)i(systems,)g(v)n(arious)d(kinds)h(of)h
(errors)g(are)h(detected)f(by)f(functions)g(in)-118 1813
y(the)27 b(process)g(of)h(checking)f(the)g(v)n(alidity)f(of)h(their)g
(ar)n(gument)g(types)g(and)g(other)h(conditions.)36 b(Errors)-118
1933 y(are)e(then)f(\224signalled\224)g(by)g(a)h(call)g(on)f(an)h
(error)g(function.)56 b(In)33 b(PSL,)i(the)e(error)h(handler)g
(typically)-118 2054 y(calls)c(an)g(interacti)n(v)o(e)f(break)i(loop,)f
(which)g(permits)f(the)h(user)h(to)f(e)o(xamine)f(the)h(conte)o(xt)f
(of)i(the)f(er)n(-)-118 2174 y(ror)g(and)g(optionally)e(mak)o(e)i(some)
g(corrections)f(and)h(continue)g(the)f(computation,)h(or)g(to)g(abort)f
(the)-118 2294 y(computation.)-118 2415 y(While)39 b(in)f(the)h(break)h
(loop,)i(the)d(user)g(remains)g(in)f(the)h(binding)f(conte)o(xt)g(of)h
(the)g(function)g(that)-118 2535 y(detected)19 b(the)g(error;)i(the)e
(user)g(sees)g(the)g(v)n(alue)f(of)h(\003uid)g(v)n(ariables)f(as)i(the)
o(y)e(are)h(in)g(the)g(function)f(itself.)-118 2656 y(If)35
b(the)f(user)g(aborts)g(the)g(computation,)h(\003uid)f(and)g(local)g(v)
n(ariables)g(are)h(unbound.)58 b(In)34 b(compiled)-118
2776 y(functions,)i(due)e(to)g(allocation)g(of)g(local)h(v)n(ariables)f
(in)g(the)g(\(system\))g(stack,)i(local)f(v)n(ariables)f(are)-118
2897 y(in)l(visible)25 b(to)i(the)f(error)i(handler)f(and)g(the)g(deb)n
(ugging)e(f)o(acilities.)37 b(Therefore,)28 b(compilation)d(can)i(be)
-118 3017 y(recommended)d(for)h(fully)f(deb)n(ugged)h(code,)g(only)-6
b(.)-118 3359 y Ft(12.2)142 b(The)35 b(Basic)g(Err)m(or)g(Functions)
-118 3801 y Fq(\(err)n(or)26 b(NUMBER:)g(integer)f(MESSA)-5
b(GE:any\):)33 b(None)25 b(Retur)o(ned)846 b Fi(e)n(xpr)-92
3922 y Fr(Under)27 b(the)f(initial)f(\(and)i(usual\))f(v)n(alues)f(of)i
(a)f(couple)h(of)f(switches,)g(the)g(error)h(mes-)-118
4042 y(sage)j(is)g(printed)g(and)h(an)f(interacti)n(v)o(e)f(break)i
(loop)f(\(see)h(belo)n(w\))e(is)h(entered.)48 b(If)31
b(the)-118 4163 y(user)h(\224quits\224)f(out)g(of)h(the)g(interacti)n
(v)o(e)f(break)h(loop,)h(control)e(returns)h(to)f(the)h(inner)n(-)-118
4283 y(most)24 b(error)h(handler)-5 b(.)-118 4413 y(The)29
b(user)g(may)f(supply)g(an)h(error)h(handler)-5 b(.)42
b(The)29 b(interacti)n(v)o(e)f(break)h(loop)f(and)h(the)g(top)f(le)n(v)
o(el)g(loop)-118 4534 y(also)c(supply)f(error)i(handlers,)e(so)h(if)g
(the)g(user)h(mak)o(es)f(no)f(special)h(preparation,)g(control)g(will)f
(return)-118 4654 y(to)h(an)h(e)o(xisting)e(break)i(loop)f(or)h(to)g
(the)f(top)h(le)n(v)o(el)e(of)i(PSL.)-118 4775 y(Whene)n(v)o(er)35
b(a)h(call)f(on)g(error)h(results)f(in)g(return)h(to)f(an)g(error)i
(handler)l(,)g(the)f(error)g(number)f(of)g(the)-118 4895
y(error)27 b(becomes)f(the)g(v)n(alue)g(returned)g(by)g(the)g(error)h
(handler)-5 b(.)35 b(Fluid)26 b(v)n(ariables)g(and)g(local)g(bindings)
-118 5015 y(are)32 b(unbound)f(to)g(return)h(to)f(the)h(en)l(vironment)
e(of)i(the)f(error)i(handler)-5 b(.)51 b(Global)30 b(v)n(ariables)h
(are)i(not)-118 5136 y(af)n(fected)25 b(by)g(the)g(process.)31
b(The)25 b(error)h(message)f(is)f(printed)h(with)f(5)h(leading)f
(asterisks)g(on)h(both)f(the)-118 5256 y(standard)e(output)f(de)n(vice)
i(and)f(the)h(currently)f(selected)h(output)e(de)n(vice)h(unless)g(the)
g(standard)h(output)-118 5377 y(de)n(vice)30 b(is)f(not)h(open.)46
b(If)31 b(the)f(message)g(is)f(a)i(list)e(it)h(is)f(displayed)g
(without)g(top)h(le)n(v)o(el)f(parentheses.)-118 5497
y(The)h(message)g(from)g(the)g(error)h(call)g(is)e(a)n(v)n(ailable)h
(for)g(later)h(e)o(xamination)d(in)i(the)g(global)g(v)n(ariable)-118
5617 y Fh(emsg*)p Fr(.)-118 5738 y(Note:)46 b(the)33
b(e)o(xact)f(format)g(of)h(error)h(messages)e(generated)h(by)f(PSL)i
(functions)d(described)i(in)f(this)-118 5858 y(document)19
b(may)g(not)h(be)g(e)o(xactly)f(as)h(gi)n(v)o(en)f(and)g(should)g(not)h
(be)g(relied)g(upon)f(to)g(be)h(in)g(an)o(y)f(particular)1579
6066 y(147)p eop
%%Page: 148 156
148 155 bop 118 -18 a Fr(148)118 289 y(form.)57 b(Lik)o(e)n(wise,)34
b(error)h(numbers)e(generated)h(by)f(PSL)h(functions)f(are)h(not)f
(\002x)o(ed.)57 b(Currently)-6 b(,)35 b(a)118 409 y(number)24
b(of)h(dif)n(ferent)g(calls)f(on)h(error)g(result)f(in)h(the)g(same)f
(error)i(message)e(and)h(number)-5 b(.)118 748 y Fq(\(continuableerr)n
(or)27 b(NUMBER:integer)g(MESSA)-5 b(GE:any)118 868 y(FORM:)25
b(f)n(orm\):)31 b(any)2545 b Fi(e)n(xpr)268 989 y Fr(Similar)28
b(to)h(error)-5 b(.)42 b(If)29 b(an)g(interacti)n(v)o(e)f(break)h(is)f
(entered)h(due)g(to)f(a)h(call)g(on)f(continu-)268 1109
y(ableerror)l(,)33 b(the)e(user)g(has)g(options)e(of)i
(\224continuing\224)f(or)h(\224retrying\224)g(\(see)h(informa-)268
1230 y(tion)27 b(on)g(the)g(break)h(loop,)f(belo)n(w\).)37
b(In)28 b(either)f(of)h(these)f(cases)g(the)h(call)f(on)g(continu-)268
1350 y(ableerror)k(returns.)45 b(The)30 b(v)n(alue)g(returned)g(is)f
(as)h(described)g(in)f(the)h(documentation)268 1470 y(of)25
b(the)g(interacti)n(v)o(e)e(break)i(loop.)118 1621 y(The)40
b(FORM)g(ar)n(gument)f(is)h(used)f(for)h(\224retrying\224)g(after)g(a)h
(continuable)d(error)-5 b(.)76 b(The)40 b(FORM)g(is)118
1741 y(generally)23 b(made)f(to)h(look)e(lik)o(e)i(a)g(call)f(on)h(the)
f(function)g(that)h(signalled)e(the)i(error)g(\(actual)g(ar)n(gument)
118 1861 y(v)n(alues)36 b(\002lled)h(in\),)j(and)d(the)g(function)f
(signalling)f(the)i(error)g(generally)g(returns)g(with)f(the)h(v)n
(alue)118 1982 y(returned)22 b(by)f(the)g(call)g(on)g(continuableerror)
-5 b(.)29 b(F)o(or)21 b(e)o(xample)g(the)g(call)g(on)g(conterror)l(,)h
(in)f(the)g(e)o(xample)118 2102 y(belo)n(w)j(is)g(equi)n(v)n(alent)f
(to)i(the)f(follo)n(wing)f(call)i(on)g(continuableerror:)118
2304 y Fh(\(continuableerror)56 b(99)j("Attempt)f(to)i(divide)e(by)h(0)
h(in)f(DIVIDE")716 2424 y(\(list)g('divide)f(\(mkquote)g(u\))h
(\(mkquote)f(v\)\)\))118 2626 y Fr(The)26 b(FORM)f(ar)n(gument)g(may)h
(be)f(nil.)32 b(In)26 b(this)e(case)i(it)f(is)g(e)o(xpected)g(that)g
(the)g(break)h(will)f(be)g(left)h(via)118 2747 y(\224continue\224)f
(rather)g(than)f(\224retry\224.)118 2867 y(As)31 b(in)g(the)g(e)o
(xample)g(abo)o(v)o(e,)g(setting)f(up)h(the)h(errorform*)f(can)h(get)f
(a)g(bit)g(trick)o(y)-6 b(,)31 b(often)g(in)l(v)n(olving)118
2987 y(mkquoteing)23 b(of)i(already)g(e)n(v)n(aluated)f(ar)n(guments.)
30 b(The)25 b(follo)n(wing)d(macro)j(may)g(be)g(useful.)118
3326 y Fq(\(conterr)n(or)i([ARGS:any]\):)k(any)2044 b
Fi(macr)l(o)118 3447 y Fr(The)25 b(format)f(of)h(ARGS)h(is)118
3567 y Fh(\(errornumber)57 b(formatstring)g Fl(f)p Fh(arguments)h(to)h
(printf)p Fl(g)118 3688 y Fh(reevalform\).)118 3775 y
Fr(The)24 b(FORMA)-11 b(TSTRING)25 b(is)f(used)g(with)f(the)h(follo)n
(wing)e(ar)n(guments)i(in)g(a)g(call)g(on)g(bldmsg)f(to)h(b)n(uild)118
3895 y(an)30 b(error)g(message.)46 b(If)30 b(the)f(only)g(ar)n(gument)h
(to)f(printf)g(is)h(a)g(string,)g(the)f(FORMA)-11 b(TSTRING)31
b(may)118 4015 y(be)f(omitted,)f(and)h(no)f(call)h(to)f(bldmsg)f(is)i
(made.)45 b(REEV)-13 b(ALFORM)29 b(is)h(something)e(lik)o(e)h
Fh(\(foo)59 b(x)118 4136 y(y\))32 b Fr(which)f(becomes)h
Fh(\(list)59 b('foo)g(\(mkquote)f(x\))h(\(mkquote)f(y\)\))31
b Fr(to)h(be)g(passed)g(to)118 4256 y(the)25 b(function)f
(continuableerror)-5 b(.)118 4482 y Fh(\(de)59 b(divide)g(\(u)g(v\))238
4603 y(\(cond)f(\(\(zerop)h(v\))716 4723 y(\(conterror)e(99)1075
4844 y("Attempt)h(to)h(divide)f(by)i(0)f(in)g(DIVIDE")1075
4964 y(\(divide)f(u)h(v\)\)\))656 5084 y(\(t)g(\(cons)g(\(quotient)f(u)
h(v\))h(\(remainder)d(u)j(v\)\)\))178 5205 y(\)\))118
5650 y Fq(\(fatalerr)n(or)26 b(S:any\):)32 b(None)25
b(Retur)o(ned)1903 b Fi(e)n(xpr)118 5770 y Fr(This)22
b(function)f(allo)n(ws)g(neither)h(continuation)f(nor)h(e)n(v)o(en)f(a)
i(return)f(to)g(an)o(y)g(error)h(han-)118 5890 y(dler)-5
b(.)p eop
%%Page: 149 157
149 156 bop -118 -18 a Fg(12.3.)55 b(B)m(ASIC)26 b(ERR)l(OR)g(HANDLERS)
1940 b Fr(149)121 289 y Fh(\(de)59 b(fatalerror)f(\(s\))241
409 y(\(errorprintf)f("*****)h(Fatal)h(error:)f(\045S")h(s\))241
529 y(\(while)f(t)i(\(quit\)\))241 650 y(nil\))-118 1061
y Ft(12.3)142 b(Basic)35 b(Err)m(or)g(Handlers)-118 1526
y Fq(\(errset)26 b(U:f)n(orm)f(*EMSGP:boolean\):)31 b(any)1627
b Fi(macr)l(o)-93 1646 y Fr(Errset)25 b(and)f(errorset)i(are)f(the)g
(basic)f(PSL)i(error)f(handler)g(functions.)-118 1787
y(If)20 b(an)g(error)g(occurs)g(during)f(the)h(e)n(v)n(aluation)d(of)j
(U,)g(the)f(v)n(alue)g(of)h(number)f(from)h(the)f(associated)h(error)
-118 1908 y(call)28 b(is)g(returned)h(as)f(the)g(v)n(alue)g(of)g(the)h
(errset.)41 b(There)29 b(are)g(actually)f(a)h(couple)f(of)g(e)o
(xceptions.)40 b(If)29 b(a)-118 2028 y(continuable)d(error)i(is)f
(continued)f(by)i(the)f(user)g(in)g(the)g(interacti)n(v)o(e)f(break)i
(loop,)f(no)g(special)g(return)-118 2149 y(to)d(errset)h(is)f(done.)30
b(Also)24 b(if)h(the)f(user)g(requests)h(the)f(computation)f(to)h(be)g
(aborted)h(completely)e(back)-118 2269 y(to)h(the)h(top)f(le)n(v)o(el)g
(no)g(return)h(to)g(errset)g(is)f(done.)-118 2400 y(The)38
b(boolean)g(ar)n(gument)g(is)f(e)n(v)n(aluated)h(without)e(protection)i
(of)g(the)g(error)h(handler)-5 b(.)70 b(The)38 b(\003uid)-118
2521 y(v)n(ariable)19 b(*EMSGP)h(is)f(bound)g(to)g(the)h(boolean)f(v)n
(alue)g(for)h(the)g(e)n(v)n(aluation)e(of)i(the)f(form.)29
b(If)20 b(the)g(v)n(alue)-118 2641 y(of)33 b(*EMSGP)h(is)f(nil)g(when)g
(an)h(error)g(occurs)g(no)f(error)h(message)f(is)g(printed)g(and)g(no)h
(interacti)n(v)o(e)-118 2762 y(break)28 b(loop)f(occurs.)39
b(In)27 b(this)g(case)h(control)f(must)g(return)g(to)g(the)h(innermost)
e(error)i(handler)g(e)o(xcept)-118 2882 y(for)d(the)g(case)g(of)g(a)g
(f)o(atal)g(error)-5 b(.)-118 3014 y(If)24 b(errset)f(is)g(returned)g
(to)g(in)g(the)g(normal)g(w)o(ay)-6 b(,)23 b(its)f(v)n(alue)h(is)g(a)h
(list)e(of)h(one)g(element,)g(the)g(v)n(alue)g(of)g(the)-118
3134 y(form.)33 b(If)26 b(errset)g(is)g(returned)f(to)h(via)f(the)h
(error)g(mechanism,)f(its)g(v)n(alue)g(is)g(the)h(error)g(number)g(of)f
(the)-118 3254 y(error)g(call)g(that)f(caused)h(the)g(return.)-118
3604 y Fq(\(err)n(orset)h(U:any)f(*EMSGP:boolean)g(*B)m(A)-5
b(CKTRA)g(CE:boolean\):)31 b(any)600 b Fi(e)n(xpr)-118
3801 y Fr(This)24 b(is)g(an)h(older)g(function)f(than)g(errset.)31
b(Errset)25 b(is)g(generally)f(preferred.)-118 3933 y(In)37
b(most)e(respects)i(errorset)g(beha)n(v)o(es)f(the)g(same)g(as)h
(errset.)66 b(See)38 b(the)e(documentation)f(of)i(errset)-118
4053 y(abo)o(v)o(e.)h(Note)28 b(that)f(errorset)h(is)g(an)g(e)o(xpr)l
(,)g(so)f(U)h(gets)f(e)n(v)n(aluated)g(once)h(as)g(the)f(parameter)h
(is)g(passed)-118 4173 y(and)h(the)g(result)g(is)g(then)g(e)n(v)n
(aluated)f(inside)h(errorset.)45 b(Since)29 b(errorset)h(itself)f
(calls)g(e)n(v)n(al)f(on)i(its)e(\002rst)-118 4294 y(ar)n(gument)c
(there)h(are)h(lik)o(ely)e(to)g(be)h(problems)f(with)g(compiled)g(code)
h(that)f(uses)g(errorset.)-118 4425 y(In)35 b(addition)g(to)g(binding)f
(*EMSGP)h(as)h(errset)g(does,)i(errorset)e(o)o(v)o(errides)e(the)h
(beha)n(vior)g(usually)-118 4546 y(speci\002ed)24 b(by)f(the)g(*B)m(A)l
(CKTRA)l(CE)h(switch.)30 b(The)23 b(backtrace)h(beha)n(vior)f(of)h(PSL)
g(errors)g(during)e(the)-118 4666 y(e)o(x)o(ecution)e(of)h(a)g(form)g
(inside)g(an)g(errorset)h(error)g(handler)f(is)f(determined)h(by)g(the)
g(second)g(parameter)-118 4786 y(to)j(the)h(errorset.)-118
4918 y(The)38 b(follo)n(wing)f(tw)o(o)h(switches)f(and)i(one)f(global)f
(v)n(ariable)h(are)i(used)e(by)g(the)g(functions)f(in)h(this)-118
5038 y(section.)30 b(Useage)25 b(of)g(an)o(y)f(of)h(these)g(can)g(be)g
(considered)f(adv)n(anced.)-118 5388 y Fq(*emsgp)h Fr(=)g([Initially:)k
(t])2471 b Fi(\003uid)82 5509 y Fr(Fluid)24 b(v)n(ariable)g(rebound)h
(by)f(errset)h(and)g(errorset.)31 b(Controls)24 b(error)i(message)e
(print-)82 5629 y(ing)36 b(during)h(call)g(on)f(error)-5
b(.)68 b(If)38 b(nil,)h(no)e(error)g(message)g(will)f(be)i(printed)e
(and)h(no)82 5750 y(interacti)n(v)o(e)g(break)h(loop)g(will)f(be)i
(entered.)72 b(If)38 b(an)h(unwind)e(backtrace)i(has)g(been)82
5870 y(requested)24 b(through)g(the)h(backtrace)g(\003ag)h(or)f(a)g
(call)g(on)f(errorset,)h(one)g(will)f(be.)p eop
%%Page: 150 158
150 157 bop 118 -18 a Fr(150)118 357 y Fq(emsg*)25 b
Fr(=)g([Initially:)k(nil])2371 b Fi(global)318 478 y
Fr(Contains)25 b(the)h(message)f(generated)h(by)g(the)f(last)h(error)g
(call.)34 b(P)o(articularly)25 b(useful)g(in)318 598
y(case)g(printing)f(of)h(the)f(message)h(w)o(as)g(suppressed.)118
858 y Fq(*backtrace)h Fr(=)f([Initially:)30 b(nil])2167
b Fi(switc)o(h)318 978 y Fr(Used)38 b(by)f(the)h(top)g(le)n(v)o(el)f
(read-e)n(v)n(al-print)g(loop)g(to)h(control)f(whether)h(an)g(unwind)
318 1099 y(backtrace)30 b(will)f(be)h(printed)f(when)h(errors)g(occur)h
(outside)d(the)i(scope)g(of)g(an)o(y)f(user)n(-)318 1219
y(speci\002ed)c(error)g(handler)-5 b(.)118 1576 y Ft(12.4)143
b(Br)m(eak)34 b(Loop)118 1822 y Fr(On)19 b(detecting)g(an)g(error)l(,)i
(PSL)f(normally)e(enters)i(a)f(read/e)n(v)n(al/print)f(loop)g(called)i
(a)f(break)h(loop.)28 b(Here)118 1943 y(the)h(user)g(can)h(e)o(xamine)e
(the)h(state)g(of)g(his)g(computation,)f(change)i(the)f(v)n(alues)f(of)
h(\003uid)g(and)g(global)118 2063 y(v)n(ariables,)j(or)g(de\002ne)g
(missing)e(functions.)49 b(He)32 b(can)g(then)f(dismiss)f(the)h(error)h
(call)g(to)f(the)g(normal)118 2184 y(error)g(handling)e(mechanism)f
(\(errorset)j(or)f(errset)g(abo)o(v)o(e\).)46 b(If)30
b(the)g(error)h(w)o(as)f(of)g(the)g(continuable)118 2304
y(type,)21 b(he)f(may)g(continue)f(the)h(computation.)27
b(By)21 b(setting)e(the)h(switch)f(*break)h(to)g(nil,)g(all)g(break)h
(loops)118 2424 y(can)32 b(be)g(suppressed,)h(and)f(just)f(an)h(error)h
(message)e(is)h(displayed.)51 b(Suppressing)31 b(error)h(messages)118
2545 y(also)25 b(suppresses)f(break)h(loops.)118 2895
y Fq(*br)n(eak)h Fr(=)f([Initially:)k(t])2419 b Fi(switc)o(h)318
3015 y Fr(Controls)22 b(whether)h(the)g(break)h(package)g(is)e(called)h
(before)h(unwinding)d(the)i(stack)g(on)318 3136 y(error)-5
b(.)118 3375 y Fq(br)n(eakle)o(v)o(el*)25 b Fr(=)g([Initially:)30
b(0])2204 b Fi(global)318 3495 y Fr(The)25 b(current)g(number)f(of)h
(nesting)f(le)n(v)o(el)f(of)i(breaks.)118 3755 y Fq(maxbr)n(eakle)o(v)o
(el*)g Fr(=)g([Initially:)k(5])2022 b Fi(global)318 3875
y Fr(The)37 b(maximum)d(number)i(of)h(nesting)f(le)n(v)o(els)f(of)i
(breaks)f(permitted.)65 b(If)38 b(an)e(error)318 3996
y(occurs)27 b(with)f(at)h(least)g(this)f(number)h(of)g(nested)f(breaks)
i(already)f(e)o(xisting,)e(no)i(entry)318 4116 y(to)i(an)h(interacti)n
(v)o(e)e(break)i(loop)f(is)g(made.)45 b(Control)30 b(aborts)f(back)h
(to)f(the)g(innermost)318 4237 y(error)c(handler)g(instead.)118
4561 y(The)19 b(prompt)g Fh("lisp)58 b(break>")18 b Fr(indicates)h
(that)g(PSL)h(has)f(entered)h(a)f(break)h(loop.)28 b(A)19
b(message)g(of)118 4682 y(the)k(form)h(\224Retry)g(form)f(is)g(...)-7
b(\224)23 b(may)g(also)g(be)h(printed,)f(in)g(which)g(case)h(the)f
(user)h(is)f(able)g(to)g(continue)118 4802 y(his)37 b(computation)e(by)
i(repairing)g(the)g(of)n(fending)g(e)o(xpression.)66
b(By)38 b(def)o(ault,)i(a)e(break)f(loop)g(uses)118 4922
y(the)31 b(functions)f(read,)j(e)n(v)n(al,)e(and)g(print.)49
b(This)30 b(may)h(be)g(changed)g(by)g(setting)e Fh(breakreader*,)118
5043 y(breakevaluator*,)56 b(or)k(breakprinter*)22 b
Fr(to)i(the)h(appropriate)f(function)g(name.)118 5629
y Fq(err)n(orf)n(orm*)i Fr(=)f([Initially:)k(nil])2154
b Fi(global)318 5750 y Fr(Contains)38 b(an)g(e)o(xpression)f(to)h(ree)n
(v)n(aluate)f(inside)h(a)g(break)h(loop)f(for)g(continuable)318
5870 y(errors.)31 b(Used)25 b(as)g(a)g(tag)f(for)h(v)n(arious)f(Error)h
(functions.)p eop
%%Page: 151 159
151 158 bop -118 -18 a Fg(12.4.)55 b(BREAK)25 b(LOOP)2517
b Fr(151)-118 289 y(Se)n(v)o(eral)21 b(ids,)g(if)h(typed)f(at)g(top-le)
n(v)o(el,)f(are)i(special)f(in)g(a)h(break)g(loop.)29
b(These)21 b(are)h(used)f(as)h(commands,)-118 409 y(and)g(are)i
(currently)e(M,)g(R,)h(T)-7 b(,)22 b(Q,)g(A,)g(I,)h(and)g(C.)f(The)o(y)
g(call)h(functions)e(stored)h(on)g(their)h(property)f(lists)-118
529 y(under)e(the)g(indicator)f(breakfunction.)29 b(These)20
b(ids)g(are)h(special)e(only)h(at)g(top-le)n(v)o(el,)f(and)h(do)g(not)g
(cause)-118 650 y(an)o(y)30 b(dif)n(\002culty)f(if)h(used)g(as)h(v)n
(ariables)e(inside)h(e)o(xpressions.)46 b(Ho)n(we)n(v)o(er)l(,)30
b(the)o(y)g(may)g(not)f(be)i(simply)-118 770 y(typed)24
b(at)h(top-le)n(v)o(el)e(to)i(see)g(their)f(v)n(alues.)30
b(This)24 b(is)g(not)h(e)o(xpected)f(to)h(cause)g(an)o(y)f(dif)n
(\002culty)-6 b(.)-118 1013 y(The)25 b(meanings)e(of)i(these)g
(commands)f(are:)-68 1228 y(M)99 b(Display)24 b(errorform*,)h(this)e
(command)h(calls)h(the)f(function)g(break)o(errmsg.)-68
1349 y(R)122 b(Retry)-6 b(.)33 b(This)25 b(tries)g(to)g(e)n(v)n(aluate)
g(the)g(retry)h(form,)f(and)h(continue)f(the)g(computation.)31
b(It)26 b(e)n(v)n(alu-)120 1469 y(ates)i(the)h(v)n(alue)f(of)g
(errorform*.)42 b(This)28 b(is)g(often)g(useful)g(after)h(de\002ning)f
(a)h(missing)e(function)120 1589 y(or)e(assigning)e(a)i(v)n(alue)f(to)h
(a)g(v)n(ariable.)30 b(This)24 b(command)g(calls)h(the)f(function)g
(breakretry)-6 b(.)-68 1710 y(C)122 b(Continue.)42 b(This)28
b(causes)h(the)g(e)o(xpression)e(last)h(printed)g(by)h(the)g(break)g
(loop)f(to)g(be)h(returned)120 1830 y(as)34 b(the)g(v)n(alue)f(of)h
(the)g(call)g(on)g(continuableerror)-5 b(.)57 b(This)33
b(is)h(often)f(useful)h(as)g(an)g(automatic)120 1951
y(stub)l(.)29 b(If)c(an)f(e)o(xpression)e(containing)h(an)h
(unde\002ned)g(function)f(is)g(e)n(v)n(aluated,)g(a)h(break)g(loop)g
(is)120 2071 y(entered,)e(and)f(this)f(may)h(be)g(used)g(to)g(return)g
(the)g(v)n(alue)f(of)h(the)g(function)f(call.)30 b(This)20
b(command)120 2191 y(calls)k(the)h(function)f(breakcontinue.)-68
2312 y(Q)116 b(Quit.)29 b(This)22 b(e)o(xits)f(the)h(break)h(loop)f(by)
g(thro)n(wing)f(to)h(the)g(closest)g(surrounding)f(error)i(handler)-5
b(.)120 2432 y(It)25 b(calls)f(the)h(function)f(breakquit.)-68
2553 y(A)116 b(Abort.)30 b(This)24 b(aborts)h(to)f(the)h(top)f(le)n(v)o
(el,)f(i.e.,)i(restarts)g(PSL.)g(It)g(calls)f(the)h(function)f(reset.)
-68 2673 y(T)127 b(T)m(race.)34 b(This)26 b(prints)f(a)h(backtrace)g
(of)h(function)e(calls)g(on)h(the)g(stack)f(e)o(xcept)h(for)g(those)g
(on)f(the)120 2793 y(lists)e(ignoredinbacktrace*)i(and)f
(interpreterfunctions*.)30 b(It)25 b(calls)f(the)h(function)f
(backtrace.)-68 2914 y(I)155 b(Interpreter)42 b(T)m(race.)83
b(This)41 b(prints)g(a)h(backtrace)h(of)f(only)f(interpreted)h
(functions)e(call)i(on)120 3034 y(the)c(stack)g(e)o(xcept)g(for)h
(those)f(on)g(the)g(list)f(interpreterfunctions*.)70
b(It)39 b(calls)f(the)g(function)120 3154 y(interpbacktrace.)-118
3387 y(An)23 b(attempt)g(to)g(continue)f(a)i(non-continuable)e(error)j
(with)d(R)i(or)g(C)g(prints)e(a)i(message)f(and)h(beha)n(v)o(es)-118
3508 y(as)h(Q.)-118 3849 y Fq(ignor)n(edinbacktrace*)i
Fr(=)e([Initially:)k(string])1637 b Fi(global)82 3969
y Fr(A)35 b(list)g(of)g(function)g(names)g(that)g(will)g(not)g(be)g
(printed)g(by)g(the)h(commands)e(I)i(and)82 4089 y(T)26
b(gi)n(v)o(en)f(within)g(a)i(break)f(loop)g(\(e)n(v)n(al)g(apply)g(f)o
(astapply)f(codeapply)h(codee)n(v)n(alapply)82 4210 y(catch)f(errorset)
g(e)n(vprogn)f(toploop)f(break)o(e)n(v)n(al)h(binde)n(v)n(al)f(break)j
(main\).)-118 4461 y Fq(inter)o(pr)n(eterfunctions*)i
Fr(=)d([Initially:)k(string])1605 b Fi(global)82 4581
y Fr(A)33 b(list)f(of)h(function)f(names)h(that)f(will)g(not)h(be)g
(printed)f(by)h(the)g(command)f(I)h(gi)n(v)o(en)82 4701
y(within)23 b(a)i(break)h(loop)e(\(cond)g(prog)h(and)g(or)g(progn)f
(setq\).)-118 4919 y(The)h(abo)o(v)o(e)f(tw)o(o)g(globals)g(can)h(be)g
(reset)g(in)f(an)h(init)f(\002le)h(if)g(the)g(programmer)f(desires)g
(to)h(do)f(so.)-118 5136 y Fh(\(de)59 b(new-nth)f(\(seq)h(index\))121
5256 y(\(cond)g(\(\(onep)f(index\))h(\(car)f(x\)\))480
5377 y(\(t)h(\(new-nth)f(\(rest)h(index\))f(\(sub1)h(index\)\)\)\)\))
-118 5618 y(1)g(lisp>)g(\(new-nth)f('\(a)h(b)h(c\))f(2\))-118
5738 y(*****)g(`S')g(is)g(an)g(unbound)g(ID)-118 5858
y(*****)g(Continuable)e(error:)h(retry)h(form)g(is)g(`S')p
eop
%%Page: 152 160
152 159 bop 118 -18 a Fr(152)118 289 y Fh(2)60 b(lisp)f(break)f(\(1\)>)
h(t)118 409 y(Backtrace)f(from)h(top)g(of)g(stack:)118
529 y(car)g(new-nth)f(new-nth)118 650 y(NIL)118 770 y(3)i(lisp)f(break)
f(\(1\)>)h(seq)118 891 y(\(b)g(c\))118 1011 y(4)h(lisp)f(break)f
(\(1\)>)h(c)118 1131 y(b)118 1492 y Ft(12.5)143 b(Details)34
b(on)h(the)g(Br)m(eak)g(Loop)118 1723 y Fr(If)23 b(the)e(switch)g
(break)i(is)e(t,)i(the)e(function)g(break)i(is)e(called)h(by)g(error)h
(or)f(continuableerror)f(before)i(un-)118 1843 y(winding)i(the)g
(stacks,)h(or)g(printing)f(a)h(backtrace.)34 b(Input)26
b(and)g(output)e(to/from)h(break)h(loops)f(is)h(done)118
1963 y(from/to)c(the)h(v)n(alues)g(\(channels\))g(of)g
Fh(breakin*)f Fr(and)h Fh(breakout*)p Fr(.)28 b(The)c(channels)f
(selected)g(on)118 2084 y(entrance)i(to)g(the)g(break)g(loop)f(are)h
(restored)g(upon)f(e)o(xit.)118 2426 y Fq(br)n(eakin*)i
Fr(=)f([Initially:)30 b(nil])2256 b Fi(global)318 2546
y Fr(So)25 b(rds)g(chooses)f(stdin*.)118 2778 y Fq(br)n(eak)o(out*)i
Fr(=)f([Initially:)k(nil])2203 b Fi(global)318 2898 y
Fr(Similar)24 b(to)h(breakin*.)118 3215 y(Break)42 b(is)e(essentially)f
(a)i(read-e)n(v)n(al-print)f(function,)j(called)e(in)f(the)h(error)g
(conte)o(xt.)77 b(An)o(y)40 b(\003uid)118 3336 y(may)34
b(be)g(printed)f(or)h(changed,)i(function)d(de\002nitions)g(changed,)j
(etc.)59 b(The)34 b(break)g(uses)g(the)f(nor)n(-)118
3456 y(mal)g(toploop)g(mechanism)f(\(including)h(history\),)i(embedded)
e(in)g(a)i(catch)f(with)f(tag)g Ff(br)s(eak)s Fr(.)58
b(The)118 3576 y(toploop)28 b(attempts)g(to)h(use)h(the)f(parent)h
(loop')-5 b(s)28 b(toploopread*,)h(toploopprint*)e(and)i(toploope)n(v)n
(al*;)118 3697 y(the)23 b(break)o(e)n(v)n(al)f(function)g(\002rst)h
(checks)g(top-le)n(v)o(el)e(ids)h(to)h(see)g(if)g(the)o(y)f(ha)n(v)o(e)
g(a)h(special)g(breakfunction)118 3817 y(on)g(their)h(property)f
(lists,)g(stored)g(under)g(breakfunction.)30 b(This)23
b(is)g(e)o(xpected)g(to)h(be)f(a)h(function)f(of)h(no)118
3938 y(ar)n(guments,)g(and)h(is)f(applied)g(instead)h(of)g(e)n(v)n(al.)
118 4298 y Ft(12.6)143 b(Some)34 b(Con)-6 b(v)o(enient)33
b(Err)m(or)i(Calls)118 4529 y Fr(The)25 b(follo)n(wing)e(functions)h
(may)g(be)h(useful)f(in)h(user)g(packages:)118 4871 y
Fq(\(rangeerr)n(or)i(OBJECT)-7 b(:any)25 b(INDEX:integer)h
(FN:function\):)118 4992 y(None)3147 b Fi(e)n(xpr)143
5112 y Fh(\(stderror)118 5232 y(\(bldmsg)58 b("Index)h(\045r)g(out)g
(of)h(range)e(for)h(\045p)h(in)f(\045p")g(INDEX)118 5353
y(OBJECT)g(FN\)\))118 5714 y Fq(\(stderr)n(or)26 b(MESSA)-5
b(GE:string\):)33 b(None)25 b(Retur)o(ned)1449 b Fi(e)n(xpr)143
5835 y Fh(\(error)58 b(99)i(message\))p eop
%%Page: 153 161
153 160 bop -118 -18 a Fg(12.6.)55 b(SOME)25 b(CONVENIENT)f(ERR)l(OR)i
(CALLS)1503 b Fr(153)-118 357 y Fq(\(typeerr)n(or)27
b(OFFENDER:any)e(FN:function)h(TYP:any\):)-118 478 y(None)f(Retur)o
(ned)2721 b Fi(e)n(xpr)-93 598 y Fh(\(stderror)58 b(\(bldmsg)-118
718 y("An)h(attempt)f(was)h(made)g(to)h(do)f(\045p)g(on)g(\045r,)h
(which)e(is)i(not)-118 839 y(\045w")-118 959 y(FN)f(OFFENDER)f(TYP\)\))
-118 1323 y Fq(\(usagetypeerr)n(or)27 b(OFF:any)d(FN:function)i
(TYP:any)f(USA)-5 b(GE:any\):)-118 1443 y(None)25 b(Retur)o(ned)2721
b Fi(e)n(xpr)-93 1564 y Fh(\(stderror)58 b(\(bldmsg)-118
1684 y Fb("An)53 b(attempt)e(was)j(made)e(to)i(use)f(\045r)h(as)f
(\045w)h(in)g(\045p,)f(where)f(\045w)i(is)-118 1805 y(needed")19
b Fd(OFFENDER)h(USA)l(GE)h(FN)h(TYP\)\))-118 2174 y Fq(\(nonw)o
(ordserr)n(or)27 b(OFFENDER:any)e(FN:function\):)32 b(None)25
b(Retur)o(ned)640 b Fi(e)n(xpr)-93 2294 y Fh(\(typeerror)57
b(OFFENDER)h(FN)i("a)f(words)g(vector"\))-118 2662 y
Fq(\(nonpair)n(err)n(or)27 b(OFFENDER:any)e(FN:function\):)32
b(None)26 b(Retur)o(ned)723 b Fi(e)n(xpr)-93 2783 y Fh(\(typeerror)57
b(OFFENDER)h(FN)i("a)f(pair"\))-118 3151 y Fq(\(nonlisterr)n(or)26
b(OFFENDER:any)f(FN:function\):)-118 3271 y(None)g(Retur)o(ned)2721
b Fi(e)n(xpr)-93 3392 y Fh(\(typeerror)57 b(OFFENDER)h(FN)i("a)f(list)g
(or)g(NIL"\))-118 3760 y Fq(\(noniderr)n(or)27 b(OFFENDER:any)e
(FN:function\):)32 b(None)25 b(Retur)o(ned)816 b Fi(e)n(xpr)-93
3880 y Fh(\(typeerror)57 b(OFFENDER)h(FN)i("an)f(identifier"\))-118
4248 y Fq(\(nonnumber)n(err)n(or)28 b(OFFENDER:any)d(FN:function\):)33
b(None)25 b(Retur)o(ned)563 b Fi(e)n(xpr)-93 4369 y Fh(\(typeerror)57
b(OFFENDER)h(FN)i("a)f(number"\))-118 4737 y Fq(\(noninteger)n(err)n
(or)28 b(OFFENDER:any)d(FN:function\):)32 b(None)25 b(Retur)o(ned)602
b Fi(e)n(xpr)-93 4857 y Fh(\(typeerror)57 b(OFFENDER)h(FN)i("an)f
(integer"\))-118 5226 y Fq(\(nonpositi)o(v)o(einteger)n(err)n(or)27
b(OFFENDER:any)e(FN:function\):)33 b(None)703 b Fi(e)n(xpr)-93
5346 y Fh(\(typeerror)57 b(OFFENDER)h(FN)i("a)f(non-negative)e
(integer"\))-118 5714 y Fq(\(noncharacter)n(err)n(or)28
b(OFFENDER:any)d(FN:function\):)33 b(None)25 b(Retur)o(ned)491
b Fi(e)n(xpr)-93 5835 y Fh(\(typeerror)57 b(OFFENDER)h(FN)i("a)f
(character"\))p eop
%%Page: 154 162
154 161 bop 118 -18 a Fr(154)118 357 y Fq(\(nonstringerr)n(or)27
b(OFFENDER:any)e(FN:function\):)32 b(None)26 b(Retur)o(ned)649
b Fi(e)n(xpr)143 478 y Fh(\(typeerror)58 b(OFFENDER)g(FN)h("a)g
(string"\))118 840 y Fq(\(non)l(v)o(ector)n(err)n(or)27
b(OFFENDER:any)f(FN:function\):)32 b(None)25 b(Retur)o(ned)640
b Fi(e)n(xpr)143 961 y Fh(\(typeerror)58 b(OFFENDER)g(FN)h("a)g
(vector"\))118 1323 y Fq(\(nonw)o(ordserr)n(or)27 b(OFFENDER:any)e
(FN:function\):)32 b(None)26 b(Retur)o(ned)639 b Fi(e)n(xpr)143
1444 y Fh(\(typeerror)58 b(OFFENDER)g(FN)h("a)g(words)g(vector"\))118
1806 y Fq(\(nonsequenceerr)n(or)29 b(OFFENDER:any)c(FN:function\):)32
b(None)25 b(Retur)o(ned)517 b Fi(e)n(xpr)143 1927 y Fh(\(typeerror)58
b(OFFENDER)g(FN)h("a)g(sequence"\))p eop
%%Page: 155 163
155 162 bop -118 977 a Fn(Deb)l(ugging)52 b(T)-19 b(ools)-118
1515 y Ft(13.1)142 b(The)35 b(Deb)m(ug)g(Module)-118
1788 y Fq(deb)n(ug)26 b Fr(is)f(a)g(loadable)g(option.)k(This)c(module)
f(pro)o(vides)f(a)j(basic)e(deb)n(ugging)g(tool)g(which)h(pro)o(vides)
-118 1908 y(a)k(breakpoint)f(function,)h(and)g(functions)e(for)i
(breaking)g(and)g(tracing)f(functions)g(and)h(methods)e(se-)-118
2028 y(lected)32 b(by)f(the)g(user)-5 b(.)51 b(deb)n(ug)31
b(is)h(loaded)f(automatically)f(if)i(one)f(of)h(the)f(functions)g(tr)l
(,)i(trst)e(or)h(br)g(is)-118 2149 y(called.)-118 2596
y Fk(13.1.1)118 b(Ov)o(er)o(view)30 b(of)g(Functionality)-118
2832 y Fr(The)35 b(function)f(breakpoint)g(allo)n(ws)g(the)h(user)g(to)
g(set)g(a)g(breakpoint)f(an)o(ywhere)h(within)f(his)g(code.)-118
2953 y(Whene)n(v)o(er)24 b(a)g(breakpoint)g(is)g(called)g(a)h
(continuable)e(break)i(loop)f(is)f(entered.)31 b(This)24
b(allo)n(ws)f(the)h(user)-118 3073 y(to)g(e)o(xamine)g(or)h(modify)f(v)
n(ariables,)g(vie)n(w)g(a)h(backtrace,)h(and)e(continue)g(e)o(x)o
(ecution.)-118 3217 y(T)m(racing)g(gi)n(v)o(es)f(a)i(record)g(of)f(the)
h(sequence)g(of)f(calls)g(made)h(to)f(a)h(set)f(of)h(functions)e
(speci\002ed)i(by)f(the)-118 3338 y(user)-5 b(.)51 b(When)31
b(a)h(traced)g(function)f(is)g(entered)h(a)g(message)f(is)g(printed)g
(gi)n(ving)f(the)i(function)f(name,)-118 3458 y(le)n(v)o(el)e(of)h
(recursion,)h(and)f(v)n(alues)g(of)g(an)o(y)g(ar)n(guments.)46
b(Upon)29 b(function)h(e)o(xit)f(another)h(message)g(is)-118
3578 y(printed,)24 b(gi)n(ving)f(the)i(v)n(alue)f(returned)h(by)f(the)h
(function.)-118 3722 y(Breaking)20 b(a)g(function)f(means)h(that)f(the)
g(system)g(enters)h(a)g(continuable)f(break)h(loop)f(both)g(before)h
(and)-118 3843 y(after)29 b(e)n(v)n(aluation)f(of)h(the)g(body)f(of)h
(the)g(function.)42 b(W)l(ithin)28 b(the)h(break)g(loop)f(the)h(user)g
(may)g(inspect)-118 3963 y(and)34 b(change)g(v)n(alues)f(of)h
(parameters)g(and)f(non-local)g(v)n(ariables,)j(and)d(then)h(continue)f
(e)o(x)o(ecution.)-118 4084 y(A)g(break)g(on)f(entry)h(occurs)f(after)i
(the)e(function')-5 b(s)32 b(formal)g(parameters)h(ha)n(v)o(e)f(been)h
(bound)f(to)g(the)-118 4204 y(actual)e(ar)n(guments)g(b)n(ut)g(before)h
(an)o(y)f(of)h(the)f(forms)g(in)g(the)g(function)g(body)g(ha)n(v)o(e)g
(been)h(e)n(v)n(aluated.)-118 4324 y(The)25 b(break)g(on)f(e)o(xit)g
(occurs)h(after)h(the)e(body)g(of)h(the)g(brok)o(en)g(function)f(has)g
(been)h(e)n(v)n(aluated.)-118 4771 y Fk(13.1.2)118 b(Using)31
b(Br)n(eak)e(and)i(T)-9 b(race)-118 5227 y Fq(\(tr)25
b([N)n(AME:)h(id]\):)31 b(list)2423 b Fi(macr)l(o)-79
5347 y Fr(If)39 b(no)f(ar)n(guments)g(are)i(gi)n(v)o(en)d(then)h(a)h
(list)f(is)g(returned)h(which)f(indicates)g(which)-118
5467 y(functions)23 b(are)h(currently)g(being)f(traced.)31
b(Otherwise,)24 b(each)g(ar)n(gument)f(is)h(treated)g(as)-118
5588 y(a)29 b(reference)h(to)e(a)h(function,)f(and)h(if)f(possible,)g
(the)g(function)g(is)g(set)g(up)h(for)f(tracing.)-118
5708 y(The)i(list)f(which)g(is)h(returned)g(represents)g(the)g
(functions)f(which)g(ha)n(v)o(e)h(been)g(added)-118 5828
y(to)24 b(the)h(set)g(of)f(functions)g(being)g(traced.)1579
6066 y(155)p eop
%%Page: 156 164
156 163 bop 118 -18 a Fr(156)118 357 y Fq(\(trst)26 b([N)n(AME:)f
(id]\):)32 b(list)2350 b Fi(macr)l(o)157 478 y Fr(If)39
b(no)g(ar)n(guments)f(are)h(gi)n(v)o(en)e(then)i(a)g(list)e(is)i
(returned)f(which)h(indicates)f(which)118 598 y(functions)23
b(are)h(currently)g(being)f(traced.)31 b(Otherwise,)24
b(each)g(ar)n(gument)g(is)f(treated)h(as)118 718 y(a)29
b(reference)h(to)e(a)h(function,)f(and)h(if)f(possible,)g(the)h
(function)e(is)h(set)h(up)f(for)h(tracing.)118 839 y(The)21
b(list)f(which)h(is)f(returned)h(represents)g(the)g(functions)f(which)h
(ha)n(v)o(e)f(been)i(added)f(to)118 959 y(the)26 b(set)f(of)h
(functions)f(being)g(traced.)34 b(T)m(rst)25 b(can)h(be)g(used)g(only)f
(for)h(functions)f(which)118 1080 y(are)f(not)e(compiled.)29
b(Additionally)20 b(to)j(the)g(entry)f(and)h(e)o(xit)f(messages,)g(for)
h(each)h Ff(setq)118 1200 y Fr(assignment)f(inside)g(the)h(function)f
(the)h(v)n(ariable)f(name)h(and)g(the)g(v)n(alue)g(are)g(printed.)118
1569 y Fq(\(br)i([N)n(AME:)f(id,)g(method-speci\002cation]\):)34
b(list)1470 b Fi(macr)l(o)157 1689 y Fr(If)39 b(no)g(ar)n(guments)f
(are)h(gi)n(v)o(en)e(then)i(a)g(list)e(is)i(returned)f(which)h
(indicates)f(which)118 1810 y(functions)18 b(are)j(currently)e(brok)o
(en.)28 b(N)m(AME)19 b(is)g(treated)g(as)h(a)f(reference)i(to)e(a)h
(function,)118 1930 y(and)30 b(if)g(possible,)g(the)g(function)g(is)f
(set)h(up)g(for)h(breaking.)46 b(Subsequent)30 b(ar)n(guments)118
2050 y(will)24 b(be)g(processed.)30 b(The)25 b(list)e(which)h(is)g
(returned)g(represents)g(the)g(functions)g(which)118
2171 y(ha)n(v)o(e)h(been)g(added)f(to)h(the)g(set)f(of)h(brok)o(en)g
(functions.)118 2519 y Fq(\(untr)h([N)n(AME:id]\):)33
b(list)2336 b Fi(macr)l(o)143 2640 y Fr(If)25 b(no)g(ar)n(guments)f
(are)h(gi)n(v)o(en)e(then)i(tracing)f(is)g(remo)o(v)o(ed)g(for)h(each)g
(traced)g(function.)118 2760 y(N)m(AME)37 b(is)g(treated)h(as)f(a)h
(reference)i(to)d(a)h(function,)i(and)d(if)h(possible,)h(tracing)f(is)
118 2880 y(disabled)33 b(for)i(this)e(function.)57 b(Subsequent)34
b(ar)n(guments)f(will)h(be)g(processed.)58 b(The)118
3001 y(list)25 b(which)h(is)g(returned)g(contains)g(the)g(names)g(of)g
(the)g(functions)f(for)i(which)e(tracing)118 3121 y(has)g(been)g(remo)o
(v)o(ed.)118 3470 y Fq(\(unbr)i([N)n(AME:id,]\):)32 b(list)2289
b Fi(macr)l(o)143 3590 y Fr(If)24 b(no)g(ar)n(guments)g(are)h(gi)n(v)o
(en)e(then)h(breaking)g(is)g(turned)g(of)n(f)g(for)h(each)g(brok)o(en)f
(func-)118 3711 y(tion.)29 b(N)m(AME)23 b(is)f(treated)i(as)f(a)h
(reference)h(to)e(a)g(function,)g(and)g(if)g(possible,)g(breaking)118
3831 y(is)28 b(disabled)g(for)h(this)e(function.)41 b(The)29
b(list)f(which)g(is)g(returned)g(contains)g(the)h(names)118
3951 y(of)c(the)g(functions)e(for)i(which)g(breaking)f(has)h(been)g
(remo)o(v)o(ed.)118 4275 y Fk(13.1.3)119 b(Sample)30
b(Session)118 4463 y Fr(T)m(race)j(and)f(break)h(printout)e(goes)h(to)g
(the)h(standard)f(output)f(channel.)54 b(Because)33 b(multiple)e
(nested)118 4583 y(calls)g(are)i(usually)d(sho)n(wn,)i(indentation)e
(and)i(v)o(ertical)f(bars)h(are)g(used)f(to)g(line)h(up)f(function)g
(entry)118 4704 y(and)25 b(return)g(messages)f(for)h(the)g(same)f
(function.)118 4924 y Fh(\(de)59 b(add3)g(\(a1)g(a2)h(a3\))238
5045 y(\(+)f(a1)g(\(add2)g(a2)g(a3\)\)\))118 5266 y(\(de)g(add2)g(\(a1)
g(a2\))238 5386 y(\(+)g(a1)g(a2\)\))118 5607 y(\(de)g(fact)g(\(n\))238
5727 y(\(cond)f(\(\(zerop)h(n\))g(1\))596 5847 y(\(t)h(\(times)e(n)i
(\(fact)e(\(sub1)h(n\)\)\)\)\)\))p eop
%%Page: 157 165
157 164 bop -118 -18 a Fg(13.1.)55 b(THE)25 b(DEB)o(UG)g(MODULE)2126
b Fr(157)-118 289 y Fh(1)59 b(lisp>)g(\(br)g(add3\))-118
409 y(In)g(a)h(break,)e(t)i(prints)e(backTrace;)g(c)h(Continues;)-118
529 y(q)g(Quits)g(a)h(level;)e(a)i(Aborts)e(to)h(top.)-118
650 y(\(ADD3\))-118 770 y(2)g(lisp>)g(\(tr)g('add3\))-118
891 y(*****)g(\(QUOTE)f(ADD3\))h(is)g(not)g(a)h(valid)e
(method-specification.)-118 1011 y(NIL)-118 1131 y(3)h(lisp>)g(\(tr)g
(add3)g(add2\))-118 1252 y(\(ADD2)g(ADD3\))-118 1372
y(4)g(lisp>)g(\(add3)g(5)g(6)h(7\))-118 1493 y(ADD3)f(entry:)-118
1613 y(|)299 b(A1:)59 b(5)-118 1733 y(|)299 b(A2:)59
b(6)-118 1854 y(|)299 b(A3:)59 b(7)-118 1974 y(|)119
b(ADD3)59 b(entry)g(BREAK:)-118 2094 y(|)119 b(NMODE)59
b(Break)g(loop)-118 2215 y(5)g(lisp)g(break)g(\(1\)>)g(c)299
b(\045)59 b(Continue)-118 2335 y(|)119 b(|)h(ADD2)58
b(entry:)-118 2456 y(|)119 b(|)h(|)298 b(A1:)59 b(6)-118
2576 y(|)119 b(|)h(|)298 b(A2:)59 b(7)-118 2696 y(|)119
b(|)h(ADD2)58 b(value)h(=)h(13)-118 2817 y(|)119 b(ADD3)59
b(exit)g(BREAK,)f(value)h(=)h(18:)-118 2937 y(|)119 b(NMODE)59
b(Break)g(loop)-118 3057 y(6)g(lisp)g(break)g(\(1\)>)g(c)-118
3178 y(ADD4)g(value)f(=)i(18)-118 3298 y(18)-118 3571
y(1)f(lisp>)g(\(tr)g(fact\))-118 3691 y(\(FACT\))-118
3812 y(2)g(lisp>)g(\(fact)g(4\))-118 3932 y(FACT)g(entry:)-118
4053 y(|)299 b(N:)59 b(4)-118 4173 y(|)119 b(FACT)59
b(reentry)f(\(#)i(2\):)-118 4293 y(|)119 b(|)478 b(\045)60
b(\(#)f(2\))g(represents)f(the)h(depth)g(of)g(recursion)-118
4414 y(|)119 b(|)299 b(N:)59 b(3)-118 4534 y(|)119 b(|)h(FACT)58
b(reentry)h(\(#)g(3\):)-118 4655 y(|)119 b(|)h(|)298
b(N:)60 b(2)-118 4775 y(|)119 b(|)h(|)f(FACT)59 b(reentry)f(\(#)h(4\):)
-118 4895 y(|)119 b(|)h(|)f(|)299 b(N:)59 b(1)-118 5016
y(|)119 b(|)h(|)f(|)g(FACT)59 b(reentry)f(\(#)i(5\):)-118
5136 y(|)119 b(|)h(|)f(|)g(|)299 b(N:)59 b(0)-118 5256
y(|)119 b(|)h(|)f(|)g(FACT)59 b(value)g(\(#)g(5\))g(=)h(1)-118
5377 y(|)119 b(|)h(|)f(FACT)59 b(value)f(\(#)i(4\))f(=)h(1)-118
5497 y(|)119 b(|)h(FACT)58 b(value)h(\(#)g(3\))h(=)f(2)-118
5618 y(|)119 b(FACT)59 b(value)g(\(#)g(2\))g(=)h(6)-118
5738 y(FACT)f(value)f(=)i(24)-118 5858 y(24)p eop
%%Page: 158 166
158 165 bop 118 -18 a Fr(158)118 289 y Fh(3)60 b(lisp>)e(\(trace\))118
409 y(\(FACT)h(ADD2)g(ADD3)g(ADD4\))118 529 y(4)h(lisp>)e(\(untrace\))
118 650 y(\(ADD4)h(ADD3)g(ADD2)g(FACT\))118 770 y(5)h(lisp>)e
(\(restr\))118 891 y(T)118 1119 y Fr(T)m(racing)18 b(a)i(macro)e(will)g
(happen)h(at)g(macroe)o(xpand)f(time.)28 b(The)19 b(v)n(alue)f
(returned)h(will)f(be)h(the)f(macroe)o(x-)118 1239 y(panded)33
b(form,)h(and)f(thus)f(is)g(quite)h(useful)f(in)h(determining)e(if)i
(your)f(macro)h(e)o(xpanded)f(properly)-6 b(.)118 1360
y(Note)27 b(that)g(when)h(code)g(is)f(complied)f(the)h(application)g
(of)g(a)h(macro)g(is)f(e)o(xpanded)g(and)g(this)g(e)o(xpan-)118
1480 y(sion)d(replaces)h(the)g(the)g(application.)118
1708 y Fh(1)60 b(lisp>)e(\(trace)h(plus\))118 1829 y(\(PLUS\))118
1949 y(2)h(lisp>)e(\(plus)h(2)h(9)f(-3)g(7)h(8\))118
2070 y(PLUS)f(entry:)118 2190 y(|)299 b(ARG1)59 b(:\(PLUS)f(2)i(9)f(-3)
h(7)f(...\))118 2310 y(PLUS)g(value)g(=)g(\(PLUS2)g(2)g(\(PLUS2)g(9)g
(\(PLUS2)g(-3)g(\(PLUS2)f(7)i(8\)\)\)\))118 2431 y(23)118
2659 y(\(de)f(fact)g(\(n\))238 2779 y(\(cond)f(\(\(zerop)h(n\))g(1\))
596 2900 y(\(t)h(\(breakpoint)d("Fact;)h(n<>0)h(branch)g(of)g(cond,)g
(n=\045p")f(n\))776 3020 y(\(times)g(n)i(\(fact)e(\(sub1)h
(n\)\)\)\)\)\))118 3248 y(1)h(lisp>)e(\(fact)h(2\))118
3369 y(User)g(Breakpoint:)e(Fact;)i(n<>0)g(branch)f(of)i(cond,)e(n=2)
118 3489 y(NMODE)h(Break)f(loop)118 3610 y(2)i(lisp)f(break)f(\(1\)>)h
(c)118 3730 y(User)g(Breakpoint:)e(Fact;)i(n<>0)g(branch)f(of)i(cond,)e
(n=1)118 3850 y(NMODE)h(Break)f(loop)118 3971 y(3)i(lisp)f(break)f
(\(1\)>)h(c)118 4091 y(2)118 4386 y Fk(13.1.4)119 b(Rede\002ning)32
b(a)d(Br)n(ok)o(en)i(or)e(T)-9 b(raced)31 b(Function)118
4574 y Fr(The)24 b(basic)f(de\002nition)g(of)h(a)f(function)g(is)g(the)
h(de\002nition)f(without)f(an)o(y)h(of)g(the)h(break)g(or)g(tracing)f
(side)118 4694 y(ef)n(fects.)40 b(This)27 b(basic)g(de\002nition)g(may)
h(be)g(accessed)g(by)f(the)h(function)f(getd.)39 b(The)28
b(basic)f(de\002nition)118 4815 y(may)e(also)g(be)h(rede\002ned)h(by)e
(using)f(the)i(function)f(putd)f(without)g(interfering)i(with)e(the)i
(break/trace)118 4935 y(side)36 b(ef)n(fects,)j(as)d(long)g(as)g(the)g
(parameter)h(list)e(stays)h(the)g(same.)65 b(If)36 b(you)g(intend)f(to)
h(change)h(the)118 5055 y(number)29 b(or)g(order)h(of)f(parameters)g
(you)g(should)f(\002rst)i(remo)o(v)o(e)e(the)h(break/trace)h(wrappers)f
(from)g(it)118 5176 y(with)24 b(untrace)h(and/or)g(unbr)-5
b(.)p eop
%%Page: 159 167
159 166 bop -118 953 a Fn(Miscellaneous)53 b(Utilities)-118
1468 y Ft(14.1)142 b(Simulating)34 b(a)i(Stack)-118 1691
y Fr(The)28 b(follo)n(wing)e(macros)i(are)h(in)f(the)g(USEFUL)g
(package.)41 b(The)o(y)28 b(are)h(con)l(v)o(enient)e(for)h(adding)f
(and)-118 1811 y(deleting)d(things)f(from)i(the)g(head)g(of)f(a)i
(list.)-118 2151 y Fq(\(push)g(ITM:any)f(STK:list\):)31
b(any)2006 b Fi(macr)l(o)-93 2271 y Fr(\(push)24 b(item)g(stack\))h(is)
f(equi)n(v)n(alent)f(to)-118 2391 y(\(setf)i(stack)f(\(cons)h(item)f
(stack\)\))-118 2756 y Fq(\(pop)i(STK:list\):)31 b(any)2462
b Fi(macr)l(o)-83 2877 y Fr(\(pop)35 b(stack\))g(does)g(\(setf)g(stack)
g(\(cdr)g(stack\)\))h(and)f(returns)g(the)f(item)h(popped)f(of)n(f)-118
2997 y(stack.)d(An)24 b(additional)g(ar)n(gument)h(may)f(be)h(supplied)
f(to)g(Pop,)h(in)g(which)f(case)i(it)e(is)h(a)-118 3117
y(v)n(ariable)f(which)h(is)f(SetQ')-5 b(d)25 b(to)g(the)f(popped)g(v)n
(alue.)-118 3480 y Ft(14.2)142 b(Ring)35 b(Buffers)-118
3703 y Fr(The)26 b(code-address-to-symbol)e(function)h(tak)o(es)h(an)g
(inte)o(ger)f(ar)n(gument,)g(and)h(attempts)f(to)g(\002nd)h(out)-118
3824 y(what)f(function)f(that)h(address)g(is)f(in.)31
b(If)26 b(the)f(address)g(does)g(not)f(map)h(to)g(an)o(y)f(function,)g
(the)h(name)g(of)-118 3944 y(the)g(most)e(recently)i(loaded)g(function)
e(is)i(returned.)-118 4283 y Fq(\(code-addr)n(ess-to-symbol)h
(ADDRESS:integer\):)34 b(id)1327 b Fi(e)n(xpr)-118 4480
y Fr(for)25 b(e)o(xample:)-118 4657 y Fh(\(code-address-to-symbol)55
b(16#38393\))-118 4833 y Fr(This)24 b(function)g(is)g(a)n(v)n(ailable)g
(by)h(e)n(v)n(aluating)e(\(load)h(addr2id\).)-118 5166
y Ft(14.3)142 b(W)-11 b(ord)36 b(V)-14 b(ector)34 b(Operations)-118
5389 y Fr(These)25 b(functions)e(are)j(de\002ned)f(in)g($pu/v)o(ector)n
(-\002x.sl)e(resp)i(the)f(v)o(ector)n(-\002x)h(module.)-118
5728 y Fq(\(mkw)o(ords)g(N:integer\):)33 b(v)o(ector)2147
b Fi(e)n(xpr)-93 5849 y Fr(Allocates)24 b(a)h(v)o(ector)g(of)f(N)h(w)o
(ords)g(with)f(all)g(elements)g(initialized)g(to)g(zero.)1579
6066 y(159)p eop
%%Page: 160 168
160 167 bop 118 -18 a Fr(160)118 357 y Fq(\(truncate)o(v)o(ector)27
b(V)-9 b(:v)o(ector)25 b(I:integer\):)32 b(v)o(ector)1570
b Fi(e)n(xpr)143 478 y Fr(T)m(runcates)24 b(V)h(to)g(I)g(elements.)118
826 y Fq(\(truncatew)o(ords)i(V)-9 b(:w)o(ords)25 b(I:integer\):)32
b(v)o(ector)1579 b Fi(e)n(xpr)143 947 y Fr(T)m(runcates)24
b(V)h(to)g(I)g(elements.)118 1295 y Fq(\(getw)o(ords)h(WRD:w)o(ords)e
(I:integer\):)32 b(any)1740 b Fi(e)n(xpr)143 1416 y Fr(Retrie)n(v)o(es)
24 b(the)h(I')n(th)g(entry)f(of)h(WRD.)118 1784 y Fq(\(putw)o(ords)h
(WRD:w)o(ords)f(I:integer)h(V)-13 b(AL:any\):)31 b(any)1313
b Fi(e)n(xpr)143 1905 y Fr(Store)25 b(V)-13 b(AL)24 b(at)h(I')n(th)g
(position)e(of)i(WRD.)118 2274 y Fq(\(upbw)h(V)-9 b(:w)o(ords\):)32
b(integer)2321 b Fi(e)n(xpr)143 2394 y Fr(Returns)25
b(the)g(upper)f(limit)f(of)i(w)o(ords)g(V)-13 b(.)p eop
%%Page: 161 169
161 168 bop -118 976 a Fn(Compiler)-118 1513 y Ft(15.1)142
b(Intr)m(oduction)-118 1783 y Fr(The)23 b(e)n(v)n(aluation)e(of)i(an)g
(e)o(xpression)e(which)i(has)g(been)g(compiled)e(may)i(be)g(dif)n
(ferent)g(from)f(interpre-)-118 1904 y(tation.)52 b(Some)32
b(of)h(the)f(more)g(important)f(dif)n(ferences)h(are)h(listed)e(here.)
54 b(Subsequent)32 b(sections)f(of)-118 2024 y(this)24
b(chapter)h(will)f(discuss)g(these)g(dif)n(ferences)h(in)g(more)f
(detail.)-118 2167 y(The)29 b(application)e(of)i(a)g(macro)g(is)f
(replaced)h(by)g(its)f(e)o(xpansion.)41 b(Therefore,)30
b(the)f(de\002nition)f(of)g(the)-118 2288 y(macro)e(must)e(preceed)j
(its)e(use.)33 b(Since)26 b(the)g(call)f(on)h(the)f(macro)h(has)g(been)
f(replaced,)i(a)f(rede\002nition)-118 2408 y(of)f(the)f(macro)h(will)f
(ha)n(v)o(e)h(not)f(ha)n(v)o(e)g(an)h(ef)n(fect)h(on)e(the)h(compiled)e
(e)o(xpression.)-118 2551 y(A)31 b(constant)f(e)o(xpression)g(is)g
(replaced)i(by)f(its)f(v)n(alue)g(\(see)i(the)e(section)h(Constant)f
(Declaration)h(for)-118 2671 y(more)25 b(information\))-118
2814 y(There)38 b(are)g(some)f(functions)f(which)h(are)h(de\002ned)g
(in)f(tw)o(o)g(w)o(ays.)68 b(One)37 b(of)h(these)f(v)o(ersions)f(will)
-118 2935 y(reduce)27 b(the)f(e)o(x)o(ecution)e(time)i(by)g(not)f(v)o
(erifying)g(that)h(the)g(ar)n(guments)f(are)i(of)f(correct)h(type.)35
b(Which)-118 3055 y(function)g(is)g(called)h(from)g(the)g(compiled)f
(code)h(is)f(based)h(upon)f(the)h(v)n(alue)g(of)g(a)g(switch.)63
b(If)36 b(the)-118 3176 y(switch)25 b(is)g(non-nil)g(then)h(the)f(f)o
(aster)h(v)o(ersion)f(replaces)h(the)g(slo)n(wer)f(one.)34
b(Note)25 b(that)h(an)g(instance)f(of)-118 3296 y(the)j(f)o(aster)h(v)o
(ersion)e(is)h(not)f(replaced)i(by)f(the)g(slo)n(wer)g(one)g(when)g
(the)g(switch)f(is)h(set)g(to)g(nil)g(\(see)g(the)-118
3416 y(section)c(Switches)h(that)f(Control)g(the)h(Compiler)f(for)h
(more)g(information\).)-118 3559 y(An)g(attempt)e(is)i(made)f(to)h(con)
l(v)o(ert)f(recursi)n(v)o(e)g(control)g(structures)g(to)h(iterati)n(v)o
(e)e(ones.)-118 4044 y Ft(15.2)142 b(Compiling)34 b(Files)-118
4315 y Fr(It)21 b(is)f(best)h(to)g(compile)f(\002les)h(using)f
Fh(pslcomp)p Fr(,)g(a)i(minimal)d(v)o(ersion)h(of)h(PSL)h(capable)f(of)
g(compiling)-118 4435 y(\002les.)29 b(The)20 b(successful)g
(compilation)e(of)i(a)g(\002le)g(should)f(not)g(depend)h(upon)f
(optional)g(modules)g(which)-118 4555 y(ha)n(v)o(e)h(been)g(loaded.)29
b(On)20 b(some)g(computer)g(systems)e(the)i(names)g(of)h(the)f(\002les)
g(to)g(be)g(compiled)g(can)g(be)-118 4676 y(listed)25
b(as)g(command)g(line)h(ar)n(guments.)32 b(When)26 b(PSLCOMP)h(is)e
(brought)g(up)h(the)f(follo)n(wing)f(banner)-118 4796
y(is)g(displayed.)-118 4939 y(Portable)h(Standard)g(Lisp)f(Compiler)
-118 5059 y(Usage:)30 b(PSLCOMP)c(source-\002le)g(...)-118
5202 y(If)f(an)g(error)h(occurs,)e(the)h(message)-118
5542 y Fh(*****)59 b(Error)f(during)h(compilation)e(of)i(NAME)-118
5858 y Fr(is)24 b(printed)g(and)h(the)g(compilation)e(is)h(aborted.)
1579 6066 y(161)p eop
%%Page: 162 170
162 169 bop 118 -18 a Fr(162)118 363 y Fq(\(compile-\002le)26
b(FILE:string\):)32 b Fl(f)p Fq(t,)25 b(nil,)f(abort)p
Fl(g)1630 b Fi(e)n(xpr)155 484 y Fr(This)36 b(function)g(is)g(used)h
(to)f(compile)g(\002les.)66 b(A)37 b(binary)g(\002le)g(is)f(created)h
(with)f(the)118 604 y(same)29 b(name)g(e)o(xcept)f(that)g(the)h(\002le)
g(type)g(is)f(changed)h(to)g Fq(b)p Fr(.)43 b(Be)n(w)o(are,)31
b(it)d(is)h(possible)118 725 y(to)23 b(o)o(v)o(erwrite)f(the)h(source)h
(\002le)f(if)h(the)f(operating)f(system)g(truncates)h(\002le)h(names)f
(\(this)118 845 y(can)f(be)f(a)n(v)n(oided)g(by)g(using)g
(compile-\002le-aux,)g(described)h(belo)n(w\).)28 b(If)22
b(the)g(\002le)f(name)118 965 y(is)38 b(without)f(a)i(suf)n(\002x)g
(then)f Fq(sl)g Fr(is)g(assumed.)71 b(This)38 b(function)g(will)g
(return)g(t)h(if)f(the)118 1086 y(compilation)c(w)o(as)i(successful,)i
(abort)e(if)g(after)g(an)g(error)h(w)o(as)f(signalled)e(the)i(user)118
1206 y(aborted)31 b(the)g(compilation,)f(or)h(nil)f(if)h(the)g(source)g
(\002le)g(w)o(as)g(not)f(found.)48 b(When)31 b(the)118
1326 y(source)25 b(\002le)g(cannot)g(be)g(found)f(the)h(message)357
1470 y Fh(*****)59 b(Unable)f(to)i(find)f(source)f(file)h(for:)g(FILE)
118 1637 y Fr(will)24 b(be)h(printed.)30 b(Prior)25 b(to)g(the)f
(compilation)f(the)i(message)357 1818 y Fh(-----)59 b(Compiling)f
(SOURCE-FILE)f(to)i(BINARY-FILE)118 1998 y Fr(is)24 b(displayed.)29
b(In)c(addition,)e(one)h(of)g(the)h(follo)n(wing)d(tw)o(o)i(messages)f
(will)h(be)g(printed)g(when)g(compi-)118 2119 y(lation)g(has)h
(stopped.)357 2299 y Fh(-----)59 b(Compilation)e(of)j(NAME)e(completed)
357 2540 y(-----)h(Compilation)e(of)j(NAME)e(aborted)118
2939 y Fq(\(compile-\002le-aux)26 b(SOURCE:string)f(BIN)n(AR)m(Y)-9
b(:string\):)118 3060 y Fl(f)p Fq(t,)25 b(nil,)g(abort)p
Fl(g)2792 b Fi(e)n(xpr)155 3180 y Fr(Since)38 b(this)e(function)g(is)g
(used)h(by)f(compile-\002le)h(to)f(compile)g(\002les,)41
b(most)35 b(of)i(the)118 3300 y(comments)21 b(concerning)h
(compile-\002le)g(apply)f(to)h(compile-\002le-aux.)30
b(Although)20 b(one)118 3421 y(application)28 b(of)g(compile-\002le)h
(may)f(be)h(used)f(to)h(compile)e(a)i(number)f(of)h(\002les,)h(with)118
3541 y(this)18 b(function)g(only)g(one)h(\002le)h(can)f(be)g(compiled.)
28 b(The)19 b(adv)n(antage)f(of)h(using)f(compile-)118
3662 y(\002le-aux)25 b(is)g(that)f(the)h(name)f(of)h(the)g(binary)f
(\002le)i(is)e(gi)n(v)o(en)f(e)o(xplicitly)-6 b(.)118
3812 y(During)24 b(the)h(compilation)e(of)i(a)g(\002le,)g(if)g(an)g
(atomic)f(e)o(xpression)f(is)i(read)g(at)g(the)g(top)f(le)n(v)o(el)f
(the)118 3992 y Fh(***)59 b(Warning:)f(non-list)g(form)h(ignored:)f
(ATOM)118 4173 y Fr(will)33 b(be)h(displayed)f(and)g(the)h(e)o
(xpression)e(will)h(be)h(ignored.)57 b(A)34 b(list)e(whose)i(\002rst)g
(element)f(is)g(not)118 4293 y(atomic)20 b(is)g(sa)n(v)o(ed)g(for)h
(insertion)e(into)h(the)g(an)h(initialization)d(function)i(which)g(is)g
(added)g(to)h(the)f(binary)118 4414 y(\002le)26 b(by)g(the)f(compiler)h
(\(its)f(name)g(is)h(**f)o(asl**initcode**\).)31 b(The)26
b(processing)f(of)h(a)g(list)f(whose)g(\002rst)118 4534
y(element)33 b(is)f(an)h(id)g(depends)f(in)h(lar)n(ge)g(part)g(upon)g
(v)n(alues)f(found)g(on)h(the)g(property)f(list)g(of)h(the)g(id.)118
4655 y(The)h(EV)-13 b(AL)34 b(\003ag)h(will)e(cause)i(the)f(e)o
(xpression)f(to)h(be)g(e)n(v)n(aluated,)i(using)d(the)h(current)h
(binding)d(of)118 4775 y(toploope)n(v)n(al*,)i(and)g(compiled.)57
b(The)34 b(e)o(xpression)e(is)i(only)f(e)n(v)n(aluated,)i(again)f
(using)e(the)i(current)118 4895 y(binding)20 b(of)i(toploope)n(v)n
(al*,)d(if)j(the)f(id)g(is)g(\003agged)h(IGNORE.)g(All)f(other)g(e)o
(xpressions)f(are)j(compiled.)118 5016 y(Compilation)18
b(will)h(modify)g(the)h(en)l(vironment,)g(in)f(particular)l(,)i(all)e
(macro)h(de\002nitions)f(are)i(installed.)118 5136 y(Note)39
b(that)f(although)g(def)n(\003a)n(v)n(or)h(is)g(a)g(macro)g(it)f(does)h
(not)f(create)i(a)f(macro)g(de\002nition.)73 b(It)38
b(will)118 5256 y(ho)n(we)n(v)o(er)24 b(modify)f(the)i(property)f(list)
g(of)h(the)g(\003a)n(v)n(or)g(name.)118 5377 y(As)j(e)o(xpressions)f
(are)h(processed)h(a)f(list)f(of)h(e)o(xpressions)f(is)g(b)n(uilt.)40
b(When)28 b(a)h(function)e(de\002nition)g(is)118 5497
y(made)f(an)h(application)e(of)h(putd)g(is)f(added)i(to)f(the)g(list.)
34 b(Other)26 b(e)o(xpressions)f(which)g(are)i(intended)f(to)118
5618 y(be)d(e)n(v)n(aluated)e(at)i(load)f(time)g(were)h(also)f(added.)
30 b(This)21 b(sequence)i(of)g(instructions,)e(which)h(preserv)o(es)118
5738 y(the)34 b(order)h(in)f(which)h(e)o(xpressions)e(were)i(read,)i
(is)d(compiled)g(as)g(the)h(body)f(of)g(the)h(initialization)118
5858 y(function)24 b(\(named)h(**f)o(asl**initcode**\).)p
eop
%%Page: 163 171
163 170 bop -118 -18 a Fg(15.3.)55 b(COMPILING)25 b(FUNCTIONS)h(INT)n
(O)f(MEMOR)-6 b(Y)1273 b Fr(163)-118 289 y Fk(15.2.1)118
b(Order)31 b(of)e(Functions)i(f)m(or)f(Compilation)-118
476 y Fr(Functions)23 b(whose)g(type)g(is)g(not)g(e)o(xpr)g(must)f(be)i
(de\002ned)g(before)g(their)f(use)h(in)f(a)h(compiled)e(function,)-118
597 y(since)31 b(the)h(type)f(of)g(a)h(function)f(af)n(fects)h(ho)n(w)e
(it')-5 b(s)31 b(application)f(will)h(be)g(treated)h(by)f(the)h
(compiler)-5 b(.)-118 717 y(The)37 b(application)f(of)i(a)g(macro)f(is)
g(replaced)h(by)f(the)g(e)o(xpansion)f(of)h(the)h(macro.)68
b(F)o(or)37 b(functions)-118 837 y(whose)23 b(type)g(is)f(fe)o(xpr)h
(it)g(is)g(necessary)g(to)g(gather)g(the)g(une)n(v)n(aluated)e(ar)n
(guments)i(into)f(a)i(list.)29 b(Calling)-118 958 y(a)h(function)f
(which)h(is)f(an)h(ne)o(xpr)g(requires)f(that)h(the)g(ar)n(guments)f
(be)h(e)n(v)n(aluated)f(and)h(gathered)f(into)-118 1078
y(a)36 b(list.)62 b(When)36 b(the)f(compiler)g(cannot)g(determine)g
(the)h(type)f(of)h(a)g(function,)h(because)f(it)f(has)h(not)-118
1199 y(been)28 b(de\002ned,)h(it)e(assumes)h(that)f(the)h(type)f(of)h
(the)g(function)f(is)h(e)o(xpr)-5 b(.)39 b(Note)28 b(that)f(it)h(is)f
(not)h(possible)-118 1319 y(to)35 b(de\002ne)i(a)f(recursi)n(v)o(e)f
(function,)j(whose)d(type)h(is)f(not)g(e)o(xpr)l(,)k(without)34
b(\002rst)i(de\002ning)g(a)g(dummy)-118 1439 y(v)o(ersion.)-118
1774 y Ft(15.3)142 b(Compiling)34 b(Functions)g(into)h(Memory)-118
1998 y Fr(Functions)20 b(can)i(be)f(compiled)f(directly)g(into)g
(memory)h(by)f(turning)g(on)h(the)g(switch)f(comp,)h(by)g(e)n(v)n(alu-)
-118 2118 y(ating)f(\(on)g(comp\).)29 b(This)20 b(compilation)f(is)h
(accomplished)g(in)g(part)h(by)f(a)h(call)f(on)h(the)f(function)g
(compd)-118 2238 y(from)k(within)g(the)h(function)f(putd.)-118
2577 y Fq(\(compd)i(N)n(AME:id)f(TYPE:ftype)i(BOD)l(Y)-9
b(:lambda\):)31 b(N)n(AME:id)895 b Fi(e)n(xpr)-93 2698
y Fr(The)25 b(function)f(compd)g(is)g(analogous)g(to)g(the)h(function)f
(putd.)-118 2848 y(Once)32 b(comp)f(is)g(set)g(to)g(t)g(subsequent)g
(function)g(de\002nitions)f(are)i(automatically)e(compiled)g(and)i(a)
-118 2968 y(message)24 b(of)h(the)g(form)-118 3162 y
Fh(***)59 b(\(NAME\):)f(base)h(<number>,)f(length)g(<number>)g(bytes)
-118 3355 y Fr(is)21 b(displayed.)29 b(Unfortunately)21
b(this)f(information)h(is)g(of)h(little)e(use)i(unless)f(one)h(happens)
f(to)g(be)h(doing)-118 3475 y(something)h(lik)o(e)h(deb)n(ugging)g(the)
g(compiler)-5 b(.)-118 3814 y Fq(\(compile)25 b(N)n(AMES:id-list\):)32
b(any)2091 b Fi(e)n(xpr)-97 3935 y Fr(This)20 b(function)g(is)g(used)g
(to)h(compile)f(resident)g(functions.)28 b(It)21 b(is)f(possible)g(to)g
(compile)-118 4055 y(a)32 b(function)g(which)g(is)f(being)h(traced.)54
b(There)32 b(are)h(tw)o(o)f(w)o(arning)g(messages)f(which)-118
4175 y(may)24 b(be)h(printed.)121 4328 y Fh(***)59 b(NAME)g(already)f
(compiled)-118 4505 y Fr(This)24 b(indicates)g(that)h(the)f(function)g
(associated)h(with)f(the)h(function)f(name)g(is)h(already)g(compiled.)
30 b(If)-118 4625 y(there)e(is)g(no)g(function)g(de\002nition)f
(associated)h(with)f(the)i(name)f(then)g(the)g(follo)n(wing)e(message)i
(will)-118 4746 y(be)d(displayed.)121 4939 y Fh(***)59
b(No)g(definition)f(for)h(NAME)-118 5274 y Ft(15.4)142
b(Compiler)34 b(Err)m(ors)h(and)g(W)-9 b(ar)n(nings)-118
5497 y Fr(In)25 b(addition)f(to)i(the)f(error)h(messages)f(mentioned)f
(in)h(this)f(chapter)l(,)i(the)f(follo)n(wing)f(error)i(messages)-118
5618 y(may)e(be)h(displayed.)30 b(In)24 b(general,)h(the)g(\002)n(v)o
(e)f(star)g(pre\002x)h(is)g(used)f(for)h(error)g(messages,)f(the)g
(three)h(star)-118 5738 y(pre\002x)32 b(for)g(w)o(arnings.)50
b(The)31 b(display)g(of)h(w)o(arning)f(messages)g(can)g(be)h
(suppressed)f(by)g(e)n(v)n(aluating)-118 5858 y(\(of)n(f)25
b(msg\).)p eop
%%Page: 164 172
164 171 bop 118 -18 a Fr(164)118 289 y Fh(*****)59 b(Too)g(many)g
(arguments)f(N)118 514 y Fr(The)27 b(restriction)e(on)i(the)f(number)g
(of)h(ar)n(guments)f(is)g(based)g(in)h(part)f(on)g(the)h(f)o(act)g
(that)f(ar)n(guments)g(to)118 634 y(compiled)d(functions)g(are)h
(passed)g(in)f(general)h(purpose)f(re)o(gisters)g(rather)h(than)g
(directly)f(on)h(a)g(stack.)118 755 y(The)j(compiler)f(will)g(generate)
h(code)h(for)f(the)f(of)n(fending)g(de\002nition.)36
b(Although)25 b(the)i(code)g(appears)118 875 y(to)e(be)f(correct,)i
(attempting)d(to)h(apply)h(the)f(function)g(will)g(result)g(in)h(error)
-5 b(.)118 1101 y Fh(*****)59 b(Attempt)f(to)h(compile)g(non-lambda)e
(expression)h(FORM)118 1326 y Fr(This)22 b(error)h(occurs)f(within)f
(the)h(conte)o(xt)f(of)i(a)f(call)g(on)g(compd,)g(when)g(the)h(e)o
(xpression)e(is)g(not)h(a)h(v)n(alid)118 1446 y(lambda)h(e)o
(xpression.)118 1672 y Fh(***)59 b(NAME)g(has)g(not)g(been)g(defined,)f
(because)g(it)i(is)f(flagged)f(LOSE)118 1897 y Fr(If)23
b(a)g(function)f(name)g(is)g(\003agged)h(LOSE)g(then)f(it)g(cannot)h
(be)f(rede\002ned.)31 b(Attempting)21 b(to)h(compile)f(an)118
2017 y(interpreti)n(v)o(e)i(de\002nition)h(is)h(considered)f
(rede\002nition)g(in)h(this)f(conte)o(xt.)118 2243 y
Fh(*****)59 b(Ill-formed)e(function)h(expression)g(FORM)118
2468 y Fr(The)22 b(of)n(fending)f(e)o(xpression)g(is)h(an)g(instance)g
(of)g(function)f(application.)29 b(This)21 b(message)h(will)f(appear)
118 2589 y(if)36 b(the)f(function)g(is)g(atomic)f(and)i(not)f(an)h(id,)
h(or)f(if)f(the)h(function)e(is)h(a)h(list)f(which)g(is)g(not)g(a)h(v)n
(alid)118 2709 y(lambda)24 b(e)o(xpression.)118 2934
y Fh(*****)59 b(Odd)g(number)f(of)i(arguments)d(to)j(SETQ)f(FORM)118
3160 y Fr(The)25 b(number)f(of)h(ar)n(guments)f(passed)h(to)f(a)h(SETQ)
g(must)f(be)h(e)n(v)o(en.)118 3385 y Fh(*****)59 b(Incorrect)f(number)g
(of)h(arguments)f(to)h(NAME)118 3610 y Fr(The)29 b(number)f(of)h(ar)n
(guments)f(passed)g(to)h(either)f(apply)-6 b(,)29 b(idapply)-6
b(,)28 b(codeapply)-6 b(,)29 b(cons,)g(go,)h(or)f(return)118
3731 y(w)o(as)c(not)f(correct.)118 4070 y Ft(15.5)143
b(Differ)m(ences)24 b(between)i(Compiled)f(and)h(Inter)o(pr)m(eted)f
(Code)118 4293 y Fr(In)39 b(the)g(process)f(of)h(compilation,)h(man)o
(y)e(functions)g(are)i(Open-Coded,)i(and)d(hence)g(cannot)f(be)118
4414 y(rede\002ned)28 b(or)f(traced)h(in)f(the)g(compiled)f(code.)38
b(Such)27 b(functions)f(are)i(noted)f(to)f(be)i(Open-Coded)f(in)118
4534 y(the)21 b(manual.)29 b(The)22 b(call)f(on)h(the)f(function)g(is)g
(replaced)h(by)f(a)h(sequence)f(of)h(instructions)e(which)h(mak)o(e)118
4655 y(up)27 b(the)f(body)g(of)h(the)g(function.)35 b(This)26
b(trick)h(gi)n(v)o(es)e(f)o(aster)i(e)o(x)o(ecution,)f(b)n(ut)g(it)g
(requires)h(more)f(space.)118 4775 y(A)f(call)f(on)h(a)g(macro)g(is)f
(another)h(instance)f(of)h(open)f(coding.)30 b(A)25 b(PSL)g(program)g
(usually)e(consists)g(of)118 4895 y(a)f(lar)n(ge)g(number)e(of)i
(relati)n(v)o(ely)d(small)i(functions.)28 b(Calling)21
b(a)h(function)e(requires)i(manipulation)d(of)i(a)118
5016 y(parameter)26 b(stack)g(for)g(v)n(ariable)f(binding)g(and)g(a)i
(control)e(stack)g(for)h(return)g(information.)32 b(The)26
b(time)118 5136 y(spent)h(inside)g(a)i(function)e(may)g(be)h(small)f
(compared)h(to)f(the)h(time)f(spent)g(maintaining)f(the)i(stacks.)118
5256 y(Some)k(commonly)d(used)j(PSL)g(functions)e(which)h(are)h
(open-coded)g(are)g(and,)h(or)l(,)g(apply)-6 b(,)32 b(idapply)-6
b(,)118 5377 y(codeapply)g(,)24 b(return,)h(go,)f(cons,)g(cond,)h
(case,)g(prog,)g(progn,)f(and)h(prog2.)118 5497 y(Unless)f(v)n
(ariables)f(are)i(declared,)g(or)f(detected,)h(to)f(be)g(\003uid)g(or)g
(global)g(the)o(y)f(are)i(compiled)e(as)i(local)118 5618
y(v)n(ariables.)30 b(This)23 b(causes)g(their)h(names)f(to)g(disappear)
l(,)h(and)g(so)f(the)o(y)g(are)h(not)g(visible)e(on)h(the)h(binding)118
5738 y(stack.)36 b(In)26 b(addition)g(these)g(v)n(ariables)g(will)f
(not)h(be)h(a)n(v)n(ailable)f(to)g(functions)f(called)i(in)f(the)g
(dynamic)118 5858 y(scope)f(of)g(the)f(function)g(containing)g(their)g
(binding.)p eop
%%Page: 165 173
165 172 bop -118 -18 a Fg(15.5.)55 b(DIFFERENCES)27 b(BETWEEN)d
(COMPILED)h(AND)g(INTERPRETED)h(CODE)214 b Fr(165)-118
289 y(The)25 b(compiler)f(attempts)f(to)i(do)f(the)h(follo)n(wing)e
(con)l(v)o(ersions)-68 504 y(\(function)h(\(lambda)g(...\)\))31
b Fl(\000)d Ff(>)100 b Fr(the)35 b(lambda)f(e)o(xpression)g(is)g
(compiled)g(into)g(a)i(gensymed)1126 625 y(name.)55 b(If)33
b(the)g(functional)f(form)h(of)g(one)f(of)h(the)g(mapping)1126
745 y(functions)26 b(\(map,)i(mapc,)g(maplist,)e(mapcar)l(,)i(mapcon,)g
(and)1126 865 y(mapcan\))i(is)f(e)o(xplicitly)f(tagged)i(function)f
(then)h(the)f(call)h(is)1126 986 y(open)24 b(coded.)-68
1106 y(\(setq)g(na)h(v)n(a)g(nb)f(vb)h(...\))31 b Fl(\000)d
Ff(>)171 b Fr(\(setq)24 b(na)h(v)n(a\),)g(\(setq)f(nb)h(vb\))g(...)-68
1227 y(\(nth)f(sequence)h(n\))g Fl(\000)j Ff(>)330 b
Fr(\(car)26 b(sequence\))f(if)g(n)f(=)h(1,)1126 1347
y(\(cadr)g(sequence\))h(if)e(n)h(=)g(2,)1126 1467 y(\(caddr)g
(sequence\))g(if)g(n)g(=)g(3,)1126 1588 y(\(cadddr)g(sequence\))g(if)g
(n)g(=)g(4)-68 1708 y(\(pnth)f(sequence)h(n\))g Fl(\000)j
Ff(>)280 b Fr(\(identity)23 b(sequence\))j(if)e(n)h(=)g(1,)1126
1829 y(\(cdr)g(sequence\))g(if)g(n)g(=)g(2,)1126 1949
y(\(cddr)g(sequence\))g(if)g(n)g(=)g(3,)1126 2069 y(\(cdddr)g
(sequence\))g(if)g(n)f(=)i(4,)1126 2190 y(\(cddddr)f(sequence\))g(if)g
(n)f(=)h(5)-118 2305 y(The)i(follo)n(wing)d(transformations)h(are)j
(made)e(when)h(the)f(list)g(function)g(is)g(applied)g(to)g(less)h(than)
f(six)-118 2425 y(ar)n(guments.)j(When)20 b(there)h(are)h(more)e(that)g
(\002)n(v)o(e)h(ar)n(guments)f(the)g(compiler)g(uses)h(the)f(cons)h(e)o
(xpansion)-118 2545 y(for)k(additional)e(ar)n(guments.)-68
2761 y(\(list)h(a\))h Fl(\000)j Ff(>)817 b Fr(\(ncons)24
b(a\))-68 2882 y(\(list)g(a)h(b\))g Fl(\000)j Ff(>)742
b Fr(\(list2)23 b(a)i(b\))-68 3002 y(\(list)f(a)h(b)f(c\))i
Fl(\000)i Ff(>)673 b Fr(\(list3)23 b(a)i(b)g(c\))-68
3122 y(\(list)f(a)h(b)f(c)i(d\))f Fl(\000)j Ff(>)598
b Fr(\(list4)23 b(a)i(b)g(c)g(d\))-68 3243 y(\(list)f(a)h(b)f(c)i(d)e
(e\))i Fl(\000)i Ff(>)529 b Fr(\(list5)23 b(a)i(b)g(c)g(d)g(e\))-68
3363 y(\(apply)f(\(function)g(foo\))h(...\))31 b Fl(\000)d
Ff(>)100 b Fr(\(foo)24 b(...\))-68 3483 y(\(assoc)h(...\))30
b Fl(\000)f Ff(>)686 b Fr(\(atsoc)24 b(...\))-118 3598
y(If)h(the)g(last)f(clause)h(within)e(a)j(cond)e(e)o(xpression)g(is)g
(not)g(of)h(the)-118 3722 y(form)f(\(t)h(...\))31 b(then)24
b(the)h(compiler)f(will)g(add)h(the)g(additinal)e(clause)i(\(t)g
(nil\).)-68 3937 y(\(dif)n(ference)g(n)g(1\))g Fl(\000)j
Ff(>)354 b Fr(\(sub1)24 b(n\))-68 4058 y(\(equal)h(...\))30
b Fl(\000)f Ff(>)583 b Fr(\(eq)25 b(...\))-68 4178 y(\(geq)g(...\))30
b Fl(\000)f Ff(>)655 b Fr(\(not)25 b(\(lessp)f(...\)\))-68
4298 y(\(intern)g(\(compress)h(...\)\))31 b Fl(\000)d
Ff(>)99 b Fr(\(implode)24 b(...\))-68 4419 y(\(intern)g(\(gensym)g
(...\)\))31 b Fl(\000)d Ff(>)166 b Fr(\(interngensym)24
b(...\))-68 4539 y(\(leq)h(...\))30 b Fl(\000)e Ff(>)678
b Fr(\(not)25 b(\(greaterp)g(...\)\))-68 4659 y(\(lessp)f(n)h(0\))g
Fl(\000)j Ff(>)556 b Fr(\(minusp)24 b(n\))-68 4780 y(\(member)g(...\))
31 b Fl(\000)d Ff(>)473 b Fr(\(memq)24 b(...\))-68 4900
y(\(neq)h(...\))30 b Fl(\000)f Ff(>)655 b Fr(\(not)25
b(\(equal)f(...\)\))-68 5021 y(\(not)g(...\))31 b Fl(\000)d
Ff(>)672 b Fr(\(null)24 b(...\))-68 5141 y(\(plus2)g(n)g(1\))h
Fl(\000)j Ff(>)540 b Fr(\(add1)25 b(n\))-68 5261 y(\(null)f(\(eq)h
(...\)\))31 b Fl(\000)d Ff(>)459 b Fr(\(neq)25 b(...\))-68
5382 y(\(null)f(\(atom)g(...\)\))31 b Fl(\000)d Ff(>)354
b Fr(\(pairp)25 b(...\))-118 5615 y(Prior)e(to)f(the)h(application)f
(of)h(some)f(functions,)g(such)g(as)h(car)h(and)e(cdr)l(,)i(there)f(is)
f(no)h(v)o(eri\002cation)f(that)-118 5735 y(the)j(types)f(of)h(the)f
(ar)n(guments)g(are)i(correct.)-118 5858 y(Since)k(compiled)e(calls)h
(on)g(macros,)h(fe)o(xprs,)f(and)h(ne)o(xprs)e(are)i(dif)n(ferent)f
(from)g(the)g(def)o(ault)g(e)o(xprs,)p eop
%%Page: 166 174
166 173 bop 118 -18 a Fr(166)118 289 y(these)31 b(functions)e(must)h
(be)h(de\002ned,)h(or)f(declared,)h(before)g(compiling)c(the)j(code)g
(that)f(uses)g(them.)118 409 y(While)j(fe)o(xprs)g(and)g(ne)o(xprs)g
(may)g(be)g(subsequently)f(rede\002ned,)k(as)d(ne)n(w)g(functions)f(of)
i(the)f(same)118 529 y(type,)38 b(macros)d(are)h(e)o(x)o(ecuted)f(by)g
(the)g(compiler)g(to)g(get)g(the)h(replacement)f(form,)j(which)d(is)g
(then)118 650 y(compiled.)42 b(The)29 b(interpreter)g(w)o(ould)f(pick)g
(up)h(the)f(most)g(recent)h(de\002nition)f(of)h(an)o(y)g(function,)g
(and)118 770 y(so)c(functions)e(can)i(switch)g(type)f(as)h(well)f(as)h
(body)-6 b(.)118 891 y(Constants)30 b(which)h(appear)g(in)g(code)g
(that)f(is)h(to)f(be)i(compiled)d(may)i(be)g(collapsed.)49
b(F)o(or)30 b(e)o(xample,)118 1011 y(the)23 b(follo)n(wing)e(code)i
(references)i(tw)o(o)d(distinct)g(strings)g(which)g(happen)h(to)g
(contain)f(the)h(same)g(char)n(-)118 1131 y(acters.)31
b(The)25 b(compiled)f(code)h(will)f(only)g(reference)i(one)f(string.)
238 1360 y Fh(\(de)59 b(fubar)f(\(\))357 1480 y(\(let)h(\(\(this)g
("foo"\))716 1601 y(\(that)g("foo"\)\))357 1721 y(\(eq)g(this)g
(that\)\))118 1962 y(1)h(lisp>)e(\(foo\))118 2082 y(nil)118
2203 y(2)i(lisp>)e(\(compile)g('\(foo\)\))118 2323 y(nil)118
2443 y(3)i(lisp>)e(\(foo\))118 2564 y(t)118 2792 y Fr(As)30
b(noted)f(belo)n(w)-6 b(,)29 b(the)h(switches)f(*r2i)g(and)h(*nolink)o
(e)e(may)h(cause)i(function)d(calls)i(to)f(be)h(replaced)118
2913 y(by)h(jumps.)47 b(This)30 b(means)g(that)g(the)h(backtrace)g(of)g
(compiled)f(functions)g(may)g(dif)n(fer)h(from)f(that)g(of)118
3033 y(interpreted)c(functions.)32 b(In)26 b(addition)e(a)i(sequence)g
(of)g(interpreted)g(function)f(calls)g(could)g(consume)118
3153 y(stack)g(space)g(while)f(compiled)g(function)g(calls)g(might)g
(not.)118 3493 y Ft(15.6)143 b(Constant)33 b(Declaration)118
3935 y Fq(\(de\002ne-constant)28 b(N)n(AME:id)d(V)-13
b(ALUE:any\):)32 b(any)1368 b Fi(macr)l(o)162 4056 y
Fr(The)43 b(identi\002er)g(N)m(AME)g(is)g(declared)g(a)h(constant)f
(and)g(its)g(v)n(aluecell)f(is)h(set)h(to)118 4176 y(V)-13
b(ALUE.)32 b(This)f(pro)o(vides)h(a)g(means)h(for)f(informing)f(the)i
(compiler)e(that)h(the)h(v)n(alue)118 4296 y(of)25 b(an)g(id)f(is)h
(constant.)30 b(If)25 b(a)g(constant)f(id)h(is)f(used)h(in)f(such)h(a)g
(w)o(ay)g(that)f(during)g(e)n(v)n(alu-)118 4417 y(ation)j(its)h(v)n
(alue)f(w)o(ould)g(be)h(accessed)h(the)e(compiler)h(can)g(then)f
(simply)g(replace)h(the)118 4537 y(id)23 b(by)f(its)h(v)n(alue.)29
b(It)23 b(is)g(possible)e(to)i(use)g(an)g(id)g(which)f(has)h(been)g
(declared)h(a)f(constant)118 4658 y(as)32 b(a)g(local)g(v)n(ariable)f
(within)g(a)h(prog)f(or)h(as)g(a)g(parameter)g(name.)52
b(It)32 b(is)f(possible)g(to)118 4778 y(rede\002ne)26
b(the)f(v)n(alue)f(of)h(a)g(constant.)118 4908 y(Request)g(to)f(set)h
(constant)f(N)m(AME)g(to)g(a)h(dif)n(ferent)g(v)n(alue.)118
5247 y Fq(\(constant?)32 b(N)n(AME:id\):)g(boolean)2046
b Fi(e)n(xpr)144 5367 y Fr(Returns)25 b(t)g(if)h(N)m(AME)e(has)h(been)h
(declared)g(a)f(constant)g(with)f(de\002ne-constant,)i(oth-)118
5488 y(erwise)f(nil.)118 5618 y(The)f(compiler)f(attempts)g(to)g
(replace)i(function)e(applications)g(by)g(the)h(corresponding)f(v)n
(alue)g(when-)118 5738 y(e)n(v)o(er)34 b(each)h(of)g(the)f(ar)n
(guments)g(is)g(either)g(constant)g(or)g(an)h(application)e(which)h
(may)g(be)h(replaced)118 5858 y(by)29 b(its)e(v)n(alue.)42
b(The)29 b(follo)n(wing)e(is)h(a)h(list)f(of)g(all)h(functions)f(whose)
g(application)f(may)i(be)g(e)n(v)n(aluated)p eop
%%Page: 167 175
167 174 bop -118 -18 a Fg(15.6.)55 b(CONST)-9 b(ANT)25
b(DECLARA)-11 b(TION)1895 b Fr(167)-118 289 y(during)37
b(compilation.)67 b(Clearly)38 b(some)f(functions)g(lik)o(e)g(cons)h
(cannot)f(be)h(e)n(v)n(aluated)e(at)i(compile)-118 409
y(time.)-118 683 y Fh(//)59 b(/=)h(<)f(<<)g(<=)h(=)f(>)h(>=)f(>>)h
(\210)f(|)h(\230)f(\230=)-118 952 y Fr(abs)26 b(aconc)h(acos)g(acosd)f
(acot)h(acotd)f(acsc)h(acscd)g(add1)f(alphanumbericp)g(alphap)g(asec)h
(asecd)g(asin)-118 1072 y(asind)d(ass)h(assoc)f(atan)h(atan2)g(atan2d)g
(atand)f(atom)g(atsoc)-118 1318 y(bldmsg)f(bothcasep)-118
1565 y(car)e(cdr)g(ceiling)f(char)n(-do)n(wncase)h(char)n(-equal)g
(char)n(-font)g(char)n(-)g(greaterp)g(char)n(-int)g(char)n(-lessp)g
(char)n(-)-118 1685 y(upcase)k(char)p Ff(<)g Fr(char=)h(char)p
Ff(>)f Fr(constantp)f(cos)g(cosd)h(cot)g(cotd)f(csc)h(cscd)-118
1932 y(de)o(greestodms)20 b(de)o(greestoradians)g(dif)n(ference)i
(digit)e(digit-char)h(digitp)f(di)n(vide)g(dmstode)o(grees)g(dm-)-118
2052 y(storadians)-118 2299 y(eq)25 b(eqcar)g(eqn)g(eqstr)g(equal)f(e)o
(xpt)-118 2545 y(f)o(actorial)h(\002x)g(\002xp)g(\003oat)g(\003oatp)g
(\003oor)-118 2792 y(geq)g(getv)-118 3038 y(land)f(lastcar)h(lastpair)f
(length)g(leq)h(lessp)f(list)g(lnot)g(log)g(log10)g(log2)g(lor)h(lo)n
(wercasep)f(lshift)g(lxor)-118 3285 y(max2)g(member)h(memq)f(min2)f
(minus)h(minusp)f(mkquote)h(mod)-118 3531 y(ne)h(neq)g(not)f(nth)g
(null)-118 3778 y(onep)-118 4024 y(pairp)h(plus2)e(pnth)-118
4271 y(radianstode)o(grees)h(radianstodms)f(recip)i(remainder)g(rest)g
(reserse)g(round)-118 4517 y(sec)i(secd)g(sin)f(sind)f(size)i(sqrt)f
(string-not-greaterp)g(string-not-)f(lessp)h(string-repeat)h
(string-search)-118 4637 y(string-search-equal)43 b(string-)f
(search-from-string-search-from-equal)i(string-size)e(string-trim)-118
4758 y(string-upcase)36 b(string-upper)n(-bound)f(string)p
Ff(<)h Fr(string)p Ff(<)p Fr(=)g(string)p Ff(<>)g Fr(string=)g(string)p
Ff(>)g Fr(string)p Ff(>)p Fr(=)-118 4878 y(stringp)24
b(sub)g(sub1)g(substring-equal)f(substring=)-118 5125
y(tan)i(tand)f(times2)-118 5371 y(upb)o(v)g(uppercasep)-118
5618 y(v)o(ector)n(-empty?)80 b(v)o(ector)n(-fetch)41
b(v)o(ector)n(-size)h(v)o(ector)n(-upper)n(-bound)e(v)o(ector2l)h(ist)f
(v)o(ector)h(2string)-118 5738 y(v)o(ectorp)p eop
%%Page: 168 176
168 175 bop 118 -18 a Fr(168)118 289 y(There)35 b(is)e(another)h(f)o
(acility)g(in)f(PSL)i(for)g(de\002ning)e(constants.)58
b(Y)-11 b(ou)34 b(are)h(encouraged)f(to)g(use)g(the)118
409 y(function)k(de\002ne-constant.)71 b(The)38 b(follo)n(wing)f(tw)o
(o)g(functions)h(are)h(documented)e(here)i(for)g(com-)118
529 y(pleteness.)118 868 y Fq(\(defconst)26 b([U:id)g(V)-9
b(:any]\):)31 b(unde\002ned)1835 b Fi(macr)l(o)149 989
y Fr(Defconst)31 b(pro)o(vides)e(for)i(the)g(de\002nition)f(and)h(use)g
(of)g(symbolic)e(constants.)48 b(Each)118 1109 y(U)30
b(is)f(de\002ned)h(to)f(represent)h(the)g(corresponding)e(v)n(alue)h(V)
-13 b(.)30 b(The)g(v)n(alue)f(V)g(is)h(stored)118 1230
y(on)h(the)g(property)g(list)f(of)i(U,)f(not)g(in)g(the)g(v)n
(aluecell.)49 b(The)32 b(macro)f(const)g(is)g(used)g(to)118
1350 y(retrie)n(v)o(e)24 b(the)h(v)n(alue.)118 1699 y
Fq(\(const)h(U:id\):)31 b(any)2573 b Fi(macr)l(o)142
1819 y Fr(Const)23 b(gi)n(v)o(es)g(access)h(to)f(the)h(v)n(alue)f
(de\002ned)h(by)g(the)f(function)g(defconst.)30 b(The)24
b(v)n(alue)118 1939 y(will)g(be)h(e)n(v)n(aluated.)357
2060 y Fh(1)60 b(lisp>)e(\(defconst)g(foo)h(\(add1)g(2\)\))357
2181 y(\(add1)g(2\))357 2301 y(2)h(lisp>)e(\(const)h(foo\))357
2422 y(3)118 2754 y Ft(15.7)143 b(Fluid)34 b(and)i(Global)e
(Declarations)118 2978 y Fr(Fluid)21 b(and)h(global)f(declarations)g
(must)f(be)i(used)f(to)g(indicate)g(v)n(ariables)g(that)g(are)i(to)e
(be)h(used)f(as)h(non-)118 3098 y(local)i(v)n(ariables)f(in)h(compiled)
f(code.)31 b(The)24 b(v)n(alues)g(associated)f(with)h(local)g(v)n
(ariables)f(are)i(stored)f(on)118 3219 y(a)g(stack.)29
b(If)24 b(a)f(v)n(ariable)g(has)g(been)g(declared)h(global)e(or)h
(\003uid)g(then)g(the)g(compiled)f(code)h(will)f(instead)118
3339 y(access)28 b(the)f(v)n(alue)g(cell)g(of)g(that)g(v)n(ariable.)38
b(In)27 b(addition)f(the)h(content)g(of)h(the)f(v)n(alue)f(cells)h(of)h
(special)118 3459 y(v)n(ariables)36 b(being)f(used)h(as)h(formal)f
(parameters)g(must)f(be)i(preserv)o(ed.)65 b(The)36 b(compiler)g
(currently)118 3580 y(def)o(aults)30 b(v)n(ariables)f(bound)h(in)f(a)i
(particular)f(function)f(to)h(local.)47 b(Note)30 b(that)f(local)h(v)n
(ariables)g(e)o(xist)118 3700 y(as)24 b(anon)o(ymous)e(stack)h
(locations,)g(therefore)h(called)g(functions)f(cannot)g(see)h(them.)30
b(An)23 b(undeclared)118 3821 y(non-local)h(v)n(ariable)h(is)f
(declared)h(\003uid)g(by)f(the)h(compiler)f(with)g(the)h(w)o(arning:)
118 3999 y Fh(***)59 b(NAME)g(declared)f(fluid)118 4177
y Fr(The)30 b(appearance)g(of)g(this)e(message)i(may)f(indicate)g(an)g
(additional)f(error)-5 b(.)45 b(If)30 b(a)g(pre)n(vious)e(function)118
4298 y(used)23 b(this)g(name)h(in)f(the)g(parameter)i(list)d(then)h(it)
h(may)f(ha)n(v)o(e)g(to)h(be)f(recompiled.)30 b(The)24
b(local)f(v)n(ariable)118 4418 y(in)31 b(the)g(pre)n(vious)f(function)h
(will)f(not)h(refer)i(to)d(the)i(same)f(v)n(ariable)g(as)g(the)g(one)h
(recently)f(declared)118 4539 y(\003uid,)25 b(e)n(v)o(en)f(though)f
(the)i(names)f(are)i(the)f(same)f(in)h(the)f(source)h(code)g(listing.)
118 4659 y(Pre)n(vious)20 b(documentation)e(has)i(gi)n(v)o(en)e(users)i
(the)g(impression)f(that)g(it)h(is)g(ille)o(gal)e(to)i(bind)f(an)h(id)g
(which)118 4779 y(has)26 b(been)g(declared)g(global.)34
b(This)25 b(is)g(not)h(true,)g(an)g(attempt)f(to)g(bind)g(a)i(global)e
(v)n(ariable)g(will)g(cause)118 4900 y(the)g(follo)n(wing)e(message)h
(to)g(be)h(displayed.)118 5078 y Fh(***)59 b(Illegal)f(to)i(bind)f
(global)f(VARIABLE)g(but)h(binding)f(anyway)118 5256
y Fr(The)26 b(lack)g(of)h(distinction)c(between)k(global)e(and)h
(\003uid)g(in)g(PSL)g(appears)h(to)f(be)g(due)g(to)g(the)f(f)o(act)i
(that)118 5377 y(shallo)n(w)34 b(binding)g(is)h(emplo)o(yed)f(in)h
(PSL.)h(In)f(a)h(deep)f(bound)f(system)h(one)g(has)g(to)g(search)h(do)n
(wn)118 5497 y(a)g(binding)e(stack)i(to)f(locate)h(the)f(v)n(alue)g(of)
h(a)g(\003uid)f(id,)j(which)d(could)g(get)h(e)o(xpensi)n(v)o(e.)61
b(A)35 b(global)118 5618 y(declaration)f(within)e(a)j(deep)f(bound)f
(system)g(w)o(ould)g(allo)n(w)g(the)g(interpreter)h(to)g(assume)f(that)
h(the)118 5738 y(v)n(alue)23 b(of)h(an)g(id)f(is)h(in)f(a)h(\002x)o(ed)
g(location.)29 b(Of)24 b(course)g(in)f(a)h(shallo)n(w)f(bound)g(system)
f(the)i(v)n(alue)f(of)h(a)g(id)118 5858 y(is)g(al)o(w)o(ays)h(found)f
(in)h(the)f(v)n(alue)h(cell)f(of)h(that)g(id.)p eop
%%Page: 169 177
169 176 bop -118 -18 a Fg(15.8.)55 b(CONTR)l(OL)25 b(O)-5
b(VER)25 b(THE)g(TIME)f(WHEN)h(SOMETHING)g(IS)g(DONE)544
b Fr(169)-118 289 y Ft(15.8)142 b(Contr)m(ol)35 b(Ov)o(er)f(the)h(T)m
(ime)g(When)h(Something)d(is)j(Done)-118 514 y Fr(Which)25
b(e)o(xpressions)f(are)i(e)n(v)n(aluated)f(during)f(compilation)g(only)
-6 b(,)24 b(which)h(are)i(written)d(to)h(the)h(\002le)g(to)-118
634 y(be)21 b(e)n(v)n(aluated)e(at)i(load)f(time,)h(and)f(which)h(do)f
(both)g(can)h(be)g(controlled)f(by)g(the)g(EV)-13 b(AL)20
b(and)h(IGNORE)-118 754 y(properties)j(of)h(function)f(names.)30
b(In)25 b(addition,)f(the)g(follo)n(wing)f(functions)h(may)g(also)h(be)
g(used.)-118 1094 y Fq(\(commentoutcode)i(U:f)n(orm\):)k(nil)1989
b Fi(macr)l(o)-93 1214 y Fr(Comment)24 b(out)g(a)h(single)f(e)o
(xpression.)-118 1584 y Fq(\(compiletime)h(U:f)n(orm\):)31
b(nil)2269 b Fi(e)n(xpr)-93 1704 y Fr(Ev)n(aluate)24
b(the)g(e)o(xpression)g(U)h(at)g(compile)f(time)g(only)-6
b(.)-118 2074 y Fq(\(bothtimes)26 b(U:f)n(orm\):)31 b(U:f)n(orm)2166
b Fi(e)n(xpr)-93 2194 y Fr(Ev)n(aluate)24 b(the)g(e)o(xpression)g(U)h
(at)g(both)f(compile)g(time)g(and)g(load)h(time.)-118
2564 y Fq(\(loadtime)g(U:f)n(orm\):)31 b(U:f)n(orm)2216
b Fi(e)n(xpr)-93 2684 y Fr(Ev)n(aluate)24 b(the)g(e)o(xpression)g(at)h
(load)f(time)g(only)-6 b(.)-118 3058 y Ft(15.9)142 b(Switches)34
b(That)h(Contr)m(ol)f(the)i(Compiler)-118 3283 y Fr(The)23
b(compilation)f(process)h(is)g(controlled)g(by)g(a)h(number)f(of)g
(switches.)29 b(In)24 b(addition)e(to)h(comp)g(there)-118
3403 y(are)i(the)g(follo)n(wing)e(switches.)-118 3743
y Fq(*fast-v)o(ectors)i Fr(=)g([Initially:)k(t])2175
b Fi(switc)o(h)-118 4091 y Fq(*fast-e)o(v)o(ectors)25
b Fr(=)g([Initially:)k(t])2132 b Fi(switc)o(h)-118 4439
y Fq(*fast-strings)25 b Fr(=)g([Initially:)k(nil])2112
b Fi(switc)o(h)-118 4787 y Fq(*fast-integers)25 b Fr(=)g([Initially:)30
b(nil])2062 b Fi(switc)o(h)82 4907 y Fr(There)26 b(are)g(some)f
(functions)f(which)i(are)g(de\002ned)g(in)f(tw)o(o)g(w)o(ays.)33
b(One)26 b(of)f(these)h(v)o(er)n(-)82 5027 y(sions)d(will)h(reduce)h
(the)f(e)o(x)o(ecution)f(time)h(by)g(not)g(v)o(erifying)f(that)h(the)g
(ar)n(guments)g(are)82 5148 y(of)32 b(correct)g(type.)51
b(The)32 b(name)g(of)f(the)h(slo)n(wer)f(v)o(ersion)g(will)g(ha)n(v)o
(e)g(tw)o(o)g(properties,)82 5268 y(F)-7 b(AST)e(-FLA)l(G)22
b(and)g(F)-7 b(AST)e(-FUNCTION.)23 b(The)f(F)-7 b(AST)e(-FLA)l(G)23
b(property)e(references)82 5388 y(a)30 b(switch)f(whose)h(v)n(alue)f
(determines)g(which)g(function)g(will)g(be)h(called)g(from)g(com-)82
5509 y(piled)25 b(code.)35 b(An)26 b(instance)g(of)g(the)g(slo)n(wer)g
(function)f(is)h(replaced)g(by)g(the)g(f)o(aster)h(one)82
5629 y(when)e(the)g(switch)f(is)h(set)g(to)g(t.)32 b(Of)25
b(course,)g(to)g(mak)o(e)g(this)f(con)l(v)o(ersion)g(the)i(compiler)82
5750 y(has)e(to)g(kno)n(w)g(the)g(name)g(of)h(the)f(f)o(aster)h
(function.)30 b(This)23 b(name)i(is)f(referenced)i(by)e(the)82
5870 y(F)-7 b(AST)e(-FUNCTION)25 b(property)-6 b(.)p
eop
%%Page: 170 178
170 177 bop 118 -18 a Fr(170)118 289 y(The)25 b(property)f(list)g(of)h
(the)g(function)f(v)o(ector)n(-fetch)g(looks)g(something)f(lik)o(e)118
643 y Fh(\(...)59 b(\(fast-flag)f(.)h(*fast-vectors\))e
(\(fast-function)f(.)k(igetv\))e(...\))118 982 y Fr(The)20
b(e)o(xpression)f(\(v)o(ector)n(-fetch)h(v)o(ector)f(inde)o(x\))g(will)
g(be)h(replaced)h(by)e(the)h(e)o(xpression)f(\(igetv)g(v)o(ector)118
1102 y(inde)o(x\))24 b(if)h(the)f(switch)h(*f)o(ast-v)o(ectors)e(is)i
(set)f(to)h(t.)118 1457 y Fq(*r2i)g Fr(=)g([Initially:)k(t])2544
b Fi(switc)o(h)318 1577 y Fr(If)34 b(non-nil,)g(recursi)n(v)o(e)e
(calls)h(are)h(con)l(v)o(erted)e(to)h(jumps)f(whene)n(v)o(er)h
(possible.)54 b(The)318 1698 y(ef)n(fect)33 b(of)f(this)g(is)g(that)g
(tracing)h(this)e(function)h(will)g(not)g(sho)n(w)f(the)i(recursi)n(v)o
(e)e(calls)318 1818 y(since)25 b(the)o(y)g(ha)n(v)o(e)g(been)h
(eliminated.)32 b(The)26 b(function)e(RECURSIVE-F)-7
b(A)l(CT)n(ORIAL)318 1938 y(contains)32 b(a)g(recursi)n(v)o(e)g(call)h
(which)f(can)g(be)h(con)l(v)o(erted)f(to)g(a)h(jump.)52
b(The)33 b(result)f(of)318 2059 y(compiling)g(RECURSIVE-F)-7
b(A)l(CT)n(ORIAL)37 b(is)d(almost)e(identical)i(to)f(that)h(of)g(com-)
318 2179 y(piling)23 b(ITERA)-11 b(TIVE-F)k(A)l(CT)n(ORIAL)26
b(when)f(r2i)g(is)f(non-nil.)357 2453 y Fh(\(de)59 b(factorial)f(\(n\))
119 b(\(iterative-factorial)55 b(\(1)60 b(n\)\)\))357
2807 y(\(de)f(recursive-factorial)d(\(accumulator)h(count\))477
2928 y(\(if)i(\(<=)g(count)g(1\))656 3048 y(accumulator)656
3168 y(\(recursive-factorial)c(\(*)60 b(accumulator)d(count\))1911
3289 y(\(sub1)i(count\)\)\)\))417 3627 y(\(de)g(iterative-factorial)d
(\(accumulator)h(count\))477 3748 y(\(prog)h(\(\))537
3868 y(loop)656 3989 y(\(when)h(\(<=)g(count)g(1\))g(\(return)f
(accumulator\)\))656 4109 y(\(setf)h(accumulator)e(\(*)i(accumulator)f
(count\)\))656 4229 y(\(decr)h(count\))656 4350 y(\(go)g(loop\)\)\))118
4907 y Fq(*nolink)o(e)25 b Fr(=)h([Initially:)j(nil])2273
b Fi(switc)o(h)318 5027 y Fr(If)24 b(nil,)f(when)g(the)g(last)g(form)g
(to)g(be)g(e)n(v)n(aluated)f(is)h(a)h(function)e(call)i(then)f(the)g
(compiler)318 5148 y(will)28 b(generate)h(an)g(instruction)e(which)i
(will)e(perform)i(tw)o(o)g(actions)f(during)g(e)n(v)n(alua-)318
5268 y(tion.)55 b(Prior)34 b(to)f(jumping)e(to)i(the)h(entry)f(point)f
(of)h(the)h(function)e(being)h(called,)i(the)318 5388
y(space)k(allocated)f(on)h(the)f(stack)h(for)g(local)f(v)n(ariable)g
(storage)h(is)f(reclaimed.)72 b(Al-)318 5509 y(though)28
b(the)g(amount)g(of)h(space)g(reclaimed)g(may)f(be)h(small,)g(this)f
(does)g(pro)o(vide)g(the)318 5629 y(called)d(function)f(with)g(more)g
(stack)h(space.)31 b(In)25 b(contrast,)f(when)h(this)f(switch)g(is)g
(non-)318 5750 y(nil)k(a)h(pair)g(of)g(instructions)e(w)o(ould)h(be)g
(used,)i(a)f(call)g(on)f(the)h(function)f(follo)n(wed)f(by)318
5870 y(an)e(e)o(xit.)30 b(In)25 b(this)e(case)j(the)e(stack)h(space)g
(is)g(not)f(reclaimed)g(until)g(the)h(e)o(xit.)p eop
%%Page: 171 179
171 178 bop -118 -18 a Fg(15.10.)55 b(CONDITION)m(AL)24
b(COMPILA)-11 b(TION)1707 b Fr(171)-118 357 y Fq(*ord)25
b Fr(=)g([Initially:)k(nil])2439 b Fi(switc)o(h)82 478
y Fr(If)36 b(non-nil,)i(the)f(compiler)e(is)h(forced)h(to)f(generate)h
(code)f(which)g(e)n(v)n(aluates)f(ar)n(gu-)82 598 y(ments)20
b(of)i(a)f(function)g(call)g(in)g(a)h(left)f(to)g(right)g(order)-5
b(.)29 b(It)22 b(is)f(possible)f(to)h(generate)h(code)82
718 y(which)30 b(is)g(more)g(ef)n(fecient)g(when)h(this)e(switch)h(is)g
(set)g(to)g(nil.)47 b(Ar)n(guments)29 b(are)i(cur)n(-)82
839 y(rently)c(passed)g(in)g(re)o(gisters.)39 b(As)27
b(the)h(calling)f(function)f(computes)h(each)h(ar)n(gument)82
959 y(the)d(result)g(is)h(stored)f(on)g(the)h(stack.)33
b(References)27 b(to)f(constants)e(need)i(not)f(be)h(gener)n(-)82
1080 y(ated)k(and)g(then)g(pushed)g(onto)f(the)h(stack,)h(the)f(other)g
(ar)n(guments)g(can)h(be)f(compiled)82 1200 y(\002rst,)24
b(then)f(just)g(before)h(the)g(function)f(is)g(called)h(the)g
(appropriate)g(re)o(gister)f(is)g(loaded)82 1320 y(with)j(the)g
(constant.)36 b(A)26 b(similar)g(ar)n(gument)g(can)h(be)g(made)f(for)h
(v)n(ariable)g(references.)82 1441 y(Ho)n(we)n(v)o(er)l(,)21
b(allo)n(wing)g(for)i(side)f(ef)n(fects)g(we)h(must)e(be)i(sure)f(that)
g(the)g(postponed)f(v)n(alue)82 1561 y(w)o(ould)j(be)h(the)f(same)h(as)
g(that)f(fetched)h(at)g(the)g(proper)g(time.)-118 1832
y Fq(*plap)g Fr(=)g([Initially:)k(nil])2400 b Fi(switc)o(h)82
1952 y Fr(If)47 b(non-nil,)k(the)c(portable)f(intermediate)g(code)h
(produced)f(by)h(the)f(compiler)g(is)82 2073 y(printed.)66
b(This)37 b(is)f(useful)h(for)g(e)o(xamining)e(compiler)h(output)g
(prior)h(to)f(assembly)-6 b(,)82 2193 y(in)24 b(particular)h(it)f(can)h
(be)g(helpful)f(in)h(deb)n(ugging)e(macros.)-118 2464
y Fq(*pgwd)i Fr(=)g([Initially:)k(nil])2356 b Fi(switc)o(h)82
2584 y Fr(If)37 b(non-nil,)i(the)d(actual)h(assembly)f(language)h
(mnemonics)e(are)j(displayed.)66 b(This)82 2705 y(\003ag)22
b(is)e(useful)h(for)h(e)o(xamining)d(the)i(code)h(which)f(is)g
(generated)g(for)h(the)f(initialization)82 2825 y(function)j(**f)o
(asl**initcode**.)-118 3076 y Fq(*pcmac)h Fr(=)g([Initially:)30
b(nil])2311 b Fi(switc)o(h)82 3196 y Fr(If)21 b(non-nil,)g(both)g(the)g
(portable)f(intermediate)h(code)g(and)g(the)g(assembly)f(mnemonics)82
3316 y(are)29 b(displayed.)40 b(After)29 b(each)g(intermediate)f
(instruction)e(the)j(assembly)e(mnemonic)82 3437 y(is)d(sho)n(wn.)-118
3687 y Fq(*pwrds)h Fr(=)g([Initially:)30 b(t])2400 b
Fi(switc)o(h)82 3808 y Fr(If)27 b(non-nil,)f(the)g(address)g(and)h
(size)g(of)f(compiled)g(functions)f(are)i(displayed)f(as)h(the)o(y)82
3928 y(are)e(de\002ned.)-118 4336 y Ft(15.10)142 b(Conditional)33
b(Compilation)-118 4825 y Fq(\(if)p -18 4825 30 4 v 36
w(system)24 b(SYS-N)n(AME:id)j(TR)m(UE-CASE:any)-118
4945 y(F)-9 b(ALSE-CASE:any\):)33 b(any)2242 b Fi(macr)l(o)-81
5065 y Fr(This)36 b(is)g(a)h(conditional)e(macro)i(for)g(choosing)e
(system)h(dependent)g(code)h(during)-118 5186 y(compilation.)27
b(The)19 b(e)o(xpression)g(for)g(the)h(f)o(alse)f(case)h(def)o(aults)f
(to)g(nil)g(if)h(it)f(is)g(ommited.)-118 5306 y(The)g(id)g(must)f(be)h
(a)g(member)g(of)g(the)g(list)f(whose)h(name)g(is)g(system)p
2151 5306 V 34 w(list*.)28 b(An)19 b(e)o(xample)-118
5427 y(of)25 b(its)f(use)h(follo)n(ws.)121 5843 y Fh(\(if_system)117
b(tops20)i(\(setq)58 b(buildfileformat*)e("PL:\045W"\)\))p
eop
%%Page: 172 180
172 179 bop 118 -18 a Fr(172)118 289 y Ft(15.11)142 b(Implementation)32
b(Details)118 512 y Fr(The)38 b(output)f(from)h(the)g(compiler)f(is)h
(a)h(list)e(of)h(instructions)e(in)i(the)g(order)g(which)g(the)o(y)f
(will)g(be)118 633 y(e)o(x)o(ecuted.)28 b(Each)20 b(instruction)e(is)i
(a)g(list,)f(an)h(operation)f(follo)n(wed)g(by)g(as)h(man)o(y)f(items)f
(as)i(are)g(required)118 753 y(by)30 b(that)f(operation.)45
b(The)29 b(compiled)g(code)h(may)f(be)h(e)o(x)o(ecuted)f(by)h
(simulating)d(the)j(actions)f(of)h(the)118 873 y(machine)22
b(on)g(each)h(element)f(of)g(the)h(sequence.)30 b(In)22
b(the)g(interest)g(of)g(ef)n(\002cienc)o(y)-6 b(,)23
b(the)f(compiler)f(ouput)118 994 y(is)i(translated)f(into)g(a)i
(sequence)f(of)g(actual)g(machine)g(instructions.)28
b(An)23 b(area)h(of)f(memory)f(\(which)h(is)118 1114
y(not)i(garbage)g(collected\),)h(is)e(allocated)i(to)f(recei)n(v)o(e)g
(the)g(processed)g(compiler)g(output.)31 b(This)25 b(area)h(is)118
1234 y(called)g(the)h(Binary)f(Program)h(Space)g(or)f(BPS.)i(The)e
(function)g(lap)g(translates)f(the)i(output)e(from)h(the)118
1355 y(compiler)e(into)g(machine)h(instructions.)118
1475 y(The)39 b(functions)f(f)o(aslout,)k(f)o(aslend,)g(and)d(f)o
(aslabort)f(are)i(used)e(by)h(Compile-\002le-aux)g(to)f(compile)118
1596 y(\002les.)59 b(It)34 b(should)f(not)g(be)i(necessary)f(for)g(you)
g(to)g(used)g(these)g(functions,)h(the)o(y)e(are)i(included)e(for)118
1716 y(completeness.)d(Ev)n(aluation)23 b(of)118 1944
y Fh(\(faslout)58 b(name\))118 2173 y Fr(will)24 b(cause)h(the)g
(message)118 2293 y(F)-7 b(ASLOUT)i(:)25 b(\(DSKIN)g(\002les\))g(or)g
(type)g(in)f(e)o(xpressions)118 2413 y(When)h(all)f(done)h(e)o(x)o
(ecute)f(\(F)-7 b(ASLEND\))118 2534 y(to)31 b(be)h(displayed.)51
b(Subsequent)31 b(e)o(xpressions,)h(typed)f(in)h(or)f(read)i(from)e
(\002les,)j(are)e(not)g(processed)118 2654 y(in)39 b(the)f(normal)h(f)o
(ashion.)72 b(The)39 b(follo)n(wing)e(piece)i(of)g(code)h(demonstrates)
d(ho)n(w)h(this)g(feature)i(is)118 2775 y(implemented.)238
3003 y Fh(\(de)59 b(toploop)477 3123 y(...)357 3244 y(\(cond)g(\(\(not)
g(*defn\))f(\(top-loop-eval-and-print)c(input-value\)\))716
3364 y(\(dfprint*)k(\(funcall)g(dfprint*)g(input-value\)\))716
3484 y(\(t)h(\(prettyprint)e(input-value\)\)\))477 3605
y(...)i(\))118 3833 y Fr(When)24 b(the)f(switch)g(*defn)g(is)h(nil)e
(the)i(input)e(is)h(e)n(v)n(aluated)g(and)g(the)h(result)f(is)g
(printed.)30 b(Setting)23 b(*defn)118 3953 y(to)i(t)f(and)h
(associating)f(a)h(function)f(with)g(the)h(global)f(dfprint*)g(allo)n
(ws)g(for)h(the)f(rede\002nition)h(of)g(what)118 4074
y(is)34 b(meant)f(by)h(e)n(v)n(aluating)e(the)i(input)e(and)i(printing)
f(the)h(result)f(of)h(that)f(e)n(v)n(aluation.)57 b(It)33
b(the)h(func-)118 4194 y(tion)c(bound)f(to)h(dfprint*)g(which)g(is)g
(responsible)f(for)i(the)f(compilation)e(of)j(e)o(xpressions.)46
b(F)o(aslend)118 4315 y(is)33 b(pro)o(vided)g(to)g(discontinue)f
(compilation,)i(f)o(aslabort)f(is)g(used)g(to)h(abort)f(the)g
(compilation.)55 b(The)118 4435 y(only)27 b(conte)o(xt)g(in)h(which)g
(the)f(application)g(of)h(these)g(functions)f(mak)o(es)h(sense)g(is)f
(when)h(a)h(pre)n(vious)118 4555 y(in)l(v)n(ocation)24
b(of)h(f)o(aslout)f(has)g(not)h(been)g(terminated.)118
4784 y Fh(*****)59 b(FASLEND)f(not)h(within)g(FASLOUT)p
eop
%%Page: 173 181
173 180 bop -118 954 a Fn(Miscellaneous)53 b(Useful)f(F)-5
b(eatur)l(es)-118 1469 y Ft(16.1)142 b(Exiting)35 b(PSL)-118
1912 y Fq(\(quit\):)d(Unde\002ned)2631 b Fi(e)n(xpr)-93
2033 y Fr(Return)25 b(from)f(LISP)i(and)f(terminate)f(the)h(PSL)g
(process.)-118 2402 y Fq(\(exitlisp\):)31 b(Unde\002ned)2498
b Fi(e)n(xpr)-93 2523 y Fr(Return)25 b(from)f(LISP)i(and)f(terminate)f
(the)h(PSL)g(process.)-118 2892 y Fq(\(exitwithstatus)g(ST)-9
b(A)g(TUS:integer\):)33 b(Unde\002ned)1485 b Fi(e)n(xpr)-95
3013 y Fr(Return)23 b(from)g(LISP)g(and)g(terminate)f(the)h(PSL)h
(process.)30 b(ST)-9 b(A)e(TUS)23 b(is)f(passed)h(to)f(the)-118
3133 y(calling)i(command)g(shell)g(as)h(return)g(v)n(alue.)-118
3507 y Ft(16.2)142 b(Sa)l(ving)35 b(an)h(Executable)d(PSL)-118
3950 y Fq(\(sa)n(v)o(esystem)24 b(MSG:string)h(FILE:string)h(FORMS:f)n
(orm-list\):)-118 4071 y(Unde\002ned)2933 b Fi(e)n(xpr)32
4191 y Fr(This)39 b(records)h(the)f(welcome)h(message)f(\(after)i
(attaching)e(a)h(date\))g(in)f(the)h(global)32 4312 y(v)n(ariable)31
b(lispbanner*)f(used)h(by)g(standardlisp')-5 b(s)29 b(call)j(on)f
(toploop,)g(and)g(then)g(calls)32 4432 y(dumplisp)e(to)i(compact)h(the)
f(core)h(image)f(and)g(write)h(it)f(out)f(as)i(a)g(machine)f(depen-)32
4552 y(dent)26 b(e)o(x)o(ecutable)g(\002le)g(with)g(the)g(name)h(FILE.)
g(FILE)f(should)g(ha)n(v)o(e)g(the)g(appropriate)32 4673
y(e)o(xtension)d(for)i(an)g(e)o(x)o(ecutable)f(\002le.)31
b(Sa)n(v)o(esystem)24 b(also)g(sets)h(*usermode)f(to)g(t.)-118
4824 y(The)k(forms)f(in)h(the)g(list)f(FORMS)h(will)g(be)g(e)n(v)n
(aluated)f(when)g(the)h(ne)n(w)g(core)g(image)g(is)f(started.)40
b(F)o(or)-118 4944 y(e)o(xample)121 5178 y Fh(\(savesystem)57
b("PSL)i(4.2")g("PSL")g('\(\(read-init-file)d("psl"\)\)\))-118
5629 y Fq(lispbanner*)26 b Fr(=)f([Initially:)k(])2239
b Fi(global)82 5750 y Fr(Records)20 b(the)g(welcome)g(message)g(gi)n(v)
o(en)f(by)h(a)g(call)g(to)g(sa)n(v)o(esystem)f(from)h(PSL.)h(Also)82
5870 y(contains)j(the)g(date,)h(gi)n(v)o(en)e(by)i(the)g(function)f
(date.)1579 6066 y(173)p eop
%%Page: 174 182
174 181 bop 118 -18 a Fr(174)118 357 y Fq(\(dumplisp)26
b(FILE:string\):)32 b(Unde\002ned)1864 b Fi(e)n(xpr)142
478 y Fr(The)24 b(core)g(image)g(is)f(written)g(as)h(an)g(e)o(x)o
(ecutable)f(\002le,)i(with)e(the)h(name)f(FILE.)i(Better)118
598 y(use)g(the)f(function)g(sa)n(v)o(esystem.)118 960
y Ft(16.3)143 b(Init)35 b(Files)118 1184 y Fr(Init)20
b(\002les)h(are)h(a)n(v)n(ailable)e(to)g(mak)o(e)h(it)f(easier)i(for)f
(the)f(user)h(to)g(customize)f(PSL)h(to)g(his/her)f(o)n(wn)g(needs.)118
1304 y(When)29 b(psl)g(or)g(pslcomp)f(is)h(e)o(x)o(ecuted,)h(if)f(a)h
(\002le)f(.pslrc)g(or)h(.pslcomprc)e(on)h(UNIX)g(box)o(es)f(or)i
(psl.rc)118 1425 y(or)24 b(pslcomp.rc)e(on)i(DOS)g(or)f(W)l(indo)n(ws)g
(systems)f(is)h(on)g(the)h(users)f(home)g(directory)-6
b(,)23 b(it)g(will)g(be)h(read)118 1545 y(and)h(e)n(v)n(aluated.)118
1665 y(The)30 b(remainder)g(of)g(this)f(section)g(describes)g
(functions)g(de\002ned)h(in)g(the)f(module)g Fq(init-\002le)p
Fr(.)47 b(These)118 1786 y(functions)24 b(can)h(be)g(used)f(to)h
(implement)e(init)h(\002les.)118 2125 y Fq(\(user)l(-homedir)l
(-string\):)34 b(string)2138 b Fi(e)n(xpr)143 2245 y
Fr(Returns)25 b(a)g(full)f(pathname)h(for)g(the)f(user')-5
b(s)25 b(home)f(directory)-6 b(.)118 2614 y Fq(\(init-\002le-string)26
b(pr)n(ogname:string\):)32 b(string)1665 b Fi(e)n(xpr)142
2735 y Fr(Returns)25 b(the)f(full)f(pathname)h(of)g(the)g(user')-5
b(s)24 b(init)f(\002le)i(for)f(the)g(program)g(progname.)118
3103 y Fq(\(r)n(ead-init-\002le)j(pr)n(ogname:string\):)32
b(nil)1860 b Fi(e)n(xpr)147 3224 y Fr(Reads)30 b(and)f(e)n(v)n(aluates)
f(the)h(init)f(\002le)h(with)f(name)h(progname.)43 b(Read-init-\002le)
29 b(calls)118 3344 y(init-\002le-string)34 b(with)g(ar)n(gument)h
(progname.)62 b(Under)35 b(UNIX)g(the)g(init\002lename)g(is)118
3465 y(concatenated)23 b(from)g(\224.)-7 b(\224)24 b(progname)f(and)g
(\224rc\224,)i(such)d(that)h(a)h(typical)e(init\002lename)h(is)118
3585 y(.pslrc)i(for)g(psl)357 3725 y Fh(\(read-init-file)57
b("psl"\))118 4057 y Ft(16.4)143 b(Miscellaneous)33 b(Functions)118
4499 y Fq(\(r)n(eset\):)f(Unde\002ned)2600 b Fi(e)n(xpr)143
4620 y Fr(Return)25 b(to)g(the)f(top)g(le)n(v)o(el)g(of)h(PSL,)g
(unwind-protect)f(forms)g(get)h(a)g(chance)h(to)e(run.)118
4989 y Fq(\(time\):)32 b(integer)2751 b Fi(e)n(xpr)143
5109 y Fr(CPU)26 b(time)e(in)g(milliseconds)f(since)h(login)g(time.)118
5478 y Fq(\(date\):)32 b(string)2806 b Fi(e)n(xpr)143
5598 y Fr(The)25 b(date)g(in)f(the)h(form)f(\224day-month-year\224)357
5738 y Fh(1)60 b(lisp>)e(\(date\))357 5858 y("21-Jan-1997")p
eop
%%Page: 175 183
175 182 bop -118 -18 a Fg(16.5.)55 b(GARB)m(A)l(GE)25
b(COLLECTION)2015 b Fr(175)-118 357 y Fq(\(date-and-time\):)33
b(string)2391 b Fi(e)n(xpr)-86 478 y Fr(A)33 b(string)e(is)h(returned)h
(which)f(describes)g(the)g(date,)j(follo)n(wed)c(by)h(the)g(time.)53
b(The)-118 598 y(string)24 b(is)g(of)h(the)g(form)-118
696 y(\224day-month-year)f(hours:minutes:seconds\224)121
902 y Fh(1)60 b(lisp>)e(\(date-and-time\))121 1023 y("21-Jan-1997)f
(17:04:14")-118 1359 y Ft(16.5)142 b(Garbage)34 b(Collection)-118
1801 y Fq(\(r)n(eclaim\):)d(nil)2808 b Fi(e)n(xpr)-86
1922 y Fr(Reclaim)32 b(is)g(the)g(user)g(le)n(v)o(el)f(call)h(to)g(the)
g(garbage)g(collector)-5 b(.)51 b(Acti)n(v)o(e)31 b(data)h(in)g(the)
-118 2042 y(heap)f(is)f(made)h(contiguous)e(and)h(all)h(tagged)f
(pointers)g(into)g(the)h(heap)f(from)h(acti)n(v)o(e)-118
2162 y(local)c(stack)h(frames,)g(the)f(binding)f(stack)i(and)f(the)h
(symbol)e(table)h(are)h(relocated.)40 b(If)-118 2283
y(*gc)25 b(is)f(t,)h(prints)e(some)i(statistics.)k(Increments)24
b(gcknt*)g(and)h(updates)f(gctime*.)-118 2652 y Fq(\(kno)o(wn-fr)n
(ee-space\):)34 b(integer)2190 b Fi(e)n(xpr)-93 2772
y Fr(Returns)25 b(the)f(number)h(of)f(items)g(a)n(v)n(ailable)g(in)h
(the)f(heap.)-118 3141 y Fq(\(fr)n(ee-bps\):)33 b(integer)2593
b Fi(e)n(xpr)-96 3261 y Fr(Returns)21 b(the)h(number)f(of)g(items)g(a)n
(v)n(ailable)g(in)g(the)g(BPS)i(\(Binary)f(Program)g(Space\).)-118
3630 y Fq(*gc)j Fr(=)g([Initially:)k(t])2572 b Fi(switc)o(h)82
3819 y Fr(*Gc)23 b(controls)e(the)i(printing)e(of)i(garbage)g
(collector)f(messages.)30 b(If)23 b(nil)f(no)g(indication)82
3939 y(of)f(garbage)f(collection)g(occurs.)30 b(If)21
b(non-nil)f(v)n(arious)f(messages)i(will)e(be)i(displayed.)121
4121 y Fh(1)60 b(lisp>)e(\(reclaim\))121 4241 y(***)h(Gargabe)f
(collection)g(starting)121 4362 y(***)h(GC)g(1:)120 b(8-Nov-97)58
b(15:49:54,)f(50)j(ms)f(\(50)g(\045\),)g(218)g(recovered,)f(260679)g
(free)121 4482 y(nil)-118 4688 y Fr(As)28 b(the)h(e)o(xample)f(sho)n
(ws,)g(the)g(amount)g(of)h(time)f(\(in)g(milliseconds\),)g(required)g
(to)g(do)h(the)f(garbage)-118 4809 y(collection,)e(the)g(number)g(of)h
(items)f(reco)o(v)o(ered,)g(and)h(the)f(number)g(of)h(items)f(a)n(v)n
(ailable)f(in)i(the)f(heap)-118 4929 y(are)32 b(displayed.)50
b(The)31 b(\002rst)h(number)f(which)g(follo)n(ws)f(GC)i(represents)f
(the)h(v)n(alue)f(of)g(gcknt*.)50 b(The)-118 5049 y(inclusion)26
b(of)j(the)f(date)g(into)f(the)h(message)g(has)g(been)g(found)g(useful)
g(for)g(calculations)f(which)h(tak)o(e)-118 5170 y(e)o(xtremely)c
(long.)-118 5509 y Fq(gctime*)h Fr(=)g([Initially:)k(0])2361
b Fi(global)82 5629 y Fr(The)42 b(total)f(time)h(\(in)g(milliseconds\))
e(spent)h(in)h(garbage)g(collection.)82 b(When)42 b(the)82
5750 y(garbage)c(collector)h(is)f(in)l(v)n(ok)o(ed,)k(the)c(time)g
(spent)h(performing)f(the)g(collection)g(is)82 5870 y(added)25
b(to)f(the)h(v)n(alue)f(of)h(gctime*)p eop
%%Page: 176 184
176 183 bop 118 -18 a Fr(176)118 357 y Fq(gcknt*)26 b
Fr(=)f([Initially:)k(0])2405 b Fi(global)318 478 y Fr(Records)33
b(the)f(number)f(of)h(times)f(that)h(the)g(garbage)g(collector)g(has)g
(been)g(in)l(v)n(ok)o(ed.)318 598 y(Gcknt*)37 b(may)h(be)g(reset)g(to)g
(another)g(v)n(alue)f(to)h(record)g(counts)f(incrementally)-6
b(,)40 b(as)318 718 y(desired.)p eop
%%Page: 177 185
177 184 bop -118 953 a Fn(Cr)l(oss)53 b(Refer)l(ence)d(T)-19
b(ools)-118 1468 y Ft(17.1)142 b(Intr)m(oduction)-118
1692 y Fr(This)36 b(chapter)i(describes)e(tools)g(which)h(b)n(uild)f
(cross)h(references,)42 b(and)37 b(which)f(aid)h(in)g(analyzing)-118
1813 y(LISP)26 b(code)f(for)g(b)n(uilding)e(other)h(cross)h(reference)h
(-)g(lik)o(e)e(tools.)-118 2110 y Fk(17.1.1)118 b(RCREF)31
b(-)f(Cr)n(oss)f(Refer)n(ence)h(Generator)g(f)m(or)g(PSL)g(Files)-118
2298 y Fq(r)n(cr)n(ef)41 b Fr(is)d(a)h(Standard)h(LISP)g(program)e(for)
i(processing)e(a)h(set)g(of)g(PSL)h(function)e(de\002nitions)g(to)-118
2419 y(produce:)2 2649 y(1.)49 b(A)25 b(\224Summary\224)f(sho)n(wing:)
242 2854 y Fl(\017)48 b Fr(A)25 b(list)f(of)h(\002les)g(processed.)242
3016 y Fl(\017)48 b Fr(A)30 b(list)f(of)h(\224entry)f(points\224)g
(\(functions)g(which)g(are)i(not)e(called)h(or)f(are)i(called)f(only)f
(by)340 3137 y(themselv)o(es\).)242 3299 y Fl(\017)48
b Fr(A)34 b(list)f(of)h(unde\002ned)g(functions)f(\(functions)g(called)
g(b)n(ut)h(not)f(de\002ned)h(in)g(this)f(set)g(of)340
3420 y(functions\).)242 3582 y Fl(\017)48 b Fr(A)33 b(list)f(of)i(v)n
(ariables)e(that)h(were)g(used)g(non-locally)f(b)n(ut)g(not)h(declared)
h(GLOB)m(AL)e(or)340 3703 y(FLUID)26 b(before)f(their)f(use.)242
3865 y Fl(\017)48 b Fr(A)41 b(list)f(of)h(v)n(ariables)f(that)h(were)g
(declared)h(GLOB)m(AL)e(b)n(ut)h(used)f(as)h(FLUIDs)g(\(i.e.)340
3986 y(bound)24 b(in)h(a)g(function\).)242 4148 y Fl(\017)48
b Fr(A)25 b(list)e(of)i(FLUID)g(v)n(ariables)f(that)g(were)h(not)f
(bound)g(in)g(a)h(function)f(so)g(that)g(one)h(might)340
4268 y(consider)g(declaring)f(them)h(GLOB)m(ALs.)242
4431 y Fl(\017)48 b Fr(A)25 b(list)f(of)h(all)f(GLOB)m(AL)h(v)n
(ariables)f(present.)242 4593 y Fl(\017)48 b Fr(A)25
b(list)f(of)h(all)f(FLUID)i(v)n(ariables)e(present.)242
4756 y Fl(\017)48 b Fr(A)25 b(list)f(of)h(all)f(functions)g(present.)2
4961 y(2.)49 b(A)25 b(\224global)f(v)n(ariable)g(usage\224)h(table,)g
(sho)n(wing)e(for)i(each)g(non-local)f(v)n(ariable:)242
5166 y Fl(\017)48 b Fr(Functions)24 b(in)h(which)f(it)g(is)h(used)f(as)
h(a)g(declared)h(FLUID)f(or)g(GLOB)m(AL.)242 5328 y Fl(\017)48
b Fr(Functions)24 b(in)h(which)f(it)g(is)h(used)f(b)n(ut)h(not)f
(declared)h(before.)242 5491 y Fl(\017)48 b Fr(Functions)24
b(in)h(which)f(it)g(is)h(bound.)242 5653 y Fl(\017)48
b Fr(Functions)24 b(in)h(which)f(it)g(is)h(changed)g(by)f(setq.)2
5858 y(3.)49 b(A)25 b(\224function)f(usage\224)h(table)f(sho)n(wing)f
(for)i(each)h(function:)1579 6066 y(177)p eop
%%Page: 178 186
178 185 bop 118 -18 a Fr(178)478 289 y Fl(\017)49 b Fr(Where)25
b(it)f(is)h(de\002ned.)478 453 y Fl(\017)49 b Fr(Functions)24
b(which)g(call)h(this)f(function.)478 617 y Fl(\017)49
b Fr(Functions)24 b(called)g(by)h(it.)478 781 y Fl(\017)49
b Fr(Non-local)24 b(v)n(ariables)g(used.)118 1016 y(The)h(output)e(is)i
(alphabetized)f(on)h(the)f(\002rst)h(se)n(v)o(en)f(characters)i(of)f
(each)g(function)f(name.)118 1138 y(RCREF)j(also)d(checks)h(that)f
(functions)g(are)i(called)e(with)g(the)h(correct)h(number)e(of)h(ar)n
(guments.)118 1440 y Fk(17.1.2)119 b(Restrictions)118
1629 y Fr(Algebraic)34 b(procedures)g(in)f(Reduce)i(are)g(treated)f(as)
g(if)f(the)o(y)g(were)i(symbolic,)f(so)g(that)f(algebraic)118
1750 y(constructs)24 b(actually)g(appear)i(as)f(calls)f(to)h(symbolic)e
(functions,)g(such)i(as)g(ae)n(v)n(al.)118 1871 y(RCREF)i(adds)e(the)g
(e)n(v)n(al)g(\003ag)h(to)e(some)h(functions,)f(so)h(it)g(probably)g
(cannot)g(coe)o(xist)f(with)h(the)g(com-)118 1992 y(piler)g(in)f(a)h
(core)h(image.)118 2113 y(SYSLisp)f(procedures)g(are)g(not)g(correctly)
g(analyzed.)118 2415 y Fk(17.1.3)119 b(Usage)118 2605
y Fr(RCREF)21 b(should)d(be)h(used)g(in)g(PSL:RLisp.)28
b(T)-8 b(o)19 b(mak)o(e)g(a)h(\002le)f(FILE.CRF)i(which)e(is)g(a)g
(cross)g(reference)118 2725 y(listing)k(for)i(\002les)g(FILE1.EX1)g
(and)g(FILE2.EX2)f(do)h(the)f(follo)n(wing)f(in)i(RLisp:)118
2847 y(LO)m(AD)f(RCREF;)118 2968 y(OUT)h(\224\002le.crf\224;)h(ON)e
(CREF;)118 3088 y(IN)h(\224\002le1.e)o(x1\224,)-7 b(\224\002le2.e)o
(x2\224;)118 3209 y(OFF)26 b(CREF;)118 3329 y(SHUT)f
(\224\002le.crf\224.)118 3451 y(T)-8 b(o)35 b(process)g(more)f
(\002les,)k(more)d(IN)g(statements)e(may)i(be)g(added,)i(or)e(the)g(IN)
g(statement)f(may)g(be)118 3571 y(changed)25 b(to)f(include)h(more)f
(\002les.)118 3873 y Fk(17.1.4)119 b(Options)118 4281
y Fq(*cr)n(efsummary)26 b Fr(=)f([Initially:NIL])1989
b Fi(switc)o(h)118 4478 y Fr(If)25 b(the)g(switch)e(CREFSUMMAR)-6
b(Y)26 b(is)e(ON)g(then)h(only)e(the)i(summary)e(\(see)i(1)g(abo)o(v)o
(e\))f(is)g(produced.)118 4599 y(Functions)j(with)g(the)h(\003ag)g
(NOLIST)g(are)g(not)f(e)o(xamined)g(or)h(output.)38 b(Initially)-6
b(,)27 b(all)g(PSL)i(functions)118 4720 y(are)24 b(so)g(\003agged.)30
b(\(In)24 b(f)o(act,)h(the)o(y)d(are)j(k)o(ept)e(on)g(a)h(list)f
(NOLIST!*,)h(so)f(if)h(you)f(wish)g(to)g(see)h(references)118
4840 y(to)29 b(ALL)f(functions,)h(then)g(CREF)h(should)d(be)i(\002rst)g
(loaded)g(with)f(the)h(command)f(LO)m(AD)g(RCREF)-8 b(,)118
4961 y(and)25 b(this)f(v)n(ariable)g(then)h(set)f(to)h(NIL\).)f
(\(RCREF)j(is)e(no)n(w)f(autoloading.\))118 5301 y Fq(nolist*)g
Fr(=)h([Initially:)30 b(the)24 b(follo)n(wing)f(list])1781
b Fi(global)118 5497 y Fr(\(and)32 b(cond)g(list)f(max)h(min)f(or)h
(plus)g(prog)f(prog2)h(progn)g(times)f(lambda)g(abs)h(add1)g(append)g
(apply)118 5618 y(assoc)e(atom)f(car)h(cdr)g(caar)g(cadr)h(cdar)f(cddr)
g(caaar)g(caadr)h(cadar)f(caddr)g(cdaar)h(cdadr)f(cddar)g(cdddr)118
5738 y(caaaar)36 b(caaadr)f(caadar)h(caaddr)f(cadaar)g(cadadr)g(caddar)
g(cadddr)g(cdaaar)g(cdaadr)g(cdadar)g(cdaddr)118 5858
y(cddaar)g(cddadr)g(cdddar)g(cddddr)f(close)h(codep)g(compress)f(cons)g
(constantp)g(de)g(de\003ist)h(delete)f(df)p eop
%%Page: 179 187
179 186 bop -118 -18 a Fg(17.2.)55 b(SCAN)m(AL)-10 b(YZER)2494
b Fr(179)-118 289 y(dif)n(ference)24 b(digit)e(di)n(vide)g(dm)h(eject)g
(eq)h(eqn)f(equal)h(error)g(errorset)f(e)n(v)n(al)g(e)n(vlis)f(e)o
(xpand)h(e)o(xplode)f(e)o(xpt)-118 409 y(\002x)33 b(\002xp)g(\003ag)g
(\003agp)g(\003oat)g(\003oatp)g(\003uid)g(\003uidp)f(function)g(densym)
g(get)h(getd)f(getv)g(global)g(globalp)-118 529 y(go)c(greaterp)h(idp)f
(intern)g(length)g(lessp)g(linelength)f(liter)h(lposn)g(map)g(map)g
(mapc)h(mapcan)f(mapcar)-118 650 y(mapcon)18 b(maplist)g(max2)g(member)
h(memq)f(minus)g(minusp)f(min2)h(mkv)o(ect)g(nconc)h(not)g(null)f
(numberp)-118 770 y(onep)30 b(open)g(pagelength)g(pair)g(pairp)h(plus2)
e(posn)h(princ)g(print)g(prin1)g(prin2)g(prog2)g(put)f(putd)h(putv)-118
891 y(quote)37 b(quotient)e(rds)i(read)h(readch)g(remainder)f(remd)g
(rem\003ag)h(remob)f(remprop)f(return)i(re)n(v)o(erse)-118
1011 y(rplaca)28 b(rplacd)g(sassoc)g(set)f(setq)h(stringp)f(sublis)f
(subst)h(sub1)g(terpri)h(times2)f(un\003uid)g(upb)o(v)g(v)o(ectorp)-118
1131 y(wrs)e(zerop\))-118 1255 y(It)37 b(should)e(also)i(be)f
(remembered)h(that)f(in)h(RLisp)f(an)o(y)g(macros)h(with)f(the)h
(\003ag)g(EXP)-9 b(AND)37 b(or)l(,)i(if)-118 1376 y(FORCE)31
b(is)e(on,)i(without)d(the)h(\003ag)i(NOEXP)-9 b(AND,)29
b(are)h(e)o(xpanded)f(before)i(the)e(de\002nition)g(is)g(seen)-118
1496 y(by)g(the)g(cross-reference)i(program,)f(so)f(this)f(\003ag)i
(can)g(also)e(be)i(used)f(to)g(select)g(those)g(macros)g(you)-118
1617 y(require)d(e)o(xpanded)g(and)g(those)g(you)f(do)h(not.)34
b(The)27 b(use)f(of)g(ON)g(FORCE;)h(is)f(highly)f(recommended)-118
1737 y(for)g(CREF)-8 b(.)-118 2101 y Ft(17.2)142 b(Scanalyzer)-118
2361 y Fk(17.2.1)118 b(Intr)n(oduction)-118 2556 y Fr(The)36
b(scanalyzer)h(module)e(is)g(a)i(tool)e(for)i(analyzing)e(PSL)i
(functions,)h(e)o(xpressions,)f(and)f(source)-118 2677
y(\002les.)30 b(It)23 b(mak)o(es)g(it)g(easy)g(to)g(analyze)g(PSL)h
(code)f(and)h(to)e(write)h(preprocessors)g(for)h(PSL.)f(It)h(supports)
-118 2797 y(preprocessing)i(of)h(PSL)g(code)g(in)f(much)h(the)f(w)o(ay)
h(that)f(macroe)o(xpand)g(does,)h(b)n(ut)f(is)g(more)h(\003e)o(xible)
-118 2917 y(and)36 b(e)o(xtensible.)63 b(The)36 b(scanalyzer)h
(understands)e(the)h(v)n(arious)f(PSL)h(function)g(types,)i(including)
-118 3038 y(macros,)29 b(and)f(has)g(some)g(understanding)f(of)h(each)h
(of)f(the)g(PSL)h(special)f(forms.)41 b(Scanalyzer)29
b(li)n(v)o(es)-118 3158 y(in)h(SCAN)m(AL)-10 b(YZER.SL,)30
b(some)g(support)f(functions)g(\(including)g(scanalyze-\002le\))j(li)n
(v)o(e)d(in)g(XREF-)-118 3279 y(SUPPOR)-6 b(T)f(.SL.)-118
3403 y(Apologies)23 b(to)i(John)f(Brunner)l(,)h(author)g(of)g
(\224Stand)g(on)f(Zanzibar\224,)h(for)g(the)g(name)g(of)g(this)e(f)o
(acility)-6 b(.)-118 3722 y Fk(17.2.2)118 b(Philosoph)n(y)-118
3917 y Fr(The)28 b(meaning)f(of)h(a)h(piece)f(of)g(LISP)h(code)g(can)f
(depend)g(a)g(great)h(deal)f(on)g(the)g(conte)o(xt)e(in)i(which)g(it)
-118 4038 y(is)d(compiled)f(or)h(e)n(v)n(aluated.)31
b(V)-6 b(irtually)24 b(e)n(v)o(erything)f(in)i(a)h(LISP)g(system)e(can)
i(change)f(dynamically)-6 b(,)-118 4158 y(and)25 b(analyzing)f(the)h
(meaning)f(of)g(code)h(in)g(the)g(right)f(conte)o(xt)f(is)i(a)g
(signi\002cant)f(problem.)-118 4282 y(This)i(f)o(acility)f(focuses)h
(on)h(analysis)e(of)i(code)f(that)g(is)g(compiled,)g(and)g(it)g(does)g
(so)g(for)h(tw)o(o)f(reasons.)-118 4403 y(One)g(is)g(that)f(most)g(lar)
n(ge)i(systems)d(written)i(in)f(PSL)i(run)f(compiled.)33
b(The)26 b(other)g(is)g(that)f(once)h(LISP)-118 4523
y(code)d(is)g(compiled,)f(the)h(meaning)f(of)h(the)g(object)f(code)h
(is)g(much)f(more)h(static)g(than)f(the)h(meaning)f(of)-118
4643 y(the)j(corresponding)e(interpreti)n(v)o(e)h(code.)-118
4767 y(Reliable)35 b(system)e(operation)h(depends)g(on)h(modules)e
(being)h(compiled)f(in)i(an)f(en)l(vironment)g(that)-118
4888 y(is)i(kno)n(wn)f(and)h(\002x)o(ed)h(as)f(much)g(as)h(possible.)64
b(T)-8 b(o)36 b(do)g(this,)j(we)d(compile)g(each)h(module)e(with)h(a)
-118 5008 y(compiler)29 b(that)g(is)g(started)g(afresh.)46
b(After)29 b(one)h(module)e(has)i(been)g(compiled)e(we)i(do)f(not)g
(compile)-118 5129 y(other)c(modules)e(with)h(the)h(same)f(compiler)-5
b(.)-118 5253 y(T)d(o)25 b(precisely)f(analyze)h(a)g(module,)f(we)h
(can)g(start)g(a)g(compiler)-5 b(.)29 b(T)-8 b(o)25 b(it)f(we)h(add)g
(the)g(analysis)f(f)o(acility)-6 b(,)-118 5373 y(which)39
b(should)f(not)h(change)h(the)f(compilation)f(conte)o(xt.)74
b(W)-8 b(e)40 b(then)f(analyze)h(the)f(module,)j(just)-118
5493 y(as)33 b(we)g(w)o(ould)g(compile)f(it.)55 b(The)33
b(analysis)f(f)o(acility)h(must)f(be)h(sensiti)n(v)o(e)e(to)i(the)g
(same)g(conte)o(xtual)-118 5614 y(information)23 b(that)i(the)f
(compiler)g(is.)-118 5738 y(Man)o(y)d(modules)g(ha)n(v)o(e)i(some)e
(side-ef)n(fects)i(on)f(the)g(conte)o(xt)f(of)i(compilation)d(\226)i
(de\002ning)h(a)f(macro)h(is)-118 5858 y(just)c(one)g(of)h(the)g
(things)e(that)h(af)n(fects)h(compilation)e(conte)o(xt.)28
b(T)-8 b(o)19 b(be)h(sure)g(that)f(a)h(module)f(is)g(analyzed)p
eop
%%Page: 180 188
180 187 bop 118 -18 a Fr(180)118 289 y(in)22 b(the)h(right)f(conte)o
(xt,)f(the)i(analysis)f(should)f(ha)n(v)o(e)h(the)h(same)f(side-ef)n
(fects)h(on)f(compilation)f(conte)o(xt)118 409 y(as)k(the)g
(compilation)e(w)o(ould)h(ha)n(v)o(e.)118 1155 y Fk(17.2.3)119
b(Functions)118 1707 y Fq(\(scanalyze-\002le)26 b(INPUT)-9
b(-FILE:string,)25 b(pathname)118 1828 y(OUTPUT)-9 b(-FILE:string,)26
b(pathname\):)32 b(string)1592 b Fi(e)n(xpr)138 1948
y Fr(Applies)18 b(the)h(function)g(scanalyze-form)h(\(de\002ned)g(in)f
(section)g(2.3.3\))g(to)g(e)n(v)o(ery)f(form)118 2069
y(in)36 b(input-\002le.)66 b(Scanalyze-\002le)38 b(assumes)e(that)h
(information)e(accumulates)h(in)g(the)118 2189 y(list)30
b(xref-assertions.)50 b(After)32 b(all)f(the)g(forms)g(ha)n(v)o(e)g
(been)g(analyzed,)i(scanalyze-\002le)118 2309 y(dumps)20
b(all)i(the)f(assertions)g(into)f(output-\002le)h(as)h(a)f(list)g(\(re)
n(v)o(ersing)f(the)i(list)e(\002rst\).)30 b(The)118 2430
y(assertion)22 b(\()p Ff(<)28 b(input)15 b Fl(\000)g
Ff(f)c(il)r(e)28 b(>)23 b Fr(IS-SOURCE-FILE\))i(is)d(added)h(to)f(the)h
(front)g(of)f(the)118 2550 y(assertion)i(list.)118 2670
y(File)g(name)f(def)o(aulting:)29 b(As)23 b(its)g(ar)n(guments)g
(scanalyze-\002le)h(accepts)g(both)f(\002lename)118 2791
y(strings)35 b(and)i(pathnames.)65 b(In)36 b(an)o(y)g(case)h(the)g
(output-\002le)e(ar)n(gument)h(is)g(def)o(aulted)118
2911 y(from)42 b(the)g(input-\002le)f(ar)n(gument.)81
b(An)o(y)42 b(missing)e(components)g(of)i(the)g(name)g(in)118
3032 y(output-\002le)29 b(are)h(def)o(aulted)f(using)g(the)g(function)g
(mer)n(ge-pathname-def)o(aults)g(to)g(be)118 3152 y(the)c(same)h(as)f
(in)h(input-\002le,)f(e)o(xcept)g(for)h(the)f(\002le)h(type)f(\(suf)n
(\002x\).)33 b(If)26 b(that)f(is)g(not)g(spec-)118 3272
y(i\002ed)39 b(in)g(output-\002le)g(it)f(is)h(set)g(to)g(\224.XD\224,)j
(which)d(is)g(the)g(tentati)n(v)o(e)e(standard)i(for)118
3393 y(Xref-Databases.)118 3513 y(F)o(or)44 b(e)o(xample,)k(in)43
b(the)h(call)f(\(scanalyze-\002le)i(\224pk:load.sl\224)e
(\224mydir:\224\),)48 b(the)c(out-)118 3633 y(put)51
b(\002lename)h(generated)f(is)g(\224mydir:load.xd\224.)109
b(In)52 b(the)f(call)g(\(scanalyze-\002le)118 3754 y
(\224#5:/pslroot/foo/test.sl\224)22 b(\224mydir:test-out.dat\224,)i
(the)i(output)f(\002lename)h(generated)118 3874 y(is)e
(\224mydir:test-out.dat\224.)118 4314 y Fq(\(scanalyze-f)n(orm)h
(FORM:f)n(orm\):)31 b(f)n(orm)1814 b Fi(e)n(xpr)146 4434
y Fr(This)27 b(e)o(xpects)g(an)h(s-e)o(xpression)f(as)h(its)f(ar)n
(gument)h(and)f(analyzes)h(it)g(as)g(a)g(top-le)n(v)o(el)118
4554 y(form)33 b(in)f(a)i(source)f(\002le.)55 b(By)34
b(recognizing)e(which)h(forms)f(w)o(ould)g(be)h(e)n(v)n(aluated)f(at)
118 4675 y(compile-time,)21 b(load-time,)g(or)h(at)g(both)f(times,)h
(this)f(k)o(eeps)g(the)h(conte)o(xt)f(for)h(analysis)118
4795 y(the)28 b(same)f(as)h(the)f(conte)o(xt)g(w)o(ould)g(be)g(for)h
(compilation.)38 b(Those)27 b(forms)g(that)g(w)o(ould)118
4915 y(be)e(compiled)f(are)h(passed)g(to)f(the)h(function)f(Scanalyze.)
118 5136 y(Scanalyze-F)o(orm)j(recognizes)g(forms)g(such)f(as)h
(compiletime)e(bothtimes,)g(and)i(loadtime.)35 b(It)27
b(e)n(v)n(al-)118 5256 y(uates)e(each)g(at)g(compiletime)e(if)h(the)h
(compiler)f(w)o(ould)g(and)g(analyzes)h(each)g(if)g(the)f(compiler)g(w)
o(ould)118 5377 y(compile)31 b(it.)50 b(Actually)-6 b(,)31
b(it)g(recognizes)h(the)f(IGNORE)h(and)g(EV)-13 b(AL)30
b(\003ags)i(used)f(internally)g(by)g(the)118 5497 y(compiler)-5
b(.)31 b(This)24 b(means)h(that)g(if)g(analysis)f(is)h(started)g(in)g
(the)g(same)g(conte)o(xt)f(as)i(a)f(compilation,)e(dur)n(-)118
5618 y(ing)i(analysis)f(macros)h(are)h(de\002ned)g(in)f(the)g(same)g(w)
o(ay)h(in)f(both)f(cases,)i(as)f(are)h(wconsts,)f(if)g(systems)118
5738 y(e)o(xpand)j(the)h(same)g(w)o(ay)-6 b(,)29 b(the)g(same)g
(\224compiletime-loaded\224)e(modules)h(are)i(loaded,)f(etc..)44
b(In)29 b(PSL)118 5858 y(this)24 b(means)g(that)h(the)f(analysis)g
(conte)o(xt)g(v)o(ery)g(closely)h(matches)f(the)h(compilation)e(conte)o
(xt.)p eop
%%Page: 181 189
181 188 bop -118 -18 a Fg(17.2.)55 b(SCAN)m(AL)-10 b(YZER)2494
b Fr(181)-118 357 y Fq(\(scanalyze)25 b(FORM:f)n(orm)f(ENV)-9
b(:f)n(orm\):)31 b(f)n(orm)1589 b Fi(e)n(xpr)-99 478
y Fr(Analyzes)20 b(the)f(gi)n(v)o(en)f(form)h(\(s-e)o(xpression\))f(in)
h(the)h(gi)n(v)o(en)e(en)l(vironment.)27 b(The)20 b(v)n(alue)-118
598 y(returned)j(depends)g(on)f(whether)h(the)g(caller)g(has)g(set)g
(up)g(v)n(alues)f(for)h(functional)f(v)n(ari-)-118 718
y(ables)29 b(or)g(properties)f(that)h(this)f(function)g(is)h(sensiti)n
(v)o(e)e(to.)43 b(If)29 b(the)g(caller)h(has)e(set)h(up)-118
839 y(no)g(special)h(actions,)g(the)g(v)n(alue)f(returned)h(should)f
(be)h(the)f(same)h(that)f(the)h(function)-118 959 y(MA)l(CR)l(OEXP)-9
b(AND)25 b(w)o(ould)f(return.)-118 1275 y Fk(17.2.4)118
b(En)-5 b(vir)n(onment)31 b(Ar)o(guments)-118 1467 y
Fr(The)21 b(caller)h(can)f(set)g(up)g(special)g(actions)g(that)g(are)h
(in)e(tw)o(o)h(cate)o(gories.)29 b(These)21 b(are)h(\224analysis)f
(hooks\224)-118 1587 y(and)k(\224preprocessing)f(hooks\224.)-118
1709 y(The)30 b(ENV)g(ar)n(guments)g(to)g(v)n(arious)f(things)g(are)i
(en)l(vironments.)46 b(An)30 b(en)l(vironment)f(is)h(currently)g(a)-118
1830 y(list)25 b(of)i(\224frames\224.)36 b(Each)27 b(frame)f(is)g(a)h
(list)f(of)g(2)g(elements.)35 b(The)27 b(\002rst)f(identi\002es)g(the)g
(type)g(of)h(frame,)-118 1950 y(currently)34 b(al)o(w)o(ays)g('LOCALS.)
h(The)g(second)f(is)g(the)g(\224contents\224,)i(for)f(locals)f(a)g
(list)g(of)g(the)h(local)-118 2070 y(v)n(ariable)24 b(names.)-118
2377 y Fk(17.2.5)118 b(Analysis)30 b(Hooks)-118 2568
y Fr(The)c(scanalyzer)g(de\002nes)g(a)g(number)f(of)h(v)n(ariables)f
(that)h(the)f(user)h(may)g(gi)n(v)o(e)e(functional)h(v)n(alues)g(to.)
-118 2689 y(Some)34 b(support)f(the)h(user)g(of)h(this)e(module)g(in)h
(analyzing)f(code.)59 b(Others)34 b(pro)o(vide)f(the)h(means)g(to)-118
2809 y(preprocess)e(or)g(transform)f(code.)52 b(The)32
b(hooks)f(are)i(functional)d(v)n(ariables)i(of)g(2)f(ar)n(gs)h(\(e)o
(xpression)-118 2929 y(and)d(en)l(vironment\))f(to)g(attach)h(an)h
(analysis)e(function)g(to.)43 b(Each)29 b(of)g(these)g(must)f(either)h
(be)g(NIL)g(or)-118 3050 y(a)h(list)g(of)g(functions.)46
b(The)30 b(\002rst)g(three)h(of)f(these)g(hooks)f(are)i(called)f
(before)h(an)o(y)f(preprocessing)f(or)-118 3170 y(e)o(xpansion)e(of)h
(the)g(form)g(is)f(done;)j(the)e(last)f(is)h(called)g(after)h(all)f
(preprocessing)f(and)h(e)o(xpansion)f(of)-118 3290 y(a)e(form)g(is)f
(complete.)30 b(Scan-Macro-Hooks)25 b(Called)g(before)g(each)h(macro)f
(is)f(e)o(xpanded.)30 b(Scan-Fn-)-118 3411 y(Hooks)20
b(Called)i(before)g(descending)e(into)h(an)o(y)f(e)o(xpr)h(to)g
(analyze)h(it.)29 b(Scan-Non-P)o(air)n(-Hooks)21 b(Called)-118
3531 y(with)j(each)h(non-pair)g(e)o(xamined.)-118 3653
y(After)n(-Expansion-Hooks)41 b(Called)i(with)g(each)g(fully)g(e)o
(xpanded)f(e)o(xpression.)84 b(Not)42 b(applied)h(to)-118
3774 y(forms)24 b(such)h(as)g(macro)g(calls,)f(because)h(the)o(y)f(are)
i(e)o(xpanded)e(further)h(before)g(being)f(returned.)-118
4080 y Fk(17.2.6)118 b(Pr)n(operties)-118 4272 y Fr(These)28
b(are)g(check)o(ed)g(respecti)n(v)o(ely)e(before)j(and)e(after)i(an)e
(e)o(xpression)g(has)g(been)h(e)o(xpanded.)39 b(After)-118
4392 y(e)o(xpansion)f(means)h(that)f(the)h(call)h(has)f(been)g(e)o
(xpanded)g(until)f(it)g(is)h(not)g(a)g(macro)h(call,)i(and)e(all)-118
4512 y(sube)o(xpressions)25 b(ha)n(v)o(e)i(been)h(e)o(xpanded)e(also.)
38 b(If)28 b(the)f(car)h(of)g(an)f(e)o(xpression)f(is)h(an)g(id)g(that)
g(has)g(the)-118 4633 y(appropriate)f(property)-6 b(,)25
b(each)h(member)g(of)g(the)g(list)f(that)g(is)h(the)f(property)h(v)n
(alue)f(will)g(be)i(funcalled.)-118 4753 y(These)i(properties)g(are)h
(check)o(ed)g(at)g(the)f(same)g(points)f(where)i(the)f(scan-xxx)g
(hooks)g(are)h(check)o(ed.)-118 4874 y(Thus)24 b(it)g(is)h(of)g(no)f
(use)h(to)f(gi)n(v)o(e)g(a)h(macro)g(a)g(post-e)o(xpand-scanners)e
(property)-6 b(.)30 b(The)25 b(properties)f(are:)-118
4996 y(-)h(Pre-Expand-Scanners)-118 5118 y(-)g(Post-Expand-Scanners)
-118 5240 y(Pre-e)o(xpand-scanners)g(tak)o(e)g(precedence)h(o)o(v)o(er)
e(scan-macro-hooks)g(and)h(scan-fn-hooks.)-118 5547 y
Fk(17.2.7)118 b(Inf)m(ormation)30 b(Made)g(A)-12 b(v)o(ailable)30
b(By)g(Scanalyzer)-118 5738 y Fr(Current-Function)22
b(This)f(has)h(the)g(name)f(of)i(the)e(current)i(function)e(where)h
(that)g(can)g(be)g(determined.)-118 5858 y(F)o(orms)31
b(such)g(as)g(DE)h(and)f(DEFUN)h(that)f(e)o(xpand)f(into)h(calls)g(on)g
(PUTD)h(with)f(constant)f(function)p eop
%%Page: 182 190
182 189 bop 118 -18 a Fr(182)118 289 y(names)25 b(cause)g(this)f(to)g
(be)h(rebound)f(inside)g(analysis)g(of)h(the)g(function)f(body)g(ar)n
(gument.)118 414 y(Current-T)-8 b(op-Le)n(v)o(el-F)o(orm)23
b(Contains)h(the)g(ar)n(gument)f(that)h(w)o(as)g(passed)g(to)g(the)g
(call)g(on)g(scanalyze-)118 534 y(form)h(currently)f(being)h(e)o(x)o
(ecuted.)118 660 y(T)-8 b(op-Le)n(v)o(el-Code?)29 b(Is)21
b(T)g(for)g(e)o(xpressions)f(not)g(nested)h(in)f(an)o(y)h(in)l(v)n
(ocation)e(of)j(the)e(function)h(FUNC-)118 780 y(TION.)g(Expressions)f
(for)h(which)g(this)f(v)n(ariable)h(is)f(T)i(are)f(kno)n(wn)f(to)h(be)g
(performed)h(at)f(initialization)118 900 y(time.)118
1227 y Fk(17.2.8)119 b(Expansion)30 b(And)h(Pr)n(epr)n(ocessing)f
(Hooks)118 1425 y Fr(Special-Expander)d(Should)f(be)h(a)g(functional)f
(v)n(ariable)h(of)f(2)h(ar)n(guments)f(when)h(set)f(to)h(a)g(non-NIL)
118 1545 y(v)n(alue.)55 b(If)33 b(it)f(is,)j(and)e(if)g(the)f(similar)g
(functional)g(v)n(alue)h(of)g(e)o(xpand-specially?)54
b(is)32 b(non-NIL,)h(the)118 1665 y(special-e)o(xpander)24
b(function)g(will)g(be)h(used)g(to)f(e)o(xpand)g(the)h(form.)118
1791 y(Expand-Specially?)45 b(If)30 b(non-NIL,)g(we)g(use)f(special-e)o
(xpander)h(to)f(e)o(xpand)g(the)g(form.)46 b(Non-P)o(air)n(-)118
1911 y(Expander)21 b(Either)h(NIL)f(or)h(a)g(functional)e(v)n(alue)h
(of)h(2)f(ar)n(guments)g(used)g(to)g(e)o(xpand)g(e)o(xpressions)f(that)
118 2032 y(are)26 b(\224atomic\224.)118 2157 y(If)35
b(an)o(y)e(function)g(or)i(macro,)h(etc.has)e(an)g(Expr)n(-Expander)g
(property)-6 b(,)35 b(its)f(v)n(alue)f(must)g(be)h(a)h(2)f(ar)n(-)118
2277 y(gument)28 b(function)g(that)h(scans)g(and)g(e)o(xpands)f(e)o
(xpressions)g(whose)h(\002rst)g(element)g(is)f(that)h(id.)43
b(This)118 2398 y(module)24 b(pro)o(vides)f(se)n(v)o(eral)h(such)h
(functions)f(so)g(that)h(b)n(uilt-in)e(special)h(forms)h(can)g(be)g
(analyzed.)118 2523 y(Special-Expander)44 b(and)f(Non-P)o(air)n
(-Expander)f(ha)n(v)o(e)h(\002rst)g(priority)-6 b(.)84
b(Then)43 b(comes)g(an)o(y)g(Expr)n(-)118 2643 y(Expander)25
b(property)-6 b(.)30 b(Then)24 b(normal)g(processing)g(by)h(type)f(of)h
(function.)118 2970 y Fk(17.2.9)119 b(Cr)n(oss)28 b(Refer)n(ence)j
(Support)118 3168 y Fr(The)24 b(\003uid)f(xref-assertions)g(holds)g
(the)g(assertions)g(generated)h(by)f(xref-assert)i(and)e
(xref-assert-list,)118 3288 y(dumped)h(out)g(to)h(a)g(\002le)g(by)g
(scanalyze-\002le.)118 3632 y Fq(\(xr)n(ef-assert)h(A:assertion\):)31
b(assertion)1892 b Fi(e)n(xpr)118 3829 y Fq(\(xr)n(ef-assert-list)25
b(L:list\):)32 b(assertion-list)1830 b Fi(e)n(xpr)118
4176 y Fr(These)25 b(functions)f(add)g(the)h(single)f(assertion)g(or)h
(list)f(of)h(assertions)e(to)i(xref-assertions.)118 4520
y Fq(\(r)n(ecord-usage)i(EXPR:f)n(orm)e(ENV)-9 b(:f)n(orm\):)31
b(nil)1571 b Fi(e)n(xpr)151 4640 y Fr(Suitable)33 b(as)h(a)f(function)g
(to)g(be)g(applied)g(to)g(each)h(\(non-atomic\))e(e)o(xpression)g(and)
118 4761 y(sube)o(xpression)20 b(being)i(analyzed.)30
b(It)22 b(is)g(especially)f(suitable)g(as)i(an)f(after)n(-e)o(xpansion)
118 4881 y(hook.)29 b(Except)20 b(for)h(v)n(arious)f(special)g(cases)h
(described)f(belo)n(w)-6 b(,)20 b(record-usage)i(mak)o(es)118
5001 y(an)e(assertion)f(for)h(each)g(e)o(xpression)f(that)g(is)g(a)i
(function)d(call.)29 b(The)20 b(assertion)f(is)h(of)f(the)118
5122 y(form,)34 b(\()p Ff(<)p Fr(fn1)p Ff(>)d Fr(CALLS)i
Ff(<)p Fr(fn2)p Ff(>)p Fr(\))f(where)g Ff(<)p Fr(fn2)p
Ff(>)g Fr(is)g(the)g(function)f(being)g(called)118 5242
y(\(car)e(of)g(the)f(e)o(xpression\).)40 b Ff(<)p Fr(Fn1)p
Ff(>)29 b Fr(is)f(the)g(current-function,)h(or)f(if)g(that)g(is)g(NIL,)
h(it)118 5362 y(is)24 b(the)h(current-\002le.)118 5497
y(Record-usage)e(ignores)e(non-pair)h(e)o(xpressions.)28
b(Expressions)20 b(that)i(are)g(pairs)g(\(function)f(calls\))h(are)118
5618 y(check)o(ed)29 b(for)g(an)g(openfn)f(or)h(opencode)f(property)-6
b(,)29 b(which)f(w)o(ould)g(imply)f(that)h(the)o(y)g(are)i(compiled)118
5738 y(in-line.)35 b(No)27 b(assertion)f(is)g(made)g(for)h(these)g(or)f
(for)h(e)o(xpressions)e(where)i(the)g(function)f(part)g(\(car\))i(is)
118 5858 y(not)c(an)h(id.)p eop
%%Page: 183 191
183 190 bop -118 -18 a Fg(17.2.)55 b(SCAN)m(AL)-10 b(YZER)2494
b Fr(183)-118 289 y(If)35 b(the)g(function)g(being)f(called)h(has)g(a)h
(usage-asserter)f(property)-6 b(,)37 b(the)e(v)n(alue)f(of)h(that)g
(property)g(is)-118 409 y(funcalled)29 b(to)g(mak)o(e)g(whate)n(v)o(er)
g(assertions)f(it)h(will.)43 b(Otherwise)29 b(if)g(the)g(function)f(is)
h(\003agged)h(dont-)-118 529 y(record-usage,)25 b(no)g(assertion)f(is)g
(made.)-118 868 y Fq(\(r)n(ecord-macr)n(o-usage)j(EXPR:f)n(orm)e(ENV)-9
b(:f)n(orm\):)31 b(nil)1269 b Fi(e)n(xpr)-91 989 y Fr
(record-macro-usage)27 b(is)g(lik)o(e)f(record-usage,)i(b)n(ut)f(it)f
(is)g(for)h(macros)g(and)g(cmacros.)-118 1109 y(This)c(function)g(is)g
(suitable)g(as)h(a)g(scan-macro)g(hook.)30 b(The)23 b(assertions)g
(generated)h(by)-118 1230 y(this)c(function)h(in)g(the)g(usual)g(case)h
(are)g(\()p Ff(<)p Fr(fn1)p Ff(>)f Fr(USES-MA)l(CR)l(O)i
Ff(<)p Fr(macro)p Ff(>)p Fr(\))e(or)h(for)-118 1350 y(cmacros,)j(\()p
Ff(<)p Fr(fn1)p Ff(>)f Fr(USES-CMA)l(CR)l(O)j Ff(<)p
Fr(cmacro)p Ff(>)p Fr(\).)-118 1715 y Fq(\(setup-some-xr)n
(ef-actions\):)33 b(t)2194 b Fi(e)n(xpr)-97 1835 y Fr(The)21
b(programmer)f(who)h(lik)o(es)f(some)h(of)g(the)g(f)o(acilities)f(in)g
(this)g(module,)h(b)n(ut)f(doesn')n(t)-118 1956 y(w)o(ant)25
b(e)n(v)o(erything)f(here)i(can)g(just)e(load)h(the)g(module.)32
b(If)26 b(you)f(w)o(ant)g(to)g(use)g(the)h(f)o(acil-)-118
2076 y(ities)i(and)h(def)o(aults)g(a)n(v)n(ailable)f(in)h(the)g
(module,)g(call)g(this)f(function.)42 b(In)30 b(addition)d(to)-118
2197 y(setting)h(up)i(record-usage)g(and)g(record-macro-usage)g(as)g
(analysis)f(hooks,)h(it)f(\003ags)-118 2317 y(some)j(sets)h(of)g
(functions)f(as)h(not)g(ha)n(ving)f(their)h(usage)g(recorded.)56
b(It)33 b(also)g(sets)f(up)-118 2437 y(some)24 b(special)h(usage)f
(asserters)h(for)g(certain)g(functions.)-118 2588 y(The)e(v)n(alue)g
(of)g(each)h(of)f(these)g(v)n(ariables)f(is)h(a)h(list)e(of)h
(functions)f(\(or)h(macros)g(or)h(both\).)29 b(The)23
b(\224setup\224)-118 2708 y(function,)h(abo)o(v)o(e,)f(\003ags)j(each)f
(function)f(on)g(each)i(of)f(these)f(lists)g(as)h(dont-)f
(record-usage.)-118 3047 y Fq(k)o(er)o(nel-fns)i Fr(=)f([Initially:)k
(A)c(list)f(of)h(all)f(de\002ned)-118 3167 y(functions)g(in)g(a)h(PSL)h
(k)o(ernel.])2219 b Fi(global)-118 3515 y Fq(useful-fns)26
b Fr(=)f([Initially:)k(A)c(list)f(of)h(frequently-used)f(functions)-118
3635 y(and)h(macros)f(de\002ned)h(in)g(the)g(USEFUL)g(library)f
(module.])1191 b Fi(global)-118 3982 y Fq(object-fns)26
b Fr(=)f([Initially:)30 b(A)25 b(list)e(of)i(frequently-used)f
(functions)-118 4103 y(and)h(macros)f(in)h(the)f(OBJECTS)i(module.])
1755 b Fi(global)-118 4299 y Fr(The)22 b(follo)n(wing)e(are)j(special)e
(usage)h(asserters)h(for)f(certain)g(functions)f(and)h(macros.)29
b(See)23 b(the)f(source)-118 4420 y(code)j(for)g(details.)-118
4661 y(-)g(Load-Usage-Asserter)-118 4781 y(-)g(Imports-Usage-Asserter)
-118 4901 y(-)g(Send-Usage-Asserter)-118 5022 y(-)g
(Defmethod-Usage-Asserter)p eop
%%Page: 184 192
184 191 bop 118 -18 a Fr(184)p eop
%%Page: 185 193
185 192 bop -118 954 a Fn(Pr)l(ettyprinting)-118 1469
y Ft(18.1)142 b(Intr)m(oduction)-118 1694 y Fr(T)-8 b(o)25
b(access)g(the)g(prettyprinter)e(described)i(in)g(this)e(chapter)i(you)
g(must)f(load)g(the)h(module)e(PP)-11 b(.)-118 1815 y(A)37
b(prettyprinter)e(tak)o(es)i(as)g(input)f(a)h(stream)f(of)h(characters)
g(and)g(prints)f(them)g(with)g(aethetically)-118 1936
y(appropriate)24 b(indentations)f(and)i(line)g(breaks.)30
b(F)o(or)25 b(e)o(xample)-118 2170 y Fh(\(if)59 b(\(vectorp)f(data\))h
(\(vector-size)e(data\))h(\(if)h(\(stringp)f(data\))121
2290 y(\(string-length)f(data\))h(\(length)g(data\)\)\))-118
2524 y(\(if)h(\(vectorp)f(data\))1 2644 y(\(vector-size)g(data\))1
2764 y(\(if)i(\(stringp)e(data\))121 2885 y(\(string-length)f(data\))
121 3005 y(\(length)h(data\)\)\))-118 3349 y Ft(18.2)142
b(Pr)m(ettyprinting)33 b(Files)i(and)g(Data)-118 3575
y Fr(The)23 b(width)f(of)h(an)g(output)e(line)h(is)h(de\002ned)g(by)g
(def)o(ault)f(to)h(be)g(75.)29 b(Y)-11 b(ou)23 b(can)g(modify)f(this)g
(by)g(passing)-118 3695 y(the)j(desired)f(width)g(to)g(the)h(function)f
(line-width.)-118 4035 y Fq(\(pp-\002le)i(SOURCE:string)g(DESTIN)n(A)-9
b(TION:string\):)-118 4155 y(unde\002ned)2950 b Fi(e)n(xpr)-83
4275 y Fr(This)35 b(function)g(is)g(used)g(to)g(prettyprint)f(the)i
(contents)e(of)i(one)f(\002le)h(into)f(another)-5 b(.)-118
4396 y(There)34 b(must)e(be)i(tw)o(o)f(ar)n(guments,)h(the)g(\002rst)f
(is)g(a)h(string)f(representing)g(the)g(source)-118 4516
y(\002le)26 b(name,)g(the)g(second)g(is)f(a)i(string)e(representing)g
(the)h(destination)e(\002le)j(name.)34 b(The)-118 4637
y(\002rst)i(ar)n(gument)f(to)g(top)g(le)n(v)o(el)g(applications)f(of)i
(de,)j(df,)f(dm,)g(ds,)g(dn,)g(defmethod,)-118 4757 y(def)n(\003a)n(v)n
(or)l(,)i(and)e(defmacro)f(is)g(printed)g(once)g(the)g(form)g(has)g
(been)h(written)e(to)h(the)-118 4877 y(\002le.)-118 5227
y Fq(\(pp-object)27 b(E:f)n(orm\):)32 b(unde\002ned)2055
b Fi(fe)n(xpr)-82 5347 y Fr(This)35 b(function)f(will)h(prettyprint)g
(the)g(PSL)h(data)g(object)f(E.)h(Pp-object)g(will)e(also)-118
5467 y(accept)k(tw)o(o)g(optional)e(ar)n(guments.)69
b(The)38 b(output)f(may)g(be)h(directed)g(to)g(a)g(\002le)g(by)-118
5588 y(including)30 b(a)j(string)e(which)g(represents)h(the)g(\002le)g
(name.)52 b(Indentation)31 b(is)h(speci\002ed)-118 5708
y(with)38 b(an)h(inte)o(ger)-5 b(.)73 b(Both)39 b(of)g(these)g
(optional)f(ar)n(guments)g(must)g(be)i(preceded)f(by)-118
5828 y(special)24 b(identi\002ers,)h(:indent)e(for)j(indentation,)d
(:sink)g(for)i(redirection)g(of)g(output.)1579 6066 y(185)p
eop
%%Page: 186 194
186 193 bop 118 -18 a Fr(186)118 289 y Ft(18.3)143 b(F)l(ormats)118
512 y Fr(Suppose)24 b(we)f(de\002ne)i(the)e(follo)n(wing)f(data)i
(structure)f(\(in)h(the)f(discussion)f(which)h(follo)n(ws)f(it)i(will)e
(be)118 633 y(assumed)i(that)g(the)h(selector)g(functions)f(form,)g
(root,)g(and)h(suf)n(\002x)f(ha)n(v)o(e)h(been)g(de\002ned\).)118
828 y Fh(\(NAMED-FORM)57 b(<form>)i(<root>)f(<suffix>\))118
1023 y Fr(Furthermore,)25 b(we)g(w)o(ould)f(lik)o(e)118
1218 y Fh(\(named-form)57 b(\(+)j(left)f(right\))f(argument)g(1\))118
1413 y Fr(to)25 b(be)f(printed)h(in)f(the)h(form:)118
1591 y Fh(argument1:)58 b(\(+)h(left)g(right\))118 1770
y Fr(The)23 b(format)f(de\002nition)g(which)h(follo)n(ws)e(could)h(be)h
(used)f(to)h(specify)f(that)h(named-forms)f(should)f(be)118
1890 y(printed)26 b(out)g(in)g(the)g(abo)o(v)o(e)f(w)o(ay)-6
b(.)35 b(Deformat)26 b(will)g(con)l(v)o(ert)g(e)n(v)o(erything)e(which)
i(follo)n(ws)f(its)h(second)118 2010 y(ar)n(gument)h(into)f(a)i
(formatting)e(function.)37 b(In)28 b(the)f(e)o(xample)f(belo)n(w)-6
b(,)27 b(this)f(formatting)g(function)g(will)118 2131
y(be)h(used)f(to)h(format)f(lists)f(which)i(ha)n(v)o(e)f(the)g
(identifer)h(named-form)f(as)h(their)f(\002rst)h(element.)36
b(When)118 2251 y(such)20 b(a)h(list)f(is)g(passed)g(to)g(it,)h(the)g
(function)e(creates)i(a)g(sequence)g(of)g(format)f(instructions,)f
(specifying)118 2372 y(what)25 b(should)e(be)i(printed)f(corresponding)
g(to)h(the)f(list.)118 2567 y Fh(\(deformat)58 b(\(named-form\))f
(\(item\))238 2687 y(\(template)g('\({)j(*)f(*)h(":")f([i)g(1)h(2])f(*)
g(}\))h(\(root)e(item\))238 2807 y(\(suffix)g(item\))h(\(form)f
(item\)\)\))118 3002 y Fr(The)40 b(function)e(template)h(creates)h(a)g
(sequence)f(of)h(formatting)e(instructions)g(for)h(its)g(ar)n(guments)
118 3123 y(based)32 b(on)h(directions)e(speci\002ed)i(by)f(the)g
(template)f(\(the)i(\002rst)f(ar)n(gument\).)54 b(The)32
b(template)f(in)h(this)118 3243 y(e)o(xample)f(can)g(be)h(understood)e
(as)i(follo)n(ws:)42 b(The)63 b(and)g(specify)31 b(that)g(the)g
(components)f(between)118 3364 y(them)22 b(should)f(be)i(treated)g(as)f
(a)h(single)f(logical)g(unit)f(when)i(the)o(y)f(are)h(printed)f(and)g
(that)g(an)h(outer)g(pair)118 3484 y(of)28 b(parentheses)f(should)g(be)
h(printed.)38 b(The)28 b(three)g(*')-5 b(s)27 b(sho)n(w)f(where)i(the)g
(three)g(components)e(of)i(the)118 3604 y(data)d(structure)g(should)f
(be)i(printed.)31 b(The)25 b(\224:\224)h(speci\002es)f(that)g(a)g
(colon)g(should)f(be)h(printed)g(after)h(the)118 3725
y(suf)n(\002x.)56 b(The)33 b(v)o(ector)g([I)g(1)g(2])h(corresponds)e
(to)h(a)h(conditional)d(line)i(break.)56 b(If)34 b(there)f(is)g(suf)n
(\002cient)118 3845 y(room)c(for)g(the)g(form)g(then)f(a)i(single)e
(space)h(is)g(printed)f(\(this)h(is)f(speci\002ed)i(by)e(the)h(second)g
(element)118 3966 y(of)21 b(the)f(v)o(ector\).)29 b(Otherwise)20
b(a)h(line)f(break)g(follo)n(wed)g(by)g(an)g(indentation)f(of)i(tw)o(o)
f(spaces)g(is)g(inserted.)118 4206 y(A)25 b(template)f(may)g(consist)g
(of)h(the)g(follo)n(wing)d(symbols:)263 4385 y Fl(\017)49
b Fr(The)31 b(prettyprinter)e(will)h(break)h(onto)f(dif)n(ferent)g
(lines)g(as)h(fe)n(w)f(logical)g(blocks)g(as)h(possible.)362
4505 y(The)25 b(left)f(angle)h(brack)o(et)g(\()p Ff(<)p
Fr(\),denotes)f(the)h(be)o(ginning)d(of)j(a)g(block,)f(the)h(right)f
(angle)g(brack)o(et)362 4626 y(\()p Ff(>)p Fr(\),)h(denotes)f(the)h
(end)g(of)g(a)g(block.)30 b(It)25 b(is)f(assumed)g(that)g(these)h
(brack)o(ets)g(balance.)263 4821 y Fl(\017)49 b Fr(Left)20
b(and)f(right)g(braces)i(\()f(and)f(\))h(are)h(also)e(to)g(de\002ne)i
(logical)e(blocks)g(which)g(should)f(be)i(printed)362
4941 y(within)k(a)h(pair)f(of)h(parentheses.)263 5136
y Fl(\017)49 b Fr(There)33 b(are)g(tw)o(o)g(dif)n(ferent)f(types)g(of)h
(blanks,)h(the)e(terms)g(consistent)f(and)i(inconsistent)e(are)362
5256 y(used)h(to)h(describe)g(them.)54 b(Note)32 b(that)h(blanks)f(may)
g(only)g(appear)h(within)f(a)h(logical)f(block.)362 5377
y(If)f(each)g(blank)f(within)f(a)i(block)f(is)f(consistent)g(and)i(the)
f(block)g(will)f(not)h(\002t)h(on)f(the)g(current)362
5497 y(line)23 b(of)h(output)f(then)g(each)h(sub-block)f(of)h(the)f
(block)h(will)e(be)i(placed)g(on)f(a)i(ne)n(w)e(line,)g(if)h(each)362
5618 y(blank)30 b(is)h(inconsistent)e(then)h(ne)n(w)h(lines)f(will)g
(be)h(forced)g(only)f(when)h(it)f(is)h(necessary)-6 b(.)49
b(F)o(or)362 5738 y(e)o(xample,)26 b(the)g(\002rst)g(result)g(will)f
(occur)i(if)f(the)g(blanks)f(are)i(inconsistent,)e(the)h(second)g(if)g
(the)o(y)362 5858 y(are)g(consistent.)p eop
%%Page: 187 195
187 194 bop -118 -18 a Fg(18.4.)55 b(DISP)-9 b(A)e(TCH)2673
b Fr(187)241 289 y Fh(\(one)58 b(two)i(three)300 409
y(four\))241 650 y(\(one)300 770 y(two)300 891 y(three)300
1011 y(four\))-118 1240 y Fr(In)30 b(general)g(if)g(a)g(block)g(will)f
(not)g(\002t)h(on)g(the)g(current)g(line)f(of)h(output)f(then)h(each)g
(consistent)f(blank)-118 1360 y(corresponds)22 b(to)h(a)g(ne)n(w)f
(line,)h(inconsistent)e(blanks)h(will)g(print)g(as)h(spaces)g(unless)f
(it)g(is)h(necessary)g(to)-118 1481 y(force)k(a)g(ne)n(w)g(line.)36
b(There)27 b(is)f(a)i(length)d(and)i(an)g(of)n(fset)f(associated)h
(with)f(each)h(blank,)g(if)f(a)i(blank)e(is)-118 1601
y(treated)h(as)g(a)h(space)f(then)g(the)g(length)g(represents)g(the)g
(number)f(of)h(spaces)h(which)e(will)h(be)g(printed.)-118
1721 y(If)g(a)g(blank)g(is)f(treated)h(as)g(a)g(break)g(to)g(a)g(ne)n
(w)f(line)g(then)h(the)f(of)n(fset)h(is)f(used)h(for)g(indentation)e
(on)h(the)-118 1842 y(ne)n(w)21 b(line.)30 b(Indentation)21
b(is)g(from)h(the)g(horizontal)f(position)f(of)i(the)g(\002rst)g
(character)h(of)f(the)g(innermost)-118 1962 y(logical)i(block.)30
b(F)o(or)25 b(e)o(xample,)181 2191 y Fh(\(template)58
b('\({)h(*)g({)h(\(*)f([c)g(1)h(1]\))f(})h(}\))779 2311
y('\(function)d(\(arg-one)h(arg-two\)\)\))-118 2540 y
Fr(will)24 b(result)g(in)181 2769 y Fh(\(function)58
b(\(arg-one)838 2890 y(arg-two\)\))-118 3118 y Fr(assuming)30
b(that)h(it)g(is)f(necessary)i(to)f(force)h(a)g(line)f(break.)51
b(The)31 b(consistent)f(blank)h(within)f(the)h(call)-118
3239 y(the)c(template)g(speci\002es)g(an)g(of)n(fset)g(of)h(one.)38
b(The)27 b(\002rst)g(character)i(of)e(the)g(innermost)f(logical)h
(block)-118 3359 y(is)35 b(the)h(second)f(left)h(parenthesis,)i(from)d
(its)g(position)f(the)i(printer)f(indented)g(a)h(single)f(space.)64
b(A)-118 3480 y(blank)23 b(is)g(represented)h(by)g(a)g(v)o(ector)l(,)g
(the)f(\002rst)h(entry)g(should)e(be)i(either)g(an)g(I)g(or)g(C,)g
(these)f(characters)-118 3600 y(designate)d(the)h(type)f(of)h(the)g
(blank,)g(I)g(for)g(inconsistent)e(and)i(C)g(for)h(consistent.)28
b(The)20 b(second)h(entry)g(is)-118 3720 y(a)27 b(positi)n(v)o(e)d
(inte)o(ger)i(which)g(represents)h(length,)f(and)g(the)h(third)f(is)g
(a)h(positi)n(v)o(e)d(inte)o(ger)i(representing)-118
3841 y(indentation.)44 b(The)29 b(algorithm)f(e)o(xpects)h(to)h(\002nd)
g(a)g(blank)f(after)h(each)g(occurence)h(of)e(a)h(right)f(angle)-118
3961 y(brack)o(et,)k(if)e(the)g(formats)g(which)f(ha)n(v)o(e)h(been)g
(pro)o(vided)f(do)h(not)g(follo)n(w)f(this)g(con)l(v)o(ention)f(then)i
(an)-118 4081 y(inconsistent)26 b(blank)h(with)g(length)g(and)h(of)n
(fset)f(set)h(to)f(zero)i(will)e(be)h(inserted)f(after)i(the)e(right)g
(angle)-118 4202 y(brack)o(et.)27 4406 y Fl(\017)49 b
Fr(An)23 b(asterisk)g(\(*\))g(is)g(used)g(to)g(mak)o(e)h(a)f(recursi)n
(v)o(e)g(call)g(on)g(dispatch.)30 b(Dispatch)22 b(is)h(responsible)126
4526 y(for)i(applying)e(the)i(appropriate)g(formatting)e(function)h(to)
h(an)g(e)o(xpression)27 4730 y Fl(\017)49 b Fr(Strings,)24
b(the)h(te)o(xt)e(of)i(the)g(string)f(is)g(included)g(in)h(the)f
(output.)27 4934 y Fl(\017)49 b Fr(A)21 b(sublist)f(of)h(format)g
(symbols)f(may)h(also)g(appear)g(within)f(the)i(list)e(of)h(format)g
(symbols.)28 b(This)126 5054 y(list)j(may)h(contain)f(blanks)h(or)g
(asterisks)f(and)h(is)g(used)g(repetiti)n(v)o(ely)e(until)h(a)h
(corresponding)126 5174 y(list)24 b(of)g(e)o(xpressions)g(is)g(e)o
(xhausted.)-118 5514 y Ft(18.4)142 b(Dispatch)1 5738
y Fh(\(de)60 b(dispatch)e(\(item)g(depth\))121 5858 y(\(cond)h
(\(\(instance)e(item\))p eop
%%Page: 188 196
188 195 bop 118 -18 a Fr(188)776 289 y Fh(\(apply)58
b(\(find-instance-template)d(item\))1194 409 y(\(list)k(item)g
(depth\)\)\))716 529 y(\(\(atom)f(item\))776 650 y(\(apply)g
(\(find-atom-template)e(item\))1194 770 y(\(list)j(item)g(depth\)\)\))
716 891 y(\(\(>)g(depth)g(*maxdepth*\))e(\(add-tokens)g("#"\)\))716
1011 y(\(\(has-template)g(item\))776 1131 y(\(apply)h(\(get-template)f
(item\))1194 1252 y(\(list)i(item)g(\(add1)f(depth\)\)\)\))716
1372 y(\(t)h(\(default-template)d(item)j(\(add1)g(depth\)\)\)\)\)\)\))
118 1872 y Fr(It)26 b(is)g(useful)g(to)g(kno)n(w)f(ho)n(w)g(this)h
(function)f(associates)h(a)g(format)g(function)g(with)f(an)h(e)o
(xpression.)34 b(If)118 1992 y(the)22 b(e)o(xpression)g(is)g(an)g
(instance)g(of)h(a)g(\003a)n(v)n(or)g(then)f(the)g(dispatch)g(function)
g(will)f(search)i(for)g(a)g(format)118 2113 y(function)i(associated)h
(with)f(the)h(name)g(of)g(the)g(\003a)n(v)n(or)-5 b(.)34
b(F)o(or)26 b(other)g(atomic)f(e)o(xpressions,)g(the)g(type)h(is)118
2233 y(used)e(to)g(locate)g(a)g(format)g(function.)30
b(Currently)24 b(there)g(are)h(format)f(functions)f(for)h(v)o(ectors,)g
(strings,)118 2353 y(numbers,)k(code-pointers)f(and)g(identi\002ers.)39
b(If)28 b(the)g(e)o(xpression)e(is)i(a)g(list)e(and)i(the)f(\002rst)h
(element)f(of)118 2474 y(this)g(list)g(is)h(an)g(identi\002er)g(then)f
(an)h(attempt)f(is)h(made)g(to)f(\002nd)i(a)f(format)g(function)f
(associated)g(with)118 2594 y(the)k(identi\002er)-5 b(.)49
b(Before)32 b(resorting)e(to)h(a)g(def)o(ault)g(a)g(check)h(is)e(made)h
(for)g(function)f(application)g(for)118 2714 y(which)25
b(there)g(is)f(a)h(separate)g(def)o(ault)g(format)f(function.)118
2874 y(Function)29 b(application)f(is)h(recognized)h(when)f(the)g
(\002rst)g(element)g(of)h(the)f(list)f(is)h(a)h(lambda)f(e)o(xpres-)118
2994 y(sion,)22 b(an)i(application)d(of)i(getd)g(to)f(the)h(\002rst)g
(element)g(returns)f(a)i(non-nil)e(v)n(alue,)g(or)h(the)g(\002rst)g
(element)118 3114 y(is)h(an)h(id)f(which)g(is)g(a)h(member)f(of)h(a)f
(global)g(list)g(named)g(*function)p 2485 3114 30 4 v
35 w(names*.)30 b(This)23 b(list)h(of)g(function)118
3235 y(names)35 b(is)f(useful)h(for)g(prettyprinting)e(a)j(\002le)f
(since)g(a)h(\002le)f(will)f(normally)g(contain)h(a)g(number)f(of)118
3355 y(applications)d(of)i(functions)f(de\002ned)h(within)e(the)i
(\002le)g(itself.)53 b(The)33 b(fe)o(xpr)g(add-functions)e(accepts)118
3476 y(an)o(y)24 b(number)h(of)g(function)e(names)i(and)g(adds)f(then)h
(to)f(*function)p 2423 3476 V 35 w(names*.)118 3635 y(W)l(ith)d
(respect)g(to)g(lists,)g(an)o(y)f(sub-e)o(xpression)g(belo)n(w)g(a)i
(maximum)d(depth)i(is)f(printed)h(as)g Fh(`#')p Fr(.)29
b(Once)118 3755 y(the)24 b(maximum)e(length)h(of)h(a)h(list)e(has)g
(been)i(reached)f(the)g(display)f(of)h(the)g(remaining)f(elements)g
(will)118 3875 y(be)28 b(`...)-7 b('.)40 b(The)27 b(maximum)f(depth)h
(\(initially)f(10\))i(and)g(length)f(\(initially)f(25\))h(can)h(be)g
(modi\002ed)f(with)118 3996 y(the)e(functions)e(ne)n(w-depth)h(and)h
(ne)n(w-length.)118 4583 y Ft(18.5)143 b(Specifying)33
b(F)l(ormats)118 5106 y Fq(\(def)n(ormat)26 b(N)n(AME:pair)f(P)-7
b(ARAM:id-list)24 b([BOD)l(Y)-9 b(:f)n(orms]\):)31 b(nil)861
b Fi(fe)n(xpr)139 5227 y Fr(Deformat)20 b(is)g(used)g(to)g(de\002ne)h
(format)f(functions)g(for)h(PSL)g(e)o(xpressions.)27
b(The)21 b(car)g(of)118 5347 y(N)m(AME)k(should)g(be)h(a)h(list)d(of)j
(identi\002ers)e(\(it)h(may)g(also)f(be)i(a)f(single)f(identi\002er\),)
h(the)118 5467 y(cdr)20 b(should)e(be)i(nil)f(for)h(atomic)f(e)o
(xpressions)f(or)h(an)h(inte)o(ger)f(representing)g(a)h(minimal)118
5588 y(length)33 b(for)h(lists.)55 b(P)-9 b(ARAM)34 b(is)f(a)h(list)f
(containing)f(a)i(single)e(id,)k(when)d(the)h(format)118
5708 y(function)28 b(is)g(used)h(P)-9 b(ARAM)29 b(will)f(be)h(bound)f
(to)g(the)h(e)o(xpression)f(being)g(formatted.)118 5828
y(F)o(ormats)c(are)i(de\002ned)f(by)f(calls)h(on)f(template)g
(\(described)h(belo)n(w\).)p eop
%%Page: 189 197
189 196 bop -118 -18 a Fg(18.5.)55 b(SPECIFYING)26 b(FORMA)-11
b(TS)2080 b Fr(189)-118 357 y Fq(\(template)26 b(FORMA)-9
b(T)i(:list)23 b([COMPONENT)-7 b(:f)n(orm]\):)31 b(any)1042
b Fi(macr)l(o)-85 478 y Fr(FORMA)-11 b(T)33 b(is)g(a)h(list)e(of)h
(format)g(symbols)e(\(described)i(abo)o(v)o(e\).)55 b(Each)33
b(COMPO-)-118 598 y(NENT)e(should)e(correspond)i(to)g(a)g(call)g(on)g
(dispatch)f(\(*\),)j(in)e(FORMA)-11 b(T)k(.)30 b(If)i(a)f(sub-)-118
718 y(list)i(of)i(format)f(symbols)f(in)h(included)g(within)f(FORMA)-11
b(T)35 b(then)f(there)h(must)e(be)i(a)-118 839 y(corresponding)24
b(list)g(of)g(components.)-118 989 y(This)d(\002rst)h(e)o(xample)f
(illustrates)g(a)h(format)g(for)g(quoted)f(e)o(xpressions.)28
b(F)o(or)22 b(e)o(xample,)g('ANY)g(instead)-118 1110
y(of)k(\(Q)o(UO)l(TE)f(ANY\).)h(A)g(minimal)e(length)g(of)i(tw)o(o)f
(is)h(gi)n(v)o(en,)e(since)i(the)f(list)g(\(Q)o(UO)l(TE\))g(should)g
(not)-118 1230 y(be)g(printed)f(as)h('.)31 b(The)25 b(ar)n(gument)f(to)
g(quote)h(is)f(formatted)g(by)h(a)g(separate)g(call)g(on)g(dispatch.)
-118 1457 y Fh(\(deformat)58 b(\(quote)g(.)i(2\))f(\(item\))1
1577 y(\(template)f('\("'")h(*\))g(\(second)f(item\)\)\))-118
1804 y Fr(The)35 b(elements)g(of)g(a)h(v)o(ector)f(should)f(be)i
(enclosed)f(within)f(square)i(brack)o(ets.)62 b(Since)36
b(the)f(length)-118 1925 y(of)c(v)o(ectors)e(will)h(v)n(ary)g(a)h(list)
f(of)h(format)f(symbols)f(is)h(supplied)f(to)h(be)h(used)f(repetiti)n
(v)o(ely)f(for)i(each)-118 2045 y(element.)e(This)20
b(list)f(will)h(be)h(matched)f(against)f(a)i(corresponding)f(list)f(of)
i(components,)f(\(v)o(ector2list)-118 2165 y(item\).)35
b(Each)27 b(element)f(is)g(formatted)g(by)h(a)f(recursi)n(v)o(e)g(call)
h(on)f(dispatch.)35 b(Elements)26 b(are)h(separated)-118
2286 y(by)d(inconsistent)f(blanks,)g(therefore)i(if)g(the)f(entire)h(v)
o(ector)f(does)g(not)g(\002t)g(on)h(a)f(single)g(line)g(the)g(ouput)
-118 2406 y(will)g(be)h(something)e(lik)o(e)-118 2609
y Fh([one)59 b(two)g(three)-58 2729 y(four])-118 2970
y(\(deformat)f(\(vector\))g(\(item\))1 3090 y(\(template)g('\(<)h("[")g
(\(*)h([i)f(1)h(1]\))f("]")g(>\))g(\(vector2list)e(item\)\)\))-118
3293 y Fr(Gi)n(v)o(en)23 b(the)i(e)o(xpression)e(\(setq)i(n-one)g
(v-one)g(n-tw)o(o)f(v-tw)o(o\))-118 3520 y Fh(\(setq)59
b(n-one)f(v-one)241 3640 y(n-two)g(v-two\))-118 3867
y Fr(is)24 b(preferred)i(o)o(v)o(er)-118 4094 y Fh(\(setq)59
b(n-one)f(v-one)h(n-two)-58 4214 y(v-two\))-118 4441
y Fr(The)25 b(follo)n(wing)e(can)i(be)g(used)f(to)h(obtain)f(the)g
(preferred)i(output.)-118 4668 y Fh(\(deformat)58 b(\(\(set)g(setq\))h
(.)h(3\))f(\(item\))1 4789 y(\(template)f('\({)h(*)h(")f(")h(<)g(\(*)f
([i)g(1)h(1])f(*)h([c)f(1)g(0]\))h(>)f(}\))599 4909 y(\(first)g(item\))
f(\(rest)h(item\)\)\))-118 5136 y Fr(The)32 b(\002rst)g(form)g(of)g
(ouput)f(is)h(obtained)f(by)h(using)f(inconsistent)f(blanks)h(after)i
(the)f(names)f(\(n-one)-118 5256 y(and)20 b(n-tw)o(o\))g(and)h
(consistent)e(blanks)h(after)h(the)f(v)n(alues)g(\(v-one)g(and)h(v-tw)o
(o\).)29 b(When)20 b(this)g(e)o(xpression)-118 5377 y(will)j(not)h
(\002t)g(on)g(a)h(single)e(line)h(the)g(consistent)e(blanks)i(will)f
(correspond)h(to)g(line)g(breaks)g(and)g(unless)-118
5497 y(a)36 b(v)n(alue)f(is)h(too)f(lar)n(ge)h(to)g(\002t)g(on)g(an)g
(output)e(line,)k(the)e(inconsistent)e(blanks)h(will)g(correspond)h(to)
-118 5618 y(spaces.)g(The)26 b(zero)i(of)n(fset)e(associated)g(with)f
(the)i(consistent)e(blanks)h(corresponds)g(to)g(the)g(block)g(of)-118
5738 y(names)31 b(and)g(v)n(alues.)50 b(This)30 b(is)h(why)g(the)g
(names)g(line)g(up)g(within)f(a)i(column.)49 b(If)32
b(the)f(inner)g(logical)-118 5858 y(brack)o(ets)25 b(were)g(omitted)f
(the)g(output)g(w)o(ould)g(look)g(something)f(lik)o(e)p
eop
%%Page: 190 198
190 197 bop 118 -18 a Fr(190)118 289 y Fh(\(setq)59 b(n-one)f(v-one)178
409 y(n-two)h(v-two\))118 637 y Fr(assuming)28 b(that)i(the)f(e)o
(xpression)g(w)o(ould)g(not)g(\002t)h(on)f(a)h(single)f(line.)45
b(Notice)30 b(that)f(the)h(format)f(for)h(a)118 758 y(single)24
b(pair)h(\(name)g(and)f(v)n(alue\))h(is)f(used)h(repetiti)n(v)o(ely)-6
b(.)118 878 y(A)25 b(format)g(function)g(may)g(contain)f(more)h(than)g
(one)h(call)f(on)g(template.)31 b(The)25 b(tw)o(o)g(functions)f(belo)n
(w)118 999 y(are)i(equi)n(v)n(alent.)118 1227 y Fh(\(deformat)58
b(\(lambda)g(.)i(3\))f(\(item\))238 1347 y(\(template)e('\({)j(*)f([i)g
(1)h(1]\))f(\(first)f(item\)\))238 1468 y(\(if)h(\(null)f(\(second)h
(item\)\))357 1588 y(\(template)f('\("\(\)")g([c)i(1)f(1])h(\(*)f([c)g
(1)h(1]\))f(}\))955 1708 y(\(rest)g(\(rest)f(item\)\)\))357
1829 y(\(template)g('\(\(*)h([c)g(1)h(1]\))f(}\))g(\(rest)g
(item\)\)\)\))118 2070 y(\(deformat)f(\(lambda)g(.)i(3\))f(\(item\))238
2190 y(\(template)e('\({)j(*)f([i)g(1)h(1])f(\(*)h([c)f(1)g(1]\))h(}\))
835 2310 y(\(first)f(item\))835 2431 y(\(cons)g(\(if)g(\(null)g
(\(second)f(item\)\))g('!\(!\))h(\(second)f(item\)\))1194
2551 y(\(rest)h(\(rest)f(item\)\)\)\)\))p eop
%%Page: 191 199
191 198 bop -118 954 a Fn(The)51 b(Objects)f(Module)-118
1469 y Ft(19.1)142 b(Intr)m(oduction)-118 1695 y Fr(The)26
b Fq(objects)h Fr(module)e(pro)o(vides)g(simple)g(support)g(for)h
(object-oriented)f(programming)g(in)h(PSL.)g(It)-118
1815 y(is)d(based)h(on)f(the)h(\224\003a)n(v)n(ors\224)g(f)o(acility)f
(of)h(the)f(LISP)i(machine,)e(which)g(is)h(the)f(source)h(of)g(its)e
(terminol-)-118 1935 y(ogy)-6 b(.)29 b(The)23 b(LISP)h(Machine)f
(Manual)g(contains)f(a)h(much)g(longer)f(introduction)g(to)g(the)h
(idea)h(of)f(object)-118 2056 y(oriented)j(programming,)e(generic)j
(operations,)e(and)h(the)g(\003a)n(v)n(ors)g(f)o(acility)g(in)g
(particular)-5 b(.)33 b(This)26 b(dis-)-118 2176 y(cussion)f(brie\003y)
h(co)o(v)o(ers)f(the)g(basics)h(of)g(using)e(objects)h(to)h(gi)n(v)o(e)
e(you)i(an)g(idea)f(of)h(what)g(is)f(in)l(v)n(olv)o(ed;)-118
2296 y(then)f(it)h(e)o(xplains)e(the)i(details.)-118
2597 y Fk(19.1.1)118 b(T)-11 b(erminology)-118 2786 y
Fr(An)25 b(object)f(datatype)g(is)h(kno)n(wn)e(as)i(a)g(\003a)n(v)n(or)
-5 b(.)31 b(It)25 b(can)g(be)g(thought)e(of)i(in)g(tw)o(o)f(parts:)2
3020 y(1.)49 b(A)25 b(template)f(that)g(de\002nes)h(the)g
(characteristics)g(of)f(the)h(\003a)n(v)n(or)-5 b(.)2
3228 y(2.)49 b(A)25 b(set)f(of)h(operations)f(that)g(can)i(be)f
(performed)f(on)h(the)g(\003a)n(v)n(or)-5 b(.)-118 3462
y(The)28 b(template)f(that)g(de\002nes)h(the)g(characteristics)g(of)g
(a)g(\003a)n(v)n(or)g(is)g(kno)n(wn)e(as)i(the)g(\003a)n(v)n(or)g
(de\002nition.)-118 3583 y(It)i(is)g(created)i(by)e(the)g(macro)h(def)n
(\003a)n(v)n(or)-5 b(.)47 b(Each)31 b(operation)f(that)g(can)h(be)f
(performed)h(on)f(an)h(object)-118 3703 y(is)26 b(kno)n(wn)f(as)i(a)g
(method)f(de\002nition.)35 b(The)o(y)26 b(are)h(created)h(by)e(the)h
(macro)f(defmethod.)36 b(In)l(v)n(oking)25 b(an)-118
3823 y(operation)31 b(on)g(an)h(object)f(is)g(kno)n(wn)g(as)h(sending)e
(an)i(object)f(a)h(message.)51 b(A)32 b(created)g(object)f(of)h(a)-118
3944 y(gi)n(v)o(en)23 b(\003a)n(v)n(or)j(is)e(kno)n(wn)f(as)i(an)g
(instance)g(of)g(that)f(\003a)n(v)n(or)-5 b(.)-118 4065
y(Example)24 b(of)h(a)g(\003a)n(v)n(or)g(de\002nition)f(is:)-118
4300 y Fh(\(defflavor)57 b(complex-number)539 4420 y(\(real-part)599
4541 y(\(imaginary-part)g(0.0\))599 4661 y(\))539 4782
y(\(\))539 4902 y(gettable-instance-variables)539 5022
y(initable-instance-variables)539 5143 y(\))-118 5377
y Fr(A)29 b(\003a)n(v)n(or)g(de\002nition)f(speci\002es)g(the)h
(\002elds,)g(or)g(in)f(our)h(terminology)-6 b(,)27 b(the)i(instance)f
(v)n(ariables,)h(that)-118 5497 y(each)37 b(object)e(of)i(that)e(\003a)
n(v)n(or)i(is)f(to)g(ha)n(v)o(e.)64 b(In)36 b(the)g(e)o(xample)f(abo)o
(v)o(e,)j(the)e(instance)g(v)n(ariables)g(are)-118 5618
y(REAL-P)-9 b(AR)j(T)20 b(and)e(IMA)l(GIN)m(AR)-6 b(Y)-11
b(-P)i(AR)j(T)f(.)19 b(The)f(mention)g(of)h(the)f(instance)h(v)n
(ariable)f(IMA)l(GIN)m(AR)-6 b(Y)-11 b(-)-118 5738 y(P)i(AR)j(T)23
b(indicated)e(that)h(by)g(def)o(ault)g(the)g(imaginary)f(part)i(of)f(a)
g(comple)o(x)f(number)h(will)f(be)i(initialized)-118
5858 y(to)h(0.0.)31 b(There)25 b(is)f(no)h(def)o(ault)f(initialization)
f(for)i(REAL-P)-9 b(AR)j(T)f(.)1579 6066 y(191)p eop
%%Page: 192 200
192 199 bop 118 -18 a Fr(192)118 289 y(Instance)27 b(v)n(ariables)g
(may)g(be)g(strictly)f(part)i(of)f(the)g(implementation)e(of)i(a)h
(\003a)n(v)n(or)l(,)g(totally)e(in)l(visible)118 409
y(to)c(users.)29 b(T)-8 b(ypically)21 b(though,)h(some)f(of)h(the)g
(instance)f(v)n(ariables)h(are)g(directly)g(visible)e(in)i(some)f(w)o
(ay)118 529 y(to)27 b(the)h(user)g(of)g(the)f(object.)39
b(The)28 b(\003a)n(v)n(or)g(de\002nition)f(may)h(specify)f
(\224initable-instance-v)n(ariables\224,)118 650 y
(\224gettable-instance-v)n(ariables\224,)d(and)h
(\224settable-instance-v)n(ariables\224.)30 b(These)25
b(options)e(mean)i(that)118 770 y(the)34 b(instance)g(v)n(ariables)g
(speci\002ed)g(are)h(able)g(to)f(be)g(initialized)f(\(initable\),)j
(able)f(to)e(be)i(accessed)118 891 y(by)c(name)h(\(gettable\),)h(and)e
(able)h(to)f(be)g(assigned)g(and)h(accessed)g(\(settable\).)50
b(None,)33 b(some)e(of,)i(or)118 1011 y(all)27 b(of)g(the)g(instance)g
(v)n(ariables)f(may)h(be)g(speci\002ed)g(in)g(each)g(option.)37
b(In)27 b(the)g(e)o(xample)f(abo)o(v)o(e,)g(both)118
1131 y(REAL-P)-9 b(AR)j(T)24 b(and)f(IMA)l(GIN)m(AR)-6
b(Y)-11 b(-)22 b(P)-9 b(AR)j(T)23 b(may)g(be)g(initialized)e(and)i(may)
g(be)g(accessed)g(by)g(name.)118 1252 y(W)l(ith)28 b(the)f(objects)h
(package)g(the)g(programmer)g(completely)f(controls)g(what)h
(operations)f(are)i(to)e(be)118 1372 y(done)20 b(on)g(objects)g(of)h
(each)g(\003a)n(v)n(or)l(,)g(so)f(this)g(is)g(a)g(true)h
(object-oriented)e(programming)g(f)o(acility)-6 b(.)28
b(Also,)118 1493 y(operations)23 b(on)g(\003a)n(v)n(ored)i(objects)e
(are)h(generic.)31 b(This)23 b(means)g(that)h(the)f(operations)g(can)h
(be)g(done)g(on)118 1613 y(an)h(object)g(of)g(an)o(y)g(\003a)n(v)n(or)l
(,)h(as)f(long)f(as)i(the)e(operations)h(are)h(de\002ned)f(for)h(that)e
(\003a)n(v)n(or)i(of)f(object.)31 b(The)118 1733 y(same)e(operation)f
(can)h(be)f(de\002ned)h(for)g(man)o(y)f(\003a)n(v)n(ors;)i(and)f(whene)
n(v)o(er)f(the)g(operation)g(is)g(in)l(v)n(ok)o(ed,)118
1854 y(what)d(is)f(actually)g(done)h(will)f(depend)g(on)h(the)g(\003a)n
(v)n(or)g(of)g(the)g(object)f(it)g(is)h(being)f(done)g(to.)118
1974 y(T)-8 b(o)25 b(see)g(the)g(po)n(wer)f(of)h(generic)g(operations,)
f(consider)g(the)h(follo)n(wing)e(e)o(xample:)118 2094
y(Say)h(we)f(wish)g(to)f(write)h(a)h(scanner)f(that)g(reads)g(a)h
(sequence)f(of)g(characters)i(out)d(of)h(some)g(object)g(and)118
2215 y(processes)k(them.)35 b(It)27 b(does)f(not)h(need)g(to)f(assume)g
(that)g(the)h(characters)g(are)h(coming)d(from)i(a)g(\002le,)g(or)118
2335 y(e)n(v)o(en)d(from)h(an)g(I/O)f(channel.)118 2456
y(Suppose)29 b(the)g(scanner)h(gets)f(a)h(character)g(by)f(in)l(v)n
(oking)f(the)h(GET)-9 b(-CHARA)l(CTER)31 b(operation.)43
b(In)118 2576 y(this)35 b(case)g(an)o(y)g(object)g(of)h(a)f(\003a)n(v)n
(or)h(with)f(a)g(GET)-9 b(-CHARA)l(CTER)37 b(operation)e(can)g(be)h
(passed)f(to)118 2696 y(the)g(scanner)l(,)i(and)e(the)f(GET)-9
b(-CHARA)l(CTER)36 b(operation)e(de\002ned)h(for)g(that)f(object')-5
b(s)34 b(\003a)n(v)n(or)h(will)118 2817 y(performed)g(to)g(fetch)g(the)
f(character)-5 b(.)62 b(This)34 b(means)h(that)f(the)h(scanner)g(can)g
(get)g(characters)h(from)118 2937 y(a)h(string,)i(or)e(from)f(a)h(te)o
(xt)f(editor')-5 b(s)36 b(b)n(uf)n(fer)l(,)k(or)c(from)h(an)o(y)f
(object)h(at)f(all)h(that)f(pro)o(vides)g(a)h(GET)-9
b(-)118 3057 y(CHARA)l(CTER)26 b(operation.)k(The)25
b(scanner)g(is)g(automatically)e(general.)118 3396 y
Ft(19.2)143 b(Cr)m(eating)34 b(Objects)118 3619 y Fr(The)20
b(function)g(mak)o(e-instance)g(pro)o(vides)f(a)h(con)l(v)o(enient)f(w)
o(ay)i(to)e(create)j(objects)d(of)i(an)o(y)e(\003a)n(v)n(or)-5
b(.)29 b(The)118 3739 y(\003a)n(v)n(or)24 b(of)f(the)h(object)f(to)g
(be)g(created)h(and)f(the)h(initializations)c(to)j(be)h(done)f(are)h
(gi)n(v)o(en)e(as)h(parameters)118 3860 y(in)i(a)g(w)o(ay)g(that)f(is)g
(fully)g(independent)g(of)h(the)g(internal)f(representation)g(of)h(the)
g(object.)118 4153 y Fk(19.2.1)119 b(Methods)118 4341
y Fr(The)32 b(function)g(\224=)p Ff(>)p Fr(\224,)i(whose)e(name)g(is)g
(intended)f(to)h(suggest)g(the)g(sending)f(of)h(a)h(message)f(to)f(an)
118 4461 y(object,)24 b(is)h(usually)e(used)i(to)f(in)l(v)n(ok)o(e)h(a)
g(method.)118 4582 y(Examples:)118 4799 y Fh(\(=>)59
b(my-object)f(zap\))118 4919 y(\(=>)h(thing1)g(set-location)e(2.0)i
(3.4\))118 5136 y Fr(The)34 b(\002rst)g(ar)n(gument)f(to)h(=)p
Ff(>)g Fr(is)f(the)h(object)f(being)h(operated)g(on:)48
b(my-object)33 b(and)h(thing1)e(in)i(the)118 5256 y(e)o(xamples.)47
b(The)31 b(second)f(ar)n(gument)h(is)f(the)g(name)h(of)f(the)h(method)f
(to)g(be)h(in)l(v)n(ok)o(ed:)41 b(zap)31 b(and)g(set-)118
5377 y(location.)44 b(The)29 b(method)f(name)i(is)f(not)g(e)n(v)n
(aluated.)43 b(An)o(y)28 b(further)i(ar)n(guments)f(become)g(ar)n
(guments)118 5497 y(to)f(the)g(method,)g(and)h(are)g(e)n(v)n(aluated.)
40 b(\(There)29 b(is)f(a)h(function)e(send)h(which)g(is)g(just)f(lik)o
(e)h(=)p Ff(>)h Fr(e)o(xcept)118 5618 y(that)24 b(the)h(method)f(name)h
(ar)n(gument)f(is)g(e)n(v)n(aluated)g(just)g(lik)o(e)g(e)n(v)o
(erything)f(else.\))118 5738 y(Once)32 b(an)f(object)f(is)h(created,)i
(all)e(operations)f(on)h(it)g(are)h(performed)f(by)g(methods)e
(de\002ned)j(for)f(its)118 5858 y(\003a)n(v)n(or)-5 b(.)67
b(The)36 b(\003a)n(v)n(or)i(de\002nition)d(also)i(de\002nes)g(some)f
(methods.)65 b(F)o(or)37 b(each)g(\224gettable\224)g(instance)p
eop
%%Page: 193 201
193 200 bop -118 -18 a Fg(19.3.)55 b(REFERENCE)26 b(INFORMA)-11
b(TION)1858 b Fr(193)-118 289 y(v)n(ariable,)31 b(a)g(method)e(of)h
(the)h(same)f(name)g(is)g(de\002ned)h(which)e(returns)i(the)f(v)n(alue)
f(of)i(that)f(instance)-118 409 y(v)n(ariable.)65 b(F)o(or)36
b(\224settable\224)g(instance)g(v)n(ariables)g(a)g(method)g(named)g
(\224set-)p Ff(<)p Fr(v)n(ariable)f(name)p Ff(>)p Fr(\224)i(is)-118
529 y(de\002ned.)31 b(Gi)n(v)o(en)23 b(a)j(ne)n(w)e(v)n(alue,)g(this)g
(method)g(sets)g(the)h(instance)f(v)n(ariable)g(to)h(ha)n(v)o(e)f(that)
h(v)n(alue.)-118 846 y Fk(19.2.2)118 b(Pr)n(otection)30
b(of)g(Objects)-118 1041 y Fr(Most)35 b(LISP')-5 b(s,)38
b(and)e(PSL)g(in)g(particular)l(,)i(lea)n(v)o(e)e(open)f(the)h
(possibility)d(for)j(the)f(user)h(to)f(perform)-118 1161
y(illicit)26 b(operations)h(on)g(LISP)i(objects.)39 b(Instances)28
b(of)f(a)h(\003a)n(v)n(or)h(are)f(represented)g(as)g(ordinary)f(LISP)
-118 1282 y(objects)d(\(e)n(v)o(ectors)h(at)g(present\),)g(so)g(in)f(a)
i(sense)f(it)g(is)f(quite)h(easy)g(to)g(do)g(illicit)e(operations)h(on)
h(them:)-118 1402 y(just)f(operate)h(directly)f(on)h(its)f
(representation)g(\(do)h(e)n(v)o(ector)f(operations\).)-118
1526 y(On)29 b(the)g(other)h(hand,)g(there)f(are)h(major)f(practical)h
(pitf)o(alls)e(in)h(doing)g(this.)43 b(The)29 b(representation)g(of)
-118 1646 y(a)h(\003a)n(v)n(or)g(of)g(objects)f(is)g(generated)i
(automatically)-6 b(,)28 b(and)i(there)g(is)f(no)h(guarantee)g(that)f
(a)h(particular)-118 1767 y(\003a)n(v)n(or)f(de\002nition)f(will)g
(result)g(in)g(a)i(particular)e(representation)g(of)h(the)g(objects.)42
b(There)29 b(is)f(also)h(no)-118 1887 y(guarantee)i(that)f(the)g
(representation)g(of)h(a)g(\003a)n(v)n(or)g(will)f(remain)g(the)g(same)
h(o)o(v)o(er)e(time.)48 b(It)30 b(is)g(lik)o(ely)-118
2007 y(that)24 b(at)h(some)f(point)g(e)n(v)o(ectors)g(will)g(no)g
(longer)h(e)n(v)o(en)f(be)h(used)f(as)h(the)g(representation.)-118
2131 y(In)f(addition,)e(using)h(the)g(objects)g(package)i(is)e(quite)g
(con)l(v)o(enient,)f(so)i(the)f(temptation)f(to)i(operate)g(on)-118
2251 y(the)h(underlying)f(representation)h(is)f(reduced.)33
b(F)o(or)25 b(deb)n(ugging,)f(one)h(can)h(e)n(v)o(en)e(de\002ne)i(a)f
(couple)g(of)-118 2372 y(e)o(xtra)f(methods)g(\224on)h(the)f(\003y\224)
i(if)f(need)g(be.)-118 2733 y Ft(19.3)142 b(Refer)m(ence)34
b(Inf)l(ormation)-118 2993 y Fk(19.3.1)118 b(Loading)30
b(Objects)-118 3187 y Fq(Note:)k(This)27 b(\002le)f(de\002nes)i(both)f
(macr)n(os)g(and)g(ordinary)g(LISP)g(functions.)36 b(It)26
b(must)h(be)g(loaded)-118 3308 y(bef)n(or)n(e)k(any)f(of)g(these)g
(functions)h(ar)n(e)g(used.)46 b Fr(The)30 b(recommended)f(w)o(ay)h(of)
g(doing)f(this)g(is)g(to)h(put)-118 3428 y(the)25 b(e)o(xpression:)30
b(\(BothT)m(imes)24 b(\(load)h(objects\)\))g(at)g(the)g(be)o(ginning)f
(of)h(your)g(source)g(\002le.)33 b(This)24 b(will)-118
3548 y(cause)h(the)g(package)g(to)f(be)h(loaded)g(at)g(both)f(compile)g
(and)g(load)h(time.)-118 3865 y Fk(19.3.2)118 b(Fla)m(v)o(or)30
b(De\002nition)-118 4060 y Fr(Fla)n(v)n(ors)25 b(are)g(de\002ned)g(by)g
(using)f(the)g(macro)h(def)n(\003a)n(v)n(or)g(This)f(macro)h(has)g(the)
g(form:)-118 4402 y Fq(\(def\003a)n(v)o(or)g(\003a)n(v)o(or)l(-name)h
(\(v)o(ar1)f(v)o(ar2)f(...\))31 b(\(inheritance-\003a)n(v)o(or)l
(-list\))-118 4522 y(option1)25 b(option2)g(...\):list)2332
b Fi(macr)l(o)-118 4775 y Fr(\003a)n(v)n(or)n(-name)22
b(is)f(the)g(name)h(of)f(the)h(\003a)n(v)n(or)g(being)f(de\002ned.)30
b(v)n(ar1)21 b(v)n(ar2)g(...)29 b(are)23 b(the)e(instance)g(v)n
(ariables)-118 4895 y(of)34 b(the)h(\003a)n(v)n(or)-5
b(.)59 b(Each)35 b(must)e(be)i(a)g(symbol)e(that)h(is)g(the)g(name)g
(of)h(the)f(v)n(ariable,)i(or)f(a)g(list)e(of)i(tw)o(o)-118
5016 y(elements.)28 b(The)21 b(list)e(form)h(must)g(ha)n(v)o(e)g(the)g
(name)g(of)h(the)f(instance)g(v)n(ariable)g(\(id\))g(as)h(its)e
(\002rst)i(element)-118 5136 y(and)31 b(a)g(def)o(ault)g
(initialization)e(form)h(as)h(its)g(second)f(ar)n(gument.)49
b(Do)31 b(not)f(use)h(names)g(lik)o(e)f(\224IF\224)i(or)-118
5256 y(\224WHILE\224)37 b(for)g(instance)f(v)n(ariables:)53
b(the)o(y)36 b(are)h(translated)f(freely)h(within)e(method)h(bodies)g
(\(see)-118 5377 y(defmethod\).)29 b(The)23 b(translation)e(process)h
(is)h(not)f(v)o(ery)g(smart.)29 b(F)o(or)23 b(e)o(xample,)f(it)g
(doesn')n(t)g(distinguish)-118 5497 y(between)35 b(formal)f(parameters)
h(to)g(methods)e(with)i(the)f(same)h(name)g(as)g(instance)f(v)n
(ariables.)60 b(F)o(or)-118 5618 y(safety)-6 b(,)29 b(if)g(formal)f
(parameters)h(are)g(found)g(that)f(match)g(instance)g(v)n(ariables,)h
(an)g(error)g(message)g(is)-118 5738 y(issued.)42 b(Although)27
b(the)i(translation)e(process)i(isn')n(t)f(smart,)h(it)g(at)f(least)h
(understands)f(the)g(nature)h(of)-118 5858 y(quote.)p
eop
%%Page: 194 202
194 201 bop 118 -18 a Fr(194)118 289 y(The)39 b(inheritance-\003a)n(v)n
(or)n(-list)f(must)f(be)i(a)g(list)e(of)i(one)f(element)g(or)h(the)f
(empty)g(list.)71 b(When)39 b(the)118 409 y(empty)26
b(list,)f(it)h(speci\002es)g(that)g(no)g(inheritance)g(is)g(used)g(in)f
(de\002ning)h(this)g(\003a)n(v)n(or)g(\(for)h(a)g(description)118
529 y(of)f(inheritance,)g(see)g(section)g(10.3\).)34
b(When)26 b(a)g(one)g(element)f(list,)g(the)h(element)g(must)f(be)h
(the)g(name)118 650 y(of)31 b(another)g(\003a)n(v)n(or)g(to)g(inherit)f
(from.)49 b(This)30 b(other)h(\003a)n(v)n(or)h(must)d(ha)n(v)o(e)i
(already)g(been)h(compiled)d(or)118 770 y(loaded)c(or)g(an)f(error)i
(message)e(will)g(be)h(issued.)118 891 y(option1)30 b(option2)g(...)50
b(are)32 b(the)f(options)e(that)i(ef)n(fect)h(the)f(instance)g(v)n
(ariables)f(and)h(methods)f(of)i(the)118 1011 y(\003a)n(v)n(or)-5
b(.)31 b(Recognized)25 b(options)e(are:)297 1219 y Fh
(\(INITABLE-INSTANCE-VARIABLES)54 b(var1)59 b(var2)g(...\))297
1339 y(\(GETTABLE-INSTANCE-VARIABLES)54 b(var1)59 b(var2)g(...\))297
1459 y(\(SETTABLE-INSTANCE-VARIABLES)54 b(var1)59 b(var2)g(...\))297
1580 y(\(FAST-ACCESS-FOR-METHODS)c(method1)j(method2)g(...\))118
1787 y Fr(INIT)-9 b(ABLE-INST)g(ANCE-V)c(ARIABLES)126
b([mak)o(e)25 b(all)f(instance)h(v)n(ariables)1788 1908
y(INIT)-9 b(ABLE])118 2028 y(GETT)g(ABLE-INST)g(ANCE-V)c(ARIABLES)70
b([mak)o(e)25 b(all)f(instance)h(v)n(ariables)1788 2148
y(GETT)-9 b(ABLE])118 2269 y(SETT)g(ABLE-INST)g(ANCE-V)c(ARIABLES)87
b([mak)o(e)25 b(all)f(instance)h(v)n(ariables)1788 2389
y(SETT)-9 b(ABLE])118 2510 y(F)i(AST)e(-A)l(CCESS-FOR-METHODS)298
b([access)25 b(all)g(methods)e(f)o(ast])118 2717 y(An)c(empty)f(list)g
(of)g(v)n(ariables)h(is)f(tak)o(en)h(as)g(meaning)f(all)g(v)n(ariables)
g(rather)h(than)g(none,)h(so)e(\(GETT)-9 b(ABLE-)118
2837 y(INST)g(ANCE-V)c(ARIABLES\))26 b(is)f(equi)n(v)n(alent)e(to)h
(GETT)-9 b(ABLE-INST)g(ANCE-V)c(ARIABLES.)118 2958 y(Initable)18
b(instance)h(v)n(ariables)f(may)g(be)h(initialized)f(using)g(options)f
(to)h(mak)o(e-instance)h(or)g(instantiate-)118 3078 y(\003a)n(v)n(or)-5
b(.)31 b(See)26 b(belo)n(w)-6 b(.)118 3199 y(F)o(or)36
b(each)h(gettable)f(instance)g(v)n(ariable)g(a)g(method)g(of)g(the)g
(same)g(name)h(is)e(generated)i(to)f(access)118 3319
y(the)d(instance)g(v)n(ariable.)55 b(If)34 b(instance)f(v)n(ariable)f
(LOCA)-11 b(TION)34 b(is)e(gettable,)j(one)e(can)h(in)l(v)n(ok)o(e)e
(\(=)p Ff(>)118 3439 y(<)p Fr(object)p Ff(>)24 b Fr(LOCA)-11
b(TION\).)118 3560 y(F)o(or)23 b(each)g(settable)f(instance)g(v)n
(ariable)h(a)g(method)e(with)h(the)h(name)f(SET)-9 b(-)p
Ff(<)p Fr(name)p Ff(>)23 b Fr(is)f(generated.)30 b(If)118
3680 y(instance)19 b(v)n(ariable)h(LOCA)-11 b(TION)19
b(is)h(settable,)g(one)f(can)h(in)l(v)n(ok)o(e)f(\(=)p
Ff(>)h(<)p Fr(object)p Ff(>)f Fr(SET)-9 b(-LOCA)e(TION)118
3800 y Ff(<)p Fr(e)o(xpression)p Ff(>)p Fr(\).)46 b(Settable)30
b(instance)g(v)n(ariables)g(are)h(al)o(w)o(ays)f(also)g(gettable)f(and)
i(initable)e(by)h(im-)118 3921 y(plication.)f(If)c(this)e(feature)i(is)
e(not)h(desired,)g(de\002ne)g(a)h(method)e(such)h(as)g(SET)-9
b(-LOCA)e(TION)24 b(directly)118 4041 y(rather)h(than)g(declaring)f
(the)h(instance)f(v)n(ariable)h(to)f(be)h(settable.)118
4162 y(F)-7 b(AST)e(-A)l(CCESS-FOR-METHODS)36 b(is)d(used)h(to)f(speed)
g(up)h(message)f(sending)f(for)i(a)g(select)g(set)118
4282 y(of)39 b(methods.)71 b(Methods)38 b(speci\002ed)g(in)h(this)f
(option)f(are)i(accessed)h(by)e(a)h(dif)n(ferent)g(means)f(then)118
4402 y(\224normal\224)25 b(methods.)k(This)24 b(option)g(should)f(only)
h(be)h(used)g(when:)263 4610 y Fl(\017)49 b Fr(It)25
b(is)f(kno)n(wn)g(that)g(message)g(sending)g(speed)h(is)f(critical.)263
4808 y Fl(\017)49 b Fr(A)22 b(select)h(set)f(of)g(methods)f(of)h(a)h
(\003a)n(v)n(or)g(are)g(kno)n(wn)e(to)h(be)g(called)h(v)o(ery)f
(frequently)g(compared)362 4929 y(to)i(the)h(rest)g(of)g(the)f(methods)
g(of)h(that)f(\003a)n(v)n(or)-5 b(.)118 5136 y(The)29
b(order)h(methods)d(are)j(speci\002ed)g(with)e(this)g(option)g
(determines)g(the)h(order)h(the)o(y)e(are)i(accessed)118
5256 y(\(speed)d(of)g(method)f(lookup\).)36 b(Thus,)27
b(the)g(\002rst)g(method)f(speci\002ed)h(will)f(be)h(accessed)h(the)e
(quick)o(est)118 5377 y(and)39 b(the)f(last)g(method)g(speci\002ed)h
(the)f(slo)n(west.)71 b(If)39 b(no)f(methods)f(are)j(gi)n(v)o(en)d
(\(the)h(second)h(form)118 5497 y(abo)o(v)o(e\),)28 b(the)g(objects)f
(package)h(will)g(decide)g(on)f(its)h(o)n(wn)f(order)-5
b(.)40 b(Specifying)27 b(no)h(methods)f(should)118 5618
y(be)36 b(used)g(only)g(if)g(a)g(\003a)n(v)n(or)h(has)f(a)h(fe)n(w)f
(methods)f(\(i.e.,)k(less)d(then)f(10\).)65 b(If)37 b(an)o(y)e(of)i
(the)f(methods)118 5738 y(speci\002ed)27 b(are)g(not)g(methods)e(of)i
(the)f(\003a)n(v)n(or)l(,)i(a)f(w)o(arning)f(message)g(will)g(be)h
(issued)f(and)g(f)o(ast)h(access)118 5858 y(for)e(it)f(will)g(be)h
(ignored.)p eop
%%Page: 195 203
195 202 bop -118 -18 a Fg(19.3.)55 b(REFERENCE)26 b(INFORMA)-11
b(TION)1858 b Fr(195)-118 289 y(As)28 b(an)h(e)o(xample,)f(consider)h
(the)f(\003a)n(v)n(or)h(TUN)m(AFISH)g(which)f(has)g(70)h(methods.)40
b(It)29 b(is)f(determined)-118 409 y(that)h(much)f(time)h(is)g(spent)f
(calling)h(\002)n(v)o(e)g(lo)n(w)f(le)n(v)o(el)g(TUN)m(AFISH)i(methods)
e(whose)g(names)h(are)h(A,)-118 529 y(B,)25 b(C,)g(D,)g(and)g(E.)g
(Specifying:)420 757 y Fh(\(FAST-ACCESS-FOR-METHODS)54
b(A)60 b(B)f(C)h(D)f(E\))-118 985 y Fr(in)23 b(the)h(\003a)n(v)n(or)h
(de\002nition)e(of)h(TUN)m(AFISH)g(will)f(cause)h(method)f(A)h(to)f(be)
h(accessed)h(f)o(aster)f(then)g(an)o(y)-118 1106 y(other)33
b(method,)g(B)h(to)e(be)h(accessed)h(slo)n(wer)e(then)g(A,)h(C)h(slo)n
(wer)e(then)g(B,)i(D)e(slo)n(wer)g(then)h(C,)g(and)-118
1226 y(\002nally)26 b(E)g(the)f(slo)n(west)g(of)h(the)g(\002)n(v)o(e)f
(methods.)33 b(The)26 b(remaining)f(65)h(methods)f(of)h(TUN)m(AFISH)g
(will)-118 1347 y(be)f(accessed)g(as)g(slo)n(w)f(or)h(slo)n(wer)f(then)
g(E.)-118 1467 y(As)g(its)h(v)n(alue,)f(def)n(\003a)n(v)n(or)h(returns)
f(a)h(list)f(of)h(the)g(form:)420 1695 y Fh(\(flavor)58
b(<flavor-name>\))-118 1923 y Fr(Where)26 b Ff(<)p Fr(\003a)n(v)n(or)n
(-name)p Ff(>)f Fr(is)g(the)g(name)h(of)f(the)g(\003a)n(v)n(or)h(being)
f(de\002ned.)32 b(Examples)25 b(of)g(Fla)n(v)n(or)g(De\002-)-118
2043 y(nition)1 2271 y Fh(\(defflavor)58 b(complex-number)539
2392 y(\(real-part)g(imaginary-part\))539 2512 y(\(\))539
2632 y(gettable-instance-variables)539 2753 y
(initable-instance-variables)539 2873 y(\))1 3114 y(\(defflavor)g
(complex-number)539 3234 y(\(\(real-part)g(0.0\))599
3355 y(\(imaginary-part)f(0.0\))599 3475 y(\))539 3595
y(\(number\))539 3716 y(gettable-instance-variables)539
3836 y(\(settable-instance-variables)d(real-part\))539
3957 y(\))-118 4252 y Fk(19.3.3)118 b(Method)31 b(De\002nition)-118
4439 y Fr(As)24 b(you)h(may)f(recall,)h(methods)f(are)h(de\002ned)h
(using)d(the)i(macro)g(defmethod.)30 b(It)25 b(has)f(the)h(form:)-118
4667 y Fh(\(defmethod)57 b(\(flavor-name)h(method-name\))f(\([arg1)h
(arg2)h(...]\))-118 4788 y(<expression1>)e(<expression2>...\):)e(list)
1076 b(macro)-118 5016 y Fr(\003a)n(v)n(or)n(-name)25
b(is)g(the)f(name)h(of)g(the)f(\003a)n(v)n(or)i(a)f(method)f(is)g(be)o
(gin)g(de\002ned)h(for)-5 b(.)31 b(It)24 b(must)g(be)h(an)g(id.)-118
5136 y(method-name)f(is)g(the)h(name)f(of)h(this)f(method.)30
b(It)25 b(must)e(also)i(be)g(an)g(id.)-118 5256 y(ar)n(g1)i(ar)n(g2)f
(...)36 b(are)27 b(the)f(ar)n(guments)g(of)g(the)g(method.)35
b(There)26 b(may)g(be)h(zero)g(or)f(more)h(and)f(the)o(y)f(must)-118
5377 y(all)f(be)h(ids.)-118 5497 y Ff(<)p Fr(e)o(xpression1)p
Ff(>)g(<)p Fr(e)o(xpression2)p Ff(>)p Fr(...)36 b(mak)o(e)28
b(up)f(the)g(body)f(of)i(the)f(method.)37 b(This)26 b(body)h(can)g
(refer)-118 5618 y(to)34 b(an)o(y)h(instance)f(v)n(ariable)h(of)g(the)f
(\003a)n(v)n(or)i(by)e(using)g(the)h(name)g(just)f(lik)o(e)g(an)h
(ordinary)g(v)n(ariable.)-118 5738 y(The)o(y)c(can)h(also)f(set)g(them)
g(using)g(setf.)50 b(All)31 b(occurrences)i(of)e(instance)g(v)n
(ariables)g(\(e)o(xcept)h(within)-118 5858 y(e)n(v)o(ectors)24
b(or)h(quoted)f(lists\))f(are)j(translated)e(to)h(an)g(in)l(v)n
(ocation)e(of)i(the)g(form)f(\(EGETV)h(SELF)g(n\).)p
eop
%%Page: 196 204
196 203 bop 118 -18 a Fr(196)118 289 y(The)33 b(body)g(of)g(a)h(method)
e(can)i(also)f(freely)g(use)h(SELF)g(lik)o(e)e(it)h(were)h(another)f
(instance)g(v)n(ariable.)118 409 y(SELF)38 b(is)f(bound)g(to)g(the)h
(object)f(that)g(the)h(method)e(applies)h(to.)69 b(SELF)38
b(may)f(not)g(be)h(setqed)f(or)118 529 y(setfed.)118
652 y(The)25 b(v)n(alue)f(returned)h(by)g(defmethod)f(is)g(a)h(list)f
(of)h(the)f(form:)656 897 y Fh(\(method)58 b(<flavor-name>)f
(<method-name>\))118 1139 y Fr(Where)35 b Ff(<)p Fr(\003a)n(v)n(or)n
(-name)p Ff(>)g Fr(and)g Ff(<)p Fr(method-name)p Ff(>)f
Fr(are)h(simply)e(the)i(names)f(of)h(the)g(\003a)n(v)n(or)g(being)118
1260 y(de\002ned)25 b(and)g(method)f(being)g(de\002ned)h(respecti)n(v)o
(ely)-6 b(.)118 1503 y(Examples)24 b(of)h(Method)f(De\002nition:)238
1747 y Fh(\(defmethod)57 b(\(complex-number)g(real-part\))g(\(\))i
(real-part\))238 1988 y(\(defmethod)e(\(complex-number)g
(set-real-part\))f(\(new-real-part\))238 2108 y(\(setf)i(real-part)g
(new-real-part\)\))238 2349 y(\(defmethod)f(\(toaster)h(plug-into\))g
(\(socket\))238 2470 y(\(setf)g(plugged-into)f(socket\))238
2590 y(\(=>)i(socket)f(assert-as-plugged-in)d(self\)\))118
2898 y Fk(19.3.4)119 b(Object)30 b(Cr)n(eation)118 3090
y Fr(The)h(most)f(common)g(w)o(ay)h(instances)f(of)i(a)f(\003a)n(v)n
(or)g(are)h(created)g(is)f(by)f(using)g(the)h(function)f(mak)o(e-)118
3211 y(instance.)g(It)25 b(has)g(the)g(form:)118 3552
y Fq(\(mak)o(e-instance)h(\003a)n(v)o(or)l(-name:id)g
([initialization-sequence]\):)118 3672 y(\003a)n(v)o(or)n(ed)f(object)
2741 b Fi(e)n(xpr)145 3792 y Fr(mak)o(e-instance)25 b(tak)o(es)i(as)f
(ar)n(guments)g(a)g(\003a)n(v)n(or)h(name)f(and)h(an)f(optional)f
(initializa-)118 3913 y(tion)f(sequence.)118 4033 y(Fla)n(v)n(or)n
(-name)h(must)f(be)h(an)g(id)f(that)g(represents)h(an)g(e)o(xisting)e
(\003a)n(v)n(or)-5 b(.)118 4154 y(The)25 b(optional)e
(initialization-sequence,)f(when)j(speci\002ed,)f(consists)f(of)i
(alternating)118 4274 y(pairs)g(of)g(instance)g(v)n(ariable)f(names)h
(and)g(corresponding)f(initial)f(v)n(alues.)31 b(Note)25
b(that)118 4394 y(the)31 b(instance)h(v)n(ariable)f(names)g(are)h
(quoted,)g(in)f(the)h(e)o(xample)e(abo)o(v)o(e,)j(because)e(all)118
4515 y(the)22 b(ar)n(guments)f(are)i(e)n(v)n(aluated.)28
b(mak)o(e-instance)21 b(returns)h(an)g(object)f(that)h(is)f
(\224initial-)118 4635 y(ized.)-7 b(\224)118 4767 y(Examples)24
b(of)h(mak)o(e-instance)835 5012 y Fh(\(make-instance)57
b('complex-number\))835 5132 y(\(make-instance)g('complex-number)f
('real-part)i(0.0)2210 5252 y('imaginary-part)f(1.0\))118
5495 y Fr(An)25 b(object)f(returned)h(by)g(mak)o(e-instance)f(is)g
(initialized)g(as)h(follo)n(ws:)118 5618 y(First,)35
b(all)e(instance)g(v)n(ariables)f(with)g(initialization)f(speci\002ed)j
(in)e(the)h(call)g(to)g(mak)o(e-instance)g(are)118 5738
y(initialized)27 b(to)h(the)h(v)n(alue)e(gi)n(v)o(en.)41
b(After)28 b(this)g(the)g(objects)g(DEF)-7 b(A)i(UL)c(T)g(-INIT)27
b(method)h(is)g(en)l(v)n(ok)o(ed.)118 5858 y(This)f(method)g(is)h
(constructed)f(by)g(the)h(\003a)n(v)n(or)h(de\002nition)e(\(def)n
(\003a)n(v)n(or\).)40 b(It)28 b(initializes)f(an)o(y)g(instance)p
eop
%%Page: 197 205
197 204 bop -118 -18 a Fg(19.3.)55 b(REFERENCE)26 b(INFORMA)-11
b(TION)1858 b Fr(197)-118 289 y(v)n(ariables)23 b(not)g(speci\002ed)h
(in)g(the)f(call)h(to)f(mak)o(e-instance)h(b)n(ut)f(ha)n(ving)g(def)o
(ault)h(initializations)d(spec-)-118 409 y(i\002ed)29
b(in)f(the)g(\003a)n(v)n(or)i(de\002nition.)41 b(It)28
b(then)h(sets)f(all)g(remaining)g(uninitialized)f(instance)h(v)n
(ariables)g(to)-118 529 y(the)d(v)n(alue)g(*UNBOUND*.)32
b(The)26 b(def)o(ault)f(initialization)e(and)i(initialization)f(to)h
(*UNBOUND*)g(is)-118 650 y(performed)g(by)f(the)h(DEF)-7
b(A)i(UL)c(T)g(-INIT)24 b(method.)-118 771 y(If)33 b(a)g(method)e
(named)h(INIT)h(is)f(de\002ned)h(for)g(this)f(\003a)n(v)n(or)h(of)f
(object,)i(it)e(is)g(in)l(v)n(ok)o(ed)g(automatically)-118
891 y(after)26 b(the)g(initializations)d(just)i(discussed.)33
b(The)26 b(INIT)g(method)f(is)g(passed,)h(as)g(its)f(one)g(ar)n
(gument,)h(a)-118 1011 y(list)c(of)i(alternating)f(v)n(ariable)g(names)
g(and)h(initial)e(v)n(alues.)30 b(This)23 b(list)f(is)h(the)h(result)f
(of)h(e)n(v)n(aluating)d(the)-118 1132 y(initializations)h(gi)n(v)o(en)
i(to)g(mak)o(e-instance.)30 b(F)o(or)25 b(e)o(xample,)f(if)h(we)g
(call:)-118 1364 y Fh(\(make-instance)57 b('complex-number)f
('real-part)h(\(sin)i(30\))1795 1484 y('imaginary-part)d(\(cos)j
(30\)\))-118 1716 y Fr(then)24 b(the)h(ar)n(gument)f(to)h(the)f(INIT)i
(method)d(\(if)i(an)o(y\))g(w)o(ould)f(be)1 1948 y Fh(\(real-part)58
b(.5)h(imaginary-part)e(.866\).)-118 2179 y Fr(The)25
b(INIT)g(method)f(may)g(do)h(an)o(ything)e(desired)h(to)h(set)f(up)h
(the)f(desired)h(initial)f(state)g(of)h(the)g(object.)-118
2300 y(At)e(present,)g(this)f(v)n(alue)g(passed)h(to)g(the)g(INIT)g
(method)f(is)h(of)g(virtually)f(no)g(use)h(to)g(the)g(INIT)g(method)
-118 2421 y(since)e(the)g(v)n(alues)f(ha)n(v)o(e)h(been)h(stored)e
(into)h(the)g(instance)g(v)n(ariables)f(already)-6 b(.)29
b(In)22 b(the)f(future,)h(though,)-118 2541 y(the)33
b(objects)f(package)h(may)f(be)h(e)o(xtended)f(to)h(permit)f(k)o(e)o
(yw)o(ords)f(other)i(than)f(names)h(of)g(instance)-118
2661 y(v)n(ariables)f(to)h(be)g(in)f(the)h(initialization)e(part)i(of)g
(calls)f(to)h(mak)o(e-instance.)55 b(If)33 b(this)f(is)g(done,)j(INIT)
-118 2782 y(methods)23 b(will)h(be)h(able)g(to)g(use)f(the)h
(information)e(by)i(scanning)f(the)h(ar)n(gument.)-118
2903 y(F)o(or)30 b(details)g(on)g(ho)n(w)f(initialization)f(is)i(done)g
(when)g(inheritance)g(is)g(in)f(ef)n(fect,)j(see)f(Using)e(Inheri-)-118
3023 y(tance,)c(section)f(10.3.)-118 3144 y(Another)19
b(less)g(common)f(w)o(ay)h(to)g(create)h(an)f(object)g(is)g(through)f
(the)h(use)h(of)f(the)g(function)f(instantiate-)-118
3264 y(\003a)n(v)n(or)-5 b(.)31 b(It)24 b(has)h(the)g(form:)-118
3604 y Fq(\(instantiate-\003a)n(v)o(or)g(\003a)n(v)o(or)g(name:any)g
([U:list]\):)-118 3724 y(\003a)n(v)o(or)n(ed)g(object)2741
b Fi(e)n(xpr)32 3844 y Fr(This)29 b(is)g(the)h(same)g(as)f(mak)o
(e-instance,)i(e)o(xcept)e(that)h(the)f(initialization)f(list)h(is)g
(pro-)32 3965 y(vided)h(as)h(a)f(single,)h(required)g(ar)n(gument.)48
b(The)30 b(list)g(must)f(be)i(a)g(list)e(of)i(alternating)32
4085 y(k)o(e)o(yw)o(ord)24 b(names)g(and)h(initial)f(v)n(alues.)-118
4236 y(Example:)1 4468 y Fh(\(instantiate-flavor)56 b('complex-number)
480 4588 y(\(list)118 b('real-part)f(\(sin)i(30\))59
b('imaginary-part)e(\(cos)h(30\)\)\))-118 4886 y Fk(19.3.5)118
b(Message)29 b(Sending)-118 5075 y Fr(There)c(are)h(se)n(v)o(eral)e(w)o
(ays)g(to)h(in)l(v)n(ok)o(e)f(a)h(method:)-118 5414 y
Fq(\(=)p Ff(>)g Fq(object:object)i(method:id\):)32 b(any)1910
b Fi(e)n(xpr)-118 5611 y Fr(Examples:)121 5843 y Fh(\(=>)59
b(r)h(real-part\))p eop
%%Page: 198 206
198 205 bop 118 -18 a Fr(198)357 289 y Fh(\(=>)59 b(r)h(set-real-part)d
(1.0\))118 526 y Fr(The)26 b(message)g(name)g(is)f(not)g(quoted.)34
b(Ar)n(guments)25 b(to)g(the)h(method)f(are)i(supplied)e(as)h(ar)n
(guments)f(to)118 647 y(=)p Ff(>)p Fr(.)31 b(In)24 b(these)g(e)o
(xamples,)f(r)i(is)f(the)g(object,)g(real-part)h(and)f(set-real-part)g
(are)i(the)e(methods,)f(and)h(1.0)118 767 y(is)g(the)h(ar)n(gument)g
(to)f(the)h(set-real-part)g(method.)118 1108 y Fq(\(send)h
(object:object)h(method:id\):)33 b(any)1848 b Fi(e)n(xpr)118
1304 y Fr(Examples:)357 1516 y Fh(\(send)59 b(r)g('real-part\))357
1755 y(\(send)g(r)g('set-real-part)e(1.0\))118 1993 y
Fr(The)30 b(meanings)e(of)h(these)h(tw)o(o)e(e)o(xamples)h(are)h(the)f
(same)g(as)h(the)f(meanings)f(of)i(the)f(pre)n(vious)f(tw)o(o.)118
2113 y(Only)c(the)h(syntax)f(is)g(dif)n(ferent:)30 b(the)25
b(message)f(name)h(is)g(quoted.)118 2453 y Fq(\(send-if-handles)i
(object:object)g(method:id)f([U:any]\):)32 b(any)1043
b Fi(e)n(xpr)143 2574 y Fr(Conditionally)23 b(Send)i(a)g(Message)118
2725 y(Examples:)357 2937 y Fh(\(send-if-handles)56 b(r)k('real-part\))
357 3176 y(\(send-if-handles)c(r)k('set-real-part)d(1.0\))118
3414 y Fr(SEND-IF-HANDLES)25 b(is)d(lik)o(e)h(SEND,)h(e)o(xcept)f(that)
g(if)g(the)h(object)f(de\002nes)g(no)g(method)g(to)g(handle)118
3534 y(the)i(message,)f(no)h(error)g(is)f(reported)h(and)g(NIL)g(is)f
(returned.)118 3875 y Fq(\(lexpr)l(-send)j(object:object)g(method:id)f
([U:any])f(V)-9 b(:list\):any)1029 b Fi(e)n(xpr)268 3995
y Fr(Send)25 b(a)g(message)g(\(e)o(xplicit)e(\224Rest\224)j(Ar)n
(gument)e(List\))118 4147 y(Examples:)357 4358 y Fh(\(lexpr-send)58
b(foo)h('bar)g(a)g(b)h(c)f(\(list)g(x)g(y\)\))118 4568
y Fr(The)25 b(last)f(ar)n(gument)h(to)f(LEXPR-SEND)i(is)e(a)h(list)f
(of)h(the)g(remaining)e(ar)n(guments.)118 4909 y Fq(\(lexpr)l
(-send-if-handles)28 b(object:any)118 5029 y(method:id)e([U:any])g(V)-9
b(:list\):any)2109 b Fi(e)n(xpr)268 5150 y Fr(This)32
b(is)h(the)g(same)g(as)g(LEXPR-SEND,)h(e)o(xcept)f(that)f(no)h(error)h
(is)e(reported)h(if)g(the)268 5270 y(object)25 b(f)o(ails)f(to)g
(handle)h(the)g(message.)118 5640 y Fq(\(lexpr)l(-send-1)i
(object:object)g(method:id)f(V)-9 b(:list\):any)1297
b Fi(e)n(xpr)268 5761 y Fr(Send)25 b(a)g(Message)g(\(Explicit)e(Ar)n
(gument)i(List\))118 5858 y(Examples:)p eop
%%Page: 199 207
199 206 bop -118 -18 a Fg(19.3.)55 b(REFERENCE)26 b(INFORMA)-11
b(TION)1858 b Fr(199)121 289 y Fh(\(lexpr-send-1)57 b(r)i('real-part)f
(nil\))121 480 y(\(lexpr-send-1)f(r)i('set-real-part)e(\(list)i
(1.0\)\))-118 671 y Fr(Note)36 b(that)f(the)h(message)g(name)g(is)g
(quoted)f(and)h(that)g(the)g(ar)n(gument)f(list)g(is)h(passed)g(as)g(a)
g(single)-118 791 y(ar)n(gument)24 b(to)h(LEXPR-SEND-1.)-118
1131 y Fq(\(lexpr)l(-send-1-if-handles)i(object:any)-118
1251 y(method:any)f(V)-9 b(:list\):)30 b(any)2359 b Fi(e)n(xpr)-93
1371 y Fr(This)24 b(is)g(the)h(same)f(as)h(LEXPR-SEND-1,)h(e)o(xcept)e
(that)g(no)h(error)g(is)g(reported)f(if)h(the)-118 1492
y(object)f(f)o(ails)h(to)f(handle)h(the)f(message.)-118
1861 y Fq(\(e)o(v-send)h(object:any)i(method:any)f(V)-9
b(:list\):)30 b(any)1508 b Fi(e)n(xpr)-89 1981 y Fr(EV)-10
b(-SEND)29 b(is)f(just)g(lik)o(e)g(LEXPR-SEND-1,)j(e)o(xcept)d(that)h
(it)f(is)g(an)h(EXPR)h(instead)-118 2101 y(of)g(a)h(MA)l(CR)l(O.)f(Its)
g(sole)g(purpose)f(is)h(to)g(be)g(used)g(as)g(a)h(run-time)e(function)g
(object,)-118 2222 y(for)c(e)o(xample,)f(as)h(a)g(function)f(ar)n
(gument)g(to)h(a)g(function.)-118 2542 y Fk(19.3.6)118
b(Printing)31 b(Objects)-118 2729 y Fr(Objects)c(can)h(print)e(out)h
(according)g(to)h(their)f(\003a)n(v)n(or)-5 b(.)38 b(If)28
b(a)g(\003a)n(v)n(or)g(has)f(a)h(channelprin)f(method,)g(that)-118
2850 y(method)d(will)g(be)h(used)f(by)h(prin1,)f(prin2,)g(etc.)31
b(to)24 b(print)g(objects)g(of)h(that)g(\003a)n(v)n(or)-5
b(.)-118 3189 y Fq(\(=)p Ff(>)25 b Fq(any)g(CHANNELPRIN)f(channel)i(le)
o(v)o(el)e(prin1?\):)32 b(any)1005 b Fi(method)-93 3309
y Fr(A)25 b(channelprin)f(method)f(must)h(accept)h(three)g(ar)n
(guments:)30 b(a)25 b(channel)g(\(currently)g(a)-118
3429 y(small)30 b(inte)o(ger\);)j(either)e(nil)g(or)g(a)g(number)g
(which)f(will)g(indicate)h(the)g(current)g(le)n(v)o(el)-118
3550 y(of)g(nesting)f(within)f(lists,)i(v)o(ectors,)h(or)f(other)g
(objects;)i(and)e(a)g(boolean)f(which)h(will)-118 3670
y(indicate)24 b(whether)h(prin1-)f(or)h(prin2-style)f(printing)f(is)i
(being)f(done.)-118 3821 y(Ordinarily)-6 b(,)26 b(an)i(object)e(should)
g(print)h(in)g(the)g(form)g(#)p Ff(<)p Fr(\003a)n(v)n(or)g(info)g(...)
38 b Ff(>)p Fr(.)g(If)27 b(the)g(le)n(v)o(el)f(of)i(printing)-118
3941 y(is)d(not)g(nil,)h(printing)e(of)i(lists,)e(v)o(ectors,)i
(objects,)f(etc.)34 b(within)24 b(the)i(channelprin)f(method)g(should)f
(be)-118 4061 y(done)g(with)h(prinle)n(v)o(el)e(bound)h(to)g(1)h(less)f
(than)h(its)f(v)n(alue)g(at)h(the)f(time)g(of)h(entry)g(to)f(the)h
(method.)-118 4351 y Fk(19.3.7)118 b(Useful)31 b(Functions)f(on)h
(Objects)-118 4758 y Fq(\(object-type)c(U:any\):)k(id,)25
b(NIL)2167 b Fi(e)n(xpr)-82 4878 y Fr(The)35 b(object-type)g(function)g
(returns)h(the)f(type)h(\(an)g(id\))f(of)h(the)g(speci\002ed)f(object,)
-118 4998 y(or)c(nil,)g(if)g(the)f(ar)n(gument)h(is)f(not)g(an)h
(object.)48 b(At)30 b(present)h(this)f(function)f(cannot)i(be)-118
5119 y(guaranteed)k(to)g(distinguish)d(between)j(objects)g(created)g
(by)g(the)g(objects)g(package)-118 5239 y(and)c(other)g(LISP)h
(entities,)g(b)n(ut)f(the)g(only)f(possible)g(confusion)g(is)h(with)f
(v)o(ectors)h(or)-118 5360 y(e)n(v)o(ectors.)-118 5708
y Fq(\(\003a)n(v)o(or)l(-de\002ned?)i(\003a)n(v)o(or)l(-name:id\):)f
(t,)25 b(nil)1754 b Fi(e)n(xpr)-97 5828 y Fr(Returns)20
b(t)h(if)f(\003a)n(v)n(or)n(-name)i(is)e(a)h(currently)f(de\002ned)h
(\003a)n(v)n(or)-5 b(.)30 b(Returns)20 b(nil)g(otherwise.)p
eop
%%Page: 200 208
200 207 bop 118 -18 a Fr(200)118 358 y Fq(\(declar)n(e-\003a)n(v)o(or)
26 b Ff(<)i(f)11 b(l)r(av)t(or)s(name)28 b(><)f(v)t(ar)s
Fe(1)g Ff(><)h(v)t(ar)s Fe(2)f Ff(>)p Fq(...\):)118 478
y(unde\002ned)2875 b Fi(macr)l(o)118 948 y Fq(\(undeclar)n(e-\003a)n(v)
o(or)27 b Ff(<)g(v)t(ar)s Fe(1)g Ff(><)h(v)t(ar)s Fe(2)f
Ff(>)p Fq(...\):)k(unde\002ned)1138 b Fi(macr)l(o)143
1068 y Fh(***)59 b(Read)g(these)g(warnings)f(carefully!)117
b(***)118 1189 y Fr(This)19 b(f)o(acility)g(can)h(reduce)h(the)e(o)o(v)
o(erhead)g(of)h(in)l(v)n(oking)e(methods)g(on)i(particular)g(v)n(ari-)
118 1309 y(ables,)28 b(b)n(ut)e(it)h(should)f(be)h(used)g(sparingly)-6
b(.)36 b(It)27 b(is)g(not)f(well)h(inte)o(grated)f(with)g(the)h(rest)
118 1429 y(of)e(the)g(language.)30 b(At)25 b(some)f(point)g(a)h(proper)
g(declaration)f(f)o(acility)g(is)h(e)o(xpected)f(and)118
1550 y(then)e(it)f(will)h(be)g(possible)f(to)g(mak)o(e)h(declarations)g
(about)g(objects,)f(inte)o(gers,)h(v)o(ectors,)118 1670
y(etc.,)j(all)g(in)f(a)h(uniform)f(and)h(clean)g(w)o(ay)-6
b(.)118 1822 y(The)39 b(declare-\003a)n(v)n(or)g(macro)g(allo)n(ws)e
(you)h(to)g(declare)h(that)f(a)h(speci\002c)g(symbol)e(is)h(bound)f(to)
h(an)118 1943 y(object)32 b(of)f(a)i(speci\002c)f(\003a)n(v)n(or)-5
b(.)52 b(This)31 b(allo)n(ws)f(the)i(\003a)n(v)n(ors)g(implementation)e
(to)h(eliminate)g(the)g(run-)118 2063 y(time)c(method)g(lookup)g
(normally)g(associated)h(with)f(sending)g(a)i(message)e(to)h(that)g(v)n
(ariable,)g(which)118 2183 y(can)k(result)f(in)g(an)g(appreciable)h
(impro)o(v)o(ement)d(in)i(e)o(x)o(ecution)f(speed.)50
b(This)31 b(feature)h(is)f(moti)n(v)n(ated)118 2304 y(solely)37
b(by)h(ef)n(\002cienc)o(y)g(considerations)f(and)h(should)f(be)h(used)g
(ONL)-10 b(Y)38 b(where)g(the)g(performance)118 2424
y(impro)o(v)o(ement)22 b(is)j(critical.)118 2547 y(Details:)k(if)24
b(you)f(declare)h(the)g(v)n(ariable)f(X)g(to)h(be)f(bound)g(to)g(an)h
(object)f(of)h(\003a)n(v)n(or)g(FOO,)g(then)f Fq(within)118
2667 y(the)i(context)g(of)f(the)h(declaration)g Fr(\(see)f(belo)n(w\),)
g(e)o(xpressions)e(of)i(the)g(form)g(\()p Fe(=)p Ff(>)g
Fr(X)g(GORP)h(...\))30 b(or)118 2787 y(\(SEND)e(X)g('GORP)h(...\))40
b(will)27 b(be)h(replaced)g(by)g(function)f(in)l(v)n(ocations)f(of)i
(the)g(form)f(\(FOO)i(GORP)118 2908 y(X)h(...\).)45 b(Note)30
b(that)f(there)h(is)f(no)h(check)g(made)f(that)h(the)f(\003a)n(v)n(or)h
(FOO)g(actually)g(contains)f(a)h(method)118 3028 y(GORP)-11
b(.If)20 b(it)e(does)h(not,)g(then)g(a)g(run-time)f(error)i(\224In)l(v)
n(ocation)e(of)h(unde\002ned)g(function)f(FOO\224GORP\224)118
3148 y(will)24 b(be)h(reported.)118 3271 y(W)-12 b(ARNING:)24
b(The)g(declare-\003a)n(v)n(or)i(feature)f(is)e(not)h(presently)f(well)
h(inte)o(grated)f(with)g(the)h(compiler)-5 b(.)118 3391
y(Currently)f(,)34 b(the)e(declare-\003a)n(v)n(or)i(macro)f(may)f(be)g
(used)h(only)e(as)i(a)g(top-le)n(v)o(el)d(form,)k(lik)o(e)e(the)h(PSL)
118 3511 y(FLUID)24 b(declaration.)30 b(It)24 b(tak)o(es)g(ef)n(fect)g
(for)g(all)f(code)h(e)n(v)n(aluated)f(or)g(compiled)g(henceforth.)30
b(Thus,)24 b(if)118 3632 y(you)h(should)e(later)i(compile)g(a)g(dif)n
(ferent)f(\002le)i(in)e(the)h(same)g(compiler)l(,)f(the)h(declaration)g
(will)f(still)f(be)118 3752 y(in)f(ef)n(fect!)30 b Fq(this)22
b(is)g(a)g(danger)n(ous)h(cr)n(ock,)g(so)f(be)h(car)n(eful!)31
b Fr(T)-8 b(o)22 b(a)n(v)n(oid)f(problems,)g(I)i(recommend)e(that)118
3873 y(declare-\003a)n(v)n(or)31 b(be)e(used)g(only)g(for)h
(uniquely-named)d(v)n(ariables.)44 b(The)29 b(ef)n(fect)h(of)g(a)f
(declare-\003a)n(v)n(or)118 3993 y(can)g(be)g(undone)e(by)h(an)h
(undeclare-\003a)n(v)n(or)l(,)h(which)e(also)g(may)g(be)h(used)f(only)g
(as)g(a)h(top-le)n(v)o(el)e(form.)118 4113 y(Therefore,)g(it)f(is)f
(good)g(practice)i(to)e(brack)o(et)i(your)e(code)i(in)e(the)h(source)g
(\002le)h(with)e(a)h(declare-\003a)n(v)n(or)118 4234
y(and)f(a)g(corresponding)f(undeclare-\003a)n(v)n(or)-5
b(.)238 4477 y Fh(***)59 b(Did)g(you)g(read)g(the)g(above)g
(warnings???)e(***)118 4938 y Fq(\(object-get-handler)28
b(object:object)f(method-name:id\):)33 b(id)1063 b Fi(e)n(xpr)118
5134 y Fr(Note)24 b(that)g(the)g(use)g(of)g(object-get-handler)f(is)h
(not)g(recommended.)30 b(It)24 b(should)f(only)g(be)h(used)g(in)g(the)
118 5255 y(most)f(critical)h(places)h(where)g(the)f(time)g(to)g
(perform)g(a)h(normal)e(message)h(send)g(is)g(too)g(slo)n(w)f(and)i
(the)118 5375 y(declare-\003a)n(v)n(or)h(f)o(acility)e(cannot)h(be)g
(used.)118 5497 y(Gi)n(v)o(en)h(an)h(object)f(and)h(a)g(method-name,)f
(object-get-handler)h(returns)f(the)h(name)g(of)g(the)f(function)118
5618 y(that)f(implements)e(this)h(method.)31 b(It)25
b(is)g(used)g(to)g(repetiti)n(v)o(ely)e(send)i(the)g(same)g(message.)32
b(F)o(or)25 b(e)o(xam-)118 5738 y(ple:)p eop
%%Page: 201 209
201 208 bop -118 -18 a Fg(19.4.)55 b(USING)25 b(INHERIT)-9
b(ANCE)2150 b Fr(201)300 289 y Fh(\(let)539 409 y(\(\(func-name)58
b(\(object-get-handler)d(obj)k('banana\)\)\))300 529
y(...)539 650 y(\(for)539 770 y(...)539 891 y(\(do)h(\(idapply)e
(func-name)f(\(list)i(arg1)g(arg2)g(...)g(argn\)\)\))539
1011 y(\))300 1131 y(\))-118 1381 y Fr(This)24 b(is)g(equi)n(v)n(alent)
f(to)i(sending)f(the)g(message:)420 1634 y Fh(\(=>)59
b(obj)g(banana)g(arg1)f(arg2)h(...)g(argn\))-118 1884
y Fr(inside)22 b(the)h(for)h(b)n(ut)f(the)g(lookup)f(of)h(the)h
(function)e(name)h(for)h(the)f(message)g(send)g(is)g(only)f(performed)
-118 2004 y(once.)-118 2290 y Fq(Miscellaneous)j(Functions)-118
2702 y(\(objects-v)o(ersion\):)32 b(NIL)2420 b Fi(e)n(xpr)-94
2823 y Fr(This)23 b(function)g(prints)g(a)h(date)g(used)f(to)g(check)i
(the)e(v)o(ersion)g(of)h(the)f(objects)h(package)-118
2943 y(in)33 b(use.)57 b(When)34 b(b)n(ugs)f(are)h(reported,)i(the)d(v)
o(ersion)g(date)g(should)g(be)g(gi)n(v)o(en.)56 b(Older)-118
3063 y(v)o(ersions)23 b(of)i(the)g(objects)f(package)h(did)g(not)f(ha)n
(v)o(e)g(this)g(function)g(de\002ned.)-118 3452 y Ft(19.4)142
b(Using)35 b(Inheritance)-118 3682 y Fr(Inheritance)f(is)f(a)h
(mechanism)f(that)g(allo)n(ws)g(a)h(\003a)n(v)n(or)g(to)f(be)h
(de\002ned)g(in)g(terms)f(of)h(other)f(\003a)n(v)n(ors.)-118
3803 y(This)d(allo)n(ws)g(objects)g(to)g(be)h(created)h(that)e(are)i
(specializations)e(or)h(generalizations)f(of)h(other)f(ob-)-118
3923 y(jects.)63 b(The)36 b(object)g(package)g(supports)f(what)g(is)h
(called)g(single)e(inheritance)i(\226)g(only)f(one)h(\003a)n(v)n(or)
-118 4043 y(can)28 b(be)f(inherited)g(from)g(by)g(another)g(\003a)n(v)n
(or)-5 b(.)39 b(The)27 b(\003a)n(v)n(or)h(being)f(inherited,)g(ho)n(we)
n(v)o(er)l(,)g(could)g(ha)n(v)o(e)-118 4164 y(inherited)e(from)g(one)g
(other)g(\003a)n(v)n(or)l(,)h(and)f(so)g(on.)32 b(Note)26
b(that)f(the)g(LISP)h(machine)f(supports)f(multiple)-118
4284 y(inheritance)g(allo)n(wing)g(more)g(than)h(one)f(\003a)n(v)n(or)i
(to)e(be)h(inherited)f(from)h(at)g(a)g(time.)-118 4528
y(The)g(best)f(w)o(ay)h(to)f(e)o(xplain)g(single)g(inheritance)h(is)f
(through)g(an)h(e)o(xample:)-118 4648 y(Suppose)18 b(we)i(ha)n(v)o(e)e
(de\002ned)h(the)g(\003a)n(v)n(or)h(mother)e(and)h(then)f(de\002ne)h
(the)g(\003a)n(v)n(or)h(daughter)e(in)h(which)f(we)-118
4769 y(speci\002ed)28 b(the)f(inheritance-\003a)n(v)n(or)n(-list)g(to)g
(be)h(mother)-5 b(.)37 b(The)28 b(inheriting)e(process)h(causes)h
(daughter)-118 4889 y(to)f(contain)g(all)h(the)f(instance)g(v)n
(ariables)g(as)h(well)f(as)h(the)g(methods)e(that)h(were)i(de\002ned)f
(for)g(mother)-5 b(.)-118 5010 y(That)31 b(is,a)g(daughter)f(object)h
(can)g(deal)h(with)e(an)o(y)h(of)g(the)g(instance)f(v)n(ariables)h(and)
g(recei)n(v)o(e)g(an)o(y)f(of)-118 5130 y(the)25 b(messages)f
(de\002ned)h(for)g(\003a)n(v)n(or)g(mother)f(without)g(ha)n(ving)g(to)g
(recreate)i(them.)-118 5253 y(W)-8 b(e)38 b(refer)g(to)f(\003a)n(v)n
(or)g(mother)g(as)g(the)g(parent)h(of)f(\003a)n(v)n(or)h(daughter)l(,)i
(and)d(daughter)g(as)g(a)h(child)e(of)-118 5374 y(mother)-5
b(.)69 b(daughter)l(,)42 b(in)37 b(turn,)k(can)e(be)f(the)g(parent)g
(of)g(other)g(\003a)n(v)n(ors.)71 b(Each)39 b(child)e(inherits)g(the)
-118 5494 y(instance)24 b(v)n(ariables)g(and)h(methods)f(of)h(its)f
(parent,)g(its)g(parent')-5 b(s)25 b(parent,)g(and)f(so)h(on.)-118
5618 y(When)30 b(inheriting)f(instance)h(v)n(ariables,)g(a)h(child)e
(\003a)n(v)n(or)i(has)f(as)h(its)e(instance)h(v)n(ariables)f(the)h
(union)-118 5738 y(of)e(all)f(those)g(de\002ned)h(for)f(its)g(parents)h
(and)f(those)g(speci\002cally)g(de\002ned)h(for)g(the)g(ne)n(w)f(\003a)
n(v)n(or)-5 b(.)39 b(As)27 b(a)-118 5858 y(result,)j(it)f(w)o(ould)g
(not)g(mak)o(e)g(sense)h(to)f(gi)n(v)o(e)f(a)i(child)f(\003a)n(v)n(or)h
(an)g(instance)f(v)n(ariable)g(with)g(the)g(same)p eop
%%Page: 202 210
202 209 bop 118 -18 a Fr(202)118 289 y(name)21 b(as)h(one)f(in)g(one)h
(of)f(its)g(parent')-5 b(s.)29 b(F)o(or)22 b(this)e(reason,)i
(duplicate)f(instance)g(v)n(ariables)g(are)h(\003agged)118
409 y(as)j(an)g(error)-5 b(.)118 529 y(Inheriting)36
b(methods,)j(ho)n(we)n(v)o(er)l(,)g(is)e(dif)n(ferent.)68
b(It)37 b(is)f(possible)g(to)h(de\002ne)h(a)g(method)e(in)h(a)g(child)
118 650 y(\003a)n(v)n(or)26 b(with)e(the)h(same)f(name)h(as)g(a)g
(method)f(in)h(one)g(of)g(the)g(parents.)30 b(The)25
b(ef)n(fect)h(is)e(to)h(o)o(v)o(erride)f(the)118 770
y(parent')-5 b(s)27 b(method)g(with)g(the)g(child')-5
b(s)26 b(method,)h(as)h(f)o(ar)g(as)g(the)f(child)g(\003a)n(v)n(or)h
(is)g(concerned.)39 b(In)28 b(other)118 891 y(w)o(ords,)i(when)e
(sending)g(a)i(message)e(to)h(an)g(object,)g(the)g(method)f(e)o(x)o
(ecuted)g(is)g(the)h(\002rst)g(one)g(found)118 1011 y(by)23
b(searching)h(backw)o(ard)g(from)f(it)g(through)f(its)h(parents.)30
b(First)24 b(the)f(methods)f(de\002ned)i(for)g(the)f(child)118
1131 y(\003a)n(v)n(or)i(are)h(searched,)f(then)g(the)f(child')-5
b(s)24 b(parent')-5 b(s)24 b(methods,)g(and)h(so)f(on)h(until)e(one)i
(is)f(found.)118 1252 y(As)38 b(an)h(e)o(xample)e(of)h(o)o(v)o
(erriding)f(methods,)j(the)e(follo)n(wing)e(code)j(de\002nes)f(a)h
(\003a)n(v)n(or)g(geometric-)118 1372 y(object.)30 b(Then,)24
b(a)g(ne)n(w)f(\003a)n(v)n(or)h(square)g(is)f(created)i(with)d
(geometric-object)h(as)h(its)f(parent.)30 b(Finally)-6
b(,)23 b(a)118 1493 y(\003a)n(v)n(or)i(colored-square)g(is)g(created)g
(with)f(square)h(as)g(its)f(parent.)118 1689 y Fh(\(defflavor)58
b(geometric-object)238 1810 y(\(name)297 1930 y(size\))238
2050 y(\(\))1195 b(\045)59 b(A)h(flavor)e(with)h(no)g(parents)238
2171 y(\))118 2411 y(\(defmethod)f(\(geometric-object)e(display\))i
(\(\))238 2532 y(\(printf)g("\045w)h(is)g(\045w)h(units)e(big")h(name)g
(size\)\))118 2773 y(\(defmethod)f(\(geometric-object)e(set-name\))h
(\(new-name\))238 2893 y(\(setf)h(name)h(new-name\)\))118
3134 y(\(defflavor)f(square)238 3254 y(\(side-length\))238
3374 y(\(geometric-object\))235 b(\045)59 b(A)h(flavor)e(with)h(one)g
(parent,)f(geometric-object)238 3495 y(\))118 3736 y(\045)i(Overriding)
d(for)i(square)g(the)g(inherited)f(method)g(display)118
3976 y(\(defmethod)g(\(square)g(display\))g(\(\))238
4097 y(\(printf)g("\045w)h(is)g(a)h(square,)e(\045w)h(units)g(long)g
(on)g(all)g(sides")g(name)716 4217 y(side-length\)\))118
4458 y(\(defmethod)f(\(square)g(new-length\))f(\(length\))238
4578 y(\(setf)h(side-length)g(length\))238 4699 y(\(setf)g(size)h(\(*)h
(length)e(length\)\)\))118 4939 y(\(defflavor)g(colored-square)238
5060 y(\(color\))238 5180 y(\(square\))238 5301 y(\))118
5541 y(\(defmethod)g(\(colored-square)e(get-color\))i(\(\))238
5662 y(color\))118 5858 y Fr(After)25 b(the)g(de\002nitions,)e(\003a)n
(v)n(or)j(colored-square)f(has)f(the)h(instance)f(v)n(ariables:)p
eop
%%Page: 203 211
203 210 bop -118 -18 a Fg(19.4.)55 b(USING)25 b(INHERIT)-9
b(ANCE)2150 b Fr(203)360 289 y Fh(color)360 409 y(side-length)360
529 y(name)360 650 y(size)-118 903 y Fr(and)25 b(has)f(the)h(methods:)
27 1123 y Fl(\017)49 b Fr(get-color)24 b(\(as)h(de\002ned)h(for)f
(\003a)n(v)n(or)g(colored-square\))27 1344 y Fl(\017)49
b Fr(ne)n(w-length)23 b(\(as)i(de\002ned)h(for)f(\003a)n(v)n(or)g
(square\))27 1565 y Fl(\017)49 b Fr(display)23 b(\(as)j(de\002ned)f
(for)g(\003a)n(v)n(or)g(square\))27 1786 y Fl(\017)49
b Fr(set-name)24 b(\(as)h(de\002ned)h(for)f(\003a)n(v)n(or)g
(geometric-object\))-118 2104 y Fk(19.4.1)118 b(W)-8
b(ar)n(ning)31 b(on)f(Inheritance)h(Usage)-118 2298 y
Fr(The)23 b(Common)e(lisp)h(objects)g(package)h(will)f(be)h
(incompatible)e(with)h(the)h(e)o(xisting)e(objects)h(package)-118
2419 y(as)32 b(f)o(ar)g(as)g(inheritance)g(is)f(concerned.)53
b(In)31 b(Common)g(lisp,)i(an)f(inherited)f(instance)g(v)n(ariable)h
(can-)-118 2539 y(not)g(be)h(accessed)h(by)f(simply)e(referring)i(to)g
(it)f(within)g(a)h(method.)54 b(Also,)35 b(the)d(w)o(ay)h(v)n(ariables)
g(are)-118 2660 y(initialized)23 b(is)i(quite)f(dif)n(ferent.)-118
2783 y(T)-8 b(o)30 b(access)g(inherited)f(instance)h(v)n(ariables,)g
(you)f(must)g(do)g(the)h(equi)n(v)n(alent)e(of)i(sending)f(the)h
(object)-118 2904 y(a)37 b(message)g(to)g(get)g(the)g(instance)g(v)n
(ariable')-5 b(s)36 b(v)n(alue.)67 b(F)o(or)38 b(e)o(xample,)h
(referring)f(to)f(the)g(instance)-118 3024 y(v)n(ariable)32
b(banana)g(in)g(a)h(method)e(for)h(the)g(\003a)n(v)n(or)h(fruit,)h(a)f
(reference)g(to)f(banana)h(in)f(PSL)h(becomes)-118 3145
y(something)22 b(lik)o(e)i(\(=)p Ff(>)h Fr(self)f(banana\))h(in)f
(Common)f(lisp.)30 b(When)24 b(you)g(reference)i(inherited)e(instance)
-118 3265 y(v)n(ariables)33 b(in)h(PSL)h(and)f(performance)g(is)g
(important,)h(you)e(should)g(clearly)i(mark)e(them.)58
b(If)35 b(per)n(-)-118 3385 y(formance)29 b(is)f(not)f(an)i(issue,)g
(mak)o(e)f(the)g(instance)g(v)n(ariables)g(gettable)g(and)g(refer)i(to)
e(them)f(by)i(their)-118 3506 y(method.)h(This)24 b(also)g(applies)g
(to)h(settable)f(instance)g(v)n(ariables.)-118 3630 y(Uses)j(of)h(the)g
(INIT)g(method)f(may)g(also)g(ha)n(v)o(e)h(to)f(be)h(changed)g(because)
g(the)f(ne)n(w)h(objects)f(package)-118 3750 y(performs)22
b(object)g(initialization)f(in)h(a)h(dif)n(ferent)f(w)o(ay)-6
b(.)29 b(A)-7 b(v)n(oid)22 b(the)g(INIT)h(method)e(if)i(you)f(can,)h
(if)g(you)-118 3870 y(can')n(t)i(mark)g(it)f(for)h(change)g(for)g
(Common)f(lisp)g(objects.)-118 3994 y(In)h(this)f(w)o(ay)-6
b(,)24 b(transition)f(to)i(Common)e(lisp)h(will)g(be)h(much)f(easier)-5
b(.)-118 4312 y Fk(19.4.2)118 b(Using)31 b(SELF)e(and)i(MYSELF)f(with)h
(Inheritance)-118 4507 y Fr(Suppose)24 b(an)h(additional)f(method)g(w)o
(as)g(de\002ned)i(for)f(\003a)n(v)n(or)g(geometric-object:)1
4763 y Fh(\(defmethod)58 b(\(geometric-object)e(display-me\))h(\(\))1
4883 y(\(=>)j(self)e(display\)\))-118 5136 y Fr(No)n(w)31
b(suppose)f(a)i(display-me)e(message)h(is)g(sent)g(to)g(an)h(object)f
(of)g(type)g(square.)51 b(Which)31 b(method)-118 5256
y(for)25 b(the)f(message)h(')-5 b(display')23 b(should)h(be)h(used)f
(by)g(display-me?)30 b(Should)24 b(it)g(look)g(up)h(the)f(method)g(in)
-118 5377 y(the)i(conte)o(xt)g(of)h(the)f(\003a)n(v)n(or)h(where)g(the)
g(method)e(w)o(as)i(de\002ned)g(\(geometric-object\))f(or)h(the)f
(conte)o(xt)-118 5497 y(of)g(the)f(\003a)n(v)n(or)i(that)e(recei)n(v)o
(ed)g(the)h(original)f(message)g(\(square\)?)34 b(The)26
b(answer)g(is)g(to)f(pro)o(vide)g(a)h(ne)n(w)-118 5618
y(symbol,)d(MYSELF)-8 b(.)25 b(MYSELF)g(means)f(to)h(look)f(up)g
(messages)g(in)h(the)f(conte)o(xt)g(of)h(the)f(object)h(that)-118
5738 y(recei)n(v)o(ed)30 b(the)h(original)f(message.)49
b(SELF)31 b(looks)f(up)h(methods)f(in)g(the)h(conte)o(xt)f(of)h(the)g
(\003a)n(v)n(or)g(it)g(is)-118 5858 y(de\002ned)25 b(in.)30
b(If)c(display-me)d(w)o(as)i(re)n(written)f(as:)p eop
%%Page: 204 212
204 211 bop 118 -18 a Fr(204)118 289 y Fh(\(defmethod)58
b(\(geometric-object)e(display-me\))h(\(\))238 409 y(\(=>)i(self)g
(display\))238 529 y(\(=>)g(myself)f(display\)\))118
758 y Fr(and)39 b(sent)g(to)f(an)h(object)g(of)g(\003a)n(v)n(or)h
(square,)i(then)d(the)g(\002rst)g(display)f(w)o(ould)g(be)h(that)g
(de\002ned)g(in)118 878 y(geometric-object,)e(and)e(the)h(second)f(w)o
(ould)f(be)i(the)f(one)g(de\002ned)h(for)f(square.)63
b(If)35 b(the)g(display-)118 999 y(me)c(message)g(w)o(as)h(sent)f(to)g
(an)g(object)g(of)h(\003a)n(v)n(or)f(geometric-object,)i(self)e(and)g
(myself)g(w)o(ould)f(be)118 1119 y(identical.)118 1414
y Fk(19.4.3)119 b(Inheritance)30 b(and)h(Initialization)118
1602 y Fr(Y)-11 b(ou)30 b(may)g(ha)n(v)o(e)g(noticed)f(that)h(there)g
(is)g(ambiguity)e(in)i(the)g(order)g(a)h(ne)n(wly)e(created)i(object)e
(is)h(ini-)118 1722 y(tialized)d(when)h(the)f(object)h(uses)f
(inheritance.)40 b(When)27 b(inheritance)h(is)f(used,)h(initialization)
e(is)h(per)n(-)118 1842 y(formed)e(as)g(describe)f(abo)o(v)o(e)g(with)g
(the)h(follo)n(wing)e(additions:)118 1963 y(When)g(the)g(son)f(\003a)n
(v)n(or')-5 b(s)23 b(\(i.e.,)g(the)f(\003a)n(v)n(or)i(gi)n(v)o(en)d(in)
h(the)h(mak)o(e-instance)f(or)h(instantiate-\003a)n(v)n(or)f(call\))118
2083 y(DEF)-7 b(A)i(UL)c(T)g(-INIT)27 b(method)h(is)f(e)o(x)o(ecuted,)i
(the)f(\002rst)g(thing)f(it)h(does)g(is)g(call)g(its)f(f)o(ather')-5
b(s)29 b(DEF)-7 b(A)i(UL)c(T)g(-)118 2204 y(INIT)25 b(method.)30
b(The)25 b(second)f(thing)g(it)g(does)h(is)f(e)o(x)o(ecute)g(its)g(f)o
(ather')-5 b(s)25 b(INIT)g(method,)f(if)h(it)f(e)o(xists.)118
2324 y(Notice)32 b(that)f(if)h(the)f(f)o(ather)i(\003a)n(v)n(or)f(used)
g(inheritance,)h(its)e(DEF)-7 b(A)i(UL)c(T)g(-INIT)31
b(method)f(w)o(ould)h(\002rst)118 2444 y(call)25 b(its)f(grandf)o
(ather')-5 b(s)24 b(DEF)-7 b(A)i(UL)c(T)g(-INIT)24 b(and)h(INIT)g
(methods,)f(and)g(so)h(on.)118 2740 y Fk(19.4.4)119 b(Making)30
b(Changes)g(to)g(Inherited)h(Code)118 2927 y Fr(The)26
b(inheritance)g(scheme)f(used)h(in)f(this)g(f)o(acility)g(is)h(static)f
(\226)h(all)f(of)h(the)g(w)o(ork)f(is)h(done)f(at)h(compile-)118
3048 y(time.)k(This)24 b(has)h(some)f(implications)f(for)i(compiling)e
(object)h(de\002nitions)g(that)g(use)h(inheritance:)263
3276 y Fl(\017)49 b Fr(All)24 b(of)h(the)g(parents)f(of)h(a)g(\003a)n
(v)n(or)h(must)d(be)i(loaded)g(or)f(compiled)g(before)h(compiling)e
(the)i(ne)n(w)362 3396 y(child')-5 b(s)24 b(de\002nitions.)29
b(If)c(this)f(is)h(not)f(the)g(case,)i(an)f(error)g(message)g(will)f
(be)g(issued.)263 3600 y Fl(\017)49 b Fr(If)32 b(a)g(change)f(is)h
(made)f(to)g(a)h(parent)f(\003a)n(v)n(or)l(,)j(including)c(the)h
(addition)f(of)i(a)g(ne)n(w)f(method)f(or)362 3720 y(changing)i
(instance)g(v)n(ariables,)h(all)g(of)f(the)g(children)g(will)g(ha)n(v)o
(e)g(to)g(be)h(recompiled)f(to)g(use)362 3840 y(it.)41
b(Y)-11 b(ou)29 b(do)f(not)g(ha)n(v)o(e)g(to)g(recompile)h(the)f
(children,)h(ho)n(we)n(v)o(er)l(,)f(if)h(an)f(e)o(xisting)f(method)h
(of)g(a)362 3961 y(parent)d(is)f(rede\002ned.)118 4300
y Ft(19.5)143 b(Deb)m(ugging)33 b(Inf)l(ormation)118
4524 y Fr(An)o(y)20 b(object)h(may)g(be)g(displayed)g(symbolically)e
(by)h(in)l(v)n(oking)g(the)h(method)f(DESCRIBE,)j(e.g.)29
b(\()p Fe(=)p Ff(>)118 4644 y Fr(x)i(describe\).)51 b(This)30
b(method)h(prints)f(the)h(name)g(of)h(each)g(instance)f(v)n(ariable)f
(and)i(its)e(v)n(alue,)j(using)118 4765 y(the)24 b(ordinary)g(LISP)g
(printing)f(routines.)30 b(Fla)n(v)n(ored)24 b(objects)f(are)i(liable)e
(to)h(be)g(comple)o(x)f(and)h(deeply)118 4885 y(nested)32
b(or)f(e)n(v)o(en)g(circular)-5 b(.)52 b(This)31 b(mak)o(es)g(it)g
(often)h(a)g(good)f(idea)h(to)f(set)h(PRINLEVEL)g(to)f(a)i(small)118
5005 y(inte)o(ger)24 b(before)i(printing)d(structures)h(containing)g
(objects)g(to)g(control)g(the)h(amount)f(of)h(output.)118
5126 y(When)19 b(printed)f(by)h(the)f(standard)h(LISP)h(printing)d
(routines,)i(\224\003a)n(v)n(ored)h(objects\224)e(appear)i(as)e(e)n(v)o
(ectors)118 5246 y(whose)25 b(zeroth)f(element)h(is)f(the)h(name)f(of)h
(the)g(\003a)n(v)n(or)-5 b(.)118 5366 y(F)o(or)25 b(each)g(method)f
(de\002ned,)h(there)g(is)g(a)g(corresponding)f(LISP)h(function)f(named)
118 5487 y Fh(<flavor-name>$<method-name>)p Fr(.)f(Such)c(function)f
(names)g(sho)n(w)g(up)h(in)f(backtrace)i(print-)118 5607
y(outs.)118 5728 y(It)25 b(is)f(permissible)g(to)g(de\002ne)h(ne)n(w)g
(methods)e(on)i(the)f(\003y)i(for)f(deb)n(ugging)e(purposes.)p
eop
%%Page: 205 213
205 212 bop -118 954 a Fn(V)-21 b(ectors)52 b(and)f(Such)-118
1470 y Ft(20.1)142 b(V)-14 b(ectors)-118 1696 y Fr(A)34
b(v)o(ector)g(is)f(a)i(structured)e(entity)g(in)h(which)g(random)f
(elements)g(may)h(be)g(accessed)h(with)e(an)i(in-)-118
1816 y(te)o(ger)f(inde)o(x.)58 b(A)34 b(v)o(ector)g(has)h(a)f(single)g
(dimension.)57 b(Its)34 b(maximum)f(size)h(is)g(determined)f(by)h(the)
-118 1937 y(implementation)21 b(and)i(a)n(v)n(ailable)f(space.)31
b(A)23 b(v)o(ector)g(is)g(denoted)f(by)h(enclosing)g(its)f(elements)h
(within)-118 2057 y(square)i(brack)o(ets.)-118 2267 y
Fh([10)59 b(TEN])-118 2388 y([COLORS)f(\(RED)h(BLUE\)])-118
2661 y Fq(Built-in)25 b(V)-10 b(ector)26 b(Cr)n(eation)f(and)h(Copying)
f(Functions)-118 3070 y(\(mkv)o(ect)h(UPLIM:integer\):)32
b(v)o(ector)1976 b Fi(e)n(xpr)-89 3190 y Fr(De\002nes)30
b(and)f(allocates)g(space)g(for)h(a)f(v)o(ector)g(with)f(\(add1)h
(UPLIM\))h(elements)e(ac-)-118 3311 y(cessed)23 b(as)h(0)f(...)30
b(UPLIM.)23 b(Each)h(element)f(is)g(initialized)f(to)h(nil.)29
b(If)24 b(UPLIM)f(is)g(-1,)h(an)-118 3431 y(empty)h(v)o(ector)g(is)h
(returned.)34 b(An)26 b(error)g(occurs)g(if)g(UPLIM)g(is)f(less)h(than)
f(-1)h(or)g(if)g(the)-118 3552 y(amount)e(of)h(a)n(v)n(ailable)f
(memory)g(is)g(insuf)n(\002cient)g(for)h(a)g(v)o(ector)f(of)h(this)f
(size.)121 3738 y Fh(*****)59 b(A)g(vector)g(of)g(size)g(UPLIM)f
(cannot)h(be)g(allocated)-118 4165 y Fq(\(mak)o(e-v)o(ector)26
b(UPLIM:integer)g(INITV)-13 b(AL:any\):)31 b(v)o(ector)1130
b Fi(e)n(xpr)-97 4286 y Fr(Similar)21 b(to)f(mkv)o(ect,)h(e)o(xcept)g
(that)f(each)i(element)f(is)f(initialized)g(to)h(INITV)-13
b(AL.)20 b(Note)-118 4406 y(the)35 b(dif)n(ference)i(between)e(this)g
(function)g(and)h(mak)o(e-string,)h(\(see)g(the)e(section)g(on)-118
4527 y(creating)d(and)g(cop)o(ying)e(strings)h(in)h(Chapter)g(6\).)52
b(This)31 b(function)g(creates)h(a)g(v)o(ector)-118 4647
y(of)h(\(add1)h(UPLIM\))f(elements)g(where)g(mak)o(e-string)g(creates)h
(a)f(string)g(of)g(UPLIM)-118 4767 y(characters.)-118
4898 y(The)25 b(v)o(ector)g(created)i(by)e(this)f(function)h(will)g
(contain)f(\(add1)i(UPLIM\))f(references)i(to)e(INTV)-13
b(AL)25 b(as)-118 5019 y(opposed)f(to)g(creating)h(a)g(cop)o(y)g(of)g
(UPLIM)g(for)g(each)g(entry)-6 b(.)121 5256 y Fh(1)60
b(lisp>)e(\(setq)h(array)g(\(make-vector)e(1)i(\(make-vector)e(1)j
(0\)\)\))121 5377 y([[0)f(0])g([0)h(0]])121 5497 y(2)g(lisp>)e
(\(vector-store)f(\(vector-fetch)g(array)i(0\))g(0)g(1\))121
5618 y(1)121 5738 y(3)h(lisp>)e(array)121 5858 y([[1)h(0])g([1)h(0]])
1579 6066 y Fr(205)p eop
%%Page: 206 214
206 213 bop 118 -18 a Fr(206)118 357 y Fq(\(v)o(ector)26
b([ARGS:any]\):)31 b(v)o(ector)2104 b Fi(ne)n(xpr)147
478 y Fr(Create)31 b(v)o(ector)e(of)g(elements)f(from)h(the)g(list)g
(ARGS.)g(The)h(size)f(of)g(the)g(v)o(ector)g(will)118
598 y(be)h(equal)g(to)f(the)h(number)f(of)h(elements)f(in)g(the)h(list)
f(ARGS.)h(Each)g(element)f(of)h(the)118 718 y(v)o(ector)24
b(is)h(initialized)e(to)i(the)f(corresponding)g(element)g(from)h(ARGS)
118 1088 y Fq(\(copyv)o(ectortofr)n(om)h(NEW)-5 b(:v)o(ector)25
b(OLD:v)o(ector\):)118 1208 y(NEW)-5 b(:v)o(ector)2838
b Fi(e)n(xpr)148 1329 y Fr(The)29 b(elements)g(of)g(NEW)g(are)h(set)f
(to)g(the)h(corresponding)e(elements)h(of)g(OLD)g(The)118
1449 y(elements)24 b(are)i(not)e(copied.)357 1631 y Fh(1)60
b(lisp>)e(\(setq)h(a)h([[1)f(2)g(3]]\))357 1751 y([[1)g(2)h(3]])357
1871 y(2)g(lisp>)e(\(setq)h(b)h([0]\))357 1992 y([0])357
2112 y(3)g(lisp>)e(\(copyvectortofrom)e(b)k(a\))357 2233
y([[1)f(2)h(3]])357 2353 y(4)g(lisp>)e(\(eq)i(\(getv)e(a)i(0\))f
(\(getv)g(b)g(0\)\))357 2473 y(t)118 2898 y Fq(\(copyv)o(ector)26
b(V)-9 b(:v)o(ector\):)32 b(v)o(ector)2124 b Fi(e)n(xpr)150
3018 y Fr(Create)33 b(a)g(ne)n(w)e(v)o(ector)l(,)i(with)f(the)f
(elements)h(initalized)f(from)g(the)h(corresponding)118
3138 y(elements)24 b(of)h(V)-13 b(.)25 b(The)g(elements)f(of)h(V)g(are)
g(not)f(copied.)357 3320 y Fh(1)60 b(lisp>)e(\(setq)h(a)h("A)f
(STRING"\))357 3440 y("A)h(STRING")357 3561 y(2)g(lisp>)e(\(setq)h(b)h
(\(vector)e(a\)\))357 3681 y(["A)h(STRING"])357 3802
y(3)h(lisp>)e(\(setq)h(c)h(\(copyvector)d(b\)\))357 3922
y(["A)i(STRING"])357 4042 y(4)h(lisp>)e(\(eq)i(\(getv)e(b)i(0\))f
(\(getv)g(c)g(0\)\))357 4163 y(t)118 4461 y Fk(20.1.1)119
b(About)30 b(the)h(Basic)e(Operations)h(on)g(V)-12 b(ectors)118
4649 y Fr(The)24 b(functionality)f(pro)o(vided)g(here)h(o)o(v)o(erlaps)
f(what)h(is)g(pro)o(vided)f(in)g(some)h(other)g(w)o(ays.)30
b(The)24 b(func-)118 4770 y(tions)31 b(pro)o(vided)f(here)i(ha)n(v)o(e)
g(well-chosen)f(names)g(and)h(de\002nitions,)g(the)o(y)f(pro)o(vide)f
(the)i(option)e(of)118 4890 y(generating)39 b(ef)n(\002cient)g(code,)k
(and)c(the)o(y)f(are)i(consistent)d(with)i(the)g(esthetic)f
(preferences)i(of)g(our)118 5011 y(community)-6 b(.)118
5309 y Fk(20.1.2)119 b(The)30 b(Operations)118 5497 y
Fr(This)f(section)g(documents)f(functions)h(in)g(the)g(library)h
(module)e Fq(slo)o(w-v)o(ectors)h Fr(.)46 b(There)30
b(is)f(another)118 5618 y(library)21 b(module)g(called)h
Fq(fast-v)o(ectors)p Fr(.)30 b(The)21 b(f)o(ast-v)o(ectors)g(module)g
(pro)o(vides)f(alternate)i(de\002nitions)118 5738 y(for)31
b(these)g(functions.)48 b(When)31 b(the)g(switch)f(f)o(ast-v)o(ectors)g
(is)h(non-nil)f(the)h(compiler)f(will)g(use)h(these)118
5858 y(alternate)20 b(de\002nitions)f(to)g(produce)h(ef)n(\002ecient)g
(code.)30 b(Ho)n(we)n(v)o(er)l(,)19 b(there)h(will)f(not)h(be)g(an)o(y)
f(v)o(eri\002cation)p eop
%%Page: 207 215
207 214 bop -118 -18 a Fg(20.1.)55 b(VECT)n(ORS)2688
b Fr(207)-118 289 y(that)27 b(ar)n(guments)g(are)i(of)e(correct)i(type)
e(\(in)h(addition,)f(it)g(is)g(assumed)g(that)g(numeric)h(ar)n(guments)
f(are)-118 409 y(within)34 b(a)j(proper)e(range\).)65
b(If)36 b(in)l(v)n(alid)e(ar)n(guments)h(are)i(used,)h(then)d(at)h
(best)f(your)h(code)g(will)f(not)-118 529 y(generate)d(correct)h
(results,)g(you)f(may)f(actually)h(damage)g(the)g(PSL)h(system.)51
b(There)32 b(are)h(tw)o(o)f(side)-118 650 y(ef)n(fects)h(to)f(loading)g
(f)o(ast-v)o(ectors.)54 b(The)33 b(slo)n(w-v)o(ectors)e(module)h(will)g
(be)h(loaded)g(and)f(the)h(switch)-118 770 y(f)o(ast-v)o(ectors)24
b(will)g(be)h(set)g(to)f(t.)-118 1112 y Fq(\(v)o(ector)l(-fetch)j(V)-9
b(:v)o(ector)26 b(I:integer\):)31 b(any)1798 b Fi(e)n(xpr)-97
1232 y Fr(Accesses)22 b(an)f(element)g(of)g(a)h(PSL)g(v)o(ector)-5
b(.)28 b(V)-11 b(ector)21 b(inde)o(x)o(es)f(start)h(with)f(0.)30
b(The)21 b(thing)-118 1353 y(stored)j(in)h(that)f(position)f(of)i(the)g
(v)o(ector)f(is)g(returned.)-118 1725 y Fq(\(v)o(ector)l(-stor)n(e)i(V)
-9 b(:v)o(ector)26 b(I:integer)f(X:any\):)32 b(None)25
b(Retur)o(ned)1022 b Fi(e)n(xpr)-93 1845 y Fr(Stores)25
b(into)f(a)h(PSL)g(v)o(ector)-5 b(.)30 b(V)-11 b(ector)25
b(inde)o(x)o(es)e(start)i(with)f(0.)-118 2196 y Fq(\(v)o(ector)l(-size)
i(V)-9 b(:v)o(ector\):)32 b(integer)2105 b Fi(e)n(xpr)-89
2317 y Fr(Returns)29 b(the)g(number)g(of)g(elements)g(in)f(a)i(PSL)g(v)
o(ector)-5 b(.)43 b(Since)29 b(inde)o(x)o(es)f(start)h(with)-118
2437 y(inde)o(x)k(0,)i(the)f(size)g(is)f(one)h(lar)n(ger)g(than)g(the)f
(greatest)h(le)o(gal)e(inde)o(x.)57 b(See)35 b(also)e(just)-118
2557 y(belo)n(w)-6 b(.)-118 2909 y Fq(\(v)o(ector)l(-upper)l(-bound)29
b(V)-9 b(:v)o(ector\):)32 b(integer)1705 b Fi(e)n(xpr)-91
3029 y Fr(Returns)27 b(the)g(greatest)g(le)o(gal)e(inde)o(x)h(for)h
(accessing)g(or)g(storing)f(into)g(a)h(PSL)h(v)o(ector)-5
b(.)-118 3149 y(See)26 b(also)e(just)g(abo)o(v)o(e.)-118
3521 y Fq(\(v)o(ector)l(-empty?)32 b(V)-9 b(:v)o(ector\):)32
b(boolean)1905 b Fi(e)n(xpr)-93 3642 y Fr(T)m(rue)24
b(if)h(the)g(v)o(ector)f(has)h(no)f(elements)g(\(its)h(size)f(is)h
(0\),)g(otherwise)f(NIL.)-118 3981 y Fk(20.1.3)118 b(Built-in)31
b(Operations)f(on)g(V)-12 b(ectors)-118 4174 y Fr(These)25
b(predate)g(the)f(f)o(ast-v)o(ectors)h(\(f-v)o(ector\))g(and)f(slo)n
(w-v)o(ectors)f(\(s-v)o(ector\))i(library)g(modules.)-118
4516 y Fq(\(getv)g(V)-9 b(:v)o(ector)25 b(INDEX:integer\):)33
b(any)1842 b Fi(e)n(xpr)-92 4636 y Fr(Returns)27 b(the)f(v)n(alue)f
(stored)h(at)g(position)f(INDEX)h(of)g(the)g(v)o(ector)g(V)-13
b(.)27 b(The)f(type)g(mis-)-118 4757 y(match)f(error)i(may)e(occur)-5
b(.)33 b(An)26 b(error)g(occurs)g(if)g(the)f(INDEX)h(does)f(not)g(lie)h
(within)e(0)-118 4877 y(...)30 b(\(upb)o(v)24 b(V\))h(inclusi)n(v)o(e:)
121 5073 y Fh(*****)59 b(INDEX)f(subscript)g(is)h(out)g(of)h(range)-118
5509 y Fq(\(putv)26 b(V)-9 b(:v)o(ector)25 b(INDEX:integer)h(V)-13
b(ALUE:any\):)32 b(any)1277 b Fi(e)n(xpr)-82 5629 y Fr(Stores)36
b(V)-13 b(ALUE)35 b(in)h(the)g(v)o(ector)f(V)h(at)g(position)e(INDEX,)i
(V)-13 b(ALUE)35 b(is)h(returned.)-118 5750 y(A)31 b(type)g(mismatch)f
(error)i(will)f(occur)h(if)f(V)h(is)f(not)f(a)i(v)o(ector)-5
b(.)50 b(If)32 b(INDEX)f(is)g(either)-118 5870 y(ne)o(gati)n(v)o(e)22
b(or)j(greater)h(than)e(\(upb)o(v)g(V\))h(then)f(an)h(error)h(occurs.)p
eop
%%Page: 208 216
208 215 bop 118 -18 a Fr(208)357 289 y Fh(*****)59 b(Subscript)f
(`INDEX')g(in)h(PutV)g(is)g(out)g(of)h(range)118 682
y Fq(\(upb)o(v)26 b(U:any\):)31 b(nil,)25 b(integer)2279
b Fi(e)n(xpr)143 803 y Fr(Returns)25 b(the)g(upper)f(limit)f(of)i(U)g
(if)g(U)g(is)f(a)h(v)o(ector)l(,)g(or)f(nil)h(if)f(it)h(is)f(not.)118
1167 y Ft(20.2)143 b(W)-11 b(ord)35 b(V)-14 b(ectors)118
1390 y Fr(W)-8 b(ord-v)o(ectors)28 b(or)h(w-v)o(ectors)f(are)i(v)o
(ector)n(-lik)o(e)e(structures,)h(in)g(which)f(each)h(element)g(is)f(a)
h(\224w)o(ord\224)118 1511 y(sized,)23 b(untagged)f(entity)-6
b(.)29 b(This)22 b(can)h(be)g(thought)f(of)h(as)g(a)g(special)g(case)g
(of)g(\002xnum)g(v)o(ector)l(,)f(in)h(which)118 1631
y(the)i(tags)f(ha)n(v)o(e)h(been)g(remo)o(v)o(ed.)118
1970 y Fq(\(mak)o(e-w)o(ords)h(UPLIM:integer)g(INITV)-13
b(AL:integer\):)118 2091 y(w)o(ord-v)o(ector)2851 b Fi(e)n(xpr)143
2211 y Fr(De\002nes)25 b(and)g(allocates)g(space)g(for)g(a)g(W)-8
b(ord-V)d(ector)25 b(with)118 2331 y(\(add1)g(UPLIM\))g(elements,)f
(each)h(initialized)f(to)g(INITV)-13 b(AL.)118 2696 y
Fq(\(mak)o(e-bytes)26 b(UPLIM:integer)g(INITV)-13 b(AL:integer\):)118
2817 y(byte-v)o(ector)2889 b Fi(e)n(xpr)143 2937 y Fr(De\002nes)25
b(and)g(allocates)g(space)g(for)g(a)g(byte-v)o(ector)f(with)118
3058 y(\(add1)h(UPLIM\))g(elements,)f(each)h(initialized)f(to)g(INITV)
-13 b(AL.)118 3418 y Ft(20.3)143 b(General)34 b(X-V)-14
b(ector)33 b(Operations)118 3641 y Fr(An)25 b(x-v)o(ector)g(is)g
(either)h(a)g(v)o(ector)l(,)f(string,)f(w)o(ord-v)o(ector)l(,)h(or)h
(byte-v)o(ector)-5 b(.)31 b(Each)26 b(may)f(ha)n(v)o(e)g(se)n(v)o(eral)
118 3762 y(elements,)f(accessed)h(by)f(an)h(inte)o(ger)f(inde)o(x.)29
b(A)c(v)n(alid)e(inde)o(x)h(for)h(an)g(x-v)o(ector)f(X)g(is)g(from)h(0)
f(to)g(\(size)118 3882 y(X\).)32 b(Thus)e(an)i(x-v)o(ector)f(X)g(will)g
(ha)n(v)o(e)g(\(add1)h(\(size)f(X\)\))h(elements.)50
b(The)31 b(functions)g(described)g(in)118 4003 y(this)24
b(section)g(may)h(also)f(be)h(applied)f(to)h(lists.)118
4342 y Fq(\(size)g(X:x-v)o(ector\):)32 b(integer)2307
b Fi(e)n(xpr)143 4462 y Fr(Returns)25 b(the)g(size)f(of)h(x-v)o(ector)g
(X,)f(the)h(size)g(is)f(the)h(inde)o(x)f(of)g(the)h(last)f(element.)118
4823 y Fq(\(indx)h(X:x-v)o(ector)h(I:integer\):)32 b(any)2021
b Fi(e)n(xpr)139 4944 y Fr(Access)20 b(the)h(I')n(th)f(element)g(of)h
(an)g(x-v)o(ector)-5 b(.)28 b(An)20 b(error)h(occurs)g(if)f(I)h(is)f
(either)h(ne)o(gati)n(v)o(e)118 5064 y(or)k(e)o(xceeds)g(the)f(size)h
(of)g(X.)357 5194 y Fh(*****)59 b(Index)g(`I')g(out)g(of)g(range)g(for)
g(X)g(in)h(INDX)118 5588 y Fq(\(setindx)26 b(X:x-v)o(ector)f(I:integer)
h(A:any\):)31 b(any)1620 b Fi(e)n(xpr)146 5708 y Fr(De\002ne)29
b(A)g(to)f(be)g(the)g(I')n(th)h(element)e(of)i(X.)f(If)h(the)f(inde)o
(x)f(I)h(is)g(outside)f(the)h(range)h(of)118 5828 y(X)c(then)f(it)h(is)
f(an)h(error)g(\(see)h(indx)e(for)h(a)g(description)f(of)h(the)f
(message\).)p eop
%%Page: 209 217
209 216 bop -118 -18 a Fg(20.3.)55 b(GENERAL)25 b(X-VECT)n(OR)g(OPERA)
-11 b(TIONS)1515 b Fr(209)-118 357 y Fq(\(sub)26 b(X:x-v)o(ector)f
(B:integer)h(S:integer\):)33 b(x-v)o(ector)1428 b Fi(e)n(xpr)-89
478 y Fr(Extract)28 b(a)h(subrange)g(of)g(an)f(x-v)o(ector)l(,)i
(starting)d(at)i(B,)g(producing)f(a)h(ne)n(w)f(x-v)o(ector)-118
598 y(of)d(size)g(S.)g(Note)f(that)h(an)g(x-v)o(ector)f(of)h(size)g(0)f
(has)h(one)g(entry)-6 b(.)-118 968 y Fq(\(setsub)26 b(X:x-v)o(ector)f
(I1:integer)h(S:integer)g(Y)-9 b(:x-v)o(ector\):)-118
1088 y(x-v)o(ector)3021 b Fi(e)n(xpr)-93 1208 y Fr(Store)25
b(subrange)g(of)f(Y)h(of)g(size)g(S)g(into)f(X)h(starting)f(at)h(I1.)30
b(Returns)25 b(Y)-13 b(.)-118 1578 y Fq(\(subseq)26 b(X:x-v)o(ector)f
(LO:integer)h(HI:integer\):)32 b(x-v)o(ector)1151 b Fi(e)n(xpr)-81
1698 y Fr(Returns)36 b(an)h(x-v)o(ector)f(whose)g(size)h(is)f(\(sub1)g
(\(-)h(HI)g(LO\)\),)g(be)o(ginning)d(with)i(the)-118
1819 y(element)27 b(of)h(X)g(with)f(inde)o(x)g(LO.)g(In)h(other)g(w)o
(ords,)g(returns)f(the)h(subsequence)f(of)h(X)-118 1939
y(starting)c(at)h(LO)f(and)h(ending)f(just)g(before)h(HI.)121
2121 y Fh(1)60 b(lisp>)e(\(setq)h(a)g('[0)h(1)f(2)h(3)f(4)h(5)f(6]\))
121 2242 y([0)g(1)h(2)f(3)h(4)g(5)f(6])121 2362 y(2)h(lisp>)e(\(subseq)
g(a)i(4)g(6\))121 2482 y([4)f(5])-118 2907 y Fq(\(setsubseq)26
b(Y)-9 b(:x-v)o(ector\):Y)g(:x-v)o(ector)1954 b Fi(e)n(xpr)-86
3028 y Fr(The)31 b(size)h(of)g(Y)f(must)g(be)g(\(sub1)h(\(-)g(HI)f
(LO\)\))h(and)g(Y)f(must)g(be)h(the)f(same)h(type)f(of)-118
3148 y(x-v)o(ector)37 b(as)g(X.)g(Elements)g(LO)g(through)f(\(sub1)h
(HI\))h(in)f(X)g(are)h(replaced)g(by)f(the)-118 3269
y(elements)24 b(of)h(Y)-13 b(.)25 b(Y)g(is)f(returned)h(and)g(X)f(is)h
(changed)g(destructi)n(v)o(ely)-6 b(.)121 3531 y Fh(1)60
b(lisp>)e(\(setq)h(a)g("0123456"\))121 3652 y("0123456")121
3772 y(2)h(lisp>)e(\(setsubseq)g(a)h(3)h(7)f("ABCD"\))121
3892 y("ABCD")121 4013 y(3)h(lisp>)e(A)121 4133 y("012ABCD")-118
4584 y Fq(\(concat)26 b(X:x-v)o(ector)f(Y)-9 b(:x-v)o(ector\):)32
b(x-v)o(ector)1668 b Fi(e)n(xpr)-93 4705 y Fr(Concatenate)25
b(2)g(x-v)o(ectors.)30 b(Currently)25 b(the)o(y)f(must)f(be)i(of)g
(same)g(type.)-118 5074 y Fq(\(totalcopy)g(S:any\):)32
b(any)2421 b Fi(e)n(xpr)-89 5194 y Fr(Returns)29 b(a)h(unique)e(cop)o
(y)h(of)g(the)g(entire)g(structure,)h(i.e.,)g(it)f(copies)f(e)n(v)o
(erything)g(for)-118 5315 y(which)22 b(storage)h(is)f(allocated)h(-)g
(e)n(v)o(erything)e(b)n(ut)h(inums)g(and)h(ids.)29 b(Lik)o(e)23
b(cop)o(y)f(\(Chap-)-118 5435 y(ter)j(5\))g(totalcop)o(y)f(will)f(not)i
(terminate)f(when)h(applied)f(to)g(circular)h(structures.)121
5618 y Fh(1)60 b(lisp>)e(\(setq)h(x)g('\("ONE")g(2\))121
5738 y(1)h(lisp>)417 b(y)59 b(\(totalcopy)f(x\))121 5858
y(1)i(lisp>)417 b(z)59 b(\(copy)g(x\)\))p eop
%%Page: 210 218
210 217 bop 118 -18 a Fr(210)357 289 y Fh(\("ONE")59
b(2\))357 409 y(2)h(lisp>)e(\(eq)i(\(first)e(x\))h(\(first)g(y\)\))357
529 y(NIL)357 650 y(3)h(lisp>)e(\(eq)i(\(first)e(x\))h(\(first)g(z\)\))
357 770 y(T)p eop
%%Page: 211 219
211 218 bop -118 958 a Fn(Operating)51 b(System)h(Contacts)-118
1478 y Ft(21.1)142 b(Calling)35 b(the)g(Command)e(Shell)-118
1713 y Fr(The)25 b(function)f(system)f(can)j(be)e(used)h(to)f(e)o(x)o
(ecute)h(a)g(system)e(command.)-118 2058 y Fq(\(system)i
(COMMAND:string\):unde\002ned)1702 b Fi(e)n(xpr)-91 2178
y Fr(starts)27 b(a)g(\(system)f(speci\002c\))i(command)e(interpreter)h
(and)g(passes)g(the)g(command)f(to)-118 2298 y(the)f(interpreter)-5
b(.)-118 2454 y(E.g.)30 b(unter)24 b(the)f(UNIX)h(operating)f(system)g
(a)h(Bourne)g(shell)f(is)h(started)f(and)h(COMMAND)f(is)g(inter)n(-)
-118 2574 y(preted)i(follo)n(wing)e(the)h(con)l(v)o(entions)f(of)i
(this)f(shell.)30 b(Of)25 b(course)g(it)f(is)h(possible)e(to)h(use)h
(e.g.)-118 2810 y Fh(\(system)58 b("bash"\))-118 3185
y Ft(21.2)142 b(The)35 b(W)-11 b(orking)36 b(Dir)m(ectory)-118
3419 y Fr(The)25 b(current)g(w)o(orking)f(directory)g(can)h(be)g(read)h
(by)-118 3764 y Fq(\(pwd\):STRING)2705 b Fi(e)n(xpr)-118
3884 y Fr(returns)24 b(the)h(current)g(w)o(orking)f(directory)h(in)f
(system)g(speci\002c)h(format.)-118 4040 y(The)g(current)g(w)o(orking)f
(directory)g(can)h(be)g(set)g(by)-118 4384 y Fq(\(cd)h
(DIR:string\):BOOLEAN)2181 b Fi(e)n(xpr)-118 4505 y Fr(sets)29
b(the)g(current)h(w)o(orking)e(directory)h(to)g(DIR)h(after)g(e)o
(xpanding)e(the)i(\002lename)f(ac-)-118 4625 y(cording)d(to)g(the)g
(rules)g(of)g(the)g(operating)g(system.)34 b(If)27 b(this)e(operation)h
(is)f(not)h(sucess-)-118 4745 y(ful,)e(the)h(v)n(alue)f(Nil)g(is)h
(returned.)-118 5142 y Ft(21.3)142 b(In)-6 b(v)o(oking)34
b(Pipes)-118 5377 y Fr(Pipes)20 b(are)h(kno)n(wn)d(to)i(almost)f(all)h
(the)g(operating)f(systems)g(where)h(PSL)h(is)e(implemented)g(for)-5
b(.)29 b(It)20 b(usu-)-118 5497 y(ally)25 b(comes)f(in)h(tw)o(o)g
(\003a)n(v)n(ours,)g(named)g(pipes)g(and)g(anon)o(ymous)e(pipes.)31
b(PSL)26 b(uses)f(the)g(anon)o(ymous)-118 5618 y(pipes)i(for)g
(unidirectional)f(communication.)37 b(One)28 b(standard)f(operation)f
(is)h(the)h(connection)e(to)h(the)-118 5738 y(Gnuplot)g(graphics)h
(system)f(from)i(the)f(REDUCE)h(computer)f(algebra)h(system.)40
b(In)29 b(the)f(follo)n(wing)-118 5858 y(we)d(describe)g(the)f(pipes)h
(operation)f(in)g(PSL)i(under)f(Unix)f(and)h(W)l(indo)n(ws.)1579
6066 y(211)p eop
%%Page: 212 220
212 219 bop 118 -18 a Fr(212)118 289 y Fk(21.3.1)119
b(Pipes)30 b(under)h(Unix)118 490 y Fr(The)25 b(pipe)f(interf)o(ace)i
(can)f(be)g(made)g(a)n(v)n(ailable)f(by)g(loading)g(the)h(module)e
Fq(pipes)p Fr(.)118 835 y Fq(\(pipe-open)k(CMD:string)e
(MODE:id\):Channel)1493 b Fi(e)n(xpr)118 1032 y Fr(The)23
b(Unix)f(system)g(tries)h(to)f(create)i(the)f(process)f(de\002ned)i(by)
e(CMD)h(using)f(the)h(usual)f(Unix)g(mecha-)118 1152
y(nisms)g(lik)o(e)g(pathes)h(etc.)30 b(Depending)23 b(on)f(the)h(MODE)g
(either)g(the)f(stdin)g(or)h(the)g(stdout)f(is)h(connected)118
1272 y(to)32 b(the)f(PSL)i(program)f(during)f(the)h(e)n(v)n(aluation.)
50 b(The)32 b(resulting)e(LISP)j(I/O)f(\002le)g(is)g(returned)g(such)
118 1393 y(that)22 b(in)g(subsequent)f(read)i(or)f(write)g(operation)g
(to)g(this)f(\002le)i(the)f(command)f(input)h(or)g(output)f(is)h(used.)
118 1513 y(MODE)i(needs)h(to)f(be)h(either)g Fh(input)f
Fr(or)h Fh(output)p Fr(.)118 1640 y(A)g(pipe)g(can)h(be)f(used)g(as)h
(a)f(normal)g(LISP)h(\002le.)33 b(A)25 b(close)g(operation)g(on)g(the)g
(\002le)h(will)e(terminate)h(the)118 1760 y(process.)k(If)22
b(the)f(user)g(w)o(ants)f(to)h(k)o(eep)g(the)g(process)g(ali)n(v)o(e,)f
(instead)h(of)g(close)f(the)h(follo)n(wing)e(function)118
1881 y(has)25 b(to)f(be)h(used:)118 2226 y Fq(\(abandonpipe)i
(Channel\):unde\002ned)1913 b Fi(e)n(xpr)147 2346 y Fr(This)28
b(closes)g(the)h(pipe)f(created)i(by)e(pipe-open,)i(b)n(ut)e(the)g
(process)h(will)f(remain)g(ac-)118 2467 y(ti)n(v)o(e.)118
2603 y(Example:)118 2965 y Fh(\(load)59 b(pipes\))118
3085 y(\(setq)g(mail)g(\(pipe-open)e("mail)i(hugo@zib.de")e
('output\)\))118 3205 y(\(wrs)i(mail\))118 3326 y(\(prin2)g("This)f(is)
i(the)f(result)f(of)h(\(expt)g(10)g(100\))g("\))118 3446
y(\(print2)f(\(expt)h(10)g(100\)\))118 3567 y(\(wrs)g(nil\))118
3687 y(\(close)g(mail\))118 4023 y Fk(21.3.2)119 b(Pipes)30
b(under)h(MS/DOS)118 4223 y Fr(The)25 b(pipe)f(interf)o(ace)i(can)f(be)
g(made)g(a)n(v)n(ailable)f(by)g(loading)g(the)h(module)e
Fq(pipes)p Fr(.)118 4559 y Fk(21.3.3)119 b(Pipes)30 b(under)h(MS)f(W)n
(indo)o(ws)118 4760 y Fr(The)25 b(pipe)f(interf)o(ace)i(can)f(be)g
(made)g(a)n(v)n(ailable)f(by)g(loading)g(the)h(module)e
Fq(w-pipes)p Fr(.)118 5140 y Ft(21.4)143 b(Shar)m(ed)34
b(Memory)h(Interface)e(\(Unix)i(only\))118 5377 y Fr(The)20
b(PSL)h(shared)f(memory)f(interf)o(ace)i(pro)o(vides)e(all)h(function)f
(for)h(operating)g(with)f(shared)h(memory)118 5497 y(re)o(gions)32
b(and)h(semaphores)f(\(See)i(e.g.)55 b(Unix)32 b(man)h(pages)f(for)i
(shmop,)f(shmget,)h(shmctl,)f(semop,)118 5618 y(semctl,)25
b(semget)g(etc.\))34 b(The)25 b(de\002nitions)g(of)g(these)h(man)f
(pages)h(are)g(used)f(in)g(the)h(paragraph.)33 b(Using)118
5738 y(the)23 b(memory)g(address)g(map)g(mechanism)f(described)h(belo)n
(w)-6 b(,it)21 b(is)i(easy)g(to)g(write)g(one')-5 b(s)23
b(o)n(wn)f(shared)118 5858 y(memory)i(application.)p
eop
%%Page: 213 221
213 220 bop -118 -18 a Fg(21.4.)55 b(SHARED)25 b(MEMOR)-6
b(Y)24 b(INTERF)-7 b(A)l(CE)26 b(\(UNIX)f(ONL)-10 b(Y\))1080
b Fr(213)-118 289 y(In)24 b(the)f(rest)h(of)f(this)g(paragraph)h(we)g
(describe)g(a)g(simple)e(model)h(implementation)e(of)j(a)g('pipe')f
(using)-118 409 y(shared)i(memory)f(and)h(a)g(semaphore.)30
b(This)24 b(code)h(is)f(contained)h(in)f(the)h(\002le)g($pu/shmem.sl.)
-118 870 y Fq(\(shm-open)h(S:pair)g(M:Mode\):any)2013
b Fi(e)n(xpr)-118 990 y Fr(If)31 b(S)g(=)g(0,)g(a)g(ne)n(w)f(shared)h
(memory)e(area)j(is)e(allocated.)47 b(Otherwise)30 b(S)h(is)f(e)o
(xpected)-118 1110 y(to)24 b(be)g(a)g(dotted)g(pair)g(of)g(shmid)f(and)
h(semid)f(of)h(an)g(e)o(xisting)f(shared)h(memory)-6
b(.)29 b(Le)o(gal)-118 1231 y(modes)f(are)h Fq(input)p
553 1231 30 4 v 37 w(cr)n(eate,)h(output)p 1183 1231
V 37 w(cr)n(eate,)h(input)f(and)f(output)p Fr(.)43 b(A)29
b(list)e(consist-)-118 1351 y(ing)d(of)h(channelnumber)f(shmid)g(and)g
(semid)g(is)h(returned.)-118 1721 y Fq(\(independentdetachshm)k
(C:channel\):)k(any)1635 b Fi(e)n(xpr)-118 1841 y Fr(Detaches)25
b(the)g(shared)f(memory)g(re)o(gion)g(used)h(by)f(C,)i(closes)e(the)h
(channel.)-118 2211 y Fq(\(r)n(eadfr)n(omshm)h(C:channel\):any)2076
b Fi(e)n(xpr)-118 2332 y Fr(W)-8 b(aits)29 b(until)f(the)h(shared)g
(memory)g(re)o(gion)f(is)h(readable,)i(reads)f(an)f(e)o(xpression)f
(and)-118 2452 y(resets)d(the)f(mode)h(to)f(writable.)30
b(Returns)25 b(the)g(e)o(xpression.)-118 2822 y Fq(\(writetoshm)g
(C:channel)i(E:expr)n(ession\):list)1627 b Fi(e)n(xpr)-118
2942 y Fr(W)-8 b(aits)38 b(until)f(the)i(shared)g(memory)e(re)o(gion)h
(is)g(writeable,)k(prints)c(the)g(e)o(xpression)-118
3063 y(using)24 b(prin2.)30 b(Returns)25 b(the)f(v)n(alue)g(of)h
(prin2.)-118 3214 y(The)19 b(follo)n(wing)f(C)i(program)f(w)o(orks)g
(together)g(with)f(the)i(PSL)g(part)f(such)g(that)g(it)g(prints)g(the)g
(messages)-118 3334 y(read)30 b(from)f(shared)h(memory)f(when)g(the)o
(y)g(are)h(ready)g(for)g(printing.)44 b(It)29 b(must)g(be)h(started)f
(with)g(tw)o(o)-118 3455 y(paramemters,)24 b(namely)g(the)h(shmid)f
(and)g(the)h(semid)f(to)g(synchronize)h(with)f(the)g(PSL)i(part.)-118
3812 y Fh(#include)58 b(<stdio.h>)-118 3932 y(#include)g(<sys/types.h>)
-118 4053 y(#include)g(<sys/ipc.h>)-118 4173 y(#include)g(<sys/sem.h>)
-118 4414 y(struct)g(sembuf)h(;)-118 4655 y(struct)f(sembuf)h(sembu;)
-118 4775 y(struct)f(sembuf)h(*sembuptr;)-118 5016 y(main)g
(\(argc,argv\))181 5136 y(int)g(argc;)181 5256 y(char)g(*argv[];)-118
5497 y({)g(int)h(sema)e(,)i(shmemid;)1 5618 y(char)f(*)h(shmaddress;)1
5858 y(sembuptr)e(=)i(&sembu;)p eop
%%Page: 214 222
214 221 bop 118 -18 a Fr(214)238 409 y Fh
(sscanf\(argv[1],"\045d",&shmemid)o(\);)238 529 y
(sscanf\(argv[2],"\045d",&sema\);)238 770 y(/*)59 b(open)g(shared)f
(memory)h(*/)178 1011 y(printf\("the)e(data)i(is)g(:)h(\045d)f
(\045d\\n",shmemid,sema\);)238 1131 y(shmaddress)e(=)j
(shmat\(shmemid,0,0\);)238 1372 y(while)e(\(1\))238 1493
y({)h(waitsema\(sema\))e(;)i(/*)h(wait)f(for)g(a)g(0)h(*/)357
1613 y(printf\("the)e(message)g(is)h(:)h(\045s)f(\\n",shmaddress)e
(+4\);)357 1733 y(setsema)h(\(sema,2\))g(;)i(/*)f(ok,)g(eaten)g(*/)238
1854 y(})118 1974 y(})118 2215 y(setsema)f(\(sema,val\))118
2335 y(int)h(sema,val;)118 2456 y({)h(semctl\(sema,0,SETVAL,val\);)54
b(})118 2696 y(waitsema)k(\(sema\))118 2937 y(int)h(sema;)118
3057 y({)238 3178 y(sembu.sem_num)e(=0;)i(sembu.sem_op)e(=)i(0;)h
(sembu.sem_flg)c(=0;)238 3419 y(semop)i(\(sema,)h(sembuptr)f(,)h(1\);)
118 3539 y(})p eop
%%Page: 215 223
215 222 bop -118 953 a Fn(Calling)53 b(Pr)l(ograms)g(in)f(F)-5
b(or)l(eign)52 b(Languages)-118 1405 y Fr(to)24 b(be)h(done)1579
6066 y(215)p eop
%%Page: 216 224
216 223 bop 118 -18 a Fr(216)p eop
%%Page: 217 225
217 224 bop -118 953 a Fn(Utilities)53 b(f)-5 b(or)51
b(Pr)l(o\002ling)-118 1405 y Fr(T)-8 b(o)25 b(be)f(added.)1579
6066 y(217)p eop
%%Page: 218 226
218 225 bop 118 -18 a Fr(218)p eop
%%Page: 219 227
219 226 bop -118 953 a Fn(PSL)51 b(Command)i(Line)1579
6066 y Fr(219)p eop
%%Page: 220 228
220 227 bop 118 -18 a Fr(220)p eop
%%Page: 221 229
221 228 bop -118 953 a Fn(Memory)52 b(Management)-118
1405 y Fr(e)n(v)o(entuell)23 b(zu)i(MISC)1579 6066 y(221)p
eop
%%Page: 222 230
222 229 bop 118 -18 a Fr(222)p eop
%%Page: 223 231
223 230 bop -118 960 a Fn(Addendum)-118 1420 y Fr(Since)27
b(its)f(earlier)h(v)o(ersions)e(starting)h(in)g(the)g(80')-5
b(s,)27 b(Portable)f(Standard)h(LISP)h(has)e(under)n(gone)h(se)n(v-)
-118 1540 y(eral)e(changes.)-118 1668 y(PSL)g(w)o(as)f(de)n(v)o(eloped)
f(for)h(mainframe)g(systems)f(e.g.)30 b(of)25 b(/370)e(and)h(V)-11
b(ax)24 b(type)g(running)g(proprietary)-118 1788 y(operating)31
b(systems)f(of)i(the)g(manuf)o(acturers.)51 b(T)-8 b(oday)31
b(most)g(PSL)i(v)o(ersions)d(run)i(on)f(w)o(orkstations)-118
1908 y(with)24 b(RISC)i(processors)f(running)f(a)h(Unix)f(type)g
(operating)h(system.)-118 2036 y(T)-8 b(oday)27 b(PSL)h(is)f(mostly)e
(used)i(a)h(deli)n(v)o(erly)d(v)o(ehicle)i(for)g(LISP)h(based)g
(systems,)e(e.g.)38 b(the)27 b(computer)-118 2156 y(algebra)e(system)f
(REDUCE)h(and)g(not)f(as)h(a)g(LISP)h(dialect)e(of)h(its)f(o)n(wn)g
(right.)-118 2284 y(The)h(support)e(and)i(maintainance)f(for)h(PSL)h
(is)e(mostly)g(done)g(at)h(ZIB)g(in)g(Berlin.)-118 2412
y(Recently)-6 b(,)27 b(the)g(internal)g(representation)g(of)g
(identi\002ers)g(w)o(as)g(changed)g(in)g(order)g(to)g(support)f(a)i
(256)-118 2532 y(character)23 b(set)f(and)g(case)h(sensiti)n(vity)-6
b(.)27 b(This)21 b(causes)i(a)f(binary)g(incomptibility)d(of)k(.b)f
(\002les)g(with)f(older)-118 2652 y(v)o(ersions)i(such)i(as)g(PSL)g
(3.4.)-118 2780 y(This)32 b(document)h(describes)g(the)g(changes)g(and)
h(ne)n(wer)f(de)n(v)o(elopments)e(for)i(PSL)h(done)f(at)h(ZIB)g(in)-118
2900 y(order)g(to)f(impro)o(v)o(e)f(performance)i(and)g(to)g(w)o(ork)f
(with)g(ne)n(w)g(application)g(types)g(such)h(as)f(parallel)-118
3021 y(processing.)-118 3406 y Ft(26.1)142 b(Installation)-118
3645 y Fr(This)30 b(section)g(gi)n(v)o(es)g(instructions)f(for)i(the)g
(Installation)e(of)i(PSL)h(4.2)f(on)f(your)h(UNIX)g(system.)48
b(It)-118 3765 y(does)25 b(not)f(apply)h(for)g(other)g(operating)f
(systems)g(such)h(as)g(VMS,)g(MVS,)g(DOS)g(etc,)h(and)f(it)f(does)h
(not)-118 3886 y(apply)33 b(for)i(distrib)n(ution)c(on)j(disk)o(ettes)f
(\(e.g.)58 b(all)34 b(PC)h(systems,)g(IBM)f(RS/6000,)i(NeXT\).)f
(Please)-118 4006 y(read)25 b(special)g(instructions)e(\(belo)n(w\))h
(for)h(the)g(system)e(mentioned)h(abo)o(v)o(e.)-118 4134
y(The)31 b(Installation)f(procedure)i(described)g(belo)n(w)e(uses)i
Fh(csh)f Fr(syntax.)50 b(If)32 b(you)f(don')n(t)g(ha)n(v)o(e)g(csh)h
(in-)-118 4254 y(stalled)24 b(on)g(your)h(system,)f(please)g(change)h
(the)g(commands)f(accordingly)-6 b(.)-118 4382 y(PSL)25
b(is)e(stored)h(as)g(a)g(single)f(\002le)h(tree)h(with)e(tw)o(o)g
(directories)h(on)f(the)h(top)f(le)n(v)o(el,)g(called)h(bin)f(and)h
(dist,)-118 4502 y(where)h(the)g(later)g(contains)f(all)g(sources)h
(and)g(some)f(more)h(binary)f(\002les.)-118 4629 y(The)h(installation)d
(is)j(relati)n(v)o(ely)e(simple.)-118 4971 y Fk(26.1.1)118
b(Reading)31 b(the)g(tape)-118 5173 y Fr(The)h(tape)g(contains)f(a)i
(compressed)e(\002le)i(tree.)53 b(Please)33 b(cd)f(to)g(the)g
(directory)g(where)g(you)g(w)o(ant)g(to)-118 5294 y(store)24
b(the)h(\002les)g(\(called)g(PSL)h(root)e(directory)h(later)g(on\))f
(and)h(enter)-118 5580 y Fh(dd)59 b(if=/dev/tape)e(ibs=51200)h(|)i
(uncompress)d(|)j(tar)f(-xf)g(-)-118 5858 y Fr(Please)25
b(replace)h(/de)n(v/tape)e(in)g(the)h(abo)o(v)o(e)e(command)h(with)g
(the)h(correct)g(name)g(of)g(your)f(tape)h(dri)n(v)o(e.)1579
6066 y(223)p eop
%%Page: 224 232
224 231 bop 118 -18 a Fr(224)118 289 y Fk(26.1.2)119
b(Reading)31 b(the)f(tape)g(f)m(or)f(IBM)g(RS/6000)118
480 y Fr(The)g(PSL)i(\002le)e(tree)h(for)g(the)f(IBM)h(RS/6000)f(is)g
(con\002gured)g(in)g(the)g(same)h(w)o(ay)f(as)g(for)h(other)f(Unix)118
600 y(type)c(w)o(orkstations.)k(The)24 b(installation)f(needs)i(an)g
(additional)e(step.)118 722 y(The)k(installation)e(procedure)i
(described)g(belo)n(w)f(assumes)g(that)g(you)h(use)g(the)f(C-Shell.)38
b(If)27 b(you)g(use)118 842 y(dif)n(ferent)e(shells)e(please)i(change)g
(commands)f(accordingly)-6 b(.)118 964 y(T)e(o)31 b(read)h(the)g(tape,)
h(mak)o(e)e(a)h(directory)f(with)g(a)g(name)h(lik)o(e)f(.../psl,)h(cd)f
(to)g(that)g(directory)-6 b(,)32 b(and)g(do,)118 1085
y(after)26 b(putting)d(the)h(tape)h(into)f(the)h(dri)n(v)o(e,)417
1326 y Fh(tar)59 b(-xf)g(/dev/rfd0)118 1565 y Fr(Y)-11
b(ou)26 b(\002rst)g(need)g(to)g(install)f(a)h(syscall)f(into)g(the)h
(AIX)g(system.)34 b Fq(In)26 b(order)h(to)f(do)g(this,)h(Y)m(OU)e(NEED)
118 1686 y(SUPER)h(USER)f(PRIVILEGE.)g Fr(T)-8 b(o)25
b(install)e(the)i(syscall,)f(do)297 1927 y Fh(su)297
2047 y(cd)60 b(./dist/kernel/ibmrs/syscall)297 2168 y(./install)297
2288 y(./installsysc)297 2408 y(exit)118 2648 y Fr(The)35
b(script)f(install)g(compiles)g(and)h(installs)e(the)i(required)g
(system)f(call.)61 b(The)35 b(script)f(installsysc)118
2768 y(in)f(the)h(same)f(directory)h(installs)e(the)h(system)g(call)h
(only)-6 b(.)56 b(W)l(ith)33 b(an)o(y)g(reboot)g(of)h(the)f(system)g
(it)g(is)118 2889 y(mandatory)g(to)g(run)h(installsysc)e(in)h(the)h
(directory)f(./dist/k)o(ernel/ibmrs/syscall.)54 b(It)33
b(is)g(suggested)118 3009 y(that)e(this)f(is)g(included)g(into)g(the)h
(AIX)g(boot)g(\002les.)49 b(The)31 b(sources)g(of)g(the)g(syscall)f
(can)h(be)g(found)g(in)118 3130 y(./dist/k)o(ernel/ibmrs/syscall)21
b(too.)118 3435 y Fk(26.1.3)119 b(Reading)31 b(Disk)o(ettes)e(f)m(or)h
(LINUX)g(386)118 3626 y Fr(The)38 b(PSL)g(\002le)h(tree)f(for)g(LINUX)f
(is)h(compressed)f(on)g(to)h(3)f(disk)o(ettes)g(for)h(distrib)n(ution.)
67 b(The)38 b(3)118 3746 y(disk)o(ettes)e(require)i(about)f(4)h(me)o
(gabytes)d(of)j(disk)f(space)h(to)f(dump.)68 b(Ho)n(we)n(v)o(er)l(,)39
b(you)e(must)g(then)118 3867 y(reb)n(uild)f(the)g(binary)f(\002les)i
(for)f(your)g(machine)g(before)h(you)e(can)i(do)f(an)o(ything.)63
b(Instructions)35 b(on)118 3987 y(doing)20 b(this)g(are)h(gi)n(v)o(en)f
(belo)n(w)-6 b(.)28 b(If)21 b(the)g(\002les)g(for)g(your)f(machine)h
(are)g(b)n(uilt,)g(the)f(\002le)i(tree)f(then)g(requires)118
4107 y(about)j(30)h(me)o(gabytes)e(during)h(the)h(b)n(uild)e(\(b)n(ut)i
(less)f(when)h(complete\).)118 4229 y(T)-8 b(o)30 b(read)g(the)g(disk)o
(ettes,)g(mak)o(e)g(a)g(directory)g(with)f(a)h(name)g(lik)o(e)f
(.../psl,)h(cd)g(to)g(that)f(directory)-6 b(,)31 b(and)118
4350 y(do,)25 b(after)g(putting)e(DISK)j(#)e(1)h(into)f(the)h(\003opp)o
(y)f(disk)g(reader)l(,)417 4591 y Fh(tar)59 b(-xf)g(/dev/fd0H1440)417
4711 y(install_psl)118 4951 y Fr(The)25 b(script)f(install)p
795 4951 30 4 v 35 w(psl)g(prompts)f(for)i(the)g(other)g(disks)e(and)i
(will)f(uncompress)g(the)h(\002les.)118 5073 y(If)i(there)g(is)f(an)g
(incompatibility)e(between)i(the)g(deli)n(v)o(ered)g(e)o(x)o(eutable)f
(and)h(your)g(Linux)g(v)o(ersion,)f(or)118 5193 y(when)h(you)f(upgrade)
g(your)h(Linux)e(v)o(ersion)h(and)g Fd(PSL)g Fr(becomes)g(inoperable,)g
(you)h(must)e(recompile)118 5314 y(the)h(e)o(x)o(ecutable)f
Ff(bpsl)r Fr(:)357 5527 y Fh(cd)60 b($pxk/linux)357 5647
y(cclnk)118 5858 y Fr(After)25 b(this)f(step)g(you)h(should)e(reb)n
(uild)i(the)f(image)h(\002les)g(using)e(the)i(scripts)f(in)h
Fh($psl/distrib)p Fr(.)p eop
%%Page: 225 233
225 232 bop -118 -18 a Fg(26.1.)55 b(INST)-9 b(ALLA)e(TION)2434
b Fr(225)-118 289 y Fk(26.1.4)118 b(Customizing)30 b(Mak)o(e\002les)h
(and)f(scripts)-118 481 y Fr(In)37 b(the)g(ne)o(xt)f(step)h(the)g
(system)f(must)g(get)h(kno)n(wledge)f(about)h(the)g(PSL)h(root)e
(directory)h(and)g(the)-118 601 y(machine)32 b(architecture.)54
b(The)32 b(correct)h(name)f(for)h(the)f(architecture)h(in)f(the)g(PSL)h
(\002le)g(tree)f(can)h(be)-118 722 y(found)24 b(in)h(the)f(table)h
(belo)n(w)-6 b(.)360 1059 y Fh(Machine)477 b(Operating)57
b(system)358 b(PSL)59 b(MACHINE)f(name)360 1300 y(CDC)h(4xxx)478
b(EP/IX)1134 b(mips_cdc)297 b(++)360 1421 y(Convex)59
b(Cxxxx)1672 b(convex)417 b(++)360 1541 y(Convex)59 b(SPP)1792
b(convex_spp)360 1661 y(Cray)59 b(1,)g(X-MP)239 b(UNICOS)1074
b(crayxmp)360 1782 y(Cray)59 b(Y-MP)418 b(UNICOS)1074
b(crayymp)360 1902 y(Cray)59 b(C90)478 b(UNICOS)1074
b(crayymp)360 2022 y(Cray)59 b(T3D/E)358 b(UNICOS)1074
b(cray_t3d)360 2143 y(DECStation)357 b(ULTRIX)1074 b(Mips_dec)360
2263 y(DEC)59 b(Alpha)418 b(OSF/1)58 b(\(DEC)h(Unix\))477
b(Alpha)360 2384 y(DEC)59 b(Alpha)418 b(Linux)1134 b(Alpha_Linux)360
2504 y(DEC)59 b(VAX)538 b(ULTRIX)1074 b(vax)360 2624
y(DG)59 b(AViiON)418 b(DG-UX)1134 b(88k-aviion)237 b(++)360
2745 y(HP9000/300)58 b(400)119 b(HP-UX)1134 b(bobcat)477
b(++)360 2865 y(HP9000/700)357 b(HP-UX)1134 b(Snake)360
2986 y(HP9000/800)357 b(HP-UX)1134 b(spectrum)357 b(++)360
3106 y(IBM)59 b(RS/6000)298 b(Aix)1254 b(Ibmrs)360 3226
y(IBM)59 b(SP2)538 b(\(the)58 b(RS/6000)h(version)f(happens)g(to)h
(work\))360 3347 y(Intel)g(386)418 b(Linux)1134 b(Linux)360
3467 y(Intel)59 b(386)g(ELF)179 b(Linux)58 b(\(ELF\))776
b(Linux_elf)360 3587 y(Intel)59 b(x86)418 b(Solaris)58
b(2.x)776 b(Solarisx86)360 3708 y(SGI)59 b(Iris/Indigo)f(Irix)1194
b(Mips_iris)360 3828 y(SGI)59 b(Iris/Indigo)f(Irix64)1074
b(Mips_iris_64)360 3949 y(Sun)59 b(3)658 b(SunOS)1134
b(sun)657 b(++)360 4069 y(Sparc)g(SunOS)58 b(\(Solaris1.x\))356
b(Sun4)360 4189 y(Sparc)657 b(Solaris)58 b(2.x)776 b(Solaris)360
4310 y(UltraSparc)357 b(Solaris)58 b(2.x)776 b(Ultrasparc)-118
4551 y(++)59 b(This)g(version)f(may)h(be)h(not)f(supported)f(in)h
(future)f(version.)-118 4886 y Fr(The)31 b(script)f(dist/distrib/ne)n
(wroot.csh)c(will)k(modify)g(v)n(arious)f(Mak)o(e\002les)i(and)g
(scripts,)g(especially)-118 5006 y(dist/psl-names.)49
b(It)32 b(must)f(be)h(started)f(with)g(the)h(PSL)g(root)g(directory)f
(and)h(MA)l(CHINE)g(name)f(as)-118 5127 y(parameter)l(,)25
b(e.g.)31 b(for)25 b(a)g(Sparc)h(under)e(SUNOS:)-118
5373 y Fh(dist/distrib/newroot.csh)54 b(`pwd`)59 b(Sun4)-118
5618 y Fr(After)32 b(that)g(the)g(\002le)h(dist/psl-names)d(contains)h
(the)h(settings)f(for)h(the)g(PSL)h(speci\002c)g(en)l(vironment)-118
5738 y(v)n(ariables)22 b(such)g(as)h($psys.)28 b(It)23
b(must)e(be)i(read)g(in)f(by)g(the)h(PSL)g(user)g(to)f(insure)g
(correct)h(operation,e.g.)-118 5858 y(for)i(a)g(Sparc)h(machine)e
(under)h(SunOS:)p eop
%%Page: 226 234
226 233 bop 118 -18 a Fr(226)118 289 y Fh(setenv)59 b(MACHINE)f(Sun4)
118 409 y(source)h(<PSL)f(root)h(directory>/dist/psl-names)118
641 y Fr(This)22 b(installation)f(is)i(designed)f(for)h(usage)g(with)f
(multiple)f(machine)i(types,)g(it)f(sa)n(v)o(es)g(disk)g(space)i(by)118
761 y(sharing)i(the)h(PSL)g(code)g(\(.sl)g(\002les\).)37
b(The)26 b(v)n(ariable)h Fq(MA)-5 b(CHINE)26 b Fr(is)g(used)g(to)h
(specify)f(the)h(machine)118 882 y(type.)53 b(If)33 b(you)f(install)g
(a)g(single)g(v)o(ersion)f(of)i(PSL)g(it)f(may)g(be)h(useful)f(to)g
(replace)h Fq(MA)-5 b(CHINE)32 b Fr(by)118 1002 y(the)26
b(correct)h(v)n(alue)e(in)h(the)g(\002le)h Ff(<)i(P)14
b(S)6 b(Lr)s(ootdir)s(ector)s(y)33 b(>)p Fr(/dist/psl-names.)e(In)c
(this)e(case)h(the)g(user)118 1123 y(does)f(not)f(need)h(to)f(specify)h
(the)g(MA)l(CHINE)f(en)l(vironment)g(v)n(ariable.)118
1243 y(T)-8 b(o)30 b(test)g(the)h(installation,)e(you)i(can)f(try)h
(the)f(follo)n(wing)f(commands)g(which)h(are)h(supposed)f(to)g(run)118
1364 y(without)23 b(error)j(message:)118 1596 y Fh($psys/psl)118
1717 y(\(load)59 b(inum\))118 1837 y(\(quit\))118 2069
y Fr(If)32 b(you)f(change)h(\002les,)h(e.g.)51 b(when)32
b(you)f(recei)n(v)o(e)g(a)h(b)n(ug)f(\002x,)j(please)d(put)g(the)h
(\002le)g(into)e(the)i(correct)118 2189 y(place)k(,)i(cd)d(to)g(the)h
(directory)f($psl)f(and)i(simply)e(say)h Fh(make)p Fr(.)62
b(This)34 b(will)h(compile)f(the)i(\002le)f(\(and)118
2310 y(maybe)25 b(some)f(\002les)h(which)f(depend)h(on)f(this\),)g(and)
h(produce)g(ne)n(w)f(binaries.)118 2608 y Fk(26.1.5)119
b(Printing)31 b(Documentation)118 2797 y Fr(The)c(documentation)e(for)i
(PSL)h(\(User')-5 b(s)26 b(Manual)h(and)g(some)f(more)h(documents\))e
(can)j(be)f(found)f(in)118 2917 y(the)c(directories)h(dist/doc)e(and)h
(dist/lpt)e(and)j(dist/manual)d(\(in)j(L)2322 2895 y
Fa(A)2355 2917 y Fr(T)2399 2940 y(E)2447 2917 y(X)g(or)f(plain)g(ASCII)
i(print)e(format\))118 3260 y Ft(26.2)143 b(New)34 b(unexec)h(pr)m
(ocedur)m(e,)f(Image)g(model)118 3485 y Fr(PSL)-9 b(')k(s)27
b(former)g(une)o(x)o(ec)f(model)f(\(Sa)n(v)o(esystem\))h(w)o(as)h(to)f
(produce)h(e)o(x)o(ecutables)f(in)g(the)g(sense)h(of)g(the)118
3605 y(operating)g(system)f(\(mostly)h(a.out)g(\002les\).)39
b(This)27 b(has)g(led)h(into)e(maintainance)h(problems)g(with)g(v)n(ar)
n(-)118 3725 y(ious)i(ne)n(w)h(\002le)h(formats)e(\(e.g.)47
b(ELF)-8 b(,)31 b(COFF\))g(and)g(dynamic)e(loading.)46
b(In\003uenced)30 b(by)g(the)g(model)118 3846 y(de)n(v)o(eloped)38
b(for)h(the)g(PSL)h(on)f(Personal)h(Computers,)i(for)d(all)g(ne)n(w)g
(PSL)h(v)o(ersions)e(for)h(ne)n(w)g(ar)n(-)118 3966 y(chitectures)d
(the)h(so)f(called)h Fq(image)f(model)h Fr(is)f(used.)66
b(This)36 b(simply)f(means)i(that)f(the)g(command)118
4087 y Fh(savesystem)30 b Fr(does)j(not)e(write)i(an)f(e)o(x)o
(ecutable)g(\002le)h(b)n(ut)f(it)g(puts)f(all)i(the)f(LISP)h(data)g
(into)e(a)i(\002le)118 4207 y(such)26 b(that)g(the)g(information)e(can)
j(be)f(reloaded)h(afterw)o(ards.)35 b(The)26 b(reload)g(is)g(done)g(by)
g(the)g(program)118 4327 y Fh($pxk/bpsl)h Fr(when)i(the)g(-f)h
(parameter)f(is)g(used.)44 b(The)29 b(dump\002les)f(names)h(get)g(the)g
(suf)n(\002x)f Fh(.img)p Fr(,)118 4448 y(e.g.)j(the)25
b(command)118 4680 y Fh(\(savesystem)57 b("Banner")h("dir/file")g
(initform\))118 4912 y Fr(produces)25 b(a)g(\002le)g
Fh(dir/file.img)d Fr(which)j(can)g(be)g(restarted)g(by)f(issueing)g
(the)g(command)118 5144 y Fh($pxk/bpsl)58 b(-f)h(dir/file.img)118
5376 y Fr(The)27 b(LISP)i(data)e(written)f(to)h(the)g(\002le)h(are:)36
b Fh(SYMVAL,)58 b(SYMPRP,)g(SYMFNC,)h(SYMNAM)f(and)118
5497 y(SYMGET,)g(hashtable)25 b Fr(and)h(the)g(allocated)g(parts)g(of)g
Fh(bps)59 b(and)g(heap.)34 b Fr(This)25 b(reduces)i(the)118
5617 y(amount)d(of)h(disk)f(storage)g(used)h(drastically)-6
b(.)118 5738 y(T)e(o)26 b(insure)h(proper)f(reloading,)g(the)h(program)
f(bpsl)g(can)h(be)f(used)h(for)f(reloading)g(of)h(images)f(only)g(if)
118 5858 y(these)g(were)i(written)d(from)i(its)e(o)n(wn)h(core)h
(image.)35 b(A)27 b(check)g(for)g(this)e(is)h(pro)o(vided)f(using)h(a)h
(datetag)p eop
%%Page: 227 235
227 234 bop -118 -18 a Fg(26.3.)55 b(D)-5 b(YN)m(AMIC)24
b(CONFIGURA)-11 b(TION)26 b(OF)f(HEAP)g(SIZE)g(AND)g(BINDING)g(ST)-9
b(A)l(CK)143 b Fr(227)-118 289 y(scheme)32 b(which)g(must)f(be)i(the)f
(same)g(in)g(bpsl)g(and)g(image)g(\002le.)54 b(The)32
b(error)h(message)f Fq(Cant)h(start)-118 409 y(image)24
b(with)i(this)e(bpsl)i Fr(means)e(that)g(the)h(check)g(w)o(as)g(not)g
(successful)f(and)h(you)f(ha)n(v)o(e)h(to)f(produce)h(a)-118
529 y(ne)n(w)f(image)h(\002le.)31 b(This)24 b(normally)f(happens)i
(when)g(the)f(\002le)h(bpsl)f(is)h(reb)n(uild.)-118 651
y(In)33 b(v)o(ery)g(rare)i(cases)e(after)h(dramatic)f(changes)g(in)g
(the)h(en)l(vironment)e(\(generally)h(speaking\),)i(you)-118
771 y(may)g(get)h(the)g(message)f Fq(Cant)i(r)n(elocate)f(the)h(image)p
Fr(.)63 b(In)36 b(this)f(case,)k(please)d(try)g(to)f(reb)n(uild)g(the)
-118 892 y(images.)30 b(If)25 b(this)f(f)o(ails)h(\(it)f(should)g
(not\),)g(please)h(try)-118 1130 y Fh($pxk/bpsl)58 b(-f)h(dir/file.img)
e(-g)i(1000000)-118 1367 y Fr(If)28 b(this)e(w)o(orks)h(properly)-6
b(,)27 b(you)g(may)g(try)g(to)g(reduce)h(the)f(g)h(v)n(alue.)37
b(In)28 b(an)o(y)f(case)g(please)h(send)f(a)h(note)-118
1487 y(the)d(the)f(author)h(of)g(this)e(document.)-118
1835 y Ft(26.3)142 b(Dynamic)59 b(con\002guration)g(of)h(Heap)g(Size)g
(and)h(Binding)276 2017 y(Stack)-118 2244 y Fr(The)32
b(PSL)g(w)o(orkspaces)g Fh(Heap)59 b(and)g(Bindingstack)30
b Fr(can)i(be)g(enlar)n(ged)g(at)g(run)g(time.)51 b(This)-118
2364 y(is)25 b(often)h(necessary)g(for)h(programs)e(that)g(allocate)h
(a)g(lot)g(dynamic)f(storage)h(\(heap\))g(or)g(use)g(v)n(ariable)-118
2484 y(binding)d(intensi)n(v)o(ely)-6 b(.)-118 2606 y(If)37
b(heap)f(space)h(gets)f(lo)n(w)-6 b(,)38 b(the)e(garbage)g(collector)g
(tries)h(to)f(increase)g(heap)h(size)f(automatically)-6
b(.)-118 2726 y(This)35 b(is)h(a)g(reaction)h(to)e(an)i(emer)n(genc)o
(y)f(situation)e(though)h(and)h(it)g(is)g(tried)f(after)i(man)o(y)e
(garbage)-118 2847 y(collections.)e(Moreo)o(v)o(er)l(,)25
b(depending)g(on)h(the)g(history)f(of)h(the)g(PSL)h(session,)e(the)h
(system)f(may)g(\002nd)-118 2967 y(itself)c(unable)g(to)h(allocate)g
(the)f(requested)h(memory)f(causing)g(an)h(LISP)h(error)f(condition.)28
b(A)22 b(manual)-118 3087 y(increase)j(of)g(heap)g(size)g(is)f(much)h
(better)f(for)h(o)o(v)o(erall)f(performance.)-118 3209
y(The)31 b(Binding)f(stack)h(is)g(not)g(enlar)n(ged)g(automatically)-6
b(,)31 b(because)g(in)g(case)g(of)h(on)f(in\002nite)f(loop)g(the)-118
3329 y(PSL)e(memory)e(w)o(ould)g(blo)n(w)g(up)h(and)g(it)g(w)o(ould)f
(tak)o(e)i(a)f(v)o(ery)g(long)f(time)h(until)e(the)i(user)h(w)o(ould)e
(see)-118 3450 y(a)f(problem)f(\(if)h(at)g(all\).)-118
3571 y(T)-8 b(w)o(o)24 b(functions)g(ha)n(v)o(e)h(been)g(added)f(to)h
(PSL)g(for)h(handling)d(heap)i(and)g(binding)e(stack)i(size:)-118
3693 y Fh(\(set-heap-size)57 b(N:Integer)g(or)j(NIL\):)e(Integer)g(or)i
(NIL)498 b Fi(e)n(xpr)126 3903 y Fr(If)34 b(called)h(with)e(NIL)h(it)g
(returns)g(the)g(number)g(of)g(LISP)h(items)f(in)f(heap.)60
b(If)34 b(called)h(with)e(a)126 4023 y(number)i(\(which)g(is)g(counted)
g(in)g(items)g(and)h(should)e(be)i(bigger)f(that)g(the)g(current)h
(size)g(in)126 4143 y(items\))26 b(PSL)i(tries)f(to)g(allocate)g(the)g
(memory)-6 b(.)36 b(If)28 b(successful,)f(the)g(ar)n(gument)g(is)g
(returned,)g(if)126 4264 y(not,)d(NIL)h(is)f(returned.)-118
4473 y Fh(\(set-bndstk-size)56 b(N:Integer)i(or)h(NIL\):)g(Integer)f
(or)h(NIL)379 b Fi(e)n(xpr)126 4683 y Fr(If)35 b(called)f(with)f(NIL)i
(it)e(returns)h(the)h(number)e(of)i(LISP)g(items)e(in)h(bndstk.)58
b(If)35 b(called)f(with)126 4803 y(a)c(number)g(\(which)g(is)g(counted)
g(in)f(items)h(and)g(should)f(be)h(bigger)g(that)g(the)g(current)g
(size)h(in)126 4924 y(items\))26 b(PSL)i(tries)f(to)g(allocate)g(the)g
(memory)-6 b(.)36 b(If)28 b(successful,)f(the)g(ar)n(gument)g(is)g
(returned,)g(if)126 5044 y(not,)d(NIL)h(is)f(returned.)-118
5392 y Ft(26.4)142 b(Size)35 b(of)h(Addr)m(ess)e(Space)-118
5618 y Fr(The)d(tradition)e(PSL)j(model)e(is)h Fh(high)58
b(tagged)p Fr(,)32 b(i.e.)48 b(a)32 b(tag)e(which)h(describes)g(the)f
(data)h(type)g(is)-118 5738 y(stored)22 b(in)h(the)f(high)g(bits)g(of)h
(a)g(LISP)g(item.)30 b(In)23 b(most)e(cases)i(the)g(number)f(of)h(bits)
f(used)g(for)h(tagging)f(is)-118 5858 y(5,)j(which)f(limits)g(the)h
(address)g(space)g(to)g(bitsperw)o(ord)f(-)h(5)g(bits.)30
b(This)25 b(has)g(not)f(been)h(a)h(problem)e(for)p eop
%%Page: 228 236
228 235 bop 118 -18 a Fr(228)118 289 y(a)25 b(long)f(time)g(for)h(the)g
(widely)f(used)h(32)f(bit)g(microprocessor)g(architectures,)h(since)g
(the)g(sw)o(ap)f(space)118 409 y(a)n(v)n(ailable)k(w)o(as)g(much)h
(less)f(that)g(this)f(number)-5 b(.)41 b(E.g)28 b(on)h(a)g(Sparc)g
(system)e(you)i(can)g(use)f(about)g(100)118 529 y(MB)d(LISP)h(w)o
(orkspace,)f(about)f(7000000)f(LISP)j(items.)118 652
y(F)o(or)j(the)g(time)f(being)g(the)h(64)f(bit)h(microprocessors)e(do)i
(not)f(suf)n(fer)h(from)g(this)f(limitation.)40 b(A)29
b Fh(low)118 772 y(tagged)24 b Fr(v)o(ersion)f(of)i(PSL)h(is)e(under)h
(de)n(v)o(elopment)e(already)i(since)f(1990.)118 1122
y Ft(26.5)143 b(Arbitrary)33 b(Pr)m(ecision)h(Integer)g(Support)118
1349 y Fr(The)19 b(ef)n(\002cient)h(support)e(of)h(Arbitrary)h
(Precision)f(Inte)o(gers)g(\(\224Bignums\224\))g(is)f(crucial)i(for)g
(a)f(computer)118 1470 y(algebra)25 b(system.)30 b(This)24
b(v)o(ersion)f(of)i(PSL)h(tries)e(to)g(e)o(xploit)g(the)g(gi)n(v)o(en)f
(machine)i(hardw)o(are)g(as)g(f)o(ar)g(as)118 1590 y(possible,)i(e.g.)
38 b(using)26 b(double)h(size)g(multiplication)e(and)i(di)n(vision)e
(in)i(hardw)o(are)h(where)g(a)n(v)n(ailable.)118 1711
y(Because)41 b(of)f(the)f(dif)n(ferent)g(processor)h(architectures)g
(the)f(optimal)f(internal)h(representation)g(of)118 1831
y(bignums)23 b(may)i(v)n(ary)f(between)h(w)o(orkstations)e(e)n(v)o(en)h
(with)g(same)h(number)f(of)h(bits)f(per)h(w)o(ord.)118
1953 y(The)34 b(PSL)g(manual)f(mentions)f(the)i(modules)e(\223big\224)h
(and)h(\223nbig\224)f(which)h(are)g(written)f(in)g(the)g(true)118
2073 y(spirit)27 b(of)h(portable)f(softw)o(are)h(b)n(ut)f(these)h(are)g
(unfortunately)f(not)g(v)o(ery)g(ef)n(\002cient.)40 b(W)-8
b(e)28 b(recommend)118 2194 y(to)c(use)g(the)g(load)g(module)f
Fq(zbig)h Fr(instead.)30 b(In)25 b(all)e(v)o(ersions)g(this)h(load)f
(module)h(contains)f(the)h(bignum)118 2314 y(v)o(ersion)g(which)g(we)h
(ha)n(v)o(e)g(found)f(to)h(be)f(optimal.)118 2665 y Ft(26.6)143
b(Monitoring)34 b(of)h(P)m(erf)l(ormance)118 2921 y Fk(26.6.1)119
b(SPY)30 b(\(Unix)h(only\))118 3112 y Fr(The)24 b(Unix)f(pro\002l)h
(system)f(call)h(pro)o(vides)e(a)j(f)o(acility)e(to)g(get)h
(information)f(about)g(the)h(cpu)f(consump-)118 3232
y(tion)k(in)h(a)h(LISP)g(program.)41 b(A)28 b(simple)f(interf)o(ace)i
(w)o(as)f(b)n(uild)g(to)f(be)i(able)f(to)g(turn)g(pro\002ling)g(on)g
(and)118 3353 y(of)n(f)j(and)g(to)f(map)h(the)g(results)f(on)h(to)f
(the)h(LISP)h(address)f(space.)49 b(F)o(or)31 b(details,)h(please)f
(refer)h(to)f(the)118 3473 y(source)25 b(code)g(in)f
Fh($pxu/spy.sl)p Fr(.)118 3715 y Fh(\(spywhole)58 b(N:Integer\):)117
b(void)1753 b Fi(e)n(xpr)362 3927 y Fr(T)l(urns)29 b(on)i(pro\002ling)e
(for)i(the)f(whole)g(bps)g(space.)48 b(N)30 b(must)f(be)i(a)g(po)n(wer)
f(of)g(2,)i(de\002ning)e(the)362 4048 y(grain)25 b(for)g(the)f
(pro\002l)h(call.)31 b(T)-8 b(ypical)24 b(v)n(alues)g(are)i(4)e(and)h
(8.)31 b(Returns)25 b Fh(nil)p Fr(.)118 4260 y Fh(\(spyprint\):)117
b(void)2351 b Fi(e)n(xpr)362 4472 y Fr(T)l(urns)29 b(of)n(f)h(the)g
(pro\002ler)-5 b(.)46 b(Prints)30 b(pro\002ler)h(information)d(after)j
(mapping)e(it)h(to)f(the)h(LISP)h(ad-)362 4592 y(dress)25
b(space,)h(i.e)f(the)h(names)f(of)g(LISP)i(functions)d(are)i(printed)f
(together)g(with)f(their)i(relati)n(v)o(e)362 4712 y(cpu)d
(consumption.)k(The)c(v)n(ariable)f(&sp)o(yminimum&)d(de\002nes)k(the)f
(cutof)n(f)g(for)h(sp)o(yprint,)f(i.e.)362 4833 y(functions)i(with)g
(less)g(than)h(&sp)o(yminimum&)20 b(ticks)k(will)g(not)h(be)g(printed.)
30 b(Returns)24 b Fh(nil)p Fr(.)118 5045 y Fh(\(spyon)59
b(fwa)g(lwa)g(tslice)f(bucketsize)g(power\):)118 b(void)617
b Fi(e)n(xpr)362 5256 y Fr(This)39 b(is)g(a)h(complete)e(interf)o(ace)j
(for)e(the)h(pro\002l)f(call.)75 b(Allocates)39 b(W)-8
b(array)40 b(space)g(for)g(the)362 5377 y(Unix)27 b(pro\002ler)i(and)f
(turns)f(on)h(pro\002ling.)39 b(fw)o(a)28 b(and)g(l)o(w)o(a)g(are)h
(the)f(addresses)g(of)g(the)f(\002rst)i(and)362 5497
y(last)34 b(w)o(ord)g(of)g(code)g(memory)g(which)f(should)g(be)i
(inspected,)g(tslice)f(is)g(the)g(timeslice)f(and)362
5618 y(not)i(suported)g(on)g(most)f(Unix)h(systems.)62
b(It)35 b(is)g(a)h(parameter)g(for)g(compatibility)d(reasons.)362
5738 y(Buck)o(etsize)c(must)f(be)h(a)g(po)n(wer)f(of)h(2)g(and)g(po)n
(wer)f(is)h(the)f(base)h(2)g(logarithm)e(of)i(b)n(uck)o(etsize.)362
5858 y(T)-8 b(ypical)24 b(v)n(alues)g(are)i(4)f(or)f(8)h(for)g(b)n(uck)
o(etsize)g(and)f(2)h(or)g(3)g(for)g(po)n(wer)f(resp.)31
b(Returns)25 b Fh(nil)p Fr(.)p eop
%%Page: 229 237
229 236 bop -118 -18 a Fg(26.6.)55 b(MONIT)n(ORING)25
b(OF)g(PERFORMANCE)1587 b Fr(229)-118 289 y Fh(\(spyoff\):)117
b(void)2471 b Fi(e)n(xpr)126 498 y Fr(T)l(urns)24 b(of)n(f)g
(pro\002ling)g(using)g(the)h(Unix)f(pro\002l)h(system)e(call.)31
b(Returns)25 b Fh(nil)p Fr(.)-118 707 y(Example:)-118
917 y Fh(\(load)59 b(spy)g(zbig\))-118 1158 y(NIL)-118
1399 y(\(spywhole)f(4\))-118 1639 y(NIL)-118 1880 y(\(null)h(\(setq)f
(aa\(expt)g(3000)h(10000\)\)\))-118 2121 y(NIL)-118 2362
y(\(spyprint\))117 b(\045)60 b(This)f(was)g(done)g(on)g(a)g(SUN4)g(PSL)
-118 2602 y(214)418 b(39.5\045)297 b(BPLUSA2)-118 2723
y(204)418 b(37.7\045)297 b(INITCODE)-118 2843 y(67)478
b(12.3\045)297 b(WTIMESDOUBLE)-118 2964 y(15)478 b(2.7\045)357
b(COPYFROMONESTATICHEAP)-118 3084 y(12)478 b(2.2\045)357
b(XXCOPYFROMSTACK)-118 3204 y(12)478 b(2.2\045)357 b(SET_HEAP_SIZE)-118
3325 y(NIL)-118 3534 y Fr(It)21 b(is)g(easy)h(to)e(see)i(that)f(the)g
(command)f Fh(\(null)59 b(\(setq)g(aa\(expt)f(3000)h(10000\)\)\))19
b Fr(leads)-118 3654 y(to)41 b(a)h(lot)f(of)g(bignum)f(computations.)79
b(The)42 b(sp)o(yprint)e(output)g(pro)o(v)o(es)g(that.)80
b(Please)43 b(note)e(that)-118 3775 y Fh(INITCODE)33
b Fr(sums)h(up)g(all)h(the)f(functions)g(that)g(belong)g(to)h(PSL)-9
b(')k(s)35 b(C)g(runtime)f(support.)59 b(In)35 b(this)-118
3895 y(case)24 b(the)f(high)f(percentage)i(is)f(due)g(to)g(the)g(f)o
(act)h(that)f(the)g(\(old\))g(SP)-9 b(ARC)25 b(implementation)c
(performs)-118 4015 y(inte)o(ger)j(multiply)f(and)h(di)n(vide)g(in)g
(softw)o(are)h(i.e.)31 b(in)24 b(non)h(LISP)g(code.)-118
4318 y Fk(26.6.2)118 b(Quali\002ed)32 b(timing)-118 4508
y Fr(Quali\002ed)26 b(counting)f(is)h(used)g(to)g(measure)g(the)g(cpu)g
(time)f(spend)h(between)g(call)h(and)f(return)g(from)g(a)-118
4628 y(function,)20 b(not)g(necessarily)h(spend)f(within)f(the)h(body)g
(of)h(the)f(function.)29 b(It)20 b(gi)n(v)o(es)f(an)i(o)o(v)o(ervie)n
(w)e(about)-118 4748 y(the)24 b(costs)g(that)g(a)h(call)f(of)h
(particular)f(function)g(causes.)31 b(The)24 b(sum)g(sho)n(wn)f(as)i
(result)f(may)g(be)h(bigger)-118 4869 y(that)19 b(100)f(percent,)j(if)e
(a)g(function)g(and)g(its)f(callee)i(are)g(both)e(measured)h(or)g(if)g
(gc)h(time)e(is)h(accumulated.)-118 5111 y Fh(\(qualtime)58
b(S:list\):)117 b(void)1858 b Fi(macr)l(o)126 5320 y
Fr(Starts)25 b(quali\002ed)f(timing)f(for)i(the)g(list)f(of)h
(functions)e(contained)i(in)f(list.)30 b(Returns)25 b
Fh(nil)p Fr(.)-118 5529 y Fh(\(print!-qualtime\):)115
b(void)1933 b Fi(e)n(xpr)126 5738 y Fr(Prints)26 b(the)g(accumulated)h
(timings)d(and)j(number)f(of)h(calls)f(for)h(all)f(functions.)35
b(Resets)27 b(coun-)126 5858 y(ters.)j(Returns)25 b Fh(nil)p
Fr(.)p eop
%%Page: 230 238
230 237 bop 118 -18 a Fr(230)118 289 y(Example:)118 523
y Fh(\(load)59 b(qualified-timing)d(zbig\))118 643 y(\(off)j
(usermode\))118 884 y(\(qualtime)f(gtpos)h(times2\))178
1125 y(\(null)g(\(setq)f(aa\(expt)g(3000)h(10000\)\)\))f(\045)i(this)f
(will)g(be)g(measured)118 1365 y(\(print-qualtime\))178
1486 y(***********)e(Qualified)h(Timing)g(**************)178
1606 y(****)h(Overall)f(Cpu)h(time)g(:)119 b(5083)g(*****)178
1847 y(***)59 b(TIMES2)1194 b(*)60 b(calls)e(:)i(18)478
b(*)59 b(time)g(:)h(5797)118 b(*)60 b(\045)f(114)178
1967 y(***)g(GTPOS)1254 b(*)60 b(calls)e(:)i(5560)358
b(*)59 b(time)g(:)h(935)178 b(*)60 b(\045)f(18)118 2387
y Fk(26.6.3)119 b(Quali\002ed)31 b(counting)118 2576
y Fr(F)o(or)e(our)f(o)n(wn)g(applications)g(it)g(had)g(turned)h(out)f
(to)g(be)h(useful)f(to)h(kno)n(w)e(the)i(callers)g(of)f(a)h(function)
118 2697 y(especially)k(when)g(the)g(function)f(is)h(called)h(v)o(ery)
-6 b(,)34 b(v)o(ery)f(often,)i(e.g.)56 b(basic)33 b(routines)f(lik)o(e)
h(generic)118 2817 y(arithmetic.)60 b(T)-8 b(o)35 b(pro)o(vide)f(this)g
(a)h(module)f(quali\002ed)h(counting)e(w)o(as)i(generated)h(using)d(a)j
(similar)118 2938 y(syntax)24 b(lik)o(e)g(quali\002ed)h(timing.)118
3179 y Fh(\(qualcount)58 b(S:list\):)117 b(void)1798
b Fi(macr)l(o)362 3386 y Fr(Starts)25 b(quali\002ed)f(counting)g(for)h
(the)g(list)e(of)i(functions)f(contained)g(in)h(list.)k(Returns)c
Fh(nil)p Fr(.)118 3593 y Fh(\(print!-qualcount\):)115
b(void)1873 b Fi(e)n(xpr)362 3800 y Fr(Prints)26 b(the)g(accumulated)g
(call)g(counting)f(and)h(the)g(callers)h(for)f(all)g(functions.)34
b(Resets)27 b(coun-)362 3920 y(ters.)67 b(Printing)36
b(will)g(be)h(suppressed)f(if)g(the)h(number)f(of)h(calls)g(is)f(less)h
(than)f(borderv)n(alue)362 4041 y(\(def)o(ault)25 b(=)g(20\))g(Returns)
f Fh(nil)p Fr(.)118 4247 y Fh(\(reset!-qualcount\):)115
b(void)1873 b Fi(e)n(xpr)362 4454 y Fr(Resets)22 b(the)g(accumulated)f
(call)h(counting)e(and)i(the)f(callers)h(for)g(all)g(functions.)28
b(Returns)22 b Fh(nil)p Fr(.)118 4661 y(Example:)178
4895 y Fh(\(load)59 b(qualified-counting\))178 5016 y(\(off)g
(usermode\))178 5256 y(\(qualcount)e(faslin)i(intern\))118
5377 y(***)g(Function)f(`G0003')g(has)i(been)e(redefined)118
5497 y(***)h(Function)f(`FASLIN')g(has)h(been)g(redefined)118
5618 y(***)g(Function)f(`G0025')g(has)i(been)e(redefined)118
5738 y(***)h(Function)f(`INTERN')g(has)h(been)g(redefined)p
eop
%%Page: 231 239
231 238 bop -118 -18 a Fg(26.7.)55 b(COMPILER)26 b(MODIFICA)-11
b(TIONS)1836 b Fr(231)-58 289 y Fh(\(load)58 b(nbig30\))h(\045)g(this)g
(will)g(be)g(counted)-118 529 y(\(print-qualcount\))-118
650 y(*************)e(calls)h(for)i(function)d(FASLIN)i(*************)
-118 891 y(*************)e(calls)h(for)i(function)d(INTERN)i
(*************)-118 1131 y(number)f(of)i(calls)e(:)i(306)f(from)g
(READ-ID-TABLE)-118 1470 y Ft(26.7)142 b(Compiler)34
b(Modi\002cations)-118 1693 y Fr(In)c(order)g(to)g(optimize)f(the)h
(code)g(generation)g(for)g(the)g(RISC)i(processors)d(which)h(\(in)g
(most)f(cases\))-118 1814 y(ha)n(v)o(e)34 b(a)g(concept)g(of)g(delayed)
g(branches)g(a)g(special)g(optimization)d(phase)j(for)h(the)e(PSL)i
(compiler)-118 1934 y(w)o(as)f(b)n(uild)f(to)h(\002ll)g(the)h(delay)f
(slots.)58 b(This)33 b(ne)n(w)h(compiler)g(phase)g(is)g(called)g
Fq(lapopt)p Fr(.)60 b(It)34 b(collects)-118 2055 y(se)n(v)o(eral)27
b(optimizations)e(which)i(w)o(ork)g(on)g(the)g(generated)h(stream)f(of)
h(instructions)d(\(the)j(lap)f(code\).)-118 2175 y(This)e(optimization)
e(phase)i(is)g(enabled)h(by)f(def)o(ault,)g(it)g(is)g(controled)g(by)g
(the)h(switch)e Fq(lapopt)p Fr(,)i(and)g(it)-118 2295
y(can)f(be)g(turned)f(of)n(f)h(and)g(on)f(by)-118 2493
y Fh(\(on)59 b(lapopt\))238 b(and)118 b(\(off)59 b(lapopt\))-118
2691 y Fr(A)25 b(sample)f(of)h(optimized)e(code)i(can)g(be)g(found)g
(in)f(the)h(follo)n(wing)e(section)h(on)g(disassemble.)-118
3029 y Ft(26.8)142 b(Disassembler)-118 3253 y Fr(F)o(or)39
b(most)f(implementations)e(of)j(PSL,)h(a)f(disassembler)f(for)i
(compiled)d(functions)h(is)h(a)n(v)n(ailable)-118 3373
y(which)32 b(gi)n(v)o(es)e(insight)h(into)g(the)i(')-5
b(real')33 b(code.)53 b(It)32 b(is)g(a)h(tool)e(for)i(code)f
(optimization)e(only)i(and)g(not)-118 3494 y(meant)24
b(to)h(gi)n(v)o(e)e(insight)g(for)i(the)g('normal')g(LISP)g(user)-5
b(.)-118 3614 y(Example:)-118 3812 y Fh(\(load)59 b(disassemble\))-118
3932 y(NIL)-118 4053 y(\(disassemble)e('get\))-118 4173
y(\()i(**)h(Function)118 b(GET)g(at)60 b(16#36110\))-118
4414 y(00036110)237 b(9DE3BFA0)h(save)417 b(r14,-x'60,r14)-118
4534 y(00036114)237 b(3B3E0000)h(sethi)357 b(-x'20000,r29)-118
4655 y(00036118)237 b(21360002)h(sethi)357 b(-x'9FFFE,r16)774
b(Alloc)59 b(2)-118 4775 y(0003611C)237 b(A2100002)h(or)537
b(r0,r2,r17)954 b(\(frame)59 b(1\))-118 4895 y(00036120)237
b(9930601B)h(srl)477 b(r1,x'1B,r12)-118 5016 y(00036124)237
b(80A3201E)h(subcc)357 b(r12,x'1E,r0)-118 5136 y(00036128)237
b(32800007)h(bne,a)357 b(L0003)-118 5256 y(0003612C)237
b(82100006)h(or)537 b(r0,r6,r1)-118 5377 y(00036130)237
b(9930A01B)h(srl)477 b(r2,x'1B,r12)-118 5497 y(00036134)237
b(80A3201E)h(subcc)357 b(r12,x'1E,r0)-118 5618 y(00036138)237
b(22800005)h(be,a)417 b(L0004)-118 5738 y(0003613C)237
b(88100006)h(or)537 b(r0,r6,r4)-118 5858 y(00036140)237
b(82100006)h(or)537 b(r0,r6,r1)p eop
%%Page: 232 240
232 239 bop 118 -18 a Fr(232)1314 289 y Fh(L0003:)118
409 y(00036144)237 b(81C7E008)h(jmpl)417 b(r31+8,r0)118
529 y(00036148)237 b(81E82000)h(restore)f(r0,0,r0)955
770 y(...)59 b(etc)g(...)118 1109 y Ft(26.9)143 b(Mor)m(e)35
b(unsupported)f(softwar)m(e)118 1332 y Fr(A)25 b(fe)n(w)g(parts)f(of)h
(the)g(PSL)g(system)f(or)h(applications)e(are)j(no)e(longer)h(useful)f
(or)h(cant)g(be)g(supported.)118 1627 y Fk(26.9.1)119
b(Oload)30 b(not)g(supported)118 1814 y Fr(W)-8 b(e)22
b(discontinue)f(the)h(support)f(of)h(OLO)m(AD,)f(which)g(allo)n(ws)g
(on)h(some)f(v)o(ersions)g(to)g(link)g(in)h(e)o(xternal)118
1935 y(routines)27 b(into)f(PSL)i(at)g(run)f(time)f(using)h(the)g
(system)f(loader)-5 b(.)38 b(As)27 b(alternati)n(v)o(e)f(we)i
(recommend)f(the)118 2055 y(usage)j(of)f(shared)h(memory)f(\(see)h
(belo)n(w\).)44 b(An)30 b(e)o(xample)f(ho)n(w)g(to)g(use)g(an)h(shared)
g(memory)f(based)118 2176 y(oload)24 b(substitute)f(is)i(under)f(de)n
(v)o(elopment.)118 2470 y Fk(26.9.2)119 b(P)n(ortable)29
b(Common)h(Lisp)g(Subset)g(\(PCLS\))g(not)g(supported)118
2658 y Fr(If)25 b(you)g(w)o(ant)f(Common)g(LISP)i(,)f(please)g(use)f
(Common)g(LISP)-11 b(.)118 2996 y Ft(26.10)142 b(Shar)m(ed)35
b(Memory)g(Interface)e(\(Unix)i(only\))118 3220 y Fr(The)20
b(PSL)h(shared)f(memory)f(interf)o(ace)i(pro)o(vides)e(all)h(function)f
(for)h(operating)g(with)f(shared)h(memory)118 3340 y(re)o(gions)e(and)h
(semaphores)f(\(See)i(e.g.)29 b(Unix)18 b(man)g(pages)h(for)g
(shmop,shmget,shmctl,semop,semctl,semg)o(et)118 3461
y(etc.\))53 b(The)32 b(de\002nitions)e(of)i(these)g(man)g(pages)g(are)g
(used)g(in)f(the)h(paragraph.)53 b(Using)31 b(the)g(memory)118
3581 y(address)k(map)g(mechanism)g(described)g(belo)n(w)-6
b(,it)33 b(is)i(easy)g(to)g(write)h(one')-5 b(s)34 b(o)n(wn)h(shared)g
(memory)118 3701 y(application.)118 3822 y(In)24 b(the)f(rest)h(of)g
(this)e(paragraph)i(we)g(describe)g(a)g(simple)e(model)h
(implementation)e(of)j(a)g('pipe')g(using)118 3942 y(shared)h(memory)f
(and)h(a)g(semaphore.)30 b(This)24 b(code)h(is)g(contained)f(in)g(the)h
(\002le)g($pu/shmem.sl.)118 4183 y Fh(\(shm!-open)58
b(S:pair)g(M:Mode\):)118 b(any)1514 b Fi(e)n(xpr)362
4382 y Fr(If)32 b(S)g(=)g(0)f(a)h(ne)n(w)f(shared)g(memory)g(area)h(is)
f(allocated.)51 b(Otherwise)31 b(S)g(is)g(e)o(xpected)h(to)f(be)g(a)362
4502 y(dotted)24 b(pair)i(of)f(shmid)f(and)h(semid)g(of)g(an)h(e)o
(xisting)d(shared)i(memory)-6 b(.)31 b(Le)o(gal)25 b(modes)f(are)i
Fq(in-)362 4623 y(put)p 511 4623 30 4 v 37 w(cr)n(eate,)h(output)p
1138 4623 V 38 w(cr)n(eate,)g(input)h(and)e(output)p
Fr(.)36 b(A)27 b(list)e(consisting)f(of)i(channelnumber)362
4743 y(shmid)d(and)i(semid)f(is)h(returned.)118 4942
y Fh(\(independentdetachshm)55 b(C:channel\):)117 b(any)1096
b Fi(e)n(xpr)362 5141 y Fr(Detaches)25 b(the)g(shared)g(memory)f(re)o
(gion)g(used)g(by)h(C,)g(closes)f(the)h(channel.)118
5340 y Fh(\(readfromshm)57 b(C:channel\):)117 b(any)1634
b Fi(e)n(xpr)362 5539 y Fr(W)-8 b(aits)32 b(until)g(the)h(shared)g
(memory)f(re)o(gion)g(is)g(readable,)j(reads)e(an)g(e)o(xpression)f
(and)h(resets)362 5659 y(the)25 b(mode)f(to)g(writable.)31
b(Returns)24 b(the)h(e)o(xpression.)118 5858 y Fh(\(writetoshm)57
b(C:channel)h(E:expression\):)117 b(list)856 b Fi(e)n(xpr)p
eop
%%Page: 233 241
233 240 bop -118 -18 a Fg(26.10.)55 b(SHARED)25 b(MEMOR)-6
b(Y)24 b(INTERF)-7 b(A)l(CE)25 b(\(UNIX)g(ONL)-10 b(Y\))1031
b Fr(233)126 289 y(W)-8 b(aits)19 b(until)g(the)g(shared)h(memory)f(re)
o(gion)g(is)g(writeable,)h(prints)f(the)h(e)o(xpression)e(using)h
(prin2.)126 409 y(Returns)25 b(the)f(v)n(alue)g(of)h(prin2.)-118
596 y(The)19 b(follo)n(wing)f(C)i(program)f(w)o(orks)g(together)g(with)
f(the)i(PSL)g(part)f(such)g(that)g(it)g(prints)g(the)g(messages)-118
716 y(read)30 b(from)f(shared)h(memory)f(when)g(the)o(y)g(are)h(ready)g
(for)g(printing.)44 b(It)29 b(must)g(be)h(started)f(with)g(tw)o(o)-118
837 y(paramemters,)24 b(namely)g(the)h(shmid)f(and)g(the)h(semid)f(to)g
(synchronize)h(with)f(the)g(PSL)i(part.)-118 1163 y Fh(#include)58
b(<stdio.h>)-118 1284 y(#include)g(<sys/types.h>)-118
1404 y(#include)g(<sys/ipc.h>)-118 1525 y(#include)g(<sys/sem.h>)-118
1765 y(struct)g(sembuf)h(;)-118 2006 y(struct)f(sembuf)h(sembu;)-118
2127 y(struct)f(sembuf)h(*sembuptr;)-118 2367 y(main)g(\(argc,argv\))
181 2488 y(int)g(argc;)181 2608 y(char)g(*argv[];)-118
2849 y({)g(int)h(sema)e(,)i(shmemid;)1 2969 y(char)f(*)h(shmaddress;)1
3210 y(sembuptr)e(=)i(&sembu;)1 3451 y
(sscanf\(argv[1],"\045d",&shmemid\);)1 3571 y
(sscanf\(argv[2],"\045d",&sema\);)1 3812 y(/*)g(open)f(shared)f(memory)
h(*/)-58 4053 y(printf\("the)e(data)i(is)g(:)h(\045d)f
(\045d\\n",shmemid,sema\);)1 4173 y(shmaddress)f(=)i
(shmat\(shmemid,0,0\);)1 4414 y(while)f(\(1\))1 4534
y({)h(waitsema\(sema\))d(;)i(/*)h(wait)e(for)h(a)h(0)g(*/)121
4655 y(printf\("the)d(message)i(is)g(:)g(\045s)h(\\n",shmaddress)c
(+4\);)121 4775 y(setsema)i(\(sema,2\))g(;)i(/*)f(ok,)g(eaten)g(*/)1
4895 y(})-118 5016 y(})-118 5256 y(setsema)f(\(sema,val\))-118
5377 y(int)h(sema,val;)-118 5497 y({)g(semctl\(sema,0,SETVAL,val\);)54
b(})-118 5738 y(waitsema)k(\(sema\))p eop
%%Page: 234 242
234 241 bop 118 -18 a Fr(234)118 289 y Fh(int)59 b(sema;)118
409 y({)238 529 y(sembu.sem_num)e(=0;)i(sembu.sem_op)e(=)i(0;)h
(sembu.sem_flg)c(=0;)238 770 y(semop)i(\(sema,)h(sembuptr)f(,)h(1\);)
118 891 y(})118 1226 y Ft(26.11)142 b(Sock)o(et)34 b(interface)g
(\(Unix)g(only\))118 1449 y Fr(to)25 b(be)f(added....)118
1784 y Ft(26.12)142 b(Pipe)35 b(Interface)f(\(Unix)g(only\))118
2007 y Fr(The)28 b(Pipe)g(interf)o(ace)g(establishes)f(a)h(pipe)f(as)h
(a)g(PSL)h(channel)e(from)h(which)f(\(or)h(to)g(which\))f(normal)118
2128 y(PSL)h(read/write)e(operations)g(can)h(be)g(used.)37
b(Pipes)27 b(are)g(specially)f(useful)g(to)h(supply)e(data)i(to)g
(other)118 2248 y(processes,)e(e.g.)30 b(REDUCE)c(uses)e(it)h(to)f
(send)h(data)f(to)h(a)g(plot)f(program.)118 2489 y Fh(\(pipe!-open)57
b(S:string)h(M:Mode\):)118 b(integer)1095 b Fi(e)n(xpr)362
2667 y Fr(Starts)32 b(a)g(process)f(and)h(e)o(x)o(ecutes)f(the)g
(command)g(in)g(\241string\277.)51 b(The)32 b(mode)f(must)g(be)h
(either)362 2787 y(Input)24 b(or)h(Output.)30 b(Returns)24
b(a)i(channel.)118 2965 y(Pipes)g(are)h(closed)f(with)f(a)i(normal)e
(close)h(call.)34 b(This)26 b(will)f(kill)g(the)h(process)g(that)g(has)
g(been)g(started.)118 3085 y(If)f(this)f(process)h(should)f(survi)n(v)o
(e,)f(you)h(ha)n(v)o(e)h(to)f(use)h(abandonpipe.)118
3326 y Fh(\(abandonpipe)57 b(channel\):)118 b(void)1693
b Fi(e)n(xpr)362 3503 y Fr(Closes)25 b(channel)f(without)g(killing)f
(the)h(process)h(started)g(by)f(pipe!-open.)31 b(Returns)24
b Fh(nil)p Fr(.)118 3681 y(Example:)118 3859 y Fh(\(load)59
b(pipes\))118 3979 y(\(setq)g(chn)g(\(pipe!-open)e("uname"\)\))118
4099 y(\(channelread)g(chn\))118 4220 y(\(close)i(chn\))118
4555 y Ft(26.13)142 b(Mapping)35 b(of)h(LISP)e(Addr)m(esses)g(to)i(C)f
(addr)m(esses)118 4778 y Fr(This)d(paragraph)g(applies)g(for)g(some)g
(architectures)g(only)-6 b(,)33 b(e.g.)52 b(the)32 b
Fh(IBM/RS,)59 b(HP)g(PA-Risc)118 4899 y(and)g(MIPS)22
b Fr(where)h(the)f(system)f(architecture)i(uses)f('high')g(bits)g(in)g
(the)g(addresses)h(which)f(con\003ict)118 5019 y(with)34
b(the)h(PSL)g(tagging)f(mechanism.\(See)g(the)h(paragraph)g(on)g(the)f
(Size)h(of)g(the)g(Address)f(space)118 5139 y(abo)o(v)o(e\).)72
b(The)39 b(consequence)f(of)h(this)f(is)g(that)g(using)g(the)h(inf)f
(operation)g(for)h(calculating)f(the)h(C)118 5260 y(equi)n(v)n(alent)24
b(from)h(a)h(LISP)g(address)f(does)h(not)e(w)o(ork)i(here.)33
b(The)25 b(easiest)h(w)o(ay)f(\(without)f(e)o(xplaining)118
5380 y(the)h(reason\))g(of)g(mapping)e(for)i(the)g(architectures)g(is:)
311 5494 y(IBM/RS)100 b(\(mkstr)24 b(item\))168 5615
y(HP)h(P)-9 b(A-Risc)100 b(\(mkv)o(ec)24 b(item\))444
5735 y(Mips)98 b(\(wshift)24 b(\(inf)h(item\))f(2\))270
5855 y(Linux)p 515 5855 30 4 v 35 w(elf)99 b(\(mk\002xn)25
b(item\))p eop
%%Page: 235 243
235 242 bop -118 -18 a Fg(26.13.)55 b(MAPPING)25 b(OF)g(LISP)h
(ADDRESSES)g(T)n(O)f(C)g(ADDRESSES)823 b Fr(235)-118
289 y(On)27 b(Con)l(v)o(e)o(x)f(systems)f(the)i('high')g(bit)f(is)g
(the)h(leftmost)f(one.)37 b(Therefore)28 b(the)f(tag)f(bits)g(start)h
(at)g(bit)f(1)-118 409 y(and)f(the)f(inf)h(range)g(is)f(limited)g(by)g
(26)h(bits.)k(The)c(inf)g(operation)f(w)o(orks)g(as)h(e)o(xpected.)p
eop
%%Page: 236 244
236 243 bop 118 743 a Fn(Index)118 1178 y Ff(<)p Fr(,)25
b(16)118 1301 y Ff(<<)p Fr(,)g(17)118 1424 y Ff(<)p Fe(=)p
Fr(,)g(16)118 1548 y Ff(>)p Fr(,)g(16)118 1671 y Ff(>)p
Fe(=)p Fr(,)g(16)118 1794 y Ff(>>)p Fr(,)g(17)118 1917
y Fl(\003)p Fr(,)g(16)118 2040 y Fl(j)p Fr(,)g(17)118
2163 y Fl(\030)p Fr(,)g(17)118 2287 y Fl(\030)p Fe(=)p
Fr(,)g(17)118 2410 y Fl(^)p Fr(,)g(17)118 2533 y(*backtrace)g
(\(switch\),)g(156)118 2656 y(*break)g(\(switch\),)f(156)118
2779 y(*comp)g(\(switch\),)g(99)118 2902 y(*compressing,)f(134)118
3026 y(*compressing)g(\(switch\),)i(136)118 3149 y(*crefsummary)f
(\(switch\),)h(186)118 3272 y(*echo)g(\(switch\),)f(140)118
3395 y(*emsgp)g(\(\003uid\),)h(156)118 3518 y(*eolinstringok,)e(6)118
3641 y(*eolinstringok)g(\(switch\),)h(136)118 3765 y(*f)o(ast-e)n(v)o
(ectors)g(\(switch\),)g(176)118 3888 y(*f)o(ast-inte)o(gers,)g(15)118
4011 y(*f)o(ast-inte)o(gers)g(\(switch\),)g(176)118 4134
y(*f)o(ast-strings)g(\(switch\),)g(176)118 4257 y(*f)o(ast-v)o(ectors)g
(\(switch\),)g(176)118 4380 y(*gc)h(\(switch\),)f(183)118
4504 y(*in,)g(123)118 4627 y(*nolink)o(e)g(\(switch\),)g(177)118
4750 y(*ord)h(\(switch\),)f(177)118 4873 y(*out,)g(123)118
4996 y(*output)f(\(switch\),)i(151)118 5119 y(*pcmac)g(\(switch\),)f
(178)118 5243 y(*pgwd)g(\(switch\),)g(178)118 5366 y(*plap)g
(\(switch\),)h(177)118 5489 y(*printloadnames,)e(138)118
5612 y(*printloadnames)g(\(switch\),)h(139)118 5735 y(*pwrds)g
(\(switch\),)h(178)118 5858 y(*r2i)g(\(switch\),)f(176)2035
1178 y(*raise)h(\(switch\),)f(136)2035 1299 y(*redefmsg,)g(3)2035
1420 y(*redefmsg)g(\(switch\),)h(98)2035 1540 y(*time)f(\(switch\),)g
(151)2035 1661 y(*usermode,)g(3,)h(42)2035 1782 y(*usermode)f
(\(switch\),)g(99)2035 1903 y(*v)o(erboseload,)g(138)2035
2024 y(*v)o(erboseload)g(\(switch\),)g(139)2035 2144
y(+,)h(16)2035 2265 y(\226,)g(16)2035 2386 y(/,)g(17)2035
2507 y(//,)f(17)2035 2628 y(/=,)h(15)2035 2748 y(=,)g(15)2035
2869 y(=)p Ff(>)p Fr(,)g(206,)f(207)2035 2990 y(&,)g(17)2035
3201 y(abandonpipe,)g(222)2035 3322 y(abs,)h(18)2035
3442 y(aconc,)g(49)2035 3563 y(acos,)g(25)2035 3684 y(acosd,)g(25)2035
3805 y(acot,)g(26)2035 3926 y(acotd,)g(26)2035 4046 y(acsc,)g(26)2035
4167 y(acscd,)g(26)2035 4288 y(add1,)g(18)2035 4409 y(adjoin,)f(50)2035
4530 y(adjoinq,)g(50)2035 4650 y(allocate-string,)g(64)2035
4771 y(alphanumericp,)g(62)2035 4892 y(alphap,)g(61)2035
5013 y(and,)h(2,)f(11)2035 5134 y(ans,)h(151)2035 5254
y(append,)g(49)2035 5375 y(apply)-6 b(,)24 b(118)2035
5496 y(asec,)h(26)2035 5617 y(asecd,)g(26)2035 5738 y(asin,)f(25)2035
5858 y(asind,)g(25)1815 6066 y(236)p eop
%%Page: 237 245
237 244 bop -118 -18 a Fg(INDEX)3084 b Fr(237)-118 289
y(ass,)24 b(55)-118 409 y(assoc,)g(55)-118 529 y(atan,)h(25)-118
650 y(atan2,)f(26)-118 770 y(atan2d,)g(26)-118 891 y(atand,)g(25)-118
1011 y(atom,)g(9)-118 1131 y(atsoc,)g(55)-118 1328 y(backquote,)g(102)
-118 1448 y(binaryclose,)g(147)-118 1569 y(binaryopenappend,)g(147)-118
1689 y(binaryopenread,)g(147)-118 1810 y(binaryopenupdate,)g(147)-118
1930 y(binaryopenwrite,)g(147)-118 2050 y(binaryposition\002le,)f(148)
-118 2171 y(binaryread,)i(147)-118 2291 y(binaryreadblock,)f(147)-118
2411 y(binarywrite,)g(147)-118 2532 y(binarywriteblock,)f(148)-118
2652 y(bldmsg,)g(142)-118 2773 y(bothcasep,)h(62)-118
2893 y(bothtimes,)f(175)-118 3013 y(br)l(,)i(162)-118
3134 y(break,)g(161)-118 3254 y(breakin*)f(\(global\),)h(142,)f(158)
-118 3374 y(breakle)n(v)o(el*)g(\(global\),)g(156)-118
3495 y(break)o(out*)g(\(global\),)g(142,)h(158)-118 3691
y(c,)g(135)-118 3812 y(car)l(,)g(44)-118 3932 y(case,)g(75)-118
4053 y(catch,)g(92)-118 4173 y(catch-all,)g(94)-118 4293
y(cd,)g(221)-118 4414 y(cdr)l(,)g(44)-118 4534 y(ceiling,)f(22)-118
4655 y(channeleject,)h(130)-118 4775 y(channellinelength,)e(131)-118
4895 y(channellposn,)g(131)-118 5016 y(channelposn,)h(130)-118
5136 y(channelprin1,)g(126)-118 5256 y(channelprin2,)g(127)-118
5377 y(channelprin2t,)g(129)-118 5497 y(channelprinc,)g(129)-118
5618 y(channelprint,)g(127)-118 5738 y(channelprintf,)g(128)-118
5858 y(channelread,)h(132)1799 289 y(channelreadch,)g(133)1799
410 y(channelreadchar)l(,)g(133)1799 531 y(channelreadline,)f(135)1799
652 y(channelreadtok)o(en,)g(134)1799 773 y(channelreadtok)o
(enwithhooks,)e(135)1799 894 y(channelspaces,)j(127)1799
1015 y(channeltab,)f(128)1799 1136 y(channelterpri,)g(127)1799
1257 y(channelunreadchar)l(,)h(134)1799 1378 y(channel)o(writechar)l(,)
g(129)1799 1499 y(char)l(,)g(59)1799 1621 y(char)p Ff(<)p
Fr(,)g(62)1799 1742 y(char)p Ff(>)p Fr(,)g(62)1799 1863
y(char)n(-bits,)f(63)1799 1984 y(char)n(-code,)h(62)1799
2105 y(char)n(-do)n(wncase,)g(63)1799 2226 y(char)n(-equal,)g(62)1799
2347 y(char)n(-font,)g(63)1799 2468 y(char)n(-greaterp,)h(62)1799
2589 y(char)n(-int,)e(63)1799 2710 y(char)n(-lessp,)h(62)1799
2831 y(char)n(-upcase,)g(63)1799 2952 y(char=,)g(62)1799
3074 y(character)l(,)h(63)1799 3195 y(close,)e(137)1799
3316 y(code-address-to-symbol,)f(165)1799 3437 y(code-char)l(,)i(63)
1799 3558 y(code-number)n(-of-ar)n(guments,)f(105)1799
3679 y(codeapply)-6 b(,)24 b(119)1799 3800 y(codee)n(v)n(alapply)-6
b(,)23 b(119)1799 3921 y(codep,)i(10)1799 4042 y(commentoutcode,)e(175)
1799 4163 y(compd,)h(169)1799 4284 y(compile,)g(169)1799
4405 y(compile-\002le,)g(168)1799 4526 y(compile-\002le-aux,)g(168)1799
4648 y(compiletime,)f(175)1799 4769 y(compress,)h(143)1799
4890 y(concat,)h(219)1799 5011 y(cond,)f(73)1799 5132
y(cons,)g(44)1799 5253 y(const,)g(174)1799 5374 y(constant?,)g(173)1799
5495 y(constantp,)g(10)1799 5616 y(conterror)l(,)h(154)1799
5737 y(continuableerror)l(,)f(154)1799 5858 y(cop)o(y)-6
b(,)24 b(45)p eop
%%Page: 238 246
238 245 bop 118 -18 a Fr(238)3084 b Fg(INDEX)118 289
y Fr(cop)o(yd,)24 b(99)118 410 y(cop)o(yscantable,)g(146)118
532 y(cop)o(ystring,)g(64)118 653 y(cop)o(ystringtofrom,)f(64)118
775 y(cop)o(yv)o(ector)l(,)h(216)118 896 y(cop)o(yv)o(ectortofrom,)f
(216)118 1018 y(cos,)i(24)118 1139 y(cosd,)g(24)118 1261
y(cot,)g(24)118 1382 y(cotd,)f(24)118 1504 y(csc,)h(25)118
1625 y(cscd,)g(25)118 1747 y(currentreadmacroindicator*)19
b(\(global\),)g(136)118 1868 y(currentscantable*)25 b(\(global\),)f
(136)118 2092 y(date,)h(182)118 2213 y(date-and-time,)f(183)118
2335 y(de,)h(100)118 2456 y(declare-\003a)n(v)n(or)l(,)h(208)118
2578 y(decr)l(,)f(18)118 2699 y(defconst,)f(174)118 2821
y(def)n(\003a)n(v)n(or)l(,)h(201)118 2942 y(de\002ne-constant,)g(173)
118 3064 y(de\003ambda,)g(102)118 3185 y(de\003ist,)g(33)118
3307 y(defmacro,)g(101)118 3428 y(deformat,)g(197)118
3550 y(de)o(greestodms,)e(24)118 3671 y(de)o(greestoradians,)h(23)118
3793 y(del,)h(52)118 3914 y(delasc,)g(53)118 4036 y(delascip,)f(53)118
4157 y(delatq,)g(53)118 4279 y(delatqip,)g(53)118 4400
y(delete,)h(52)118 4522 y(deletip,)f(53)118 4643 y(delq,)g(53)118
4765 y(delqip,)g(53)118 4886 y(desetq,)g(36)118 5008
y(df,)h(100)118 5129 y(dif)n(ference,)g(18)118 5251 y(digit-char)l(,)f
(63)118 5372 y(digitp,)f(62)118 5494 y(di)n(vide,)g(18)118
5615 y(dm,)h(100)118 5737 y(dmstode)o(grees,)f(24)118
5858 y(dmstoradians,)g(23)2035 289 y(dn,)h(100)2035 409
y(do,)g(91)2035 529 y(do*,)g(91)2035 650 y(do-loop,)g(92)2035
770 y(do-loop*,)g(92)2035 891 y(ds,)g(101)2035 1011 y(dskin,)g(140)2035
1131 y(dumplisp,)f(182)2035 1328 y(eject,)i(130)2035
1448 y(emsg*)f(\(global\),)g(156)2035 1569 y(eolinstringok,)f(6)2035
1689 y(eq,)i(8)2035 1810 y(eqcar)l(,)h(9)2035 1930 y(eqn,)f(8)2035
2050 y(eqstr)l(,)g(9)2035 2171 y(equal,)g(8)2035 2291
y(error)l(,)g(153)2035 2411 y(errorform*)g(\(global\),)f(157)2035
2532 y(errorprintf,)h(130)2035 2652 y(errorset,)g(155)2035
2773 y(errout*)g(\(global\),)f(142)2035 2893 y(errprin,)h(130)2035
3013 y(errset,)g(155)2035 3134 y(e)n(v-send,)f(207)2035
3254 y(e)n(v)n(al,)g(42,)g(115)2035 3374 y(e)n(vlis,)g(118)2035
3495 y(e)n(vprogn,)g(119)2035 3615 y(e)o(xit,)g(80)2035
3736 y(e)o(xitlisp,)f(181)2035 3856 y(e)o(xitwithstatus,)f(181)2035
3976 y(e)o(xp,)i(27)2035 4097 y(e)o(xpand,)g(120)2035
4217 y(e)o(xplode,)g(142)2035 4338 y(e)o(xplode2,)g(143)2035
4458 y(e)o(xprp,)g(105)2035 4578 y(e)o(xpt,)g(18)2035
4775 y(f)o(actorial,)h(27)2035 4895 y(f)o(aslin,)f(141)2035
5016 y(f)o(atalerror)l(,)h(155)2035 5136 y(fboundp,)f(105)2035
5256 y(fcodep,)h(105)2035 5377 y(fe)o(xprp,)f(106)2035
5497 y(\002lep,)h(137)2035 5618 y(\002ndpre\002x,)g(32)2035
5738 y(\002ndsuf)n(\002x,)f(32)2035 5858 y(\002rst,)h(47)p
eop
%%Page: 239 247
239 246 bop -118 -18 a Fg(INDEX)3084 b Fr(239)-118 289
y(\002x,)25 b(15)-118 409 y(\002xp,)g(10)-118 530 y(\003ag,)g(35)-118
651 y(\003ag1,)g(35)-118 771 y(\003agp,)g(35)-118 892
y(\003ambdalinkp,)f(105)-118 1013 y(\003atsize,)h(142)-118
1133 y(\003atsize2,)g(142)-118 1254 y(\003a)n(v)n(or)n(-de\002ned?,)h
(208)-118 1374 y(\003oat,)f(15)-118 1495 y(\003oatp,)g(10)-118
1616 y(\003oor)l(,)g(22)-118 1736 y(\003uid,)f(112)-118
1857 y(\003uidp,)g(113)-118 1978 y(for)l(,)h(81)-118
2098 y(for*,)g(88)-118 2219 y(foreach,)g(88)-118 2339
y(fourth,)f(47)-118 2460 y(free-bps,)h(183)-118 2581
y(funboundp,)e(104)-118 2701 y(funcall,)h(118)-118 2822
y(function,)g(120)-118 2943 y(function-basic-de\002nition,)f(109)-118
3063 y(function-lambda-list,)f(109)-118 3271 y(garbage)j(collection,)e
(183)-118 3392 y(gcknt*)h(\(global\),)g(184)-118 3512
y(gctime*)g(\(global\),)g(184)-118 3633 y(gensym,)g(31)-118
3754 y(geq,)h(20)-118 3874 y(get,)f(33)-118 3995 y(getd,)g(99)-118
4116 y(getfcodepointer)l(,)g(105)-118 4236 y(getv)-6
b(,)24 b(217)-118 4357 y(getw)o(ords,)g(166)-118 4478
y(global,)g(113)-118 4598 y(globalp,)g(113)-118 4719
y(gmer)n(gesort,)g(54)-118 4839 y(go,)g(79)-118 4960
y(graphicp,)g(61)-118 5081 y(greaterp,)h(20)-118 5201
y(gsort,)f(54)-118 5409 y(hist,)g(151)-118 5530 y(historycount*)f
(\(global\),)h(151)-118 5650 y(historylist*)e(\(global\),)i(152)-118
5858 y(id2int,)f(12)1799 289 y(id2string,)g(12)1799 409
y(idapply)-6 b(,)23 b(119)1799 529 y(idp,)h(10)1799 650
y(idsort,)g(54)1799 770 y(if,)h(74,)f(75)1799 891 y(if)p
1866 891 30 4 v 36 w(system,)f(178)1799 1011 y(ignore,)h(42)1799
1131 y(ignoredinbacktrace*)g(\(global\),)g(157)1799 1252
y(implode,)f(143)1799 1372 y(imports,)g(139)1799 1493
y(in*)h(\(global\),)g(141)1799 1613 y(incr)l(,)h(19)1799
1733 y(independentdetachshm,)e(223)1799 1854 y(indx,)h(218)1799
1974 y(init)g(\002le,)h(182)1799 2094 y(init-\002le-string,)e(182)1799
2215 y(initforms*)g(\(global\),)h(151)1799 2335 y(inp,)g(151)1799
2456 y(input\226case,)g(29)1799 2576 y(instantiate-\003a)n(v)n(or)l(,)g
(205)1799 2696 y(int-char)l(,)g(63)1799 2817 y(int2id,)f(12)1799
2937 y(intern,)h(11)1799 3057 y(interngensym\):,)f(31)1799
3178 y(internp,)h(32)1799 3298 y(interpreterfunctions*)f(\(global\),)i
(158)1799 3419 y(intersection,)e(51)1799 3539 y(intersectionq,)g(51)
1799 3736 y(k)o(ernel-fns)i(\(global\),)f(191)1799 3856
y(kno)n(wn-free-space,)h(183)1799 4053 y(land,)f(21)1799
4173 y(lapin,)g(140)1799 4293 y(lastcar)l(,)h(47)1799
4414 y(lastpair)l(,)f(47)1799 4534 y(lbind1,)f(113)1799
4655 y(lconc,)h(50)1799 4775 y(length,)g(49)1799 4895
y(leq,)g(20)1799 5016 y(lessp,)g(20)1799 5136 y(let,)g(76)1799
5256 y(let*,)g(77)1799 5377 y(le)o(xpr)n(-send,)g(206)1799
5497 y(le)o(xpr)n(-send-1,)g(207)1799 5618 y(le)o(xpr)n
(-send-1-if-handles,)f(207)1799 5738 y(le)o(xpr)n(-send-if-handles,)g
(207)1799 5858 y(linelength,)g(131)p eop
%%Page: 240 248
240 247 bop 118 -18 a Fr(240)3084 b Fg(INDEX)118 289
y Fr(lispbanner*)24 b(\(global\),)g(181)118 410 y(lispscantable*)f
(\(global\),)i(145)118 532 y(list,)f(49)118 653 y(list2set,)f(52)118
775 y(list2setq,)g(52)118 896 y(list2string,)g(13)118
1018 y(list2v)o(ector)l(,)g(14)118 1139 y(lnot,)h(21)118
1261 y(load,)g(138)118 1382 y(loaddirectories*)g(\(global\),)g(139)118
1504 y(loade)o(xtensions*)f(\(global\),)h(139)118 1625
y(loadtime,)g(176)118 1747 y(log,)g(27)118 1868 y(log10,)g(27)118
1990 y(log2,)g(27)118 2111 y(lor)l(,)h(21)118 2233 y(lose,)f(3,)h(42)
118 2354 y(lo)n(wercasep,)g(62)118 2476 y(lposn,)f(130)118
2597 y(lshift,)g(22)118 2719 y(lxor)l(,)g(22)118 2942
y(macroe)o(xpand,)g(104)118 3064 y(macrop,)h(106)118
3185 y(main,)f(152)118 3307 y(mak)o(e-bytes,)g(218)118
3428 y(mak)o(e-instance,)g(204)118 3550 y(mak)o(e-string,)g(64)118
3671 y(mak)o(e-v)o(ector)l(,)g(215)118 3793 y(mak)o(e-w)o(ords,)g(218)
118 3914 y(mak)o(efcode,)h(105)118 4036 y(mak)o(e\003ambdalink,)f(105)
118 4157 y(mak)o(efunbound,)g(105)118 4279 y(mak)o(eunbound,)f(39)118
4400 y(map,)h(89)118 4522 y(mapc,)h(89)118 4643 y(mapcan,)g(90)118
4765 y(mapcar)l(,)g(89)118 4886 y(mapcon,)f(90)118 5008
y(maplist,)f(90)118 5129 y(mapobl,)h(32)118 5251 y(max,)g(20)118
5372 y(max2,)g(20)118 5494 y(maxbreakle)n(v)o(el*)f(\(global\),)i(156)
118 5615 y(member)l(,)f(48)118 5737 y(memq,)g(48)118
5858 y(min,)g(21)2035 289 y(min2,)g(21)2035 409 y(minus,)f(19)2035
529 y(minusp,)g(21)2035 650 y(mkquote,)h(120)2035 770
y(mkstring,)f(64)2035 891 y(mkv)o(ect,)h(215)2035 1011
y(mkw)o(ords,)g(165)2035 1131 y(mod,)g(23)2035 1328 y(nconc,)h(49)2035
1448 y(ncons,)f(45)2035 1569 y(ne,)h(9)2035 1689 y(neq,)g(9)2035
1810 y(ne)n(wid,)f(12,)g(32)2035 1930 y(ne)o(xprp,)g(106)2035
2050 y(ne)o(xt,)g(80)2035 2171 y(nil)g(\(global\),)g(41)2035
2291 y(nolist*)f(\(global\),)h(186)2035 2411 y(noncharactererror)l(,)i
(160)2035 2532 y(noniderror)l(,)e(159)2035 2652 y(noninte)o(gererror)l
(,)g(160)2035 2773 y(nonlisterror)l(,)g(159)2035 2893
y(nonnumbererror)l(,)g(160)2035 3013 y(nonpairerror)l(,)h(159)2035
3134 y(nonpositi)n(v)o(einte)o(gererror)l(,)d(160)2035
3254 y(nonsequenceerror)l(,)j(160)2035 3374 y(nonstringerror)l(,)f(160)
2035 3495 y(non)l(v)o(ectorerror)l(,)g(160)2035 3615
y(nonw)o(ordserror)l(,)g(159,)h(160)2035 3736 y(not,)f(11)2035
3856 y(nstring-capitalize,)g(68)2035 3976 y(nstring-do)n(wncase,)f(68)
2035 4097 y(nstring-upcase,)h(68)2035 4217 y(nth,)g(47)2035
4338 y(null,)g(10)2035 4458 y(numberp,)g(10)2035 4655
y(object-fns)g(\(global\),)h(191)2035 4775 y(object-get-handler)l(,)f
(209)2035 4895 y(object-type,)g(208)2035 5016 y(objects-v)o(ersion\):,)
f(209)2035 5136 y(of)n(f,)i(40)2035 5256 y(on,)f(40)2035
5377 y(onep,)h(21)2035 5497 y(open,)g(137)2035 5618 y(options*)e
(\(global\),)h(139)2035 5738 y(or)l(,)h(11)2035 5858
y(out*)f(\(global\),)g(141)p eop
%%Page: 241 249
241 248 bop -118 -18 a Fg(INDEX)3084 b Fr(241)-118 289
y(output\226case,)24 b(30)-118 409 y(outputbase*)f(\(global\),)i(130)
-118 617 y(pair)l(,)g(56)-118 738 y(pairp,)f(10)-118
858 y(pbind1,)f(114)-118 979 y(pipe-open,)h(222)-118
1100 y(plus,)g(19)-118 1220 y(plus2,)g(19)-118 1341 y(pnth,)g(48)-118
1462 y(pop,)g(165)-118 1582 y(posn,)g(130)-118 1703 y(pp-\002le,)h(193)
-118 1824 y(pp-object,)f(193)-118 1944 y(prettyprint,)f(129)-118
2065 y(prin1,)h(126)-118 2185 y(prin2,)g(126)-118 2306
y(prin2l,)g(129)-118 2427 y(prin2t,)g(129)-118 2547 y(princ,)g(129)-118
2668 y(prinlength)f(\(global\),)i(131)-118 2789 y(prinle)n(v)o(el)e
(\(global\),)h(131)-118 2909 y(print,)g(127)-118 3030
y(printf,)g(128)-118 3151 y(printscantable,)g(146)-118
3271 y(prog,)g(78)-118 3392 y(prog1,)g(77)-118 3512 y(prog2,)g(77)-118
3633 y(progn,)g(77)-118 3754 y(promptstring*)e(\(global\),)j(136)-118
3874 y(prop,)f(35)-118 3995 y(psetf,)g(39)-118 4116 y(psetq,)g(36)-118
4236 y(push,)g(165)-118 4357 y(put,)g(33)-118 4478 y(putd,)g(98)-118
4598 y(putdiphthong,)e(146)-118 4719 y(putv)-6 b(,)23
b(217)-118 4839 y(putw)o(ords,)h(166)-118 4960 y(pwd,)g(221)-118
5168 y(quit,)g(181)-118 5289 y(quote,)g(120)-118 5409
y(quotient,)f(19)-118 5617 y(radianstode)o(grees,)h(23)-118
5738 y(radianstodms,)f(23)-118 5858 y(random,)h(27)1799
289 y(randomseed)g(\(global\),)g(27)1799 410 y(rangeerror)l(,)i(159)
1799 532 y(ratom,)e(134)1799 653 y(rds,)g(141)1799 775
y(read,)h(132)1799 896 y(read-init-\002le,)g(182)1799
1018 y(readch,)g(133)1799 1139 y(readchar)l(,)h(133)1799
1261 y(readfromshm,)e(223)1799 1382 y(readline,)h(135)1799
1504 y(recip,)g(19)1799 1625 y(reclaim,)f(183)1799 1747
y(record-macro-usage,)h(191)1799 1868 y(record-usage,)g(190)1799
1990 y(redefmsg,)f(3)1799 2111 y(redo,)h(151)1799 2233
y(reload,)g(138)1799 2354 y(remainder)l(,)g(19)1799 2476
y(remd,)f(99)1799 2597 y(rem\003ag,)h(35)1799 2719 y(rem\003ag1,)g(35)
1799 2840 y(remob,)f(31)1799 2962 y(remo)o(v)o(e-wrapper)l(,)g(108)1799
3083 y(remprop,)g(33)1799 3205 y(rempropl,)g(33)1799
3326 y(repeat,)h(80)1799 3448 y(reset,)g(182)1799 3569
y(rest,)g(47)1799 3691 y(return,)g(79)1799 3812 y(re)n(v)o(erse,)f(53)
1799 3934 y(re)n(v)o(ersip,)g(54)1799 4055 y(rob)n(uste)o(xpand,)f(121)
1799 4177 y(round,)h(22)1799 4298 y(rplaca,)h(46)1799
4420 y(rplacd,)g(46)1799 4541 y(rplachar)l(,)g(69)1799
4663 y(rplacw)-6 b(,)24 b(46)1799 4886 y(sassoc,)g(56)1799
5008 y(sa)n(v)o(esystem,)f(181)1799 5129 y(scanalyze,)i(189)1799
5251 y(scanalyze-\002le,)g(188)1799 5372 y(scanalyze-form,)g(188)1799
5494 y(sec,)g(25)1799 5615 y(secd,)g(25)1799 5737 y(second,)f(47)1799
5858 y(selectq,)g(76)p eop
%%Page: 242 250
242 249 bop 118 -18 a Fr(242)3084 b Fg(INDEX)118 289
y Fr(send,)25 b(206)118 410 y(send-if-handles,)f(206)118
531 y(set,)h(36)118 652 y(setf,)g(37)118 773 y(setindx,)f(218)118
894 y(setprop,)g(36)118 1015 y(setq,)g(36)118 1136 y(setsub,)g(219)118
1257 y(setsubseq,)g(219)118 1378 y(setup-some-xref-actions,)g(191)118
1499 y(shm-open,)g(223)118 1621 y(sin,)g(24)118 1742
y(sind,)g(24)118 1863 y(size,)h(218)118 1984 y(spaces,)g(127)118
2105 y(specialclosefunction*)e(\(global\),)h(144)118
2226 y(specialrdsaction*)g(\(global\),)g(142)118 2347
y(specialreadfunction*)g(\(global\),)g(144)118 2468 y(special)o
(writefunction*)f(\(global\),)h(144)118 2589 y(special)o(wrsaction*)g
(\(global\),)g(142)118 2710 y(sqrt,)g(27)118 2831 y(standard-charp,)h
(61)118 2952 y(stderror)l(,)g(159)118 3074 y(stdin*)f(\(global\),)g
(141)118 3195 y(stdout*)f(\(global\),)i(141)118 3316
y(string,)f(13,)g(64)118 3437 y(string)p Ff(<)p Fr(,)g(66)118
3558 y(string)p Ff(<)p Fr(=,)g(66)118 3679 y(string)p
Ff(<>)p Fr(,)g(66)118 3800 y(string)p Ff(>)p Fr(,)g(66)118
3921 y(string)p Ff(>)p Fr(=,)g(66)118 4042 y(string-capitalize,)g(68)
118 4163 y(string-charp,)g(61)118 4284 y(string-concat,)g(67)118
4405 y(string-do)n(wncase,)f(68)118 4526 y(string-empty?,)g(65)118
4648 y(string-equal,)h(66)118 4769 y(string-fetch,)g(65)118
4890 y(string-greaterp,)g(66)118 5011 y(string-left-trim,)f(67)118
5132 y(string-length,)g(65,)i(69)118 5253 y(string-lessp,)e(66)118
5374 y(string-not-equal,)g(67)118 5495 y(string-not-greaterp,)h(66)118
5616 y(string-not-lessp,)f(67)118 5737 y(string-read,)h(71)118
5858 y(string-repeat,)g(67)2035 289 y(string-right-trim,)e(68)2035
410 y(string-search,)i(70)2035 532 y(string-search-equal,)g(70)2035
653 y(string-search-from,)g(70)2035 775 y(string-search-from-equal,)g
(70)2035 896 y(string-store,)g(65)2035 1018 y(string-to-list,)f(68)2035
1139 y(string-to-v)o(ector)l(,)g(68)2035 1261 y(string-trim,)g(67)2035
1382 y(string-upcase,)h(68)2035 1504 y(string-upper)n(-bound,)f(65)2035
1625 y(string2list,)f(13)2035 1747 y(string2v)o(ector)l(,)h(13)2035
1868 y(string=,)h(66)2035 1990 y(stringgensym,)f(31)2035
2111 y(stringp,)h(10)2035 2233 y(sub,)g(219)2035 2354
y(sub1,)g(20)2035 2476 y(subla,)g(57)2035 2597 y(sublis,)f(56)2035
2719 y(subseq,)h(219)2035 2840 y(subst,)g(56)2035 2962
y(substip,)f(56)2035 3083 y(substring,)g(67)2035 3205
y(substring-equal,)g(69)2035 3326 y(substring=,)g(69)2035
3448 y(system,)h(221)2035 3671 y(t)h(\(global\),)f(41)2035
3793 y(tab,)h(127)2035 3914 y(tan,)g(24)2035 4036 y(tand,)f(24)2035
4157 y(tconc,)h(50)2035 4279 y(template,)f(197)2035 4400
y(terpri,)h(127)2035 4522 y(third,)f(47)2035 4643 y(thro)n(w)-6
b(,)23 b(93)2035 4765 y(time,)h(183)2035 4886 y(time\):,)g(182)2035
5008 y(times,)g(20)2035 5129 y(times2,)g(20)2035 5251
y(toktype*,)g(134)2035 5372 y(toploop,)f(150)2035 5494
y(toploope)n(v)n(al*)f(\(global\),)i(150)2035 5615 y(toploople)n(v)o
(el*)e(\(global\),)i(151)2035 5737 y(toploopname*)f(\(global\),)h(151)
2035 5858 y(toploopread*)g(\(global\),)g(150)p eop
%%Page: 243 251
243 250 bop -118 -18 a Fg(INDEX)3084 b Fr(243)-118 289
y(totalcop)o(y)-6 b(,)23 b(219)-118 409 y(tr)l(,)i(161)-118
530 y(trace,)g(161)-118 651 y(transfersign,)f(23)-118
771 y(trst,)g(162)-118 892 y(truncate)n(v)o(ector)l(,)g(166)-118
1013 y(truncate)n(w)o(ords,)g(166)-118 1133 y(twritetoshm,)f(223)-118
1254 y(typeerror)l(,)i(159)-118 1462 y(unbindn,)e(113)-118
1582 y(unboundp,)g(39,)i(113)-118 1703 y(unbr)l(,)f(162)-118
1824 y(undeclare-\003a)n(v)n(or)l(,)i(208)-118 1944 y(un\003uid,)e(113)
-118 2065 y(union,)g(51)-118 2185 y(unionq,)f(51)-118
2306 y(unless,)h(74)-118 2427 y(unquote,)g(103)-118 2547
y(unquotel,)f(103)-118 2668 y(unreadchar)l(,)i(134)-118
2789 y(untr)l(,)f(162)-118 2909 y(unwind-all,)f(94)-118
3030 y(unwind-protect,)g(94)-118 3151 y(upb)o(v)-6 b(,)23
b(218)-118 3271 y(upbw)-6 b(,)24 b(166)-118 3392 y(uppercasep,)h(61)
-118 3512 y(usagetypeerror)l(,)g(159)-118 3633 y(useful-fns)f
(\(global\),)g(191)-118 3754 y(user)l(,)h(42)-118 3874
y(user)n(-homedir)n(-string,)e(182)-118 3995 y(usermode,)h(3)-118
4203 y(v)n(aluecell,)g(39)-118 4324 y(v)o(ector)l(,)g(13,)h(216)-118
4444 y(v)o(ector)n(-empty?,)f(217)-118 4565 y(v)o(ector)n(-fetch,)h(2,)
f(217)-118 4685 y(v)o(ector)n(-size,)g(217)-118 4806
y(v)o(ector)n(-store,)g(217)-118 4927 y(v)o(ector)n(-upper)n(-bound,)f
(217)-118 5047 y(v)o(ector2list,)g(14)-118 5168 y(v)o(ector2string,)g
(13)-118 5289 y(v)o(ectorp,)h(10)-118 5496 y(when,)g(74)-118
5617 y(while,)g(79)-118 5738 y(with-input-from-string,)e(71)-118
5858 y(with-output-to-string,)f(72)1799 289 y(wrap,)k(108)1799
409 y(wrapped?,)g(108)1799 529 y(wrapper)n(-of-type?,)g(108)1799
650 y(wrapper)n(-standard-order)g(\(global\),)f(109)1799
770 y(wrapper)n(-types,)h(108)1799 891 y(writechar)l(,)g(129)1799
1011 y(wrs,)g(141)1799 1214 y(xcons,)f(45)1799 1335 y(xref-assert,)h
(190)1799 1455 y(xref-assert-list,)f(190)1799 1659 y(yesp,)g(136)1799
1862 y(zerop,)h(21)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
